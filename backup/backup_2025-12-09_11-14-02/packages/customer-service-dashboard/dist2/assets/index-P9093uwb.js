var qh=e=>{throw TypeError(e)};var nd=(e,t,r)=>t.has(e)||qh("Cannot "+r);var C=(e,t,r)=>(nd(e,t,"read from private field"),r?r.call(e):t.get(e)),be=(e,t,r)=>t.has(e)?qh("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),ie=(e,t,r,n)=>(nd(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),Ue=(e,t,r)=>(nd(e,t,"access private method"),r);var Xl=(e,t,r,n)=>({set _(a){ie(e,t,a,r)},get _(){return C(e,t,n)}});function Uv(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(n,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();function Tg(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ag={exports:{}},Cc={},Rg={exports:{}},qe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fl=Symbol.for("react.element"),Hv=Symbol.for("react.portal"),Bv=Symbol.for("react.fragment"),qv=Symbol.for("react.strict_mode"),Wv=Symbol.for("react.profiler"),Kv=Symbol.for("react.provider"),Qv=Symbol.for("react.context"),Vv=Symbol.for("react.forward_ref"),Gv=Symbol.for("react.suspense"),Yv=Symbol.for("react.memo"),Jv=Symbol.for("react.lazy"),Wh=Symbol.iterator;function Xv(e){return e===null||typeof e!="object"?null:(e=Wh&&e[Wh]||e["@@iterator"],typeof e=="function"?e:null)}var Pg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Lg=Object.assign,Fg={};function fi(e,t,r){this.props=e,this.context=t,this.refs=Fg,this.updater=r||Pg}fi.prototype.isReactComponent={};fi.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};fi.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function $g(){}$g.prototype=fi.prototype;function Nm(e,t,r){this.props=e,this.context=t,this.refs=Fg,this.updater=r||Pg}var km=Nm.prototype=new $g;km.constructor=Nm;Lg(km,fi.prototype);km.isPureReactComponent=!0;var Kh=Array.isArray,Ig=Object.prototype.hasOwnProperty,Sm={current:null},Og={key:!0,ref:!0,__self:!0,__source:!0};function Dg(e,t,r){var n,a={},i=null,l=null;if(t!=null)for(n in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(i=""+t.key),t)Ig.call(t,n)&&!Og.hasOwnProperty(n)&&(a[n]=t[n]);var o=arguments.length-2;if(o===1)a.children=r;else if(1<o){for(var c=Array(o),d=0;d<o;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(n in o=e.defaultProps,o)a[n]===void 0&&(a[n]=o[n]);return{$$typeof:Fl,type:e,key:i,ref:l,props:a,_owner:Sm.current}}function Zv(e,t){return{$$typeof:Fl,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Cm(e){return typeof e=="object"&&e!==null&&e.$$typeof===Fl}function eb(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Qh=/\/+/g;function ad(e,t){return typeof e=="object"&&e!==null&&e.key!=null?eb(""+e.key):t.toString(36)}function Co(e,t,r,n,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case Fl:case Hv:l=!0}}if(l)return l=e,a=a(l),e=n===""?"."+ad(l,0):n,Kh(a)?(r="",e!=null&&(r=e.replace(Qh,"$&/")+"/"),Co(a,t,r,"",function(d){return d})):a!=null&&(Cm(a)&&(a=Zv(a,r+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(Qh,"$&/")+"/")+e)),t.push(a)),1;if(l=0,n=n===""?".":n+":",Kh(e))for(var o=0;o<e.length;o++){i=e[o];var c=n+ad(i,o);l+=Co(i,t,r,c,a)}else if(c=Xv(e),typeof c=="function")for(e=c.call(e),o=0;!(i=e.next()).done;)i=i.value,c=n+ad(i,o++),l+=Co(i,t,r,c,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function Zl(e,t,r){if(e==null)return e;var n=[],a=0;return Co(e,n,"","",function(i){return t.call(r,i,a++)}),n}function tb(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var us={current:null},_o={transition:null},sb={ReactCurrentDispatcher:us,ReactCurrentBatchConfig:_o,ReactCurrentOwner:Sm};function zg(){throw Error("act(...) is not supported in production builds of React.")}qe.Children={map:Zl,forEach:function(e,t,r){Zl(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Zl(e,function(){t++}),t},toArray:function(e){return Zl(e,function(t){return t})||[]},only:function(e){if(!Cm(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};qe.Component=fi;qe.Fragment=Bv;qe.Profiler=Wv;qe.PureComponent=Nm;qe.StrictMode=qv;qe.Suspense=Gv;qe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sb;qe.act=zg;qe.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=Lg({},e.props),a=e.key,i=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,l=Sm.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(c in t)Ig.call(t,c)&&!Og.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&o!==void 0?o[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){o=Array(c);for(var d=0;d<c;d++)o[d]=arguments[d+2];n.children=o}return{$$typeof:Fl,type:e.type,key:a,ref:i,props:n,_owner:l}};qe.createContext=function(e){return e={$$typeof:Qv,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Kv,_context:e},e.Consumer=e};qe.createElement=Dg;qe.createFactory=function(e){var t=Dg.bind(null,e);return t.type=e,t};qe.createRef=function(){return{current:null}};qe.forwardRef=function(e){return{$$typeof:Vv,render:e}};qe.isValidElement=Cm;qe.lazy=function(e){return{$$typeof:Jv,_payload:{_status:-1,_result:e},_init:tb}};qe.memo=function(e,t){return{$$typeof:Yv,type:e,compare:t===void 0?null:t}};qe.startTransition=function(e){var t=_o.transition;_o.transition={};try{e()}finally{_o.transition=t}};qe.unstable_act=zg;qe.useCallback=function(e,t){return us.current.useCallback(e,t)};qe.useContext=function(e){return us.current.useContext(e)};qe.useDebugValue=function(){};qe.useDeferredValue=function(e){return us.current.useDeferredValue(e)};qe.useEffect=function(e,t){return us.current.useEffect(e,t)};qe.useId=function(){return us.current.useId()};qe.useImperativeHandle=function(e,t,r){return us.current.useImperativeHandle(e,t,r)};qe.useInsertionEffect=function(e,t){return us.current.useInsertionEffect(e,t)};qe.useLayoutEffect=function(e,t){return us.current.useLayoutEffect(e,t)};qe.useMemo=function(e,t){return us.current.useMemo(e,t)};qe.useReducer=function(e,t,r){return us.current.useReducer(e,t,r)};qe.useRef=function(e){return us.current.useRef(e)};qe.useState=function(e){return us.current.useState(e)};qe.useSyncExternalStore=function(e,t,r){return us.current.useSyncExternalStore(e,t,r)};qe.useTransition=function(){return us.current.useTransition()};qe.version="18.3.1";Rg.exports=qe;var u=Rg.exports;const Fe=Tg(u),Za=Uv({__proto__:null,default:Fe},[u]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rb=u,nb=Symbol.for("react.element"),ab=Symbol.for("react.fragment"),ib=Object.prototype.hasOwnProperty,lb=rb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ob={key:!0,ref:!0,__self:!0,__source:!0};function Ug(e,t,r){var n,a={},i=null,l=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(l=t.ref);for(n in t)ib.call(t,n)&&!ob.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:nb,type:e,key:i,ref:l,props:a,_owner:lb.current}}Cc.Fragment=ab;Cc.jsx=Ug;Cc.jsxs=Ug;Ag.exports=Cc;var s=Ag.exports,Jd={},Hg={exports:{}},Ts={},Bg={exports:{}},qg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(T,Y){var J=T.length;T.push(Y);e:for(;0<J;){var X=J-1>>>1,he=T[X];if(0<a(he,Y))T[X]=Y,T[J]=he,J=X;else break e}}function r(T){return T.length===0?null:T[0]}function n(T){if(T.length===0)return null;var Y=T[0],J=T.pop();if(J!==Y){T[0]=J;e:for(var X=0,he=T.length,Oe=he>>>1;X<Oe;){var G=2*(X+1)-1,Le=T[G],z=G+1,_=T[z];if(0>a(Le,J))z<he&&0>a(_,Le)?(T[X]=_,T[z]=J,X=z):(T[X]=Le,T[G]=J,X=G);else if(z<he&&0>a(_,J))T[X]=_,T[z]=J,X=z;else break e}}return Y}function a(T,Y){var J=T.sortIndex-Y.sortIndex;return J!==0?J:T.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var l=Date,o=l.now();e.unstable_now=function(){return l.now()-o}}var c=[],d=[],m=1,h=null,p=3,j=!1,f=!1,g=!1,y=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(T){for(var Y=r(d);Y!==null;){if(Y.callback===null)n(d);else if(Y.startTime<=T)n(d),Y.sortIndex=Y.expirationTime,t(c,Y);else break;Y=r(d)}}function w(T){if(g=!1,b(T),!f)if(r(c)!==null)f=!0,Se(N);else{var Y=r(d);Y!==null&&D(w,Y.startTime-T)}}function N(T,Y){f=!1,g&&(g=!1,v(P),P=-1),j=!0;var J=p;try{for(b(Y),h=r(c);h!==null&&(!(h.expirationTime>Y)||T&&!Q());){var X=h.callback;if(typeof X=="function"){h.callback=null,p=h.priorityLevel;var he=X(h.expirationTime<=Y);Y=e.unstable_now(),typeof he=="function"?h.callback=he:h===r(c)&&n(c),b(Y)}else n(c);h=r(c)}if(h!==null)var Oe=!0;else{var G=r(d);G!==null&&D(w,G.startTime-Y),Oe=!1}return Oe}finally{h=null,p=J,j=!1}}var E=!1,L=null,P=-1,ee=5,H=-1;function Q(){return!(e.unstable_now()-H<ee)}function ae(){if(L!==null){var T=e.unstable_now();H=T;var Y=!0;try{Y=L(!0,T)}finally{Y?ne():(E=!1,L=null)}}else E=!1}var ne;if(typeof x=="function")ne=function(){x(ae)};else if(typeof MessageChannel<"u"){var ve=new MessageChannel,je=ve.port2;ve.port1.onmessage=ae,ne=function(){je.postMessage(null)}}else ne=function(){y(ae,0)};function Se(T){L=T,E||(E=!0,ne())}function D(T,Y){P=y(function(){T(e.unstable_now())},Y)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(T){T.callback=null},e.unstable_continueExecution=function(){f||j||(f=!0,Se(N))},e.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ee=0<T?Math.floor(1e3/T):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(T){switch(p){case 1:case 2:case 3:var Y=3;break;default:Y=p}var J=p;p=Y;try{return T()}finally{p=J}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(T,Y){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var J=p;p=T;try{return Y()}finally{p=J}},e.unstable_scheduleCallback=function(T,Y,J){var X=e.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?X+J:X):J=X,T){case 1:var he=-1;break;case 2:he=250;break;case 5:he=1073741823;break;case 4:he=1e4;break;default:he=5e3}return he=J+he,T={id:m++,callback:Y,priorityLevel:T,startTime:J,expirationTime:he,sortIndex:-1},J>X?(T.sortIndex=J,t(d,T),r(c)===null&&T===r(d)&&(g?(v(P),P=-1):g=!0,D(w,J-X))):(T.sortIndex=he,t(c,T),f||j||(f=!0,Se(N))),T},e.unstable_shouldYield=Q,e.unstable_wrapCallback=function(T){var Y=p;return function(){var J=p;p=Y;try{return T.apply(this,arguments)}finally{p=J}}}})(qg);Bg.exports=qg;var cb=Bg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var db=u,Ms=cb;function Z(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Wg=new Set,ol={};function ha(e,t){ei(e,t),ei(e+"Capture",t)}function ei(e,t){for(ol[e]=t,e=0;e<t.length;e++)Wg.add(t[e])}var Fr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Xd=Object.prototype.hasOwnProperty,ub=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Vh={},Gh={};function mb(e){return Xd.call(Gh,e)?!0:Xd.call(Vh,e)?!1:ub.test(e)?Gh[e]=!0:(Vh[e]=!0,!1)}function hb(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function fb(e,t,r,n){if(t===null||typeof t>"u"||hb(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ms(e,t,r,n,a,i,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=l}var Qt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Qt[e]=new ms(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Qt[t]=new ms(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Qt[e]=new ms(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Qt[e]=new ms(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Qt[e]=new ms(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Qt[e]=new ms(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Qt[e]=new ms(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Qt[e]=new ms(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Qt[e]=new ms(e,5,!1,e.toLowerCase(),null,!1,!1)});var _m=/[\-:]([a-z])/g;function Em(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(_m,Em);Qt[t]=new ms(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(_m,Em);Qt[t]=new ms(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(_m,Em);Qt[t]=new ms(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Qt[e]=new ms(e,1,!1,e.toLowerCase(),null,!1,!1)});Qt.xlinkHref=new ms("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Qt[e]=new ms(e,1,!1,e.toLowerCase(),null,!0,!0)});function Mm(e,t,r,n){var a=Qt.hasOwnProperty(t)?Qt[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(fb(t,r,a,n)&&(r=null),n||a===null?mb(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,n=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Dr=db.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,eo=Symbol.for("react.element"),Na=Symbol.for("react.portal"),ka=Symbol.for("react.fragment"),Tm=Symbol.for("react.strict_mode"),Zd=Symbol.for("react.profiler"),Kg=Symbol.for("react.provider"),Qg=Symbol.for("react.context"),Am=Symbol.for("react.forward_ref"),eu=Symbol.for("react.suspense"),tu=Symbol.for("react.suspense_list"),Rm=Symbol.for("react.memo"),Gr=Symbol.for("react.lazy"),Vg=Symbol.for("react.offscreen"),Yh=Symbol.iterator;function Ci(e){return e===null||typeof e!="object"?null:(e=Yh&&e[Yh]||e["@@iterator"],typeof e=="function"?e:null)}var gt=Object.assign,id;function Ui(e){if(id===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);id=t&&t[1]||""}return`
`+id+e}var ld=!1;function od(e,t){if(!e||ld)return"";ld=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var n=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){n=d}e.call(t.prototype)}else{try{throw Error()}catch(d){n=d}e()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var a=d.stack.split(`
`),i=n.stack.split(`
`),l=a.length-1,o=i.length-1;1<=l&&0<=o&&a[l]!==i[o];)o--;for(;1<=l&&0<=o;l--,o--)if(a[l]!==i[o]){if(l!==1||o!==1)do if(l--,o--,0>o||a[l]!==i[o]){var c=`
`+a[l].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=l&&0<=o);break}}}finally{ld=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Ui(e):""}function gb(e){switch(e.tag){case 5:return Ui(e.type);case 16:return Ui("Lazy");case 13:return Ui("Suspense");case 19:return Ui("SuspenseList");case 0:case 2:case 15:return e=od(e.type,!1),e;case 11:return e=od(e.type.render,!1),e;case 1:return e=od(e.type,!0),e;default:return""}}function su(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ka:return"Fragment";case Na:return"Portal";case Zd:return"Profiler";case Tm:return"StrictMode";case eu:return"Suspense";case tu:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Qg:return(e.displayName||"Context")+".Consumer";case Kg:return(e._context.displayName||"Context")+".Provider";case Am:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Rm:return t=e.displayName||null,t!==null?t:su(e.type)||"Memo";case Gr:t=e._payload,e=e._init;try{return su(e(t))}catch{}}return null}function xb(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return su(t);case 8:return t===Tm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Cn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Gg(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function pb(e){var t=Gg(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(l){n=""+l,i.call(this,l)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(l){n=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function to(e){e._valueTracker||(e._valueTracker=pb(e))}function Yg(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=Gg(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Wo(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ru(e,t){var r=t.checked;return gt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Jh(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Cn(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Jg(e,t){t=t.checked,t!=null&&Mm(e,"checked",t,!1)}function nu(e,t){Jg(e,t);var r=Cn(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?au(e,t.type,r):t.hasOwnProperty("defaultValue")&&au(e,t.type,Cn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Xh(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function au(e,t,r){(t!=="number"||Wo(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Hi=Array.isArray;function Fa(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Cn(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function iu(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Z(91));return gt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Zh(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(Z(92));if(Hi(r)){if(1<r.length)throw Error(Z(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Cn(r)}}function Xg(e,t){var r=Cn(t.value),n=Cn(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function e0(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Zg(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lu(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Zg(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var so,ex=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(so=so||document.createElement("div"),so.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=so.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function cl(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Yi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},yb=["Webkit","ms","Moz","O"];Object.keys(Yi).forEach(function(e){yb.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Yi[t]=Yi[e]})});function tx(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Yi.hasOwnProperty(e)&&Yi[e]?(""+t).trim():t+"px"}function sx(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=tx(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}var vb=gt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ou(e,t){if(t){if(vb[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Z(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Z(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Z(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Z(62))}}function cu(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var du=null;function Pm(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var uu=null,$a=null,Ia=null;function t0(e){if(e=Ol(e)){if(typeof uu!="function")throw Error(Z(280));var t=e.stateNode;t&&(t=Ac(t),uu(e.stateNode,e.type,t))}}function rx(e){$a?Ia?Ia.push(e):Ia=[e]:$a=e}function nx(){if($a){var e=$a,t=Ia;if(Ia=$a=null,t0(e),t)for(e=0;e<t.length;e++)t0(t[e])}}function ax(e,t){return e(t)}function ix(){}var cd=!1;function lx(e,t,r){if(cd)return e(t,r);cd=!0;try{return ax(e,t,r)}finally{cd=!1,($a!==null||Ia!==null)&&(ix(),nx())}}function dl(e,t){var r=e.stateNode;if(r===null)return null;var n=Ac(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(Z(231,t,typeof r));return r}var mu=!1;if(Fr)try{var _i={};Object.defineProperty(_i,"passive",{get:function(){mu=!0}}),window.addEventListener("test",_i,_i),window.removeEventListener("test",_i,_i)}catch{mu=!1}function bb(e,t,r,n,a,i,l,o,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(r,d)}catch(m){this.onError(m)}}var Ji=!1,Ko=null,Qo=!1,hu=null,jb={onError:function(e){Ji=!0,Ko=e}};function wb(e,t,r,n,a,i,l,o,c){Ji=!1,Ko=null,bb.apply(jb,arguments)}function Nb(e,t,r,n,a,i,l,o,c){if(wb.apply(this,arguments),Ji){if(Ji){var d=Ko;Ji=!1,Ko=null}else throw Error(Z(198));Qo||(Qo=!0,hu=d)}}function fa(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function ox(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function s0(e){if(fa(e)!==e)throw Error(Z(188))}function kb(e){var t=e.alternate;if(!t){if(t=fa(e),t===null)throw Error(Z(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return s0(a),e;if(i===n)return s0(a),t;i=i.sibling}throw Error(Z(188))}if(r.return!==n.return)r=a,n=i;else{for(var l=!1,o=a.child;o;){if(o===r){l=!0,r=a,n=i;break}if(o===n){l=!0,n=a,r=i;break}o=o.sibling}if(!l){for(o=i.child;o;){if(o===r){l=!0,r=i,n=a;break}if(o===n){l=!0,n=i,r=a;break}o=o.sibling}if(!l)throw Error(Z(189))}}if(r.alternate!==n)throw Error(Z(190))}if(r.tag!==3)throw Error(Z(188));return r.stateNode.current===r?e:t}function cx(e){return e=kb(e),e!==null?dx(e):null}function dx(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=dx(e);if(t!==null)return t;e=e.sibling}return null}var ux=Ms.unstable_scheduleCallback,r0=Ms.unstable_cancelCallback,Sb=Ms.unstable_shouldYield,Cb=Ms.unstable_requestPaint,wt=Ms.unstable_now,_b=Ms.unstable_getCurrentPriorityLevel,Lm=Ms.unstable_ImmediatePriority,mx=Ms.unstable_UserBlockingPriority,Vo=Ms.unstable_NormalPriority,Eb=Ms.unstable_LowPriority,hx=Ms.unstable_IdlePriority,_c=null,fr=null;function Mb(e){if(fr&&typeof fr.onCommitFiberRoot=="function")try{fr.onCommitFiberRoot(_c,e,void 0,(e.current.flags&128)===128)}catch{}}var Xs=Math.clz32?Math.clz32:Rb,Tb=Math.log,Ab=Math.LN2;function Rb(e){return e>>>=0,e===0?32:31-(Tb(e)/Ab|0)|0}var ro=64,no=4194304;function Bi(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Go(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,a=e.suspendedLanes,i=e.pingedLanes,l=r&268435455;if(l!==0){var o=l&~a;o!==0?n=Bi(o):(i&=l,i!==0&&(n=Bi(i)))}else l=r&~a,l!==0?n=Bi(l):i!==0&&(n=Bi(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Xs(t),a=1<<r,n|=e[r],t&=~a;return n}function Pb(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Lb(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var l=31-Xs(i),o=1<<l,c=a[l];c===-1?(!(o&r)||o&n)&&(a[l]=Pb(o,t)):c<=t&&(e.expiredLanes|=o),i&=~o}}function fu(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function fx(){var e=ro;return ro<<=1,!(ro&4194240)&&(ro=64),e}function dd(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function $l(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Xs(t),e[t]=r}function Fb(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-Xs(r),i=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~i}}function Fm(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Xs(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var et=0;function gx(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var xx,$m,px,yx,vx,gu=!1,ao=[],gn=null,xn=null,pn=null,ul=new Map,ml=new Map,Jr=[],$b="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function n0(e,t){switch(e){case"focusin":case"focusout":gn=null;break;case"dragenter":case"dragleave":xn=null;break;case"mouseover":case"mouseout":pn=null;break;case"pointerover":case"pointerout":ul.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ml.delete(t.pointerId)}}function Ei(e,t,r,n,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},t!==null&&(t=Ol(t),t!==null&&$m(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function Ib(e,t,r,n,a){switch(t){case"focusin":return gn=Ei(gn,e,t,r,n,a),!0;case"dragenter":return xn=Ei(xn,e,t,r,n,a),!0;case"mouseover":return pn=Ei(pn,e,t,r,n,a),!0;case"pointerover":var i=a.pointerId;return ul.set(i,Ei(ul.get(i)||null,e,t,r,n,a)),!0;case"gotpointercapture":return i=a.pointerId,ml.set(i,Ei(ml.get(i)||null,e,t,r,n,a)),!0}return!1}function bx(e){var t=zn(e.target);if(t!==null){var r=fa(t);if(r!==null){if(t=r.tag,t===13){if(t=ox(r),t!==null){e.blockedOn=t,vx(e.priority,function(){px(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Eo(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=xu(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);du=n,r.target.dispatchEvent(n),du=null}else return t=Ol(r),t!==null&&$m(t),e.blockedOn=r,!1;t.shift()}return!0}function a0(e,t,r){Eo(e)&&r.delete(t)}function Ob(){gu=!1,gn!==null&&Eo(gn)&&(gn=null),xn!==null&&Eo(xn)&&(xn=null),pn!==null&&Eo(pn)&&(pn=null),ul.forEach(a0),ml.forEach(a0)}function Mi(e,t){e.blockedOn===t&&(e.blockedOn=null,gu||(gu=!0,Ms.unstable_scheduleCallback(Ms.unstable_NormalPriority,Ob)))}function hl(e){function t(a){return Mi(a,e)}if(0<ao.length){Mi(ao[0],e);for(var r=1;r<ao.length;r++){var n=ao[r];n.blockedOn===e&&(n.blockedOn=null)}}for(gn!==null&&Mi(gn,e),xn!==null&&Mi(xn,e),pn!==null&&Mi(pn,e),ul.forEach(t),ml.forEach(t),r=0;r<Jr.length;r++)n=Jr[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Jr.length&&(r=Jr[0],r.blockedOn===null);)bx(r),r.blockedOn===null&&Jr.shift()}var Oa=Dr.ReactCurrentBatchConfig,Yo=!0;function Db(e,t,r,n){var a=et,i=Oa.transition;Oa.transition=null;try{et=1,Im(e,t,r,n)}finally{et=a,Oa.transition=i}}function zb(e,t,r,n){var a=et,i=Oa.transition;Oa.transition=null;try{et=4,Im(e,t,r,n)}finally{et=a,Oa.transition=i}}function Im(e,t,r,n){if(Yo){var a=xu(e,t,r,n);if(a===null)bd(e,t,n,Jo,r),n0(e,n);else if(Ib(a,e,t,r,n))n.stopPropagation();else if(n0(e,n),t&4&&-1<$b.indexOf(e)){for(;a!==null;){var i=Ol(a);if(i!==null&&xx(i),i=xu(e,t,r,n),i===null&&bd(e,t,n,Jo,r),i===a)break;a=i}a!==null&&n.stopPropagation()}else bd(e,t,n,null,r)}}var Jo=null;function xu(e,t,r,n){if(Jo=null,e=Pm(n),e=zn(e),e!==null)if(t=fa(e),t===null)e=null;else if(r=t.tag,r===13){if(e=ox(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Jo=e,null}function jx(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(_b()){case Lm:return 1;case mx:return 4;case Vo:case Eb:return 16;case hx:return 536870912;default:return 16}default:return 16}}var dn=null,Om=null,Mo=null;function wx(){if(Mo)return Mo;var e,t=Om,r=t.length,n,a="value"in dn?dn.value:dn.textContent,i=a.length;for(e=0;e<r&&t[e]===a[e];e++);var l=r-e;for(n=1;n<=l&&t[r-n]===a[i-n];n++);return Mo=a.slice(e,1<n?1-n:void 0)}function To(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function io(){return!0}function i0(){return!1}function As(e){function t(r,n,a,i,l){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=l,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(r=e[o],this[o]=r?r(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?io:i0,this.isPropagationStopped=i0,this}return gt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=io)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=io)},persist:function(){},isPersistent:io}),t}var gi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Dm=As(gi),Il=gt({},gi,{view:0,detail:0}),Ub=As(Il),ud,md,Ti,Ec=gt({},Il,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zm,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ti&&(Ti&&e.type==="mousemove"?(ud=e.screenX-Ti.screenX,md=e.screenY-Ti.screenY):md=ud=0,Ti=e),ud)},movementY:function(e){return"movementY"in e?e.movementY:md}}),l0=As(Ec),Hb=gt({},Ec,{dataTransfer:0}),Bb=As(Hb),qb=gt({},Il,{relatedTarget:0}),hd=As(qb),Wb=gt({},gi,{animationName:0,elapsedTime:0,pseudoElement:0}),Kb=As(Wb),Qb=gt({},gi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Vb=As(Qb),Gb=gt({},gi,{data:0}),o0=As(Gb),Yb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Jb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Zb(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Xb[e])?!!t[e]:!1}function zm(){return Zb}var e2=gt({},Il,{key:function(e){if(e.key){var t=Yb[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=To(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Jb[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zm,charCode:function(e){return e.type==="keypress"?To(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?To(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),t2=As(e2),s2=gt({},Ec,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),c0=As(s2),r2=gt({},Il,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zm}),n2=As(r2),a2=gt({},gi,{propertyName:0,elapsedTime:0,pseudoElement:0}),i2=As(a2),l2=gt({},Ec,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),o2=As(l2),c2=[9,13,27,32],Um=Fr&&"CompositionEvent"in window,Xi=null;Fr&&"documentMode"in document&&(Xi=document.documentMode);var d2=Fr&&"TextEvent"in window&&!Xi,Nx=Fr&&(!Um||Xi&&8<Xi&&11>=Xi),d0=" ",u0=!1;function kx(e,t){switch(e){case"keyup":return c2.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Sx(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Sa=!1;function u2(e,t){switch(e){case"compositionend":return Sx(t);case"keypress":return t.which!==32?null:(u0=!0,d0);case"textInput":return e=t.data,e===d0&&u0?null:e;default:return null}}function m2(e,t){if(Sa)return e==="compositionend"||!Um&&kx(e,t)?(e=wx(),Mo=Om=dn=null,Sa=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Nx&&t.locale!=="ko"?null:t.data;default:return null}}var h2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function m0(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!h2[e.type]:t==="textarea"}function Cx(e,t,r,n){rx(n),t=Xo(t,"onChange"),0<t.length&&(r=new Dm("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Zi=null,fl=null;function f2(e){Ix(e,0)}function Mc(e){var t=Ea(e);if(Yg(t))return e}function g2(e,t){if(e==="change")return t}var _x=!1;if(Fr){var fd;if(Fr){var gd="oninput"in document;if(!gd){var h0=document.createElement("div");h0.setAttribute("oninput","return;"),gd=typeof h0.oninput=="function"}fd=gd}else fd=!1;_x=fd&&(!document.documentMode||9<document.documentMode)}function f0(){Zi&&(Zi.detachEvent("onpropertychange",Ex),fl=Zi=null)}function Ex(e){if(e.propertyName==="value"&&Mc(fl)){var t=[];Cx(t,fl,e,Pm(e)),lx(f2,t)}}function x2(e,t,r){e==="focusin"?(f0(),Zi=t,fl=r,Zi.attachEvent("onpropertychange",Ex)):e==="focusout"&&f0()}function p2(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Mc(fl)}function y2(e,t){if(e==="click")return Mc(t)}function v2(e,t){if(e==="input"||e==="change")return Mc(t)}function b2(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var tr=typeof Object.is=="function"?Object.is:b2;function gl(e,t){if(tr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!Xd.call(t,a)||!tr(e[a],t[a]))return!1}return!0}function g0(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function x0(e,t){var r=g0(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=g0(r)}}function Mx(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Mx(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Tx(){for(var e=window,t=Wo();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Wo(e.document)}return t}function Hm(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function j2(e){var t=Tx(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Mx(r.ownerDocument.documentElement,r)){if(n!==null&&Hm(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,i=Math.min(n.start,a);n=n.end===void 0?i:Math.min(n.end,a),!e.extend&&i>n&&(a=n,n=i,i=a),a=x0(r,i);var l=x0(r,n);a&&l&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var w2=Fr&&"documentMode"in document&&11>=document.documentMode,Ca=null,pu=null,el=null,yu=!1;function p0(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;yu||Ca==null||Ca!==Wo(n)||(n=Ca,"selectionStart"in n&&Hm(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),el&&gl(el,n)||(el=n,n=Xo(pu,"onSelect"),0<n.length&&(t=new Dm("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Ca)))}function lo(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var _a={animationend:lo("Animation","AnimationEnd"),animationiteration:lo("Animation","AnimationIteration"),animationstart:lo("Animation","AnimationStart"),transitionend:lo("Transition","TransitionEnd")},xd={},Ax={};Fr&&(Ax=document.createElement("div").style,"AnimationEvent"in window||(delete _a.animationend.animation,delete _a.animationiteration.animation,delete _a.animationstart.animation),"TransitionEvent"in window||delete _a.transitionend.transition);function Tc(e){if(xd[e])return xd[e];if(!_a[e])return e;var t=_a[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Ax)return xd[e]=t[r];return e}var Rx=Tc("animationend"),Px=Tc("animationiteration"),Lx=Tc("animationstart"),Fx=Tc("transitionend"),$x=new Map,y0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mn(e,t){$x.set(e,t),ha(t,[e])}for(var pd=0;pd<y0.length;pd++){var yd=y0[pd],N2=yd.toLowerCase(),k2=yd[0].toUpperCase()+yd.slice(1);Mn(N2,"on"+k2)}Mn(Rx,"onAnimationEnd");Mn(Px,"onAnimationIteration");Mn(Lx,"onAnimationStart");Mn("dblclick","onDoubleClick");Mn("focusin","onFocus");Mn("focusout","onBlur");Mn(Fx,"onTransitionEnd");ei("onMouseEnter",["mouseout","mouseover"]);ei("onMouseLeave",["mouseout","mouseover"]);ei("onPointerEnter",["pointerout","pointerover"]);ei("onPointerLeave",["pointerout","pointerover"]);ha("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ha("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ha("onBeforeInput",["compositionend","keypress","textInput","paste"]);ha("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ha("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ha("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),S2=new Set("cancel close invalid load scroll toggle".split(" ").concat(qi));function v0(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,Nb(n,t,void 0,e),e.currentTarget=null}function Ix(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var l=n.length-1;0<=l;l--){var o=n[l],c=o.instance,d=o.currentTarget;if(o=o.listener,c!==i&&a.isPropagationStopped())break e;v0(a,o,d),i=c}else for(l=0;l<n.length;l++){if(o=n[l],c=o.instance,d=o.currentTarget,o=o.listener,c!==i&&a.isPropagationStopped())break e;v0(a,o,d),i=c}}}if(Qo)throw e=hu,Qo=!1,hu=null,e}function it(e,t){var r=t[Nu];r===void 0&&(r=t[Nu]=new Set);var n=e+"__bubble";r.has(n)||(Ox(t,e,2,!1),r.add(n))}function vd(e,t,r){var n=0;t&&(n|=4),Ox(r,e,n,t)}var oo="_reactListening"+Math.random().toString(36).slice(2);function xl(e){if(!e[oo]){e[oo]=!0,Wg.forEach(function(r){r!=="selectionchange"&&(S2.has(r)||vd(r,!1,e),vd(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[oo]||(t[oo]=!0,vd("selectionchange",!1,t))}}function Ox(e,t,r,n){switch(jx(t)){case 1:var a=Db;break;case 4:a=zb;break;default:a=Im}r=a.bind(null,t,r,e),a=void 0,!mu||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function bd(e,t,r,n,a){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var l=n.tag;if(l===3||l===4){var o=n.stateNode.containerInfo;if(o===a||o.nodeType===8&&o.parentNode===a)break;if(l===4)for(l=n.return;l!==null;){var c=l.tag;if((c===3||c===4)&&(c=l.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;l=l.return}for(;o!==null;){if(l=zn(o),l===null)return;if(c=l.tag,c===5||c===6){n=i=l;continue e}o=o.parentNode}}n=n.return}lx(function(){var d=i,m=Pm(r),h=[];e:{var p=$x.get(e);if(p!==void 0){var j=Dm,f=e;switch(e){case"keypress":if(To(r)===0)break e;case"keydown":case"keyup":j=t2;break;case"focusin":f="focus",j=hd;break;case"focusout":f="blur",j=hd;break;case"beforeblur":case"afterblur":j=hd;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":j=l0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":j=Bb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":j=n2;break;case Rx:case Px:case Lx:j=Kb;break;case Fx:j=i2;break;case"scroll":j=Ub;break;case"wheel":j=o2;break;case"copy":case"cut":case"paste":j=Vb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":j=c0}var g=(t&4)!==0,y=!g&&e==="scroll",v=g?p!==null?p+"Capture":null:p;g=[];for(var x=d,b;x!==null;){b=x;var w=b.stateNode;if(b.tag===5&&w!==null&&(b=w,v!==null&&(w=dl(x,v),w!=null&&g.push(pl(x,w,b)))),y)break;x=x.return}0<g.length&&(p=new j(p,f,null,r,m),h.push({event:p,listeners:g}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",j=e==="mouseout"||e==="pointerout",p&&r!==du&&(f=r.relatedTarget||r.fromElement)&&(zn(f)||f[$r]))break e;if((j||p)&&(p=m.window===m?m:(p=m.ownerDocument)?p.defaultView||p.parentWindow:window,j?(f=r.relatedTarget||r.toElement,j=d,f=f?zn(f):null,f!==null&&(y=fa(f),f!==y||f.tag!==5&&f.tag!==6)&&(f=null)):(j=null,f=d),j!==f)){if(g=l0,w="onMouseLeave",v="onMouseEnter",x="mouse",(e==="pointerout"||e==="pointerover")&&(g=c0,w="onPointerLeave",v="onPointerEnter",x="pointer"),y=j==null?p:Ea(j),b=f==null?p:Ea(f),p=new g(w,x+"leave",j,r,m),p.target=y,p.relatedTarget=b,w=null,zn(m)===d&&(g=new g(v,x+"enter",f,r,m),g.target=b,g.relatedTarget=y,w=g),y=w,j&&f)t:{for(g=j,v=f,x=0,b=g;b;b=ba(b))x++;for(b=0,w=v;w;w=ba(w))b++;for(;0<x-b;)g=ba(g),x--;for(;0<b-x;)v=ba(v),b--;for(;x--;){if(g===v||v!==null&&g===v.alternate)break t;g=ba(g),v=ba(v)}g=null}else g=null;j!==null&&b0(h,p,j,g,!1),f!==null&&y!==null&&b0(h,y,f,g,!0)}}e:{if(p=d?Ea(d):window,j=p.nodeName&&p.nodeName.toLowerCase(),j==="select"||j==="input"&&p.type==="file")var N=g2;else if(m0(p))if(_x)N=v2;else{N=p2;var E=x2}else(j=p.nodeName)&&j.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(N=y2);if(N&&(N=N(e,d))){Cx(h,N,r,m);break e}E&&E(e,p,d),e==="focusout"&&(E=p._wrapperState)&&E.controlled&&p.type==="number"&&au(p,"number",p.value)}switch(E=d?Ea(d):window,e){case"focusin":(m0(E)||E.contentEditable==="true")&&(Ca=E,pu=d,el=null);break;case"focusout":el=pu=Ca=null;break;case"mousedown":yu=!0;break;case"contextmenu":case"mouseup":case"dragend":yu=!1,p0(h,r,m);break;case"selectionchange":if(w2)break;case"keydown":case"keyup":p0(h,r,m)}var L;if(Um)e:{switch(e){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else Sa?kx(e,r)&&(P="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(P="onCompositionStart");P&&(Nx&&r.locale!=="ko"&&(Sa||P!=="onCompositionStart"?P==="onCompositionEnd"&&Sa&&(L=wx()):(dn=m,Om="value"in dn?dn.value:dn.textContent,Sa=!0)),E=Xo(d,P),0<E.length&&(P=new o0(P,e,null,r,m),h.push({event:P,listeners:E}),L?P.data=L:(L=Sx(r),L!==null&&(P.data=L)))),(L=d2?u2(e,r):m2(e,r))&&(d=Xo(d,"onBeforeInput"),0<d.length&&(m=new o0("onBeforeInput","beforeinput",null,r,m),h.push({event:m,listeners:d}),m.data=L))}Ix(h,t)})}function pl(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Xo(e,t){for(var r=t+"Capture",n=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=dl(e,r),i!=null&&n.unshift(pl(e,i,a)),i=dl(e,t),i!=null&&n.push(pl(e,i,a))),e=e.return}return n}function ba(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function b0(e,t,r,n,a){for(var i=t._reactName,l=[];r!==null&&r!==n;){var o=r,c=o.alternate,d=o.stateNode;if(c!==null&&c===n)break;o.tag===5&&d!==null&&(o=d,a?(c=dl(r,i),c!=null&&l.unshift(pl(r,c,o))):a||(c=dl(r,i),c!=null&&l.push(pl(r,c,o)))),r=r.return}l.length!==0&&e.push({event:t,listeners:l})}var C2=/\r\n?/g,_2=/\u0000|\uFFFD/g;function j0(e){return(typeof e=="string"?e:""+e).replace(C2,`
`).replace(_2,"")}function co(e,t,r){if(t=j0(t),j0(e)!==t&&r)throw Error(Z(425))}function Zo(){}var vu=null,bu=null;function ju(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var wu=typeof setTimeout=="function"?setTimeout:void 0,E2=typeof clearTimeout=="function"?clearTimeout:void 0,w0=typeof Promise=="function"?Promise:void 0,M2=typeof queueMicrotask=="function"?queueMicrotask:typeof w0<"u"?function(e){return w0.resolve(null).then(e).catch(T2)}:wu;function T2(e){setTimeout(function(){throw e})}function jd(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){e.removeChild(a),hl(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);hl(t)}function yn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function N0(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var xi=Math.random().toString(36).slice(2),mr="__reactFiber$"+xi,yl="__reactProps$"+xi,$r="__reactContainer$"+xi,Nu="__reactEvents$"+xi,A2="__reactListeners$"+xi,R2="__reactHandles$"+xi;function zn(e){var t=e[mr];if(t)return t;for(var r=e.parentNode;r;){if(t=r[$r]||r[mr]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=N0(e);e!==null;){if(r=e[mr])return r;e=N0(e)}return t}e=r,r=e.parentNode}return null}function Ol(e){return e=e[mr]||e[$r],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ea(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Z(33))}function Ac(e){return e[yl]||null}var ku=[],Ma=-1;function Tn(e){return{current:e}}function ot(e){0>Ma||(e.current=ku[Ma],ku[Ma]=null,Ma--)}function nt(e,t){Ma++,ku[Ma]=e.current,e.current=t}var _n={},ss=Tn(_n),ys=Tn(!1),na=_n;function ti(e,t){var r=e.type.contextTypes;if(!r)return _n;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function vs(e){return e=e.childContextTypes,e!=null}function ec(){ot(ys),ot(ss)}function k0(e,t,r){if(ss.current!==_n)throw Error(Z(168));nt(ss,t),nt(ys,r)}function Dx(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(Z(108,xb(e)||"Unknown",a));return gt({},r,n)}function tc(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||_n,na=ss.current,nt(ss,e),nt(ys,ys.current),!0}function S0(e,t,r){var n=e.stateNode;if(!n)throw Error(Z(169));r?(e=Dx(e,t,na),n.__reactInternalMemoizedMergedChildContext=e,ot(ys),ot(ss),nt(ss,e)):ot(ys),nt(ys,r)}var wr=null,Rc=!1,wd=!1;function zx(e){wr===null?wr=[e]:wr.push(e)}function P2(e){Rc=!0,zx(e)}function An(){if(!wd&&wr!==null){wd=!0;var e=0,t=et;try{var r=wr;for(et=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}wr=null,Rc=!1}catch(a){throw wr!==null&&(wr=wr.slice(e+1)),ux(Lm,An),a}finally{et=t,wd=!1}}return null}var Ta=[],Aa=0,sc=null,rc=0,$s=[],Is=0,aa=null,Er=1,Mr="";function On(e,t){Ta[Aa++]=rc,Ta[Aa++]=sc,sc=e,rc=t}function Ux(e,t,r){$s[Is++]=Er,$s[Is++]=Mr,$s[Is++]=aa,aa=e;var n=Er;e=Mr;var a=32-Xs(n)-1;n&=~(1<<a),r+=1;var i=32-Xs(t)+a;if(30<i){var l=a-a%5;i=(n&(1<<l)-1).toString(32),n>>=l,a-=l,Er=1<<32-Xs(t)+a|r<<a|n,Mr=i+e}else Er=1<<i|r<<a|n,Mr=e}function Bm(e){e.return!==null&&(On(e,1),Ux(e,1,0))}function qm(e){for(;e===sc;)sc=Ta[--Aa],Ta[Aa]=null,rc=Ta[--Aa],Ta[Aa]=null;for(;e===aa;)aa=$s[--Is],$s[Is]=null,Mr=$s[--Is],$s[Is]=null,Er=$s[--Is],$s[Is]=null}var Es=null,_s=null,dt=!1,Ys=null;function Hx(e,t){var r=Os(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function C0(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Es=e,_s=yn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Es=e,_s=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=aa!==null?{id:Er,overflow:Mr}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Os(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Es=e,_s=null,!0):!1;default:return!1}}function Su(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Cu(e){if(dt){var t=_s;if(t){var r=t;if(!C0(e,t)){if(Su(e))throw Error(Z(418));t=yn(r.nextSibling);var n=Es;t&&C0(e,t)?Hx(n,r):(e.flags=e.flags&-4097|2,dt=!1,Es=e)}}else{if(Su(e))throw Error(Z(418));e.flags=e.flags&-4097|2,dt=!1,Es=e}}}function _0(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Es=e}function uo(e){if(e!==Es)return!1;if(!dt)return _0(e),dt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ju(e.type,e.memoizedProps)),t&&(t=_s)){if(Su(e))throw Bx(),Error(Z(418));for(;t;)Hx(e,t),t=yn(t.nextSibling)}if(_0(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Z(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){_s=yn(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}_s=null}}else _s=Es?yn(e.stateNode.nextSibling):null;return!0}function Bx(){for(var e=_s;e;)e=yn(e.nextSibling)}function si(){_s=Es=null,dt=!1}function Wm(e){Ys===null?Ys=[e]:Ys.push(e)}var L2=Dr.ReactCurrentBatchConfig;function Ai(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Z(309));var n=r.stateNode}if(!n)throw Error(Z(147,e));var a=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(l){var o=a.refs;l===null?delete o[i]:o[i]=l},t._stringRef=i,t)}if(typeof e!="string")throw Error(Z(284));if(!r._owner)throw Error(Z(290,e))}return e}function mo(e,t){throw e=Object.prototype.toString.call(t),Error(Z(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function E0(e){var t=e._init;return t(e._payload)}function qx(e){function t(v,x){if(e){var b=v.deletions;b===null?(v.deletions=[x],v.flags|=16):b.push(x)}}function r(v,x){if(!e)return null;for(;x!==null;)t(v,x),x=x.sibling;return null}function n(v,x){for(v=new Map;x!==null;)x.key!==null?v.set(x.key,x):v.set(x.index,x),x=x.sibling;return v}function a(v,x){return v=wn(v,x),v.index=0,v.sibling=null,v}function i(v,x,b){return v.index=b,e?(b=v.alternate,b!==null?(b=b.index,b<x?(v.flags|=2,x):b):(v.flags|=2,x)):(v.flags|=1048576,x)}function l(v){return e&&v.alternate===null&&(v.flags|=2),v}function o(v,x,b,w){return x===null||x.tag!==6?(x=Md(b,v.mode,w),x.return=v,x):(x=a(x,b),x.return=v,x)}function c(v,x,b,w){var N=b.type;return N===ka?m(v,x,b.props.children,w,b.key):x!==null&&(x.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Gr&&E0(N)===x.type)?(w=a(x,b.props),w.ref=Ai(v,x,b),w.return=v,w):(w=Io(b.type,b.key,b.props,null,v.mode,w),w.ref=Ai(v,x,b),w.return=v,w)}function d(v,x,b,w){return x===null||x.tag!==4||x.stateNode.containerInfo!==b.containerInfo||x.stateNode.implementation!==b.implementation?(x=Td(b,v.mode,w),x.return=v,x):(x=a(x,b.children||[]),x.return=v,x)}function m(v,x,b,w,N){return x===null||x.tag!==7?(x=sa(b,v.mode,w,N),x.return=v,x):(x=a(x,b),x.return=v,x)}function h(v,x,b){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Md(""+x,v.mode,b),x.return=v,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case eo:return b=Io(x.type,x.key,x.props,null,v.mode,b),b.ref=Ai(v,null,x),b.return=v,b;case Na:return x=Td(x,v.mode,b),x.return=v,x;case Gr:var w=x._init;return h(v,w(x._payload),b)}if(Hi(x)||Ci(x))return x=sa(x,v.mode,b,null),x.return=v,x;mo(v,x)}return null}function p(v,x,b,w){var N=x!==null?x.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return N!==null?null:o(v,x,""+b,w);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case eo:return b.key===N?c(v,x,b,w):null;case Na:return b.key===N?d(v,x,b,w):null;case Gr:return N=b._init,p(v,x,N(b._payload),w)}if(Hi(b)||Ci(b))return N!==null?null:m(v,x,b,w,null);mo(v,b)}return null}function j(v,x,b,w,N){if(typeof w=="string"&&w!==""||typeof w=="number")return v=v.get(b)||null,o(x,v,""+w,N);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case eo:return v=v.get(w.key===null?b:w.key)||null,c(x,v,w,N);case Na:return v=v.get(w.key===null?b:w.key)||null,d(x,v,w,N);case Gr:var E=w._init;return j(v,x,b,E(w._payload),N)}if(Hi(w)||Ci(w))return v=v.get(b)||null,m(x,v,w,N,null);mo(x,w)}return null}function f(v,x,b,w){for(var N=null,E=null,L=x,P=x=0,ee=null;L!==null&&P<b.length;P++){L.index>P?(ee=L,L=null):ee=L.sibling;var H=p(v,L,b[P],w);if(H===null){L===null&&(L=ee);break}e&&L&&H.alternate===null&&t(v,L),x=i(H,x,P),E===null?N=H:E.sibling=H,E=H,L=ee}if(P===b.length)return r(v,L),dt&&On(v,P),N;if(L===null){for(;P<b.length;P++)L=h(v,b[P],w),L!==null&&(x=i(L,x,P),E===null?N=L:E.sibling=L,E=L);return dt&&On(v,P),N}for(L=n(v,L);P<b.length;P++)ee=j(L,v,P,b[P],w),ee!==null&&(e&&ee.alternate!==null&&L.delete(ee.key===null?P:ee.key),x=i(ee,x,P),E===null?N=ee:E.sibling=ee,E=ee);return e&&L.forEach(function(Q){return t(v,Q)}),dt&&On(v,P),N}function g(v,x,b,w){var N=Ci(b);if(typeof N!="function")throw Error(Z(150));if(b=N.call(b),b==null)throw Error(Z(151));for(var E=N=null,L=x,P=x=0,ee=null,H=b.next();L!==null&&!H.done;P++,H=b.next()){L.index>P?(ee=L,L=null):ee=L.sibling;var Q=p(v,L,H.value,w);if(Q===null){L===null&&(L=ee);break}e&&L&&Q.alternate===null&&t(v,L),x=i(Q,x,P),E===null?N=Q:E.sibling=Q,E=Q,L=ee}if(H.done)return r(v,L),dt&&On(v,P),N;if(L===null){for(;!H.done;P++,H=b.next())H=h(v,H.value,w),H!==null&&(x=i(H,x,P),E===null?N=H:E.sibling=H,E=H);return dt&&On(v,P),N}for(L=n(v,L);!H.done;P++,H=b.next())H=j(L,v,P,H.value,w),H!==null&&(e&&H.alternate!==null&&L.delete(H.key===null?P:H.key),x=i(H,x,P),E===null?N=H:E.sibling=H,E=H);return e&&L.forEach(function(ae){return t(v,ae)}),dt&&On(v,P),N}function y(v,x,b,w){if(typeof b=="object"&&b!==null&&b.type===ka&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case eo:e:{for(var N=b.key,E=x;E!==null;){if(E.key===N){if(N=b.type,N===ka){if(E.tag===7){r(v,E.sibling),x=a(E,b.props.children),x.return=v,v=x;break e}}else if(E.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Gr&&E0(N)===E.type){r(v,E.sibling),x=a(E,b.props),x.ref=Ai(v,E,b),x.return=v,v=x;break e}r(v,E);break}else t(v,E);E=E.sibling}b.type===ka?(x=sa(b.props.children,v.mode,w,b.key),x.return=v,v=x):(w=Io(b.type,b.key,b.props,null,v.mode,w),w.ref=Ai(v,x,b),w.return=v,v=w)}return l(v);case Na:e:{for(E=b.key;x!==null;){if(x.key===E)if(x.tag===4&&x.stateNode.containerInfo===b.containerInfo&&x.stateNode.implementation===b.implementation){r(v,x.sibling),x=a(x,b.children||[]),x.return=v,v=x;break e}else{r(v,x);break}else t(v,x);x=x.sibling}x=Td(b,v.mode,w),x.return=v,v=x}return l(v);case Gr:return E=b._init,y(v,x,E(b._payload),w)}if(Hi(b))return f(v,x,b,w);if(Ci(b))return g(v,x,b,w);mo(v,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,x!==null&&x.tag===6?(r(v,x.sibling),x=a(x,b),x.return=v,v=x):(r(v,x),x=Md(b,v.mode,w),x.return=v,v=x),l(v)):r(v,x)}return y}var ri=qx(!0),Wx=qx(!1),nc=Tn(null),ac=null,Ra=null,Km=null;function Qm(){Km=Ra=ac=null}function Vm(e){var t=nc.current;ot(nc),e._currentValue=t}function _u(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Da(e,t){ac=e,Km=Ra=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ps=!0),e.firstContext=null)}function zs(e){var t=e._currentValue;if(Km!==e)if(e={context:e,memoizedValue:t,next:null},Ra===null){if(ac===null)throw Error(Z(308));Ra=e,ac.dependencies={lanes:0,firstContext:e}}else Ra=Ra.next=e;return t}var Un=null;function Gm(e){Un===null?Un=[e]:Un.push(e)}function Kx(e,t,r,n){var a=t.interleaved;return a===null?(r.next=r,Gm(t)):(r.next=a.next,a.next=r),t.interleaved=r,Ir(e,n)}function Ir(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Yr=!1;function Ym(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Qx(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ar(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function vn(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,Ve&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,Ir(e,r)}return a=n.interleaved,a===null?(t.next=t,Gm(n)):(t.next=a.next,a.next=t),n.interleaved=t,Ir(e,r)}function Ao(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Fm(e,r)}}function M0(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var l={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=l:i=i.next=l,r=r.next}while(r!==null);i===null?a=i=t:i=i.next=t}else a=i=t;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function ic(e,t,r,n){var a=e.updateQueue;Yr=!1;var i=a.firstBaseUpdate,l=a.lastBaseUpdate,o=a.shared.pending;if(o!==null){a.shared.pending=null;var c=o,d=c.next;c.next=null,l===null?i=d:l.next=d,l=c;var m=e.alternate;m!==null&&(m=m.updateQueue,o=m.lastBaseUpdate,o!==l&&(o===null?m.firstBaseUpdate=d:o.next=d,m.lastBaseUpdate=c))}if(i!==null){var h=a.baseState;l=0,m=d=c=null,o=i;do{var p=o.lane,j=o.eventTime;if((n&p)===p){m!==null&&(m=m.next={eventTime:j,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var f=e,g=o;switch(p=t,j=r,g.tag){case 1:if(f=g.payload,typeof f=="function"){h=f.call(j,h,p);break e}h=f;break e;case 3:f.flags=f.flags&-65537|128;case 0:if(f=g.payload,p=typeof f=="function"?f.call(j,h,p):f,p==null)break e;h=gt({},h,p);break e;case 2:Yr=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,p=a.effects,p===null?a.effects=[o]:p.push(o))}else j={eventTime:j,lane:p,tag:o.tag,payload:o.payload,callback:o.callback,next:null},m===null?(d=m=j,c=h):m=m.next=j,l|=p;if(o=o.next,o===null){if(o=a.shared.pending,o===null)break;p=o,o=p.next,p.next=null,a.lastBaseUpdate=p,a.shared.pending=null}}while(!0);if(m===null&&(c=h),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=m,t=a.shared.interleaved,t!==null){a=t;do l|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);la|=l,e.lanes=l,e.memoizedState=h}}function T0(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(Z(191,a));a.call(n)}}}var Dl={},gr=Tn(Dl),vl=Tn(Dl),bl=Tn(Dl);function Hn(e){if(e===Dl)throw Error(Z(174));return e}function Jm(e,t){switch(nt(bl,t),nt(vl,e),nt(gr,Dl),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:lu(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=lu(t,e)}ot(gr),nt(gr,t)}function ni(){ot(gr),ot(vl),ot(bl)}function Vx(e){Hn(bl.current);var t=Hn(gr.current),r=lu(t,e.type);t!==r&&(nt(vl,e),nt(gr,r))}function Xm(e){vl.current===e&&(ot(gr),ot(vl))}var ht=Tn(0);function lc(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Nd=[];function Zm(){for(var e=0;e<Nd.length;e++)Nd[e]._workInProgressVersionPrimary=null;Nd.length=0}var Ro=Dr.ReactCurrentDispatcher,kd=Dr.ReactCurrentBatchConfig,ia=0,ft=null,Mt=null,Ft=null,oc=!1,tl=!1,jl=0,F2=0;function Xt(){throw Error(Z(321))}function eh(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!tr(e[r],t[r]))return!1;return!0}function th(e,t,r,n,a,i){if(ia=i,ft=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ro.current=e===null||e.memoizedState===null?D2:z2,e=r(n,a),tl){i=0;do{if(tl=!1,jl=0,25<=i)throw Error(Z(301));i+=1,Ft=Mt=null,t.updateQueue=null,Ro.current=U2,e=r(n,a)}while(tl)}if(Ro.current=cc,t=Mt!==null&&Mt.next!==null,ia=0,Ft=Mt=ft=null,oc=!1,t)throw Error(Z(300));return e}function sh(){var e=jl!==0;return jl=0,e}function lr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ft===null?ft.memoizedState=Ft=e:Ft=Ft.next=e,Ft}function Us(){if(Mt===null){var e=ft.alternate;e=e!==null?e.memoizedState:null}else e=Mt.next;var t=Ft===null?ft.memoizedState:Ft.next;if(t!==null)Ft=t,Mt=e;else{if(e===null)throw Error(Z(310));Mt=e,e={memoizedState:Mt.memoizedState,baseState:Mt.baseState,baseQueue:Mt.baseQueue,queue:Mt.queue,next:null},Ft===null?ft.memoizedState=Ft=e:Ft=Ft.next=e}return Ft}function wl(e,t){return typeof t=="function"?t(e):t}function Sd(e){var t=Us(),r=t.queue;if(r===null)throw Error(Z(311));r.lastRenderedReducer=e;var n=Mt,a=n.baseQueue,i=r.pending;if(i!==null){if(a!==null){var l=a.next;a.next=i.next,i.next=l}n.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,n=n.baseState;var o=l=null,c=null,d=i;do{var m=d.lane;if((ia&m)===m)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:e(n,d.action);else{var h={lane:m,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(o=c=h,l=n):c=c.next=h,ft.lanes|=m,la|=m}d=d.next}while(d!==null&&d!==i);c===null?l=n:c.next=o,tr(n,t.memoizedState)||(ps=!0),t.memoizedState=n,t.baseState=l,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){a=e;do i=a.lane,ft.lanes|=i,la|=i,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Cd(e){var t=Us(),r=t.queue;if(r===null)throw Error(Z(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,i=t.memoizedState;if(a!==null){r.pending=null;var l=a=a.next;do i=e(i,l.action),l=l.next;while(l!==a);tr(i,t.memoizedState)||(ps=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function Gx(){}function Yx(e,t){var r=ft,n=Us(),a=t(),i=!tr(n.memoizedState,a);if(i&&(n.memoizedState=a,ps=!0),n=n.queue,rh(Zx.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||Ft!==null&&Ft.memoizedState.tag&1){if(r.flags|=2048,Nl(9,Xx.bind(null,r,n,a,t),void 0,null),Ot===null)throw Error(Z(349));ia&30||Jx(r,t,a)}return a}function Jx(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=ft.updateQueue,t===null?(t={lastEffect:null,stores:null},ft.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Xx(e,t,r,n){t.value=r,t.getSnapshot=n,ep(t)&&tp(e)}function Zx(e,t,r){return r(function(){ep(t)&&tp(e)})}function ep(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!tr(e,r)}catch{return!0}}function tp(e){var t=Ir(e,1);t!==null&&Zs(t,e,1,-1)}function A0(e){var t=lr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wl,lastRenderedState:e},t.queue=e,e=e.dispatch=O2.bind(null,ft,e),[t.memoizedState,e]}function Nl(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=ft.updateQueue,t===null?(t={lastEffect:null,stores:null},ft.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function sp(){return Us().memoizedState}function Po(e,t,r,n){var a=lr();ft.flags|=e,a.memoizedState=Nl(1|t,r,void 0,n===void 0?null:n)}function Pc(e,t,r,n){var a=Us();n=n===void 0?null:n;var i=void 0;if(Mt!==null){var l=Mt.memoizedState;if(i=l.destroy,n!==null&&eh(n,l.deps)){a.memoizedState=Nl(t,r,i,n);return}}ft.flags|=e,a.memoizedState=Nl(1|t,r,i,n)}function R0(e,t){return Po(8390656,8,e,t)}function rh(e,t){return Pc(2048,8,e,t)}function rp(e,t){return Pc(4,2,e,t)}function np(e,t){return Pc(4,4,e,t)}function ap(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function ip(e,t,r){return r=r!=null?r.concat([e]):null,Pc(4,4,ap.bind(null,t,e),r)}function nh(){}function lp(e,t){var r=Us();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&eh(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function op(e,t){var r=Us();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&eh(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function cp(e,t,r){return ia&21?(tr(r,t)||(r=fx(),ft.lanes|=r,la|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ps=!0),e.memoizedState=r)}function $2(e,t){var r=et;et=r!==0&&4>r?r:4,e(!0);var n=kd.transition;kd.transition={};try{e(!1),t()}finally{et=r,kd.transition=n}}function dp(){return Us().memoizedState}function I2(e,t,r){var n=jn(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},up(e))mp(t,r);else if(r=Kx(e,t,r,n),r!==null){var a=ds();Zs(r,e,n,a),hp(r,t,n)}}function O2(e,t,r){var n=jn(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(up(e))mp(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var l=t.lastRenderedState,o=i(l,r);if(a.hasEagerState=!0,a.eagerState=o,tr(o,l)){var c=t.interleaved;c===null?(a.next=a,Gm(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}r=Kx(e,t,a,n),r!==null&&(a=ds(),Zs(r,e,n,a),hp(r,t,n))}}function up(e){var t=e.alternate;return e===ft||t!==null&&t===ft}function mp(e,t){tl=oc=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function hp(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Fm(e,r)}}var cc={readContext:zs,useCallback:Xt,useContext:Xt,useEffect:Xt,useImperativeHandle:Xt,useInsertionEffect:Xt,useLayoutEffect:Xt,useMemo:Xt,useReducer:Xt,useRef:Xt,useState:Xt,useDebugValue:Xt,useDeferredValue:Xt,useTransition:Xt,useMutableSource:Xt,useSyncExternalStore:Xt,useId:Xt,unstable_isNewReconciler:!1},D2={readContext:zs,useCallback:function(e,t){return lr().memoizedState=[e,t===void 0?null:t],e},useContext:zs,useEffect:R0,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Po(4194308,4,ap.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Po(4194308,4,e,t)},useInsertionEffect:function(e,t){return Po(4,2,e,t)},useMemo:function(e,t){var r=lr();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=lr();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=I2.bind(null,ft,e),[n.memoizedState,e]},useRef:function(e){var t=lr();return e={current:e},t.memoizedState=e},useState:A0,useDebugValue:nh,useDeferredValue:function(e){return lr().memoizedState=e},useTransition:function(){var e=A0(!1),t=e[0];return e=$2.bind(null,e[1]),lr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=ft,a=lr();if(dt){if(r===void 0)throw Error(Z(407));r=r()}else{if(r=t(),Ot===null)throw Error(Z(349));ia&30||Jx(n,t,r)}a.memoizedState=r;var i={value:r,getSnapshot:t};return a.queue=i,R0(Zx.bind(null,n,i,e),[e]),n.flags|=2048,Nl(9,Xx.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=lr(),t=Ot.identifierPrefix;if(dt){var r=Mr,n=Er;r=(n&~(1<<32-Xs(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=jl++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=F2++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},z2={readContext:zs,useCallback:lp,useContext:zs,useEffect:rh,useImperativeHandle:ip,useInsertionEffect:rp,useLayoutEffect:np,useMemo:op,useReducer:Sd,useRef:sp,useState:function(){return Sd(wl)},useDebugValue:nh,useDeferredValue:function(e){var t=Us();return cp(t,Mt.memoizedState,e)},useTransition:function(){var e=Sd(wl)[0],t=Us().memoizedState;return[e,t]},useMutableSource:Gx,useSyncExternalStore:Yx,useId:dp,unstable_isNewReconciler:!1},U2={readContext:zs,useCallback:lp,useContext:zs,useEffect:rh,useImperativeHandle:ip,useInsertionEffect:rp,useLayoutEffect:np,useMemo:op,useReducer:Cd,useRef:sp,useState:function(){return Cd(wl)},useDebugValue:nh,useDeferredValue:function(e){var t=Us();return Mt===null?t.memoizedState=e:cp(t,Mt.memoizedState,e)},useTransition:function(){var e=Cd(wl)[0],t=Us().memoizedState;return[e,t]},useMutableSource:Gx,useSyncExternalStore:Yx,useId:dp,unstable_isNewReconciler:!1};function Ws(e,t){if(e&&e.defaultProps){t=gt({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Eu(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:gt({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Lc={isMounted:function(e){return(e=e._reactInternals)?fa(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=ds(),a=jn(e),i=Ar(n,a);i.payload=t,r!=null&&(i.callback=r),t=vn(e,i,a),t!==null&&(Zs(t,e,a,n),Ao(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=ds(),a=jn(e),i=Ar(n,a);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=vn(e,i,a),t!==null&&(Zs(t,e,a,n),Ao(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=ds(),n=jn(e),a=Ar(r,n);a.tag=2,t!=null&&(a.callback=t),t=vn(e,a,n),t!==null&&(Zs(t,e,n,r),Ao(t,e,n))}};function P0(e,t,r,n,a,i,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,l):t.prototype&&t.prototype.isPureReactComponent?!gl(r,n)||!gl(a,i):!0}function fp(e,t,r){var n=!1,a=_n,i=t.contextType;return typeof i=="object"&&i!==null?i=zs(i):(a=vs(t)?na:ss.current,n=t.contextTypes,i=(n=n!=null)?ti(e,a):_n),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Lc,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function L0(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Lc.enqueueReplaceState(t,t.state,null)}function Mu(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},Ym(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=zs(i):(i=vs(t)?na:ss.current,a.context=ti(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Eu(e,t,i,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Lc.enqueueReplaceState(a,a.state,null),ic(e,r,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function ai(e,t){try{var r="",n=t;do r+=gb(n),n=n.return;while(n);var a=r}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function _d(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Tu(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var H2=typeof WeakMap=="function"?WeakMap:Map;function gp(e,t,r){r=Ar(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){uc||(uc=!0,zu=n),Tu(e,t)},r}function xp(e,t,r){r=Ar(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){Tu(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){Tu(e,t),typeof n!="function"&&(bn===null?bn=new Set([this]):bn.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),r}function F0(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new H2;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=s1.bind(null,e,t,r),t.then(e,e))}function $0(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function I0(e,t,r,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Ar(-1,1),t.tag=2,vn(r,t,1))),r.lanes|=1),e)}var B2=Dr.ReactCurrentOwner,ps=!1;function os(e,t,r,n){t.child=e===null?Wx(t,null,r,n):ri(t,e.child,r,n)}function O0(e,t,r,n,a){r=r.render;var i=t.ref;return Da(t,a),n=th(e,t,r,n,i,a),r=sh(),e!==null&&!ps?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Or(e,t,a)):(dt&&r&&Bm(t),t.flags|=1,os(e,t,n,a),t.child)}function D0(e,t,r,n,a){if(e===null){var i=r.type;return typeof i=="function"&&!mh(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,pp(e,t,i,n,a)):(e=Io(r.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var l=i.memoizedProps;if(r=r.compare,r=r!==null?r:gl,r(l,n)&&e.ref===t.ref)return Or(e,t,a)}return t.flags|=1,e=wn(i,n),e.ref=t.ref,e.return=t,t.child=e}function pp(e,t,r,n,a){if(e!==null){var i=e.memoizedProps;if(gl(i,n)&&e.ref===t.ref)if(ps=!1,t.pendingProps=n=i,(e.lanes&a)!==0)e.flags&131072&&(ps=!0);else return t.lanes=e.lanes,Or(e,t,a)}return Au(e,t,r,n,a)}function yp(e,t,r){var n=t.pendingProps,a=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},nt(La,Cs),Cs|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,nt(La,Cs),Cs|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,nt(La,Cs),Cs|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,nt(La,Cs),Cs|=n;return os(e,t,a,r),t.child}function vp(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Au(e,t,r,n,a){var i=vs(r)?na:ss.current;return i=ti(t,i),Da(t,a),r=th(e,t,r,n,i,a),n=sh(),e!==null&&!ps?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Or(e,t,a)):(dt&&n&&Bm(t),t.flags|=1,os(e,t,r,a),t.child)}function z0(e,t,r,n,a){if(vs(r)){var i=!0;tc(t)}else i=!1;if(Da(t,a),t.stateNode===null)Lo(e,t),fp(t,r,n),Mu(t,r,n,a),n=!0;else if(e===null){var l=t.stateNode,o=t.memoizedProps;l.props=o;var c=l.context,d=r.contextType;typeof d=="object"&&d!==null?d=zs(d):(d=vs(r)?na:ss.current,d=ti(t,d));var m=r.getDerivedStateFromProps,h=typeof m=="function"||typeof l.getSnapshotBeforeUpdate=="function";h||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==n||c!==d)&&L0(t,l,n,d),Yr=!1;var p=t.memoizedState;l.state=p,ic(t,n,l,a),c=t.memoizedState,o!==n||p!==c||ys.current||Yr?(typeof m=="function"&&(Eu(t,r,m,n),c=t.memoizedState),(o=Yr||P0(t,r,o,n,p,c,d))?(h||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),l.props=n,l.state=c,l.context=d,n=o):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{l=t.stateNode,Qx(e,t),o=t.memoizedProps,d=t.type===t.elementType?o:Ws(t.type,o),l.props=d,h=t.pendingProps,p=l.context,c=r.contextType,typeof c=="object"&&c!==null?c=zs(c):(c=vs(r)?na:ss.current,c=ti(t,c));var j=r.getDerivedStateFromProps;(m=typeof j=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==h||p!==c)&&L0(t,l,n,c),Yr=!1,p=t.memoizedState,l.state=p,ic(t,n,l,a);var f=t.memoizedState;o!==h||p!==f||ys.current||Yr?(typeof j=="function"&&(Eu(t,r,j,n),f=t.memoizedState),(d=Yr||P0(t,r,d,n,p,f,c)||!1)?(m||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(n,f,c),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(n,f,c)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=f),l.props=n,l.state=f,l.context=c,n=d):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),n=!1)}return Ru(e,t,r,n,i,a)}function Ru(e,t,r,n,a,i){vp(e,t);var l=(t.flags&128)!==0;if(!n&&!l)return a&&S0(t,r,!1),Or(e,t,i);n=t.stateNode,B2.current=t;var o=l&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&l?(t.child=ri(t,e.child,null,i),t.child=ri(t,null,o,i)):os(e,t,o,i),t.memoizedState=n.state,a&&S0(t,r,!0),t.child}function bp(e){var t=e.stateNode;t.pendingContext?k0(e,t.pendingContext,t.pendingContext!==t.context):t.context&&k0(e,t.context,!1),Jm(e,t.containerInfo)}function U0(e,t,r,n,a){return si(),Wm(a),t.flags|=256,os(e,t,r,n),t.child}var Pu={dehydrated:null,treeContext:null,retryLane:0};function Lu(e){return{baseLanes:e,cachePool:null,transitions:null}}function jp(e,t,r){var n=t.pendingProps,a=ht.current,i=!1,l=(t.flags&128)!==0,o;if((o=l)||(o=e!==null&&e.memoizedState===null?!1:(a&2)!==0),o?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),nt(ht,a&1),e===null)return Cu(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=n.children,e=n.fallback,i?(n=t.mode,i=t.child,l={mode:"hidden",children:l},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=l):i=Ic(l,n,0,null),e=sa(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Lu(r),t.memoizedState=Pu,e):ah(t,l));if(a=e.memoizedState,a!==null&&(o=a.dehydrated,o!==null))return q2(e,t,l,n,o,a,r);if(i){i=n.fallback,l=t.mode,a=e.child,o=a.sibling;var c={mode:"hidden",children:n.children};return!(l&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=wn(a,c),n.subtreeFlags=a.subtreeFlags&14680064),o!==null?i=wn(o,i):(i=sa(i,l,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,l=e.child.memoizedState,l=l===null?Lu(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=e.childLanes&~r,t.memoizedState=Pu,n}return i=e.child,e=i.sibling,n=wn(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function ah(e,t){return t=Ic({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ho(e,t,r,n){return n!==null&&Wm(n),ri(t,e.child,null,r),e=ah(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function q2(e,t,r,n,a,i,l){if(r)return t.flags&256?(t.flags&=-257,n=_d(Error(Z(422))),ho(e,t,l,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,a=t.mode,n=Ic({mode:"visible",children:n.children},a,0,null),i=sa(i,a,l,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&ri(t,e.child,null,l),t.child.memoizedState=Lu(l),t.memoizedState=Pu,i);if(!(t.mode&1))return ho(e,t,l,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var o=n.dgst;return n=o,i=Error(Z(419)),n=_d(i,n,void 0),ho(e,t,l,n)}if(o=(l&e.childLanes)!==0,ps||o){if(n=Ot,n!==null){switch(l&-l){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|l)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,Ir(e,a),Zs(n,e,a,-1))}return uh(),n=_d(Error(Z(421))),ho(e,t,l,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=r1.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,_s=yn(a.nextSibling),Es=t,dt=!0,Ys=null,e!==null&&($s[Is++]=Er,$s[Is++]=Mr,$s[Is++]=aa,Er=e.id,Mr=e.overflow,aa=t),t=ah(t,n.children),t.flags|=4096,t)}function H0(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),_u(e.return,t,r)}function Ed(e,t,r,n,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=a)}function wp(e,t,r){var n=t.pendingProps,a=n.revealOrder,i=n.tail;if(os(e,t,n.children,r),n=ht.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&H0(e,r,t);else if(e.tag===19)H0(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(nt(ht,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&lc(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),Ed(t,!1,a,r,i);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&lc(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}Ed(t,!0,r,null,i);break;case"together":Ed(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Lo(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Or(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),la|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Z(153));if(t.child!==null){for(e=t.child,r=wn(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=wn(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function W2(e,t,r){switch(t.tag){case 3:bp(t),si();break;case 5:Vx(t);break;case 1:vs(t.type)&&tc(t);break;case 4:Jm(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;nt(nc,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(nt(ht,ht.current&1),t.flags|=128,null):r&t.child.childLanes?jp(e,t,r):(nt(ht,ht.current&1),e=Or(e,t,r),e!==null?e.sibling:null);nt(ht,ht.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return wp(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),nt(ht,ht.current),n)break;return null;case 22:case 23:return t.lanes=0,yp(e,t,r)}return Or(e,t,r)}var Np,Fu,kp,Sp;Np=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Fu=function(){};kp=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,Hn(gr.current);var i=null;switch(r){case"input":a=ru(e,a),n=ru(e,n),i=[];break;case"select":a=gt({},a,{value:void 0}),n=gt({},n,{value:void 0}),i=[];break;case"textarea":a=iu(e,a),n=iu(e,n),i=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Zo)}ou(r,n);var l;r=null;for(d in a)if(!n.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var o=a[d];for(l in o)o.hasOwnProperty(l)&&(r||(r={}),r[l]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(ol.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in n){var c=n[d];if(o=a!=null?a[d]:void 0,n.hasOwnProperty(d)&&c!==o&&(c!=null||o!=null))if(d==="style")if(o){for(l in o)!o.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(r||(r={}),r[l]="");for(l in c)c.hasOwnProperty(l)&&o[l]!==c[l]&&(r||(r={}),r[l]=c[l])}else r||(i||(i=[]),i.push(d,r)),r=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(ol.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&it("scroll",e),i||o===c||(i=[])):(i=i||[]).push(d,c))}r&&(i=i||[]).push("style",r);var d=i;(t.updateQueue=d)&&(t.flags|=4)}};Sp=function(e,t,r,n){r!==n&&(t.flags|=4)};function Ri(e,t){if(!dt)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Zt(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function K2(e,t,r){var n=t.pendingProps;switch(qm(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zt(t),null;case 1:return vs(t.type)&&ec(),Zt(t),null;case 3:return n=t.stateNode,ni(),ot(ys),ot(ss),Zm(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(uo(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ys!==null&&(Bu(Ys),Ys=null))),Fu(e,t),Zt(t),null;case 5:Xm(t);var a=Hn(bl.current);if(r=t.type,e!==null&&t.stateNode!=null)kp(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(Z(166));return Zt(t),null}if(e=Hn(gr.current),uo(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[mr]=t,n[yl]=i,e=(t.mode&1)!==0,r){case"dialog":it("cancel",n),it("close",n);break;case"iframe":case"object":case"embed":it("load",n);break;case"video":case"audio":for(a=0;a<qi.length;a++)it(qi[a],n);break;case"source":it("error",n);break;case"img":case"image":case"link":it("error",n),it("load",n);break;case"details":it("toggle",n);break;case"input":Jh(n,i),it("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},it("invalid",n);break;case"textarea":Zh(n,i),it("invalid",n)}ou(r,i),a=null;for(var l in i)if(i.hasOwnProperty(l)){var o=i[l];l==="children"?typeof o=="string"?n.textContent!==o&&(i.suppressHydrationWarning!==!0&&co(n.textContent,o,e),a=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&co(n.textContent,o,e),a=["children",""+o]):ol.hasOwnProperty(l)&&o!=null&&l==="onScroll"&&it("scroll",n)}switch(r){case"input":to(n),Xh(n,i,!0);break;case"textarea":to(n),e0(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Zo)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{l=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Zg(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=l.createElement(r,{is:n.is}):(e=l.createElement(r),r==="select"&&(l=e,n.multiple?l.multiple=!0:n.size&&(l.size=n.size))):e=l.createElementNS(e,r),e[mr]=t,e[yl]=n,Np(e,t,!1,!1),t.stateNode=e;e:{switch(l=cu(r,n),r){case"dialog":it("cancel",e),it("close",e),a=n;break;case"iframe":case"object":case"embed":it("load",e),a=n;break;case"video":case"audio":for(a=0;a<qi.length;a++)it(qi[a],e);a=n;break;case"source":it("error",e),a=n;break;case"img":case"image":case"link":it("error",e),it("load",e),a=n;break;case"details":it("toggle",e),a=n;break;case"input":Jh(e,n),a=ru(e,n),it("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=gt({},n,{value:void 0}),it("invalid",e);break;case"textarea":Zh(e,n),a=iu(e,n),it("invalid",e);break;default:a=n}ou(r,a),o=a;for(i in o)if(o.hasOwnProperty(i)){var c=o[i];i==="style"?sx(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&ex(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&cl(e,c):typeof c=="number"&&cl(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ol.hasOwnProperty(i)?c!=null&&i==="onScroll"&&it("scroll",e):c!=null&&Mm(e,i,c,l))}switch(r){case"input":to(e),Xh(e,n,!1);break;case"textarea":to(e),e0(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Cn(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?Fa(e,!!n.multiple,i,!1):n.defaultValue!=null&&Fa(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Zo)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Zt(t),null;case 6:if(e&&t.stateNode!=null)Sp(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(Z(166));if(r=Hn(bl.current),Hn(gr.current),uo(t)){if(n=t.stateNode,r=t.memoizedProps,n[mr]=t,(i=n.nodeValue!==r)&&(e=Es,e!==null))switch(e.tag){case 3:co(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&co(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[mr]=t,t.stateNode=n}return Zt(t),null;case 13:if(ot(ht),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(dt&&_s!==null&&t.mode&1&&!(t.flags&128))Bx(),si(),t.flags|=98560,i=!1;else if(i=uo(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(Z(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Z(317));i[mr]=t}else si(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Zt(t),i=!1}else Ys!==null&&(Bu(Ys),Ys=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||ht.current&1?At===0&&(At=3):uh())),t.updateQueue!==null&&(t.flags|=4),Zt(t),null);case 4:return ni(),Fu(e,t),e===null&&xl(t.stateNode.containerInfo),Zt(t),null;case 10:return Vm(t.type._context),Zt(t),null;case 17:return vs(t.type)&&ec(),Zt(t),null;case 19:if(ot(ht),i=t.memoizedState,i===null)return Zt(t),null;if(n=(t.flags&128)!==0,l=i.rendering,l===null)if(n)Ri(i,!1);else{if(At!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=lc(e),l!==null){for(t.flags|=128,Ri(i,!1),n=l.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,l=i.alternate,l===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return nt(ht,ht.current&1|2),t.child}e=e.sibling}i.tail!==null&&wt()>ii&&(t.flags|=128,n=!0,Ri(i,!1),t.lanes=4194304)}else{if(!n)if(e=lc(l),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Ri(i,!0),i.tail===null&&i.tailMode==="hidden"&&!l.alternate&&!dt)return Zt(t),null}else 2*wt()-i.renderingStartTime>ii&&r!==1073741824&&(t.flags|=128,n=!0,Ri(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(r=i.last,r!==null?r.sibling=l:t.child=l,i.last=l)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=wt(),t.sibling=null,r=ht.current,nt(ht,n?r&1|2:r&1),t):(Zt(t),null);case 22:case 23:return dh(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Cs&1073741824&&(Zt(t),t.subtreeFlags&6&&(t.flags|=8192)):Zt(t),null;case 24:return null;case 25:return null}throw Error(Z(156,t.tag))}function Q2(e,t){switch(qm(t),t.tag){case 1:return vs(t.type)&&ec(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ni(),ot(ys),ot(ss),Zm(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Xm(t),null;case 13:if(ot(ht),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Z(340));si()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ot(ht),null;case 4:return ni(),null;case 10:return Vm(t.type._context),null;case 22:case 23:return dh(),null;case 24:return null;default:return null}}var fo=!1,es=!1,V2=typeof WeakSet=="function"?WeakSet:Set,ue=null;function Pa(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){yt(e,t,n)}else r.current=null}function $u(e,t,r){try{r()}catch(n){yt(e,t,n)}}var B0=!1;function G2(e,t){if(vu=Yo,e=Tx(),Hm(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var l=0,o=-1,c=-1,d=0,m=0,h=e,p=null;t:for(;;){for(var j;h!==r||a!==0&&h.nodeType!==3||(o=l+a),h!==i||n!==0&&h.nodeType!==3||(c=l+n),h.nodeType===3&&(l+=h.nodeValue.length),(j=h.firstChild)!==null;)p=h,h=j;for(;;){if(h===e)break t;if(p===r&&++d===a&&(o=l),p===i&&++m===n&&(c=l),(j=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=j}r=o===-1||c===-1?null:{start:o,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(bu={focusedElem:e,selectionRange:r},Yo=!1,ue=t;ue!==null;)if(t=ue,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ue=e;else for(;ue!==null;){t=ue;try{var f=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(f!==null){var g=f.memoizedProps,y=f.memoizedState,v=t.stateNode,x=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:Ws(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Z(163))}}catch(w){yt(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,ue=e;break}ue=t.return}return f=B0,B0=!1,f}function sl(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&$u(t,r,i)}a=a.next}while(a!==n)}}function Fc(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function Iu(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Cp(e){var t=e.alternate;t!==null&&(e.alternate=null,Cp(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[mr],delete t[yl],delete t[Nu],delete t[A2],delete t[R2])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function _p(e){return e.tag===5||e.tag===3||e.tag===4}function q0(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||_p(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ou(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Zo));else if(n!==4&&(e=e.child,e!==null))for(Ou(e,t,r),e=e.sibling;e!==null;)Ou(e,t,r),e=e.sibling}function Du(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Du(e,t,r),e=e.sibling;e!==null;)Du(e,t,r),e=e.sibling}var Bt=null,Gs=!1;function Br(e,t,r){for(r=r.child;r!==null;)Ep(e,t,r),r=r.sibling}function Ep(e,t,r){if(fr&&typeof fr.onCommitFiberUnmount=="function")try{fr.onCommitFiberUnmount(_c,r)}catch{}switch(r.tag){case 5:es||Pa(r,t);case 6:var n=Bt,a=Gs;Bt=null,Br(e,t,r),Bt=n,Gs=a,Bt!==null&&(Gs?(e=Bt,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Bt.removeChild(r.stateNode));break;case 18:Bt!==null&&(Gs?(e=Bt,r=r.stateNode,e.nodeType===8?jd(e.parentNode,r):e.nodeType===1&&jd(e,r),hl(e)):jd(Bt,r.stateNode));break;case 4:n=Bt,a=Gs,Bt=r.stateNode.containerInfo,Gs=!0,Br(e,t,r),Bt=n,Gs=a;break;case 0:case 11:case 14:case 15:if(!es&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var i=a,l=i.destroy;i=i.tag,l!==void 0&&(i&2||i&4)&&$u(r,t,l),a=a.next}while(a!==n)}Br(e,t,r);break;case 1:if(!es&&(Pa(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){yt(r,t,o)}Br(e,t,r);break;case 21:Br(e,t,r);break;case 22:r.mode&1?(es=(n=es)||r.memoizedState!==null,Br(e,t,r),es=n):Br(e,t,r);break;default:Br(e,t,r)}}function W0(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new V2),t.forEach(function(n){var a=n1.bind(null,e,n);r.has(n)||(r.add(n),n.then(a,a))})}}function qs(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var i=e,l=t,o=l;e:for(;o!==null;){switch(o.tag){case 5:Bt=o.stateNode,Gs=!1;break e;case 3:Bt=o.stateNode.containerInfo,Gs=!0;break e;case 4:Bt=o.stateNode.containerInfo,Gs=!0;break e}o=o.return}if(Bt===null)throw Error(Z(160));Ep(i,l,a),Bt=null,Gs=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(d){yt(a,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Mp(t,e),t=t.sibling}function Mp(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(qs(t,e),ar(e),n&4){try{sl(3,e,e.return),Fc(3,e)}catch(g){yt(e,e.return,g)}try{sl(5,e,e.return)}catch(g){yt(e,e.return,g)}}break;case 1:qs(t,e),ar(e),n&512&&r!==null&&Pa(r,r.return);break;case 5:if(qs(t,e),ar(e),n&512&&r!==null&&Pa(r,r.return),e.flags&32){var a=e.stateNode;try{cl(a,"")}catch(g){yt(e,e.return,g)}}if(n&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,l=r!==null?r.memoizedProps:i,o=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&Jg(a,i),cu(o,l);var d=cu(o,i);for(l=0;l<c.length;l+=2){var m=c[l],h=c[l+1];m==="style"?sx(a,h):m==="dangerouslySetInnerHTML"?ex(a,h):m==="children"?cl(a,h):Mm(a,m,h,d)}switch(o){case"input":nu(a,i);break;case"textarea":Xg(a,i);break;case"select":var p=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var j=i.value;j!=null?Fa(a,!!i.multiple,j,!1):p!==!!i.multiple&&(i.defaultValue!=null?Fa(a,!!i.multiple,i.defaultValue,!0):Fa(a,!!i.multiple,i.multiple?[]:"",!1))}a[yl]=i}catch(g){yt(e,e.return,g)}}break;case 6:if(qs(t,e),ar(e),n&4){if(e.stateNode===null)throw Error(Z(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(g){yt(e,e.return,g)}}break;case 3:if(qs(t,e),ar(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{hl(t.containerInfo)}catch(g){yt(e,e.return,g)}break;case 4:qs(t,e),ar(e);break;case 13:qs(t,e),ar(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(oh=wt())),n&4&&W0(e);break;case 22:if(m=r!==null&&r.memoizedState!==null,e.mode&1?(es=(d=es)||m,qs(t,e),es=d):qs(t,e),ar(e),n&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!m&&e.mode&1)for(ue=e,m=e.child;m!==null;){for(h=ue=m;ue!==null;){switch(p=ue,j=p.child,p.tag){case 0:case 11:case 14:case 15:sl(4,p,p.return);break;case 1:Pa(p,p.return);var f=p.stateNode;if(typeof f.componentWillUnmount=="function"){n=p,r=p.return;try{t=n,f.props=t.memoizedProps,f.state=t.memoizedState,f.componentWillUnmount()}catch(g){yt(n,r,g)}}break;case 5:Pa(p,p.return);break;case 22:if(p.memoizedState!==null){Q0(h);continue}}j!==null?(j.return=p,ue=j):Q0(h)}m=m.sibling}e:for(m=null,h=e;;){if(h.tag===5){if(m===null){m=h;try{a=h.stateNode,d?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=h.stateNode,c=h.memoizedProps.style,l=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=tx("display",l))}catch(g){yt(e,e.return,g)}}}else if(h.tag===6){if(m===null)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(g){yt(e,e.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;m===h&&(m=null),h=h.return}m===h&&(m=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:qs(t,e),ar(e),n&4&&W0(e);break;case 21:break;default:qs(t,e),ar(e)}}function ar(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(_p(r)){var n=r;break e}r=r.return}throw Error(Z(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(cl(a,""),n.flags&=-33);var i=q0(e);Du(e,i,a);break;case 3:case 4:var l=n.stateNode.containerInfo,o=q0(e);Ou(e,o,l);break;default:throw Error(Z(161))}}catch(c){yt(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Y2(e,t,r){ue=e,Tp(e)}function Tp(e,t,r){for(var n=(e.mode&1)!==0;ue!==null;){var a=ue,i=a.child;if(a.tag===22&&n){var l=a.memoizedState!==null||fo;if(!l){var o=a.alternate,c=o!==null&&o.memoizedState!==null||es;o=fo;var d=es;if(fo=l,(es=c)&&!d)for(ue=a;ue!==null;)l=ue,c=l.child,l.tag===22&&l.memoizedState!==null?V0(a):c!==null?(c.return=l,ue=c):V0(a);for(;i!==null;)ue=i,Tp(i),i=i.sibling;ue=a,fo=o,es=d}K0(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,ue=i):K0(e)}}function K0(e){for(;ue!==null;){var t=ue;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:es||Fc(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!es)if(r===null)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:Ws(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&T0(t,i,n);break;case 3:var l=t.updateQueue;if(l!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}T0(t,l,r)}break;case 5:var o=t.stateNode;if(r===null&&t.flags&4){r=o;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var m=d.memoizedState;if(m!==null){var h=m.dehydrated;h!==null&&hl(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Z(163))}es||t.flags&512&&Iu(t)}catch(p){yt(t,t.return,p)}}if(t===e){ue=null;break}if(r=t.sibling,r!==null){r.return=t.return,ue=r;break}ue=t.return}}function Q0(e){for(;ue!==null;){var t=ue;if(t===e){ue=null;break}var r=t.sibling;if(r!==null){r.return=t.return,ue=r;break}ue=t.return}}function V0(e){for(;ue!==null;){var t=ue;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Fc(4,t)}catch(c){yt(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(c){yt(t,a,c)}}var i=t.return;try{Iu(t)}catch(c){yt(t,i,c)}break;case 5:var l=t.return;try{Iu(t)}catch(c){yt(t,l,c)}}}catch(c){yt(t,t.return,c)}if(t===e){ue=null;break}var o=t.sibling;if(o!==null){o.return=t.return,ue=o;break}ue=t.return}}var J2=Math.ceil,dc=Dr.ReactCurrentDispatcher,ih=Dr.ReactCurrentOwner,Ds=Dr.ReactCurrentBatchConfig,Ve=0,Ot=null,_t=null,Kt=0,Cs=0,La=Tn(0),At=0,kl=null,la=0,$c=0,lh=0,rl=null,xs=null,oh=0,ii=1/0,jr=null,uc=!1,zu=null,bn=null,go=!1,un=null,mc=0,nl=0,Uu=null,Fo=-1,$o=0;function ds(){return Ve&6?wt():Fo!==-1?Fo:Fo=wt()}function jn(e){return e.mode&1?Ve&2&&Kt!==0?Kt&-Kt:L2.transition!==null?($o===0&&($o=fx()),$o):(e=et,e!==0||(e=window.event,e=e===void 0?16:jx(e.type)),e):1}function Zs(e,t,r,n){if(50<nl)throw nl=0,Uu=null,Error(Z(185));$l(e,r,n),(!(Ve&2)||e!==Ot)&&(e===Ot&&(!(Ve&2)&&($c|=r),At===4&&Xr(e,Kt)),bs(e,n),r===1&&Ve===0&&!(t.mode&1)&&(ii=wt()+500,Rc&&An()))}function bs(e,t){var r=e.callbackNode;Lb(e,t);var n=Go(e,e===Ot?Kt:0);if(n===0)r!==null&&r0(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&r0(r),t===1)e.tag===0?P2(G0.bind(null,e)):zx(G0.bind(null,e)),M2(function(){!(Ve&6)&&An()}),r=null;else{switch(gx(n)){case 1:r=Lm;break;case 4:r=mx;break;case 16:r=Vo;break;case 536870912:r=hx;break;default:r=Vo}r=Op(r,Ap.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Ap(e,t){if(Fo=-1,$o=0,Ve&6)throw Error(Z(327));var r=e.callbackNode;if(za()&&e.callbackNode!==r)return null;var n=Go(e,e===Ot?Kt:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=hc(e,n);else{t=n;var a=Ve;Ve|=2;var i=Pp();(Ot!==e||Kt!==t)&&(jr=null,ii=wt()+500,ta(e,t));do try{e1();break}catch(o){Rp(e,o)}while(!0);Qm(),dc.current=i,Ve=a,_t!==null?t=0:(Ot=null,Kt=0,t=At)}if(t!==0){if(t===2&&(a=fu(e),a!==0&&(n=a,t=Hu(e,a))),t===1)throw r=kl,ta(e,0),Xr(e,n),bs(e,wt()),r;if(t===6)Xr(e,n);else{if(a=e.current.alternate,!(n&30)&&!X2(a)&&(t=hc(e,n),t===2&&(i=fu(e),i!==0&&(n=i,t=Hu(e,i))),t===1))throw r=kl,ta(e,0),Xr(e,n),bs(e,wt()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(Z(345));case 2:Dn(e,xs,jr);break;case 3:if(Xr(e,n),(n&130023424)===n&&(t=oh+500-wt(),10<t)){if(Go(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){ds(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=wu(Dn.bind(null,e,xs,jr),t);break}Dn(e,xs,jr);break;case 4:if(Xr(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var l=31-Xs(n);i=1<<l,l=t[l],l>a&&(a=l),n&=~i}if(n=a,n=wt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*J2(n/1960))-n,10<n){e.timeoutHandle=wu(Dn.bind(null,e,xs,jr),n);break}Dn(e,xs,jr);break;case 5:Dn(e,xs,jr);break;default:throw Error(Z(329))}}}return bs(e,wt()),e.callbackNode===r?Ap.bind(null,e):null}function Hu(e,t){var r=rl;return e.current.memoizedState.isDehydrated&&(ta(e,t).flags|=256),e=hc(e,t),e!==2&&(t=xs,xs=r,t!==null&&Bu(t)),e}function Bu(e){xs===null?xs=e:xs.push.apply(xs,e)}function X2(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],i=a.getSnapshot;a=a.value;try{if(!tr(i(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Xr(e,t){for(t&=~lh,t&=~$c,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Xs(t),n=1<<r;e[r]=-1,t&=~n}}function G0(e){if(Ve&6)throw Error(Z(327));za();var t=Go(e,0);if(!(t&1))return bs(e,wt()),null;var r=hc(e,t);if(e.tag!==0&&r===2){var n=fu(e);n!==0&&(t=n,r=Hu(e,n))}if(r===1)throw r=kl,ta(e,0),Xr(e,t),bs(e,wt()),r;if(r===6)throw Error(Z(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Dn(e,xs,jr),bs(e,wt()),null}function ch(e,t){var r=Ve;Ve|=1;try{return e(t)}finally{Ve=r,Ve===0&&(ii=wt()+500,Rc&&An())}}function oa(e){un!==null&&un.tag===0&&!(Ve&6)&&za();var t=Ve;Ve|=1;var r=Ds.transition,n=et;try{if(Ds.transition=null,et=1,e)return e()}finally{et=n,Ds.transition=r,Ve=t,!(Ve&6)&&An()}}function dh(){Cs=La.current,ot(La)}function ta(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,E2(r)),_t!==null)for(r=_t.return;r!==null;){var n=r;switch(qm(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&ec();break;case 3:ni(),ot(ys),ot(ss),Zm();break;case 5:Xm(n);break;case 4:ni();break;case 13:ot(ht);break;case 19:ot(ht);break;case 10:Vm(n.type._context);break;case 22:case 23:dh()}r=r.return}if(Ot=e,_t=e=wn(e.current,null),Kt=Cs=t,At=0,kl=null,lh=$c=la=0,xs=rl=null,Un!==null){for(t=0;t<Un.length;t++)if(r=Un[t],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,i=r.pending;if(i!==null){var l=i.next;i.next=a,n.next=l}r.pending=n}Un=null}return e}function Rp(e,t){do{var r=_t;try{if(Qm(),Ro.current=cc,oc){for(var n=ft.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}oc=!1}if(ia=0,Ft=Mt=ft=null,tl=!1,jl=0,ih.current=null,r===null||r.return===null){At=1,kl=t,_t=null;break}e:{var i=e,l=r.return,o=r,c=t;if(t=Kt,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,m=o,h=m.tag;if(!(m.mode&1)&&(h===0||h===11||h===15)){var p=m.alternate;p?(m.updateQueue=p.updateQueue,m.memoizedState=p.memoizedState,m.lanes=p.lanes):(m.updateQueue=null,m.memoizedState=null)}var j=$0(l);if(j!==null){j.flags&=-257,I0(j,l,o,i,t),j.mode&1&&F0(i,d,t),t=j,c=d;var f=t.updateQueue;if(f===null){var g=new Set;g.add(c),t.updateQueue=g}else f.add(c);break e}else{if(!(t&1)){F0(i,d,t),uh();break e}c=Error(Z(426))}}else if(dt&&o.mode&1){var y=$0(l);if(y!==null){!(y.flags&65536)&&(y.flags|=256),I0(y,l,o,i,t),Wm(ai(c,o));break e}}i=c=ai(c,o),At!==4&&(At=2),rl===null?rl=[i]:rl.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var v=gp(i,c,t);M0(i,v);break e;case 1:o=c;var x=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof x.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(bn===null||!bn.has(b)))){i.flags|=65536,t&=-t,i.lanes|=t;var w=xp(i,o,t);M0(i,w);break e}}i=i.return}while(i!==null)}Fp(r)}catch(N){t=N,_t===r&&r!==null&&(_t=r=r.return);continue}break}while(!0)}function Pp(){var e=dc.current;return dc.current=cc,e===null?cc:e}function uh(){(At===0||At===3||At===2)&&(At=4),Ot===null||!(la&268435455)&&!($c&268435455)||Xr(Ot,Kt)}function hc(e,t){var r=Ve;Ve|=2;var n=Pp();(Ot!==e||Kt!==t)&&(jr=null,ta(e,t));do try{Z2();break}catch(a){Rp(e,a)}while(!0);if(Qm(),Ve=r,dc.current=n,_t!==null)throw Error(Z(261));return Ot=null,Kt=0,At}function Z2(){for(;_t!==null;)Lp(_t)}function e1(){for(;_t!==null&&!Sb();)Lp(_t)}function Lp(e){var t=Ip(e.alternate,e,Cs);e.memoizedProps=e.pendingProps,t===null?Fp(e):_t=t,ih.current=null}function Fp(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=Q2(r,t),r!==null){r.flags&=32767,_t=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{At=6,_t=null;return}}else if(r=K2(r,t,Cs),r!==null){_t=r;return}if(t=t.sibling,t!==null){_t=t;return}_t=t=e}while(t!==null);At===0&&(At=5)}function Dn(e,t,r){var n=et,a=Ds.transition;try{Ds.transition=null,et=1,t1(e,t,r,n)}finally{Ds.transition=a,et=n}return null}function t1(e,t,r,n){do za();while(un!==null);if(Ve&6)throw Error(Z(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(Z(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(Fb(e,i),e===Ot&&(_t=Ot=null,Kt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||go||(go=!0,Op(Vo,function(){return za(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Ds.transition,Ds.transition=null;var l=et;et=1;var o=Ve;Ve|=4,ih.current=null,G2(e,r),Mp(r,e),j2(bu),Yo=!!vu,bu=vu=null,e.current=r,Y2(r),Cb(),Ve=o,et=l,Ds.transition=i}else e.current=r;if(go&&(go=!1,un=e,mc=a),i=e.pendingLanes,i===0&&(bn=null),Mb(r.stateNode),bs(e,wt()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(uc)throw uc=!1,e=zu,zu=null,e;return mc&1&&e.tag!==0&&za(),i=e.pendingLanes,i&1?e===Uu?nl++:(nl=0,Uu=e):nl=0,An(),null}function za(){if(un!==null){var e=gx(mc),t=Ds.transition,r=et;try{if(Ds.transition=null,et=16>e?16:e,un===null)var n=!1;else{if(e=un,un=null,mc=0,Ve&6)throw Error(Z(331));var a=Ve;for(Ve|=4,ue=e.current;ue!==null;){var i=ue,l=i.child;if(ue.flags&16){var o=i.deletions;if(o!==null){for(var c=0;c<o.length;c++){var d=o[c];for(ue=d;ue!==null;){var m=ue;switch(m.tag){case 0:case 11:case 15:sl(8,m,i)}var h=m.child;if(h!==null)h.return=m,ue=h;else for(;ue!==null;){m=ue;var p=m.sibling,j=m.return;if(Cp(m),m===d){ue=null;break}if(p!==null){p.return=j,ue=p;break}ue=j}}}var f=i.alternate;if(f!==null){var g=f.child;if(g!==null){f.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(g!==null)}}ue=i}}if(i.subtreeFlags&2064&&l!==null)l.return=i,ue=l;else e:for(;ue!==null;){if(i=ue,i.flags&2048)switch(i.tag){case 0:case 11:case 15:sl(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,ue=v;break e}ue=i.return}}var x=e.current;for(ue=x;ue!==null;){l=ue;var b=l.child;if(l.subtreeFlags&2064&&b!==null)b.return=l,ue=b;else e:for(l=x;ue!==null;){if(o=ue,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Fc(9,o)}}catch(N){yt(o,o.return,N)}if(o===l){ue=null;break e}var w=o.sibling;if(w!==null){w.return=o.return,ue=w;break e}ue=o.return}}if(Ve=a,An(),fr&&typeof fr.onPostCommitFiberRoot=="function")try{fr.onPostCommitFiberRoot(_c,e)}catch{}n=!0}return n}finally{et=r,Ds.transition=t}}return!1}function Y0(e,t,r){t=ai(r,t),t=gp(e,t,1),e=vn(e,t,1),t=ds(),e!==null&&($l(e,1,t),bs(e,t))}function yt(e,t,r){if(e.tag===3)Y0(e,e,r);else for(;t!==null;){if(t.tag===3){Y0(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(bn===null||!bn.has(n))){e=ai(r,e),e=xp(t,e,1),t=vn(t,e,1),e=ds(),t!==null&&($l(t,1,e),bs(t,e));break}}t=t.return}}function s1(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=ds(),e.pingedLanes|=e.suspendedLanes&r,Ot===e&&(Kt&r)===r&&(At===4||At===3&&(Kt&130023424)===Kt&&500>wt()-oh?ta(e,0):lh|=r),bs(e,t)}function $p(e,t){t===0&&(e.mode&1?(t=no,no<<=1,!(no&130023424)&&(no=4194304)):t=1);var r=ds();e=Ir(e,t),e!==null&&($l(e,t,r),bs(e,r))}function r1(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),$p(e,r)}function n1(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(Z(314))}n!==null&&n.delete(t),$p(e,r)}var Ip;Ip=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||ys.current)ps=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return ps=!1,W2(e,t,r);ps=!!(e.flags&131072)}else ps=!1,dt&&t.flags&1048576&&Ux(t,rc,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Lo(e,t),e=t.pendingProps;var a=ti(t,ss.current);Da(t,r),a=th(null,t,n,e,a,r);var i=sh();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,vs(n)?(i=!0,tc(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Ym(t),a.updater=Lc,t.stateNode=a,a._reactInternals=t,Mu(t,n,e,r),t=Ru(null,t,n,!0,i,r)):(t.tag=0,dt&&i&&Bm(t),os(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Lo(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=i1(n),e=Ws(n,e),a){case 0:t=Au(null,t,n,e,r);break e;case 1:t=z0(null,t,n,e,r);break e;case 11:t=O0(null,t,n,e,r);break e;case 14:t=D0(null,t,n,Ws(n.type,e),r);break e}throw Error(Z(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Ws(n,a),Au(e,t,n,a,r);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Ws(n,a),z0(e,t,n,a,r);case 3:e:{if(bp(t),e===null)throw Error(Z(387));n=t.pendingProps,i=t.memoizedState,a=i.element,Qx(e,t),ic(t,n,null,r);var l=t.memoizedState;if(n=l.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=ai(Error(Z(423)),t),t=U0(e,t,n,r,a);break e}else if(n!==a){a=ai(Error(Z(424)),t),t=U0(e,t,n,r,a);break e}else for(_s=yn(t.stateNode.containerInfo.firstChild),Es=t,dt=!0,Ys=null,r=Wx(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(si(),n===a){t=Or(e,t,r);break e}os(e,t,n,r)}t=t.child}return t;case 5:return Vx(t),e===null&&Cu(t),n=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,l=a.children,ju(n,a)?l=null:i!==null&&ju(n,i)&&(t.flags|=32),vp(e,t),os(e,t,l,r),t.child;case 6:return e===null&&Cu(t),null;case 13:return jp(e,t,r);case 4:return Jm(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=ri(t,null,n,r):os(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Ws(n,a),O0(e,t,n,a,r);case 7:return os(e,t,t.pendingProps,r),t.child;case 8:return os(e,t,t.pendingProps.children,r),t.child;case 12:return os(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,i=t.memoizedProps,l=a.value,nt(nc,n._currentValue),n._currentValue=l,i!==null)if(tr(i.value,l)){if(i.children===a.children&&!ys.current){t=Or(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var o=i.dependencies;if(o!==null){l=i.child;for(var c=o.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=Ar(-1,r&-r),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var m=d.pending;m===null?c.next=c:(c.next=m.next,m.next=c),d.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),_u(i.return,r,t),o.lanes|=r;break}c=c.next}}else if(i.tag===10)l=i.type===t.type?null:i.child;else if(i.tag===18){if(l=i.return,l===null)throw Error(Z(341));l.lanes|=r,o=l.alternate,o!==null&&(o.lanes|=r),_u(l,r,t),l=i.sibling}else l=i.child;if(l!==null)l.return=i;else for(l=i;l!==null;){if(l===t){l=null;break}if(i=l.sibling,i!==null){i.return=l.return,l=i;break}l=l.return}i=l}os(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,Da(t,r),a=zs(a),n=n(a),t.flags|=1,os(e,t,n,r),t.child;case 14:return n=t.type,a=Ws(n,t.pendingProps),a=Ws(n.type,a),D0(e,t,n,a,r);case 15:return pp(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Ws(n,a),Lo(e,t),t.tag=1,vs(n)?(e=!0,tc(t)):e=!1,Da(t,r),fp(t,n,a),Mu(t,n,a,r),Ru(null,t,n,!0,e,r);case 19:return wp(e,t,r);case 22:return yp(e,t,r)}throw Error(Z(156,t.tag))};function Op(e,t){return ux(e,t)}function a1(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Os(e,t,r,n){return new a1(e,t,r,n)}function mh(e){return e=e.prototype,!(!e||!e.isReactComponent)}function i1(e){if(typeof e=="function")return mh(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Am)return 11;if(e===Rm)return 14}return 2}function wn(e,t){var r=e.alternate;return r===null?(r=Os(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Io(e,t,r,n,a,i){var l=2;if(n=e,typeof e=="function")mh(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case ka:return sa(r.children,a,i,t);case Tm:l=8,a|=8;break;case Zd:return e=Os(12,r,t,a|2),e.elementType=Zd,e.lanes=i,e;case eu:return e=Os(13,r,t,a),e.elementType=eu,e.lanes=i,e;case tu:return e=Os(19,r,t,a),e.elementType=tu,e.lanes=i,e;case Vg:return Ic(r,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Kg:l=10;break e;case Qg:l=9;break e;case Am:l=11;break e;case Rm:l=14;break e;case Gr:l=16,n=null;break e}throw Error(Z(130,e==null?e:typeof e,""))}return t=Os(l,r,t,a),t.elementType=e,t.type=n,t.lanes=i,t}function sa(e,t,r,n){return e=Os(7,e,n,t),e.lanes=r,e}function Ic(e,t,r,n){return e=Os(22,e,n,t),e.elementType=Vg,e.lanes=r,e.stateNode={isHidden:!1},e}function Md(e,t,r){return e=Os(6,e,null,t),e.lanes=r,e}function Td(e,t,r){return t=Os(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function l1(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=dd(0),this.expirationTimes=dd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=dd(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function hh(e,t,r,n,a,i,l,o,c){return e=new l1(e,t,r,o,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Os(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ym(i),e}function o1(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Na,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function Dp(e){if(!e)return _n;e=e._reactInternals;e:{if(fa(e)!==e||e.tag!==1)throw Error(Z(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(vs(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Z(171))}if(e.tag===1){var r=e.type;if(vs(r))return Dx(e,r,t)}return t}function zp(e,t,r,n,a,i,l,o,c){return e=hh(r,n,!0,e,a,i,l,o,c),e.context=Dp(null),r=e.current,n=ds(),a=jn(r),i=Ar(n,a),i.callback=t??null,vn(r,i,a),e.current.lanes=a,$l(e,a,n),bs(e,n),e}function Oc(e,t,r,n){var a=t.current,i=ds(),l=jn(a);return r=Dp(r),t.context===null?t.context=r:t.pendingContext=r,t=Ar(i,l),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=vn(a,t,l),e!==null&&(Zs(e,a,l,i),Ao(e,a,l)),l}function fc(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function J0(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function fh(e,t){J0(e,t),(e=e.alternate)&&J0(e,t)}function c1(){return null}var Up=typeof reportError=="function"?reportError:function(e){console.error(e)};function gh(e){this._internalRoot=e}Dc.prototype.render=gh.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Z(409));Oc(e,t,null,null)};Dc.prototype.unmount=gh.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;oa(function(){Oc(null,e,null,null)}),t[$r]=null}};function Dc(e){this._internalRoot=e}Dc.prototype.unstable_scheduleHydration=function(e){if(e){var t=yx();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Jr.length&&t!==0&&t<Jr[r].priority;r++);Jr.splice(r,0,e),r===0&&bx(e)}};function xh(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function zc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function X0(){}function d1(e,t,r,n,a){if(a){if(typeof n=="function"){var i=n;n=function(){var d=fc(l);i.call(d)}}var l=zp(t,n,e,0,null,!1,!1,"",X0);return e._reactRootContainer=l,e[$r]=l.current,xl(e.nodeType===8?e.parentNode:e),oa(),l}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var o=n;n=function(){var d=fc(c);o.call(d)}}var c=hh(e,0,!1,null,null,!1,!1,"",X0);return e._reactRootContainer=c,e[$r]=c.current,xl(e.nodeType===8?e.parentNode:e),oa(function(){Oc(t,c,r,n)}),c}function Uc(e,t,r,n,a){var i=r._reactRootContainer;if(i){var l=i;if(typeof a=="function"){var o=a;a=function(){var c=fc(l);o.call(c)}}Oc(t,l,e,a)}else l=d1(r,t,e,a,n);return fc(l)}xx=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Bi(t.pendingLanes);r!==0&&(Fm(t,r|1),bs(t,wt()),!(Ve&6)&&(ii=wt()+500,An()))}break;case 13:oa(function(){var n=Ir(e,1);if(n!==null){var a=ds();Zs(n,e,1,a)}}),fh(e,1)}};$m=function(e){if(e.tag===13){var t=Ir(e,134217728);if(t!==null){var r=ds();Zs(t,e,134217728,r)}fh(e,134217728)}};px=function(e){if(e.tag===13){var t=jn(e),r=Ir(e,t);if(r!==null){var n=ds();Zs(r,e,t,n)}fh(e,t)}};yx=function(){return et};vx=function(e,t){var r=et;try{return et=e,t()}finally{et=r}};uu=function(e,t,r){switch(t){case"input":if(nu(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=Ac(n);if(!a)throw Error(Z(90));Yg(n),nu(n,a)}}}break;case"textarea":Xg(e,r);break;case"select":t=r.value,t!=null&&Fa(e,!!r.multiple,t,!1)}};ax=ch;ix=oa;var u1={usingClientEntryPoint:!1,Events:[Ol,Ea,Ac,rx,nx,ch]},Pi={findFiberByHostInstance:zn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},m1={bundleType:Pi.bundleType,version:Pi.version,rendererPackageName:Pi.rendererPackageName,rendererConfig:Pi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Dr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=cx(e),e===null?null:e.stateNode},findFiberByHostInstance:Pi.findFiberByHostInstance||c1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xo.isDisabled&&xo.supportsFiber)try{_c=xo.inject(m1),fr=xo}catch{}}Ts.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=u1;Ts.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!xh(t))throw Error(Z(200));return o1(e,t,null,r)};Ts.createRoot=function(e,t){if(!xh(e))throw Error(Z(299));var r=!1,n="",a=Up;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=hh(e,1,!1,null,null,r,!1,n,a),e[$r]=t.current,xl(e.nodeType===8?e.parentNode:e),new gh(t)};Ts.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Z(188)):(e=Object.keys(e).join(","),Error(Z(268,e)));return e=cx(t),e=e===null?null:e.stateNode,e};Ts.flushSync=function(e){return oa(e)};Ts.hydrate=function(e,t,r){if(!zc(t))throw Error(Z(200));return Uc(null,e,t,!0,r)};Ts.hydrateRoot=function(e,t,r){if(!xh(e))throw Error(Z(405));var n=r!=null&&r.hydratedSources||null,a=!1,i="",l=Up;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(l=r.onRecoverableError)),t=zp(t,null,e,1,r??null,a,!1,i,l),e[$r]=t.current,xl(e),n)for(e=0;e<n.length;e++)r=n[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new Dc(t)};Ts.render=function(e,t,r){if(!zc(t))throw Error(Z(200));return Uc(null,e,t,!1,r)};Ts.unmountComponentAtNode=function(e){if(!zc(e))throw Error(Z(40));return e._reactRootContainer?(oa(function(){Uc(null,null,e,!1,function(){e._reactRootContainer=null,e[$r]=null})}),!0):!1};Ts.unstable_batchedUpdates=ch;Ts.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!zc(r))throw Error(Z(200));if(e==null||e._reactInternals===void 0)throw Error(Z(38));return Uc(e,t,r,!1,n)};Ts.version="18.3.1-next-f1338f8080-20240426";function Hp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Hp)}catch(e){console.error(e)}}Hp(),Hg.exports=Ts;var Bp=Hg.exports,Z0=Bp;Jd.createRoot=Z0.createRoot,Jd.hydrateRoot=Z0.hydrateRoot;var pi=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},h1={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},en,wm,vg,f1=(vg=class{constructor(){be(this,en,h1);be(this,wm,!1)}setTimeoutProvider(e){ie(this,en,e)}setTimeout(e,t){return C(this,en).setTimeout(e,t)}clearTimeout(e){C(this,en).clearTimeout(e)}setInterval(e,t){return C(this,en).setInterval(e,t)}clearInterval(e){C(this,en).clearInterval(e)}},en=new WeakMap,wm=new WeakMap,vg),Bn=new f1;function g1(e){setTimeout(e,0)}var ca=typeof window>"u"||"Deno"in globalThis;function cs(){}function x1(e,t){return typeof e=="function"?e(t):e}function qu(e){return typeof e=="number"&&e>=0&&e!==1/0}function qp(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Nn(e,t){return typeof e=="function"?e(t):e}function Fs(e,t){return typeof e=="function"?e(t):e}function ef(e,t){const{type:r="all",exact:n,fetchStatus:a,predicate:i,queryKey:l,stale:o}=e;if(l){if(n){if(t.queryHash!==ph(l,t.options))return!1}else if(!Sl(t.queryKey,l))return!1}if(r!=="all"){const c=t.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof o=="boolean"&&t.isStale()!==o||a&&a!==t.state.fetchStatus||i&&!i(t))}function tf(e,t){const{exact:r,status:n,predicate:a,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(r){if(da(t.options.mutationKey)!==da(i))return!1}else if(!Sl(t.options.mutationKey,i))return!1}return!(n&&t.state.status!==n||a&&!a(t))}function ph(e,t){return((t==null?void 0:t.queryKeyHashFn)||da)(e)}function da(e){return JSON.stringify(e,(t,r)=>Wu(r)?Object.keys(r).sort().reduce((n,a)=>(n[a]=r[a],n),{}):r)}function Sl(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>Sl(e[r],t[r])):!1}var p1=Object.prototype.hasOwnProperty;function Wp(e,t){if(e===t)return e;const r=sf(e)&&sf(t);if(!r&&!(Wu(e)&&Wu(t)))return t;const a=(r?e:Object.keys(e)).length,i=r?t:Object.keys(t),l=i.length,o=r?new Array(l):{};let c=0;for(let d=0;d<l;d++){const m=r?d:i[d],h=e[m],p=t[m];if(h===p){o[m]=h,(r?d<a:p1.call(e,m))&&c++;continue}if(h===null||p===null||typeof h!="object"||typeof p!="object"){o[m]=p;continue}const j=Wp(h,p);o[m]=j,j===h&&c++}return a===l&&c===a?e:o}function gc(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function sf(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Wu(e){if(!rf(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!rf(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function rf(e){return Object.prototype.toString.call(e)==="[object Object]"}function y1(e){return new Promise(t=>{Bn.setTimeout(t,e)})}function Ku(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?Wp(e,t):t}function v1(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function b1(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var yh=Symbol();function Kp(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===yh?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function Qp(e,t){return typeof e=="function"?e(...t):!!e}var Kn,tn,Ua,bg,j1=(bg=class extends pi{constructor(){super();be(this,Kn);be(this,tn);be(this,Ua);ie(this,Ua,t=>{if(!ca&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){C(this,tn)||this.setEventListener(C(this,Ua))}onUnsubscribe(){var t;this.hasListeners()||((t=C(this,tn))==null||t.call(this),ie(this,tn,void 0))}setEventListener(t){var r;ie(this,Ua,t),(r=C(this,tn))==null||r.call(this),ie(this,tn,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){C(this,Kn)!==t&&(ie(this,Kn,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof C(this,Kn)=="boolean"?C(this,Kn):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Kn=new WeakMap,tn=new WeakMap,Ua=new WeakMap,bg),vh=new j1;function Qu(){let e,t;const r=new Promise((a,i)=>{e=a,t=i});r.status="pending",r.catch(()=>{});function n(a){Object.assign(r,a),delete r.resolve,delete r.reject}return r.resolve=a=>{n({status:"fulfilled",value:a}),e(a)},r.reject=a=>{n({status:"rejected",reason:a}),t(a)},r}var w1=g1;function N1(){let e=[],t=0,r=o=>{o()},n=o=>{o()},a=w1;const i=o=>{t?e.push(o):a(()=>{r(o)})},l=()=>{const o=e;e=[],o.length&&a(()=>{n(()=>{o.forEach(c=>{r(c)})})})};return{batch:o=>{let c;t++;try{c=o()}finally{t--,t||l()}return c},batchCalls:o=>(...c)=>{i(()=>{o(...c)})},schedule:i,setNotifyFunction:o=>{r=o},setBatchNotifyFunction:o=>{n=o},setScheduler:o=>{a=o}}}var Tt=N1(),Ha,sn,Ba,jg,k1=(jg=class extends pi{constructor(){super();be(this,Ha,!0);be(this,sn);be(this,Ba);ie(this,Ba,t=>{if(!ca&&window.addEventListener){const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){C(this,sn)||this.setEventListener(C(this,Ba))}onUnsubscribe(){var t;this.hasListeners()||((t=C(this,sn))==null||t.call(this),ie(this,sn,void 0))}setEventListener(t){var r;ie(this,Ba,t),(r=C(this,sn))==null||r.call(this),ie(this,sn,t(this.setOnline.bind(this)))}setOnline(t){C(this,Ha)!==t&&(ie(this,Ha,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return C(this,Ha)}},Ha=new WeakMap,sn=new WeakMap,Ba=new WeakMap,jg),xc=new k1;function S1(e){return Math.min(1e3*2**e,3e4)}function Vp(e){return(e??"online")==="online"?xc.isOnline():!0}var Vu=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function Gp(e){let t=!1,r=0,n;const a=Qu(),i=()=>a.status!=="pending",l=g=>{var y;if(!i()){const v=new Vu(g);p(v),(y=e.onCancel)==null||y.call(e,v)}},o=()=>{t=!0},c=()=>{t=!1},d=()=>vh.isFocused()&&(e.networkMode==="always"||xc.isOnline())&&e.canRun(),m=()=>Vp(e.networkMode)&&e.canRun(),h=g=>{i()||(n==null||n(),a.resolve(g))},p=g=>{i()||(n==null||n(),a.reject(g))},j=()=>new Promise(g=>{var y;n=v=>{(i()||d())&&g(v)},(y=e.onPause)==null||y.call(e)}).then(()=>{var g;n=void 0,i()||(g=e.onContinue)==null||g.call(e)}),f=()=>{if(i())return;let g;const y=r===0?e.initialPromise:void 0;try{g=y??e.fn()}catch(v){g=Promise.reject(v)}Promise.resolve(g).then(h).catch(v=>{var E;if(i())return;const x=e.retry??(ca?0:3),b=e.retryDelay??S1,w=typeof b=="function"?b(r,v):b,N=x===!0||typeof x=="number"&&r<x||typeof x=="function"&&x(r,v);if(t||!N){p(v);return}r++,(E=e.onFail)==null||E.call(e,r,v),y1(w).then(()=>d()?void 0:j()).then(()=>{t?p(v):f()})})};return{promise:a,status:()=>a.status,cancel:l,continue:()=>(n==null||n(),a),cancelRetry:o,continueRetry:c,canStart:m,start:()=>(m()?f():j().then(f),a)}}var Qn,wg,Yp=(wg=class{constructor(){be(this,Qn)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),qu(this.gcTime)&&ie(this,Qn,Bn.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(ca?1/0:5*60*1e3))}clearGcTimeout(){C(this,Qn)&&(Bn.clearTimeout(C(this,Qn)),ie(this,Qn,void 0))}},Qn=new WeakMap,wg),Vn,qa,Ls,Gn,Pt,Tl,Yn,Qs,br,Ng,C1=(Ng=class extends Yp{constructor(t){super();be(this,Qs);be(this,Vn);be(this,qa);be(this,Ls);be(this,Gn);be(this,Pt);be(this,Tl);be(this,Yn);ie(this,Yn,!1),ie(this,Tl,t.defaultOptions),this.setOptions(t.options),this.observers=[],ie(this,Gn,t.client),ie(this,Ls,C(this,Gn).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,ie(this,Vn,af(this.options)),this.state=t.state??C(this,Vn),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=C(this,Pt))==null?void 0:t.promise}setOptions(t){if(this.options={...C(this,Tl),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=af(this.options);r.data!==void 0&&(this.setState(nf(r.data,r.dataUpdatedAt)),ie(this,Vn,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&C(this,Ls).remove(this)}setData(t,r){const n=Ku(this.state.data,t,this.options);return Ue(this,Qs,br).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(t,r){Ue(this,Qs,br).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var n,a;const r=(n=C(this,Pt))==null?void 0:n.promise;return(a=C(this,Pt))==null||a.cancel(t),r?r.then(cs).catch(cs):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(C(this,Vn))}isActive(){return this.observers.some(t=>Fs(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===yh||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Nn(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!qp(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=C(this,Pt))==null||r.continue()}onOnline(){var r;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=C(this,Pt))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),C(this,Ls).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(C(this,Pt)&&(C(this,Yn)?C(this,Pt).cancel({revert:!0}):C(this,Pt).cancelRetry()),this.scheduleGc()),C(this,Ls).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Ue(this,Qs,br).call(this,{type:"invalidate"})}async fetch(t,r){var c,d,m,h,p,j,f,g,y,v,x,b;if(this.state.fetchStatus!=="idle"&&((c=C(this,Pt))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(C(this,Pt))return C(this,Pt).continueRetry(),C(this,Pt).promise}if(t&&this.setOptions(t),!this.options.queryFn){const w=this.observers.find(N=>N.options.queryFn);w&&this.setOptions(w.options)}const n=new AbortController,a=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(ie(this,Yn,!0),n.signal)})},i=()=>{const w=Kp(this.options,r),E=(()=>{const L={client:C(this,Gn),queryKey:this.queryKey,meta:this.meta};return a(L),L})();return ie(this,Yn,!1),this.options.persister?this.options.persister(w,E,this):w(E)},o=(()=>{const w={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:C(this,Gn),state:this.state,fetchFn:i};return a(w),w})();(d=this.options.behavior)==null||d.onFetch(o,this),ie(this,qa,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((m=o.fetchOptions)==null?void 0:m.meta))&&Ue(this,Qs,br).call(this,{type:"fetch",meta:(h=o.fetchOptions)==null?void 0:h.meta}),ie(this,Pt,Gp({initialPromise:r==null?void 0:r.initialPromise,fn:o.fetchFn,onCancel:w=>{w instanceof Vu&&w.revert&&this.setState({...C(this,qa),fetchStatus:"idle"}),n.abort()},onFail:(w,N)=>{Ue(this,Qs,br).call(this,{type:"failed",failureCount:w,error:N})},onPause:()=>{Ue(this,Qs,br).call(this,{type:"pause"})},onContinue:()=>{Ue(this,Qs,br).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0}));try{const w=await C(this,Pt).start();if(w===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(w),(j=(p=C(this,Ls).config).onSuccess)==null||j.call(p,w,this),(g=(f=C(this,Ls).config).onSettled)==null||g.call(f,w,this.state.error,this),w}catch(w){if(w instanceof Vu){if(w.silent)return C(this,Pt).promise;if(w.revert){if(this.state.data===void 0)throw w;return this.state.data}}throw Ue(this,Qs,br).call(this,{type:"error",error:w}),(v=(y=C(this,Ls).config).onError)==null||v.call(y,w,this),(b=(x=C(this,Ls).config).onSettled)==null||b.call(x,this.state.data,w,this),w}finally{this.scheduleGc()}}},Vn=new WeakMap,qa=new WeakMap,Ls=new WeakMap,Gn=new WeakMap,Pt=new WeakMap,Tl=new WeakMap,Yn=new WeakMap,Qs=new WeakSet,br=function(t){const r=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...Jp(n.data,this.options),fetchMeta:t.meta??null};case"success":const a={...n,...nf(t.data,t.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return ie(this,qa,t.manual?a:void 0),a;case"error":const i=t.error;return{...n,error:i,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=r(this.state),Tt.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),C(this,Ls).notify({query:this,type:"updated",action:t})})},Ng);function Jp(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Vp(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function nf(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function af(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var fs,Ke,Al,is,Jn,Wa,Nr,rn,Rl,Ka,Qa,Xn,Zn,nn,Va,Xe,Wi,Gu,Yu,Ju,Xu,Zu,em,tm,Xp,kg,_1=(kg=class extends pi{constructor(t,r){super();be(this,Xe);be(this,fs);be(this,Ke);be(this,Al);be(this,is);be(this,Jn);be(this,Wa);be(this,Nr);be(this,rn);be(this,Rl);be(this,Ka);be(this,Qa);be(this,Xn);be(this,Zn);be(this,nn);be(this,Va,new Set);this.options=r,ie(this,fs,t),ie(this,rn,null),ie(this,Nr,Qu()),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(C(this,Ke).addObserver(this),lf(C(this,Ke),this.options)?Ue(this,Xe,Wi).call(this):this.updateResult(),Ue(this,Xe,Xu).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return sm(C(this,Ke),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return sm(C(this,Ke),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Ue(this,Xe,Zu).call(this),Ue(this,Xe,em).call(this),C(this,Ke).removeObserver(this)}setOptions(t){const r=this.options,n=C(this,Ke);if(this.options=C(this,fs).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Fs(this.options.enabled,C(this,Ke))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Ue(this,Xe,tm).call(this),C(this,Ke).setOptions(this.options),r._defaulted&&!gc(this.options,r)&&C(this,fs).getQueryCache().notify({type:"observerOptionsUpdated",query:C(this,Ke),observer:this});const a=this.hasListeners();a&&of(C(this,Ke),n,this.options,r)&&Ue(this,Xe,Wi).call(this),this.updateResult(),a&&(C(this,Ke)!==n||Fs(this.options.enabled,C(this,Ke))!==Fs(r.enabled,C(this,Ke))||Nn(this.options.staleTime,C(this,Ke))!==Nn(r.staleTime,C(this,Ke)))&&Ue(this,Xe,Gu).call(this);const i=Ue(this,Xe,Yu).call(this);a&&(C(this,Ke)!==n||Fs(this.options.enabled,C(this,Ke))!==Fs(r.enabled,C(this,Ke))||i!==C(this,nn))&&Ue(this,Xe,Ju).call(this,i)}getOptimisticResult(t){const r=C(this,fs).getQueryCache().build(C(this,fs),t),n=this.createResult(r,t);return M1(this,n)&&(ie(this,is,n),ie(this,Wa,this.options),ie(this,Jn,C(this,Ke).state)),n}getCurrentResult(){return C(this,is)}trackResult(t,r){return new Proxy(t,{get:(n,a)=>(this.trackProp(a),r==null||r(a),a==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&C(this,Nr).status==="pending"&&C(this,Nr).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,a))})}trackProp(t){C(this,Va).add(t)}getCurrentQuery(){return C(this,Ke)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const r=C(this,fs).defaultQueryOptions(t),n=C(this,fs).getQueryCache().build(C(this,fs),r);return n.fetch().then(()=>this.createResult(n,r))}fetch(t){return Ue(this,Xe,Wi).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),C(this,is)))}createResult(t,r){var ee;const n=C(this,Ke),a=this.options,i=C(this,is),l=C(this,Jn),o=C(this,Wa),d=t!==n?t.state:C(this,Al),{state:m}=t;let h={...m},p=!1,j;if(r._optimisticResults){const H=this.hasListeners(),Q=!H&&lf(t,r),ae=H&&of(t,n,r,a);(Q||ae)&&(h={...h,...Jp(m.data,t.options)}),r._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:f,errorUpdatedAt:g,status:y}=h;j=h.data;let v=!1;if(r.placeholderData!==void 0&&j===void 0&&y==="pending"){let H;i!=null&&i.isPlaceholderData&&r.placeholderData===(o==null?void 0:o.placeholderData)?(H=i.data,v=!0):H=typeof r.placeholderData=="function"?r.placeholderData((ee=C(this,Qa))==null?void 0:ee.state.data,C(this,Qa)):r.placeholderData,H!==void 0&&(y="success",j=Ku(i==null?void 0:i.data,H,r),p=!0)}if(r.select&&j!==void 0&&!v)if(i&&j===(l==null?void 0:l.data)&&r.select===C(this,Rl))j=C(this,Ka);else try{ie(this,Rl,r.select),j=r.select(j),j=Ku(i==null?void 0:i.data,j,r),ie(this,Ka,j),ie(this,rn,null)}catch(H){ie(this,rn,H)}C(this,rn)&&(f=C(this,rn),j=C(this,Ka),g=Date.now(),y="error");const x=h.fetchStatus==="fetching",b=y==="pending",w=y==="error",N=b&&x,E=j!==void 0,P={status:y,fetchStatus:h.fetchStatus,isPending:b,isSuccess:y==="success",isError:w,isInitialLoading:N,isLoading:N,data:j,dataUpdatedAt:h.dataUpdatedAt,error:f,errorUpdatedAt:g,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>d.dataUpdateCount||h.errorUpdateCount>d.errorUpdateCount,isFetching:x,isRefetching:x&&!b,isLoadingError:w&&!E,isPaused:h.fetchStatus==="paused",isPlaceholderData:p,isRefetchError:w&&E,isStale:bh(t,r),refetch:this.refetch,promise:C(this,Nr),isEnabled:Fs(r.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const H=ne=>{P.status==="error"?ne.reject(P.error):P.data!==void 0&&ne.resolve(P.data)},Q=()=>{const ne=ie(this,Nr,P.promise=Qu());H(ne)},ae=C(this,Nr);switch(ae.status){case"pending":t.queryHash===n.queryHash&&H(ae);break;case"fulfilled":(P.status==="error"||P.data!==ae.value)&&Q();break;case"rejected":(P.status!=="error"||P.error!==ae.reason)&&Q();break}}return P}updateResult(){const t=C(this,is),r=this.createResult(C(this,Ke),this.options);if(ie(this,Jn,C(this,Ke).state),ie(this,Wa,this.options),C(this,Jn).data!==void 0&&ie(this,Qa,C(this,Ke)),gc(r,t))return;ie(this,is,r);const n=()=>{if(!t)return!0;const{notifyOnChangeProps:a}=this.options,i=typeof a=="function"?a():a;if(i==="all"||!i&&!C(this,Va).size)return!0;const l=new Set(i??C(this,Va));return this.options.throwOnError&&l.add("error"),Object.keys(C(this,is)).some(o=>{const c=o;return C(this,is)[c]!==t[c]&&l.has(c)})};Ue(this,Xe,Xp).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Ue(this,Xe,Xu).call(this)}},fs=new WeakMap,Ke=new WeakMap,Al=new WeakMap,is=new WeakMap,Jn=new WeakMap,Wa=new WeakMap,Nr=new WeakMap,rn=new WeakMap,Rl=new WeakMap,Ka=new WeakMap,Qa=new WeakMap,Xn=new WeakMap,Zn=new WeakMap,nn=new WeakMap,Va=new WeakMap,Xe=new WeakSet,Wi=function(t){Ue(this,Xe,tm).call(this);let r=C(this,Ke).fetch(this.options,t);return t!=null&&t.throwOnError||(r=r.catch(cs)),r},Gu=function(){Ue(this,Xe,Zu).call(this);const t=Nn(this.options.staleTime,C(this,Ke));if(ca||C(this,is).isStale||!qu(t))return;const n=qp(C(this,is).dataUpdatedAt,t)+1;ie(this,Xn,Bn.setTimeout(()=>{C(this,is).isStale||this.updateResult()},n))},Yu=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(C(this,Ke)):this.options.refetchInterval)??!1},Ju=function(t){Ue(this,Xe,em).call(this),ie(this,nn,t),!(ca||Fs(this.options.enabled,C(this,Ke))===!1||!qu(C(this,nn))||C(this,nn)===0)&&ie(this,Zn,Bn.setInterval(()=>{(this.options.refetchIntervalInBackground||vh.isFocused())&&Ue(this,Xe,Wi).call(this)},C(this,nn)))},Xu=function(){Ue(this,Xe,Gu).call(this),Ue(this,Xe,Ju).call(this,Ue(this,Xe,Yu).call(this))},Zu=function(){C(this,Xn)&&(Bn.clearTimeout(C(this,Xn)),ie(this,Xn,void 0))},em=function(){C(this,Zn)&&(Bn.clearInterval(C(this,Zn)),ie(this,Zn,void 0))},tm=function(){const t=C(this,fs).getQueryCache().build(C(this,fs),this.options);if(t===C(this,Ke))return;const r=C(this,Ke);ie(this,Ke,t),ie(this,Al,t.state),this.hasListeners()&&(r==null||r.removeObserver(this),t.addObserver(this))},Xp=function(t){Tt.batch(()=>{t.listeners&&this.listeners.forEach(r=>{r(C(this,is))}),C(this,fs).getQueryCache().notify({query:C(this,Ke),type:"observerResultsUpdated"})})},kg);function E1(e,t){return Fs(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function lf(e,t){return E1(e,t)||e.state.data!==void 0&&sm(e,t,t.refetchOnMount)}function sm(e,t,r){if(Fs(t.enabled,e)!==!1&&Nn(t.staleTime,e)!=="static"){const n=typeof r=="function"?r(e):r;return n==="always"||n!==!1&&bh(e,t)}return!1}function of(e,t,r,n){return(e!==t||Fs(n.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&bh(e,r)}function bh(e,t){return Fs(t.enabled,e)!==!1&&e.isStaleByTime(Nn(t.staleTime,e))}function M1(e,t){return!gc(e.getCurrentResult(),t)}function cf(e){return{onFetch:(t,r)=>{var m,h,p,j,f;const n=t.options,a=(p=(h=(m=t.fetchOptions)==null?void 0:m.meta)==null?void 0:h.fetchMore)==null?void 0:p.direction,i=((j=t.state.data)==null?void 0:j.pages)||[],l=((f=t.state.data)==null?void 0:f.pageParams)||[];let o={pages:[],pageParams:[]},c=0;const d=async()=>{let g=!1;const y=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(t.signal.aborted?g=!0:t.signal.addEventListener("abort",()=>{g=!0}),t.signal)})},v=Kp(t.options,t.fetchOptions),x=async(b,w,N)=>{if(g)return Promise.reject();if(w==null&&b.pages.length)return Promise.resolve(b);const L=(()=>{const Q={client:t.client,queryKey:t.queryKey,pageParam:w,direction:N?"backward":"forward",meta:t.options.meta};return y(Q),Q})(),P=await v(L),{maxPages:ee}=t.options,H=N?b1:v1;return{pages:H(b.pages,P,ee),pageParams:H(b.pageParams,w,ee)}};if(a&&i.length){const b=a==="backward",w=b?T1:df,N={pages:i,pageParams:l},E=w(n,N);o=await x(N,E,b)}else{const b=e??i.length;do{const w=c===0?l[0]??n.initialPageParam:df(n,o);if(c>0&&w==null)break;o=await x(o,w),c++}while(c<b)}return o};t.options.persister?t.fetchFn=()=>{var g,y;return(y=(g=t.options).persister)==null?void 0:y.call(g,d,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=d}}}function df(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function T1(e,{pages:t,pageParams:r}){var n;return t.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,t[0],t,r[0],r):void 0}var Pl,cr,ls,ea,dr,Vr,Sg,A1=(Sg=class extends Yp{constructor(t){super();be(this,dr);be(this,Pl);be(this,cr);be(this,ls);be(this,ea);ie(this,Pl,t.client),this.mutationId=t.mutationId,ie(this,ls,t.mutationCache),ie(this,cr,[]),this.state=t.state||Zp(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){C(this,cr).includes(t)||(C(this,cr).push(t),this.clearGcTimeout(),C(this,ls).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){ie(this,cr,C(this,cr).filter(r=>r!==t)),this.scheduleGc(),C(this,ls).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){C(this,cr).length||(this.state.status==="pending"?this.scheduleGc():C(this,ls).remove(this))}continue(){var t;return((t=C(this,ea))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var l,o,c,d,m,h,p,j,f,g,y,v,x,b,w,N,E,L,P,ee;const r=()=>{Ue(this,dr,Vr).call(this,{type:"continue"})},n={client:C(this,Pl),meta:this.options.meta,mutationKey:this.options.mutationKey};ie(this,ea,Gp({fn:()=>this.options.mutationFn?this.options.mutationFn(t,n):Promise.reject(new Error("No mutationFn found")),onFail:(H,Q)=>{Ue(this,dr,Vr).call(this,{type:"failed",failureCount:H,error:Q})},onPause:()=>{Ue(this,dr,Vr).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>C(this,ls).canRun(this)}));const a=this.state.status==="pending",i=!C(this,ea).canStart();try{if(a)r();else{Ue(this,dr,Vr).call(this,{type:"pending",variables:t,isPaused:i}),await((o=(l=C(this,ls).config).onMutate)==null?void 0:o.call(l,t,this,n));const Q=await((d=(c=this.options).onMutate)==null?void 0:d.call(c,t,n));Q!==this.state.context&&Ue(this,dr,Vr).call(this,{type:"pending",context:Q,variables:t,isPaused:i})}const H=await C(this,ea).start();return await((h=(m=C(this,ls).config).onSuccess)==null?void 0:h.call(m,H,t,this.state.context,this,n)),await((j=(p=this.options).onSuccess)==null?void 0:j.call(p,H,t,this.state.context,n)),await((g=(f=C(this,ls).config).onSettled)==null?void 0:g.call(f,H,null,this.state.variables,this.state.context,this,n)),await((v=(y=this.options).onSettled)==null?void 0:v.call(y,H,null,t,this.state.context,n)),Ue(this,dr,Vr).call(this,{type:"success",data:H}),H}catch(H){try{throw await((b=(x=C(this,ls).config).onError)==null?void 0:b.call(x,H,t,this.state.context,this,n)),await((N=(w=this.options).onError)==null?void 0:N.call(w,H,t,this.state.context,n)),await((L=(E=C(this,ls).config).onSettled)==null?void 0:L.call(E,void 0,H,this.state.variables,this.state.context,this,n)),await((ee=(P=this.options).onSettled)==null?void 0:ee.call(P,void 0,H,t,this.state.context,n)),H}finally{Ue(this,dr,Vr).call(this,{type:"error",error:H})}}finally{C(this,ls).runNext(this)}}},Pl=new WeakMap,cr=new WeakMap,ls=new WeakMap,ea=new WeakMap,dr=new WeakSet,Vr=function(t){const r=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Tt.batch(()=>{C(this,cr).forEach(n=>{n.onMutationUpdate(t)}),C(this,ls).notify({mutation:this,type:"updated",action:t})})},Sg);function Zp(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var kr,Vs,Ll,Cg,R1=(Cg=class extends pi{constructor(t={}){super();be(this,kr);be(this,Vs);be(this,Ll);this.config=t,ie(this,kr,new Set),ie(this,Vs,new Map),ie(this,Ll,0)}build(t,r,n){const a=new A1({client:t,mutationCache:this,mutationId:++Xl(this,Ll)._,options:t.defaultMutationOptions(r),state:n});return this.add(a),a}add(t){C(this,kr).add(t);const r=po(t);if(typeof r=="string"){const n=C(this,Vs).get(r);n?n.push(t):C(this,Vs).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(C(this,kr).delete(t)){const r=po(t);if(typeof r=="string"){const n=C(this,Vs).get(r);if(n)if(n.length>1){const a=n.indexOf(t);a!==-1&&n.splice(a,1)}else n[0]===t&&C(this,Vs).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=po(t);if(typeof r=="string"){const n=C(this,Vs).get(r),a=n==null?void 0:n.find(i=>i.state.status==="pending");return!a||a===t}else return!0}runNext(t){var n;const r=po(t);if(typeof r=="string"){const a=(n=C(this,Vs).get(r))==null?void 0:n.find(i=>i!==t&&i.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Tt.batch(()=>{C(this,kr).forEach(t=>{this.notify({type:"removed",mutation:t})}),C(this,kr).clear(),C(this,Vs).clear()})}getAll(){return Array.from(C(this,kr))}find(t){const r={exact:!0,...t};return this.getAll().find(n=>tf(r,n))}findAll(t={}){return this.getAll().filter(r=>tf(t,r))}notify(t){Tt.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return Tt.batch(()=>Promise.all(t.map(r=>r.continue().catch(cs))))}},kr=new WeakMap,Vs=new WeakMap,Ll=new WeakMap,Cg);function po(e){var t;return(t=e.options.scope)==null?void 0:t.id}var Sr,an,gs,Cr,Lr,Oo,rm,_g,P1=(_g=class extends pi{constructor(r,n){super();be(this,Lr);be(this,Sr);be(this,an);be(this,gs);be(this,Cr);ie(this,Sr,r),this.setOptions(n),this.bindMethods(),Ue(this,Lr,Oo).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var a;const n=this.options;this.options=C(this,Sr).defaultMutationOptions(r),gc(this.options,n)||C(this,Sr).getMutationCache().notify({type:"observerOptionsUpdated",mutation:C(this,gs),observer:this}),n!=null&&n.mutationKey&&this.options.mutationKey&&da(n.mutationKey)!==da(this.options.mutationKey)?this.reset():((a=C(this,gs))==null?void 0:a.state.status)==="pending"&&C(this,gs).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=C(this,gs))==null||r.removeObserver(this)}onMutationUpdate(r){Ue(this,Lr,Oo).call(this),Ue(this,Lr,rm).call(this,r)}getCurrentResult(){return C(this,an)}reset(){var r;(r=C(this,gs))==null||r.removeObserver(this),ie(this,gs,void 0),Ue(this,Lr,Oo).call(this),Ue(this,Lr,rm).call(this)}mutate(r,n){var a;return ie(this,Cr,n),(a=C(this,gs))==null||a.removeObserver(this),ie(this,gs,C(this,Sr).getMutationCache().build(C(this,Sr),this.options)),C(this,gs).addObserver(this),C(this,gs).execute(r)}},Sr=new WeakMap,an=new WeakMap,gs=new WeakMap,Cr=new WeakMap,Lr=new WeakSet,Oo=function(){var n;const r=((n=C(this,gs))==null?void 0:n.state)??Zp();ie(this,an,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},rm=function(r){Tt.batch(()=>{var n,a,i,l,o,c,d,m;if(C(this,Cr)&&this.hasListeners()){const h=C(this,an).variables,p=C(this,an).context,j={client:C(this,Sr),meta:this.options.meta,mutationKey:this.options.mutationKey};(r==null?void 0:r.type)==="success"?((a=(n=C(this,Cr)).onSuccess)==null||a.call(n,r.data,h,p,j),(l=(i=C(this,Cr)).onSettled)==null||l.call(i,r.data,null,h,p,j)):(r==null?void 0:r.type)==="error"&&((c=(o=C(this,Cr)).onError)==null||c.call(o,r.error,h,p,j),(m=(d=C(this,Cr)).onSettled)==null||m.call(d,void 0,r.error,h,p,j))}this.listeners.forEach(h=>{h(C(this,an))})})},_g),ur,Eg,L1=(Eg=class extends pi{constructor(t={}){super();be(this,ur);this.config=t,ie(this,ur,new Map)}build(t,r,n){const a=r.queryKey,i=r.queryHash??ph(a,r);let l=this.get(i);return l||(l=new C1({client:t,queryKey:a,queryHash:i,options:t.defaultQueryOptions(r),state:n,defaultOptions:t.getQueryDefaults(a)}),this.add(l)),l}add(t){C(this,ur).has(t.queryHash)||(C(this,ur).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=C(this,ur).get(t.queryHash);r&&(t.destroy(),r===t&&C(this,ur).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Tt.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return C(this,ur).get(t)}getAll(){return[...C(this,ur).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(n=>ef(r,n))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(n=>ef(t,n)):r}notify(t){Tt.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){Tt.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Tt.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},ur=new WeakMap,Eg),pt,ln,on,Ga,Ya,cn,Ja,Xa,Mg,F1=(Mg=class{constructor(e={}){be(this,pt);be(this,ln);be(this,on);be(this,Ga);be(this,Ya);be(this,cn);be(this,Ja);be(this,Xa);ie(this,pt,e.queryCache||new L1),ie(this,ln,e.mutationCache||new R1),ie(this,on,e.defaultOptions||{}),ie(this,Ga,new Map),ie(this,Ya,new Map),ie(this,cn,0)}mount(){Xl(this,cn)._++,C(this,cn)===1&&(ie(this,Ja,vh.subscribe(async e=>{e&&(await this.resumePausedMutations(),C(this,pt).onFocus())})),ie(this,Xa,xc.subscribe(async e=>{e&&(await this.resumePausedMutations(),C(this,pt).onOnline())})))}unmount(){var e,t;Xl(this,cn)._--,C(this,cn)===0&&((e=C(this,Ja))==null||e.call(this),ie(this,Ja,void 0),(t=C(this,Xa))==null||t.call(this),ie(this,Xa,void 0))}isFetching(e){return C(this,pt).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return C(this,ln).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=C(this,pt).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=C(this,pt).build(this,t),n=r.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(Nn(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return C(this,pt).findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),a=C(this,pt).get(n.queryHash),i=a==null?void 0:a.state.data,l=x1(t,i);if(l!==void 0)return C(this,pt).build(this,n).setData(l,{...r,manual:!0})}setQueriesData(e,t,r){return Tt.batch(()=>C(this,pt).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=C(this,pt).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=C(this,pt);Tt.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=C(this,pt);return Tt.batch(()=>(r.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},n=Tt.batch(()=>C(this,pt).findAll(e).map(a=>a.cancel(r)));return Promise.all(n).then(cs).catch(cs)}invalidateQueries(e,t={}){return Tt.batch(()=>(C(this,pt).findAll(e).forEach(r=>{r.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},n=Tt.batch(()=>C(this,pt).findAll(e).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let i=a.fetch(void 0,r);return r.throwOnError||(i=i.catch(cs)),a.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(cs)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=C(this,pt).build(this,t);return r.isStaleByTime(Nn(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(cs).catch(cs)}fetchInfiniteQuery(e){return e.behavior=cf(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(cs).catch(cs)}ensureInfiniteQueryData(e){return e.behavior=cf(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return xc.isOnline()?C(this,ln).resumePausedMutations():Promise.resolve()}getQueryCache(){return C(this,pt)}getMutationCache(){return C(this,ln)}getDefaultOptions(){return C(this,on)}setDefaultOptions(e){ie(this,on,e)}setQueryDefaults(e,t){C(this,Ga).set(da(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...C(this,Ga).values()],r={};return t.forEach(n=>{Sl(e,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(e,t){C(this,Ya).set(da(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...C(this,Ya).values()],r={};return t.forEach(n=>{Sl(e,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...C(this,on).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=ph(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===yh&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...C(this,on).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){C(this,pt).clear(),C(this,ln).clear()}},pt=new WeakMap,ln=new WeakMap,on=new WeakMap,Ga=new WeakMap,Ya=new WeakMap,cn=new WeakMap,Ja=new WeakMap,Xa=new WeakMap,Mg),ey=u.createContext(void 0),ut=e=>{const t=u.useContext(ey);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},$1=({client:e,children:t})=>(u.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),s.jsx(ey.Provider,{value:e,children:t})),ty=u.createContext(!1),I1=()=>u.useContext(ty);ty.Provider;function O1(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var D1=u.createContext(O1()),z1=()=>u.useContext(D1),U1=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},H1=e=>{u.useEffect(()=>{e.clearReset()},[e])},B1=({result:e,errorResetBoundary:t,throwOnError:r,query:n,suspense:a})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(a&&e.data===void 0||Qp(r,[e.error,n])),q1=e=>{if(e.suspense){const r=a=>a==="static"?a:Math.max(a??1e3,1e3),n=e.staleTime;e.staleTime=typeof n=="function"?(...a)=>r(n(...a)):r(n),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},W1=(e,t)=>e.isLoading&&e.isFetching&&!t,K1=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,uf=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function Q1(e,t,r){var h,p,j,f,g;const n=I1(),a=z1(),i=ut(),l=i.defaultQueryOptions(e);(p=(h=i.getDefaultOptions().queries)==null?void 0:h._experimental_beforeQuery)==null||p.call(h,l),l._optimisticResults=n?"isRestoring":"optimistic",q1(l),U1(l,a),H1(a);const o=!i.getQueryCache().get(l.queryHash),[c]=u.useState(()=>new t(i,l)),d=c.getOptimisticResult(l),m=!n&&e.subscribed!==!1;if(u.useSyncExternalStore(u.useCallback(y=>{const v=m?c.subscribe(Tt.batchCalls(y)):cs;return c.updateResult(),v},[c,m]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),u.useEffect(()=>{c.setOptions(l)},[l,c]),K1(l,d))throw uf(l,c,a);if(B1({result:d,errorResetBoundary:a,throwOnError:l.throwOnError,query:i.getQueryCache().get(l.queryHash),suspense:l.suspense}))throw d.error;if((f=(j=i.getDefaultOptions().queries)==null?void 0:j._experimental_afterQuery)==null||f.call(j,l,d),l.experimental_prefetchInRender&&!ca&&W1(d,n)){const y=o?uf(l,c,a):(g=i.getQueryCache().get(l.queryHash))==null?void 0:g.promise;y==null||y.catch(cs).finally(()=>{c.updateResult()})}return l.notifyOnChangeProps?d:c.trackResult(d)}function me(e,t){return Q1(e,_1)}function we(e,t){const r=ut(),[n]=u.useState(()=>new P1(r,e));u.useEffect(()=>{n.setOptions(e)},[n,e]);const a=u.useSyncExternalStore(u.useCallback(l=>n.subscribe(Tt.batchCalls(l)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),i=u.useCallback((l,o)=>{n.mutate(l,o).catch(cs)},[n]);if(a.error&&Qp(n.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:i,mutateAsync:a.mutate}}/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Cl(){return Cl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Cl.apply(this,arguments)}var mn;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(mn||(mn={}));const mf="popstate";function V1(e){e===void 0&&(e={});function t(n,a){let{pathname:i,search:l,hash:o}=n.location;return nm("",{pathname:i,search:l,hash:o},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:pc(a)}return Y1(t,r,null,e)}function Nt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function jh(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function G1(){return Math.random().toString(36).substr(2,8)}function hf(e,t){return{usr:e.state,key:e.key,idx:t}}function nm(e,t,r,n){return r===void 0&&(r=null),Cl({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?yi(t):t,{state:r,key:t&&t.key||n||G1()})}function pc(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function yi(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function Y1(e,t,r,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:i=!1}=n,l=a.history,o=mn.Pop,c=null,d=m();d==null&&(d=0,l.replaceState(Cl({},l.state,{idx:d}),""));function m(){return(l.state||{idx:null}).idx}function h(){o=mn.Pop;let y=m(),v=y==null?null:y-d;d=y,c&&c({action:o,location:g.location,delta:v})}function p(y,v){o=mn.Push;let x=nm(g.location,y,v);d=m()+1;let b=hf(x,d),w=g.createHref(x);try{l.pushState(b,"",w)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;a.location.assign(w)}i&&c&&c({action:o,location:g.location,delta:1})}function j(y,v){o=mn.Replace;let x=nm(g.location,y,v);d=m();let b=hf(x,d),w=g.createHref(x);l.replaceState(b,"",w),i&&c&&c({action:o,location:g.location,delta:0})}function f(y){let v=a.location.origin!=="null"?a.location.origin:a.location.href,x=typeof y=="string"?y:pc(y);return x=x.replace(/ $/,"%20"),Nt(v,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,v)}let g={get action(){return o},get location(){return e(a,l)},listen(y){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(mf,h),c=y,()=>{a.removeEventListener(mf,h),c=null}},createHref(y){return t(a,y)},createURL:f,encodeLocation(y){let v=f(y);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:p,replace:j,go(y){return l.go(y)}};return g}var ff;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(ff||(ff={}));function J1(e,t,r){return r===void 0&&(r="/"),X1(e,t,r)}function X1(e,t,r,n){let a=typeof t=="string"?yi(t):t,i=wh(a.pathname||"/",r);if(i==null)return null;let l=sy(e);Z1(l);let o=null;for(let c=0;o==null&&c<l.length;++c){let d=uj(i);o=oj(l[c],d)}return o}function sy(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let a=(i,l,o)=>{let c={relativePath:o===void 0?i.path||"":o,caseSensitive:i.caseSensitive===!0,childrenIndex:l,route:i};c.relativePath.startsWith("/")&&(Nt(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let d=kn([n,c.relativePath]),m=r.concat(c);i.children&&i.children.length>0&&(Nt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),sy(i.children,t,m,d)),!(i.path==null&&!i.index)&&t.push({path:d,score:ij(d,i.index),routesMeta:m})};return e.forEach((i,l)=>{var o;if(i.path===""||!((o=i.path)!=null&&o.includes("?")))a(i,l);else for(let c of ry(i.path))a(i,l,c)}),t}function ry(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,a=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return a?[i,""]:[i];let l=ry(n.join("/")),o=[];return o.push(...l.map(c=>c===""?i:[i,c].join("/"))),a&&o.push(...l),o.map(c=>e.startsWith("/")&&c===""?"/":c)}function Z1(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:lj(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const ej=/^:[\w-]+$/,tj=3,sj=2,rj=1,nj=10,aj=-2,gf=e=>e==="*";function ij(e,t){let r=e.split("/"),n=r.length;return r.some(gf)&&(n+=aj),t&&(n+=sj),r.filter(a=>!gf(a)).reduce((a,i)=>a+(ej.test(i)?tj:i===""?rj:nj),n)}function lj(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function oj(e,t,r){let{routesMeta:n}=e,a={},i="/",l=[];for(let o=0;o<n.length;++o){let c=n[o],d=o===n.length-1,m=i==="/"?t:t.slice(i.length)||"/",h=cj({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},m),p=c.route;if(!h)return null;Object.assign(a,h.params),l.push({params:a,pathname:kn([i,h.pathname]),pathnameBase:xj(kn([i,h.pathnameBase])),route:p}),h.pathnameBase!=="/"&&(i=kn([i,h.pathnameBase]))}return l}function cj(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=dj(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let i=a[0],l=i.replace(/(.)\/+$/,"$1"),o=a.slice(1);return{params:n.reduce((d,m,h)=>{let{paramName:p,isOptional:j}=m;if(p==="*"){let g=o[h]||"";l=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const f=o[h];return j&&!f?d[p]=void 0:d[p]=(f||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:l,pattern:e}}function dj(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),jh(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,o,c)=>(n.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function uj(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return jh(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function wh(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}const mj=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,hj=e=>mj.test(e);function fj(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:a=""}=typeof e=="string"?yi(e):e,i;if(r)if(hj(r))i=r;else{if(r.includes("//")){let l=r;r=r.replace(/\/\/+/g,"/"),jh(!1,"Pathnames cannot have embedded double slashes - normalizing "+(l+" -> "+r))}r.startsWith("/")?i=xf(r.substring(1),"/"):i=xf(r,t)}else i=t;return{pathname:i,search:pj(n),hash:yj(a)}}function xf(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function Ad(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function gj(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Nh(e,t){let r=gj(e);return t?r.map((n,a)=>a===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function kh(e,t,r,n){n===void 0&&(n=!1);let a;typeof e=="string"?a=yi(e):(a=Cl({},e),Nt(!a.pathname||!a.pathname.includes("?"),Ad("?","pathname","search",a)),Nt(!a.pathname||!a.pathname.includes("#"),Ad("#","pathname","hash",a)),Nt(!a.search||!a.search.includes("#"),Ad("#","search","hash",a)));let i=e===""||a.pathname==="",l=i?"/":a.pathname,o;if(l==null)o=r;else{let h=t.length-1;if(!n&&l.startsWith("..")){let p=l.split("/");for(;p[0]==="..";)p.shift(),h-=1;a.pathname=p.join("/")}o=h>=0?t[h]:"/"}let c=fj(a,o),d=l&&l!=="/"&&l.endsWith("/"),m=(i||l===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(d||m)&&(c.pathname+="/"),c}const kn=e=>e.join("/").replace(/\/\/+/g,"/"),xj=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),pj=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,yj=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function vj(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const ny=["post","put","patch","delete"];new Set(ny);const bj=["get",...ny];new Set(bj);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _l(){return _l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_l.apply(this,arguments)}const Sh=u.createContext(null),jj=u.createContext(null),Rn=u.createContext(null),Hc=u.createContext(null),pr=u.createContext({outlet:null,matches:[],isDataRoute:!1}),ay=u.createContext(null);function wj(e,t){let{relative:r}=t===void 0?{}:t;vi()||Nt(!1);let{basename:n,navigator:a}=u.useContext(Rn),{hash:i,pathname:l,search:o}=oy(e,{relative:r}),c=l;return n!=="/"&&(c=l==="/"?n:kn([n,l])),a.createHref({pathname:c,search:o,hash:i})}function vi(){return u.useContext(Hc)!=null}function Pn(){return vi()||Nt(!1),u.useContext(Hc).location}function iy(e){u.useContext(Rn).static||u.useLayoutEffect(e)}function yr(){let{isDataRoute:e}=u.useContext(pr);return e?Ij():Nj()}function Nj(){vi()||Nt(!1);let e=u.useContext(Sh),{basename:t,future:r,navigator:n}=u.useContext(Rn),{matches:a}=u.useContext(pr),{pathname:i}=Pn(),l=JSON.stringify(Nh(a,r.v7_relativeSplatPath)),o=u.useRef(!1);return iy(()=>{o.current=!0}),u.useCallback(function(d,m){if(m===void 0&&(m={}),!o.current)return;if(typeof d=="number"){n.go(d);return}let h=kh(d,JSON.parse(l),i,m.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:kn([t,h.pathname])),(m.replace?n.replace:n.push)(h,m.state,m)},[t,n,l,i,e])}const kj=u.createContext(null);function Sj(e){let t=u.useContext(pr).outlet;return t&&u.createElement(kj.Provider,{value:e},t)}function ly(){let{matches:e}=u.useContext(pr),t=e[e.length-1];return t?t.params:{}}function oy(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=u.useContext(Rn),{matches:a}=u.useContext(pr),{pathname:i}=Pn(),l=JSON.stringify(Nh(a,n.v7_relativeSplatPath));return u.useMemo(()=>kh(e,JSON.parse(l),i,r==="path"),[e,l,i,r])}function Cj(e,t){return _j(e,t)}function _j(e,t,r,n){vi()||Nt(!1);let{navigator:a}=u.useContext(Rn),{matches:i}=u.useContext(pr),l=i[i.length-1],o=l?l.params:{};l&&l.pathname;let c=l?l.pathnameBase:"/";l&&l.route;let d=Pn(),m;if(t){var h;let y=typeof t=="string"?yi(t):t;c==="/"||(h=y.pathname)!=null&&h.startsWith(c)||Nt(!1),m=y}else m=d;let p=m.pathname||"/",j=p;if(c!=="/"){let y=c.replace(/^\//,"").split("/");j="/"+p.replace(/^\//,"").split("/").slice(y.length).join("/")}let f=J1(e,{pathname:j}),g=Rj(f&&f.map(y=>Object.assign({},y,{params:Object.assign({},o,y.params),pathname:kn([c,a.encodeLocation?a.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?c:kn([c,a.encodeLocation?a.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),i,r,n);return t&&g?u.createElement(Hc.Provider,{value:{location:_l({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:mn.Pop}},g):g}function Ej(){let e=$j(),t=vj(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return u.createElement(u.Fragment,null,u.createElement("h2",null,"Unexpected Application Error!"),u.createElement("h3",{style:{fontStyle:"italic"}},t),r?u.createElement("pre",{style:a},r):null,null)}const Mj=u.createElement(Ej,null);class Tj extends u.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?u.createElement(pr.Provider,{value:this.props.routeContext},u.createElement(ay.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Aj(e){let{routeContext:t,match:r,children:n}=e,a=u.useContext(Sh);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),u.createElement(pr.Provider,{value:t},n)}function Rj(e,t,r,n){var a;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let l=e,o=(a=r)==null?void 0:a.errors;if(o!=null){let m=l.findIndex(h=>h.route.id&&(o==null?void 0:o[h.route.id])!==void 0);m>=0||Nt(!1),l=l.slice(0,Math.min(l.length,m+1))}let c=!1,d=-1;if(r&&n&&n.v7_partialHydration)for(let m=0;m<l.length;m++){let h=l[m];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(d=m),h.route.id){let{loaderData:p,errors:j}=r,f=h.route.loader&&p[h.route.id]===void 0&&(!j||j[h.route.id]===void 0);if(h.route.lazy||f){c=!0,d>=0?l=l.slice(0,d+1):l=[l[0]];break}}}return l.reduceRight((m,h,p)=>{let j,f=!1,g=null,y=null;r&&(j=o&&h.route.id?o[h.route.id]:void 0,g=h.route.errorElement||Mj,c&&(d<0&&p===0?(Oj("route-fallback"),f=!0,y=null):d===p&&(f=!0,y=h.route.hydrateFallbackElement||null)));let v=t.concat(l.slice(0,p+1)),x=()=>{let b;return j?b=g:f?b=y:h.route.Component?b=u.createElement(h.route.Component,null):h.route.element?b=h.route.element:b=m,u.createElement(Aj,{match:h,routeContext:{outlet:m,matches:v,isDataRoute:r!=null},children:b})};return r&&(h.route.ErrorBoundary||h.route.errorElement||p===0)?u.createElement(Tj,{location:r.location,revalidation:r.revalidation,component:g,error:j,children:x(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):x()},null)}var cy=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(cy||{}),dy=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(dy||{});function Pj(e){let t=u.useContext(Sh);return t||Nt(!1),t}function Lj(e){let t=u.useContext(jj);return t||Nt(!1),t}function Fj(e){let t=u.useContext(pr);return t||Nt(!1),t}function uy(e){let t=Fj(),r=t.matches[t.matches.length-1];return r.route.id||Nt(!1),r.route.id}function $j(){var e;let t=u.useContext(ay),r=Lj(),n=uy();return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function Ij(){let{router:e}=Pj(cy.UseNavigateStable),t=uy(dy.UseNavigateStable),r=u.useRef(!1);return iy(()=>{r.current=!0}),u.useCallback(function(a,i){i===void 0&&(i={}),r.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,_l({fromRouteId:t},i)))},[e,t])}const pf={};function Oj(e,t,r){pf[e]||(pf[e]=!0)}function Dj(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function my(e){let{to:t,replace:r,state:n,relative:a}=e;vi()||Nt(!1);let{future:i,static:l}=u.useContext(Rn),{matches:o}=u.useContext(pr),{pathname:c}=Pn(),d=yr(),m=kh(t,Nh(o,i.v7_relativeSplatPath),c,a==="path"),h=JSON.stringify(m);return u.useEffect(()=>d(JSON.parse(h),{replace:r,state:n,relative:a}),[d,h,a,r,n]),null}function zj(e){return Sj(e.context)}function Je(e){Nt(!1)}function Uj(e){let{basename:t="/",children:r=null,location:n,navigationType:a=mn.Pop,navigator:i,static:l=!1,future:o}=e;vi()&&Nt(!1);let c=t.replace(/^\/*/,"/"),d=u.useMemo(()=>({basename:c,navigator:i,static:l,future:_l({v7_relativeSplatPath:!1},o)}),[c,o,i,l]);typeof n=="string"&&(n=yi(n));let{pathname:m="/",search:h="",hash:p="",state:j=null,key:f="default"}=n,g=u.useMemo(()=>{let y=wh(m,c);return y==null?null:{location:{pathname:y,search:h,hash:p,state:j,key:f},navigationType:a}},[c,m,h,p,j,f,a]);return g==null?null:u.createElement(Rn.Provider,{value:d},u.createElement(Hc.Provider,{children:r,value:g}))}function Hj(e){let{children:t,location:r}=e;return Cj(am(t),r)}new Promise(()=>{});function am(e,t){t===void 0&&(t=[]);let r=[];return u.Children.forEach(e,(n,a)=>{if(!u.isValidElement(n))return;let i=[...t,a];if(n.type===u.Fragment){r.push.apply(r,am(n.props.children,i));return}n.type!==Je&&Nt(!1),!n.props.index||!n.props.children||Nt(!1);let l={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(l.children=am(n.props.children,i)),r.push(l)}),r}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function im(){return im=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},im.apply(this,arguments)}function Bj(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function qj(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Wj(e,t){return e.button===0&&(!t||t==="_self")&&!qj(e)}function lm(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(a=>[r,a]):[[r,n]])},[]))}function Kj(e,t){let r=lm(e);return t&&t.forEach((n,a)=>{r.has(a)||t.getAll(a).forEach(i=>{r.append(a,i)})}),r}const Qj=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Vj="6";try{window.__reactRouterVersion=Vj}catch{}const Gj="startTransition",yf=Za[Gj];function Yj(e){let{basename:t,children:r,future:n,window:a}=e,i=u.useRef();i.current==null&&(i.current=V1({window:a,v5Compat:!0}));let l=i.current,[o,c]=u.useState({action:l.action,location:l.location}),{v7_startTransition:d}=n||{},m=u.useCallback(h=>{d&&yf?yf(()=>c(h)):c(h)},[c,d]);return u.useLayoutEffect(()=>l.listen(m),[l,m]),u.useEffect(()=>Dj(n),[n]),u.createElement(Uj,{basename:t,children:r,location:o.location,navigationType:o.action,navigator:l,future:n})}const Jj=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Xj=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,vt=u.forwardRef(function(t,r){let{onClick:n,relative:a,reloadDocument:i,replace:l,state:o,target:c,to:d,preventScrollReset:m,viewTransition:h}=t,p=Bj(t,Qj),{basename:j}=u.useContext(Rn),f,g=!1;if(typeof d=="string"&&Xj.test(d)&&(f=d,Jj))try{let b=new URL(window.location.href),w=d.startsWith("//")?new URL(b.protocol+d):new URL(d),N=wh(w.pathname,j);w.origin===b.origin&&N!=null?d=N+w.search+w.hash:g=!0}catch{}let y=wj(d,{relative:a}),v=Zj(d,{replace:l,state:o,target:c,preventScrollReset:m,relative:a,viewTransition:h});function x(b){n&&n(b),b.defaultPrevented||v(b)}return u.createElement("a",im({},p,{href:f||y,onClick:g||i?n:x,ref:r,target:c}))});var vf;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(vf||(vf={}));var bf;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(bf||(bf={}));function Zj(e,t){let{target:r,replace:n,state:a,preventScrollReset:i,relative:l,viewTransition:o}=t===void 0?{}:t,c=yr(),d=Pn(),m=oy(e,{relative:l});return u.useCallback(h=>{if(Wj(h,r)){h.preventDefault();let p=n!==void 0?n:pc(d)===pc(m);c(e,{replace:p,state:a,preventScrollReset:i,relative:l,viewTransition:o})}},[d,c,m,n,a,r,e,i,l,o])}function zl(e){let t=u.useRef(lm(e)),r=u.useRef(!1),n=Pn(),a=u.useMemo(()=>Kj(n.search,r.current?null:t.current),[n.search]),i=yr(),l=u.useCallback((o,c)=>{const d=lm(typeof o=="function"?o(a):o);r.current=!0,i("?"+d,c)},[i,a]);return[a,l]}const ew={},jf=e=>{let t;const r=new Set,n=(m,h)=>{const p=typeof m=="function"?m(t):m;if(!Object.is(p,t)){const j=t;t=h??(typeof p!="object"||p===null)?p:Object.assign({},t,p),r.forEach(f=>f(t,j))}},a=()=>t,c={setState:n,getState:a,getInitialState:()=>d,subscribe:m=>(r.add(m),()=>r.delete(m)),destroy:()=>{(ew?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},d=t=e(n,a,c);return c},tw=e=>e?jf(e):jf;var hy={exports:{}},fy={},gy={exports:{}},xy={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var li=u;function sw(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var rw=typeof Object.is=="function"?Object.is:sw,nw=li.useState,aw=li.useEffect,iw=li.useLayoutEffect,lw=li.useDebugValue;function ow(e,t){var r=t(),n=nw({inst:{value:r,getSnapshot:t}}),a=n[0].inst,i=n[1];return iw(function(){a.value=r,a.getSnapshot=t,Rd(a)&&i({inst:a})},[e,r,t]),aw(function(){return Rd(a)&&i({inst:a}),e(function(){Rd(a)&&i({inst:a})})},[e]),lw(r),r}function Rd(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!rw(e,r)}catch{return!0}}function cw(e,t){return t()}var dw=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?cw:ow;xy.useSyncExternalStore=li.useSyncExternalStore!==void 0?li.useSyncExternalStore:dw;gy.exports=xy;var uw=gy.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bc=u,mw=uw;function hw(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var fw=typeof Object.is=="function"?Object.is:hw,gw=mw.useSyncExternalStore,xw=Bc.useRef,pw=Bc.useEffect,yw=Bc.useMemo,vw=Bc.useDebugValue;fy.useSyncExternalStoreWithSelector=function(e,t,r,n,a){var i=xw(null);if(i.current===null){var l={hasValue:!1,value:null};i.current=l}else l=i.current;i=yw(function(){function c(j){if(!d){if(d=!0,m=j,j=n(j),a!==void 0&&l.hasValue){var f=l.value;if(a(f,j))return h=f}return h=j}if(f=h,fw(m,j))return f;var g=n(j);return a!==void 0&&a(f,g)?(m=j,f):(m=j,h=g)}var d=!1,m,h,p=r===void 0?null:r;return[function(){return c(t())},p===null?void 0:function(){return c(p())}]},[t,r,n,a]);var o=gw(e,i[0],i[1]);return pw(function(){l.hasValue=!0,l.value=o},[o]),vw(o),o};hy.exports=fy;var bw=hy.exports;const jw=Tg(bw),py={},{useDebugValue:ww}=Fe,{useSyncExternalStoreWithSelector:Nw}=jw;let wf=!1;const kw=e=>e;function Sw(e,t=kw,r){(py?"production":void 0)!=="production"&&r&&!wf&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),wf=!0);const n=Nw(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return ww(n),n}const Cw=e=>{(py?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?tw(e):e,r=(n,a)=>Sw(t,n,a);return Object.assign(r,t),r},_w=e=>Cw,Ew={};function Mw(e,t){let r;try{r=e()}catch{return}return{getItem:a=>{var i;const l=c=>c===null?null:JSON.parse(c,void 0),o=(i=r.getItem(a))!=null?i:null;return o instanceof Promise?o.then(l):l(o)},setItem:(a,i)=>r.setItem(a,JSON.stringify(i,void 0)),removeItem:a=>r.removeItem(a)}}const El=e=>t=>{try{const r=e(t);return r instanceof Promise?r:{then(n){return El(n)(r)},catch(n){return this}}}catch(r){return{then(n){return this},catch(n){return El(n)(r)}}}},Tw=(e,t)=>(r,n,a)=>{let i={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:y=>y,version:0,merge:(y,v)=>({...v,...y}),...t},l=!1;const o=new Set,c=new Set;let d;try{d=i.getStorage()}catch{}if(!d)return e((...y)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),r(...y)},n,a);const m=El(i.serialize),h=()=>{const y=i.partialize({...n()});let v;const x=m({state:y,version:i.version}).then(b=>d.setItem(i.name,b)).catch(b=>{v=b});if(v)throw v;return x},p=a.setState;a.setState=(y,v)=>{p(y,v),h()};const j=e((...y)=>{r(...y),h()},n,a);let f;const g=()=>{var y;if(!d)return;l=!1,o.forEach(x=>x(n()));const v=((y=i.onRehydrateStorage)==null?void 0:y.call(i,n()))||void 0;return El(d.getItem.bind(d))(i.name).then(x=>{if(x)return i.deserialize(x)}).then(x=>{if(x)if(typeof x.version=="number"&&x.version!==i.version){if(i.migrate)return i.migrate(x.state,x.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return x.state}).then(x=>{var b;return f=i.merge(x,(b=n())!=null?b:j),r(f,!0),h()}).then(()=>{v==null||v(f,void 0),l=!0,c.forEach(x=>x(f))}).catch(x=>{v==null||v(void 0,x)})};return a.persist={setOptions:y=>{i={...i,...y},y.getStorage&&(d=y.getStorage())},clearStorage:()=>{d==null||d.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>g(),hasHydrated:()=>l,onHydrate:y=>(o.add(y),()=>{o.delete(y)}),onFinishHydration:y=>(c.add(y),()=>{c.delete(y)})},g(),f||j},Aw=(e,t)=>(r,n,a)=>{let i={storage:Mw(()=>localStorage),partialize:g=>g,version:0,merge:(g,y)=>({...y,...g}),...t},l=!1;const o=new Set,c=new Set;let d=i.storage;if(!d)return e((...g)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),r(...g)},n,a);const m=()=>{const g=i.partialize({...n()});return d.setItem(i.name,{state:g,version:i.version})},h=a.setState;a.setState=(g,y)=>{h(g,y),m()};const p=e((...g)=>{r(...g),m()},n,a);a.getInitialState=()=>p;let j;const f=()=>{var g,y;if(!d)return;l=!1,o.forEach(x=>{var b;return x((b=n())!=null?b:p)});const v=((y=i.onRehydrateStorage)==null?void 0:y.call(i,(g=n())!=null?g:p))||void 0;return El(d.getItem.bind(d))(i.name).then(x=>{if(x)if(typeof x.version=="number"&&x.version!==i.version){if(i.migrate)return[!0,i.migrate(x.state,x.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,x.state];return[!1,void 0]}).then(x=>{var b;const[w,N]=x;if(j=i.merge(N,(b=n())!=null?b:p),r(j,!0),w)return m()}).then(()=>{v==null||v(j,void 0),j=n(),l=!0,c.forEach(x=>x(j))}).catch(x=>{v==null||v(void 0,x)})};return a.persist={setOptions:g=>{i={...i,...g},g.storage&&(d=g.storage)},clearStorage:()=>{d==null||d.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>f(),hasHydrated:()=>l,onHydrate:g=>(o.add(g),()=>{o.delete(g)}),onFinishHydration:g=>(c.add(g),()=>{c.delete(g)})},i.skipHydration||f(),j||p},Rw=(e,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?((Ew?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),Tw(e,t)):Aw(e,t),Pw=Rw,Lw={"tickets:view":["admin","manager","customer_service"],"tickets:create":["admin","manager","customer_service"],"tickets:edit":["admin","manager","customer_service"],"tickets:delete":["admin"],"tickets:assign":["admin","manager"],"tickets:bulk_assign":["admin","manager"],"chat:view":["admin","manager","customer_service"],"chat:respond":["admin","manager","customer_service"],"chat:takeover":["admin","manager","customer_service"],"group_chat:view":["admin","manager","customer_service","general"],"group_chat:send":["admin","manager","customer_service","general"],"customers:view":["admin","manager","customer_service","general"],"customers:edit":["admin","manager","customer_service"],"staff:view":["admin","manager"],"staff:create":["admin"],"staff:edit":["admin"],"staff:delete":["admin"],"analytics:view":["admin","manager"],"settings:view":["admin"],"settings:edit":["admin"],"ai_agent:view":["admin","manager"],"ai_agent:edit":["admin"]};function Fw(e,t){return e?Lw[t].includes(e):!1}const Rs=_w()(Pw((e,t)=>({token:null,user:null,setAuth:(r,n)=>{const a={...n,role:n.role==="agent"?"customer_service":n.role};e({token:r,user:a})},logout:()=>e({token:null,user:null}),hasPermission:r=>{const n=t().user;return Fw(n==null?void 0:n.role,r)}}),{name:"auth-storage"}));function yy(e,t){return function(){return e.apply(t,arguments)}}const{toString:$w}=Object.prototype,{getPrototypeOf:Ch}=Object,{iterator:qc,toStringTag:vy}=Symbol,Wc=(e=>t=>{const r=$w.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),rr=e=>(e=e.toLowerCase(),t=>Wc(t)===e),Kc=e=>t=>typeof t===e,{isArray:bi}=Array,oi=Kc("undefined");function Ul(e){return e!==null&&!oi(e)&&e.constructor!==null&&!oi(e.constructor)&&js(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const by=rr("ArrayBuffer");function Iw(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&by(e.buffer),t}const Ow=Kc("string"),js=Kc("function"),jy=Kc("number"),Hl=e=>e!==null&&typeof e=="object",Dw=e=>e===!0||e===!1,Do=e=>{if(Wc(e)!=="object")return!1;const t=Ch(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(vy in e)&&!(qc in e)},zw=e=>{if(!Hl(e)||Ul(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},Uw=rr("Date"),Hw=rr("File"),Bw=rr("Blob"),qw=rr("FileList"),Ww=e=>Hl(e)&&js(e.pipe),Kw=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||js(e.append)&&((t=Wc(e))==="formdata"||t==="object"&&js(e.toString)&&e.toString()==="[object FormData]"))},Qw=rr("URLSearchParams"),[Vw,Gw,Yw,Jw]=["ReadableStream","Request","Response","Headers"].map(rr),Xw=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Bl(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let n,a;if(typeof e!="object"&&(e=[e]),bi(e))for(n=0,a=e.length;n<a;n++)t.call(null,e[n],n,e);else{if(Ul(e))return;const i=r?Object.getOwnPropertyNames(e):Object.keys(e),l=i.length;let o;for(n=0;n<l;n++)o=i[n],t.call(null,e[o],o,e)}}function wy(e,t){if(Ul(e))return null;t=t.toLowerCase();const r=Object.keys(e);let n=r.length,a;for(;n-- >0;)if(a=r[n],t===a.toLowerCase())return a;return null}const qn=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Ny=e=>!oi(e)&&e!==qn;function om(){const{caseless:e,skipUndefined:t}=Ny(this)&&this||{},r={},n=(a,i)=>{const l=e&&wy(r,i)||i;Do(r[l])&&Do(a)?r[l]=om(r[l],a):Do(a)?r[l]=om({},a):bi(a)?r[l]=a.slice():(!t||!oi(a))&&(r[l]=a)};for(let a=0,i=arguments.length;a<i;a++)arguments[a]&&Bl(arguments[a],n);return r}const Zw=(e,t,r,{allOwnKeys:n}={})=>(Bl(t,(a,i)=>{r&&js(a)?e[i]=yy(a,r):e[i]=a},{allOwnKeys:n}),e),eN=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),tN=(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},sN=(e,t,r,n)=>{let a,i,l;const o={};if(t=t||{},e==null)return t;do{for(a=Object.getOwnPropertyNames(e),i=a.length;i-- >0;)l=a[i],(!n||n(l,e,t))&&!o[l]&&(t[l]=e[l],o[l]=!0);e=r!==!1&&Ch(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},rN=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return n!==-1&&n===r},nN=e=>{if(!e)return null;if(bi(e))return e;let t=e.length;if(!jy(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},aN=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Ch(Uint8Array)),iN=(e,t)=>{const n=(e&&e[qc]).call(e);let a;for(;(a=n.next())&&!a.done;){const i=a.value;t.call(e,i[0],i[1])}},lN=(e,t)=>{let r;const n=[];for(;(r=e.exec(t))!==null;)n.push(r);return n},oN=rr("HTMLFormElement"),cN=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,a){return n.toUpperCase()+a}),Nf=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),dN=rr("RegExp"),ky=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};Bl(r,(a,i)=>{let l;(l=t(a,i,e))!==!1&&(n[i]=l||a)}),Object.defineProperties(e,n)},uN=e=>{ky(e,(t,r)=>{if(js(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=e[r];if(js(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},mN=(e,t)=>{const r={},n=a=>{a.forEach(i=>{r[i]=!0})};return bi(e)?n(e):n(String(e).split(t)),r},hN=()=>{},fN=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function gN(e){return!!(e&&js(e.append)&&e[vy]==="FormData"&&e[qc])}const xN=e=>{const t=new Array(10),r=(n,a)=>{if(Hl(n)){if(t.indexOf(n)>=0)return;if(Ul(n))return n;if(!("toJSON"in n)){t[a]=n;const i=bi(n)?[]:{};return Bl(n,(l,o)=>{const c=r(l,a+1);!oi(c)&&(i[o]=c)}),t[a]=void 0,i}}return n};return r(e,0)},pN=rr("AsyncFunction"),yN=e=>e&&(Hl(e)||js(e))&&js(e.then)&&js(e.catch),Sy=((e,t)=>e?setImmediate:t?((r,n)=>(qn.addEventListener("message",({source:a,data:i})=>{a===qn&&i===r&&n.length&&n.shift()()},!1),a=>{n.push(a),qn.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",js(qn.postMessage)),vN=typeof queueMicrotask<"u"?queueMicrotask.bind(qn):typeof process<"u"&&process.nextTick||Sy,bN=e=>e!=null&&js(e[qc]),O={isArray:bi,isArrayBuffer:by,isBuffer:Ul,isFormData:Kw,isArrayBufferView:Iw,isString:Ow,isNumber:jy,isBoolean:Dw,isObject:Hl,isPlainObject:Do,isEmptyObject:zw,isReadableStream:Vw,isRequest:Gw,isResponse:Yw,isHeaders:Jw,isUndefined:oi,isDate:Uw,isFile:Hw,isBlob:Bw,isRegExp:dN,isFunction:js,isStream:Ww,isURLSearchParams:Qw,isTypedArray:aN,isFileList:qw,forEach:Bl,merge:om,extend:Zw,trim:Xw,stripBOM:eN,inherits:tN,toFlatObject:sN,kindOf:Wc,kindOfTest:rr,endsWith:rN,toArray:nN,forEachEntry:iN,matchAll:lN,isHTMLForm:oN,hasOwnProperty:Nf,hasOwnProp:Nf,reduceDescriptors:ky,freezeMethods:uN,toObjectSet:mN,toCamelCase:cN,noop:hN,toFiniteNumber:fN,findKey:wy,global:qn,isContextDefined:Ny,isSpecCompliantForm:gN,toJSONObject:xN,isAsyncFn:pN,isThenable:yN,setImmediate:Sy,asap:vN,isIterable:bN};function Ie(e,t,r,n,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),a&&(this.response=a,this.status=a.status?a.status:null)}O.inherits(Ie,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:O.toJSONObject(this.config),code:this.code,status:this.status}}});const Cy=Ie.prototype,_y={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{_y[e]={value:e}});Object.defineProperties(Ie,_y);Object.defineProperty(Cy,"isAxiosError",{value:!0});Ie.from=(e,t,r,n,a,i)=>{const l=Object.create(Cy);O.toFlatObject(e,l,function(m){return m!==Error.prototype},d=>d!=="isAxiosError");const o=e&&e.message?e.message:"Error",c=t==null&&e?e.code:t;return Ie.call(l,o,c,r,n,a),e&&l.cause==null&&Object.defineProperty(l,"cause",{value:e,configurable:!0}),l.name=e&&e.name||"Error",i&&Object.assign(l,i),l};const jN=null;function cm(e){return O.isPlainObject(e)||O.isArray(e)}function Ey(e){return O.endsWith(e,"[]")?e.slice(0,-2):e}function kf(e,t,r){return e?e.concat(t).map(function(a,i){return a=Ey(a),!r&&i?"["+a+"]":a}).join(r?".":""):t}function wN(e){return O.isArray(e)&&!e.some(cm)}const NN=O.toFlatObject(O,{},null,function(t){return/^is[A-Z]/.test(t)});function Qc(e,t,r){if(!O.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=O.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,y){return!O.isUndefined(y[g])});const n=r.metaTokens,a=r.visitor||m,i=r.dots,l=r.indexes,c=(r.Blob||typeof Blob<"u"&&Blob)&&O.isSpecCompliantForm(t);if(!O.isFunction(a))throw new TypeError("visitor must be a function");function d(f){if(f===null)return"";if(O.isDate(f))return f.toISOString();if(O.isBoolean(f))return f.toString();if(!c&&O.isBlob(f))throw new Ie("Blob is not supported. Use a Buffer instead.");return O.isArrayBuffer(f)||O.isTypedArray(f)?c&&typeof Blob=="function"?new Blob([f]):Buffer.from(f):f}function m(f,g,y){let v=f;if(f&&!y&&typeof f=="object"){if(O.endsWith(g,"{}"))g=n?g:g.slice(0,-2),f=JSON.stringify(f);else if(O.isArray(f)&&wN(f)||(O.isFileList(f)||O.endsWith(g,"[]"))&&(v=O.toArray(f)))return g=Ey(g),v.forEach(function(b,w){!(O.isUndefined(b)||b===null)&&t.append(l===!0?kf([g],w,i):l===null?g:g+"[]",d(b))}),!1}return cm(f)?!0:(t.append(kf(y,g,i),d(f)),!1)}const h=[],p=Object.assign(NN,{defaultVisitor:m,convertValue:d,isVisitable:cm});function j(f,g){if(!O.isUndefined(f)){if(h.indexOf(f)!==-1)throw Error("Circular reference detected in "+g.join("."));h.push(f),O.forEach(f,function(v,x){(!(O.isUndefined(v)||v===null)&&a.call(t,v,O.isString(x)?x.trim():x,g,p))===!0&&j(v,g?g.concat(x):[x])}),h.pop()}}if(!O.isObject(e))throw new TypeError("data must be an object");return j(e),t}function Sf(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function _h(e,t){this._pairs=[],e&&Qc(e,this,t)}const My=_h.prototype;My.append=function(t,r){this._pairs.push([t,r])};My.toString=function(t){const r=t?function(n){return t.call(this,n,Sf)}:Sf;return this._pairs.map(function(a){return r(a[0])+"="+r(a[1])},"").join("&")};function kN(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Ty(e,t,r){if(!t)return e;const n=r&&r.encode||kN;O.isFunction(r)&&(r={serialize:r});const a=r&&r.serialize;let i;if(a?i=a(t,r):i=O.isURLSearchParams(t)?t.toString():new _h(t,r).toString(n),i){const l=e.indexOf("#");l!==-1&&(e=e.slice(0,l)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class Cf{constructor(){this.handlers=[]}use(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){O.forEach(this.handlers,function(n){n!==null&&t(n)})}}const Ay={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},SN=typeof URLSearchParams<"u"?URLSearchParams:_h,CN=typeof FormData<"u"?FormData:null,_N=typeof Blob<"u"?Blob:null,EN={isBrowser:!0,classes:{URLSearchParams:SN,FormData:CN,Blob:_N},protocols:["http","https","file","blob","url","data"]},Eh=typeof window<"u"&&typeof document<"u",dm=typeof navigator=="object"&&navigator||void 0,MN=Eh&&(!dm||["ReactNative","NativeScript","NS"].indexOf(dm.product)<0),TN=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",AN=Eh&&window.location.href||"http://localhost",RN=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Eh,hasStandardBrowserEnv:MN,hasStandardBrowserWebWorkerEnv:TN,navigator:dm,origin:AN},Symbol.toStringTag,{value:"Module"})),ts={...RN,...EN};function PN(e,t){return Qc(e,new ts.classes.URLSearchParams,{visitor:function(r,n,a,i){return ts.isNode&&O.isBuffer(r)?(this.append(n,r.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...t})}function LN(e){return O.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function FN(e){const t={},r=Object.keys(e);let n;const a=r.length;let i;for(n=0;n<a;n++)i=r[n],t[i]=e[i];return t}function Ry(e){function t(r,n,a,i){let l=r[i++];if(l==="__proto__")return!0;const o=Number.isFinite(+l),c=i>=r.length;return l=!l&&O.isArray(a)?a.length:l,c?(O.hasOwnProp(a,l)?a[l]=[a[l],n]:a[l]=n,!o):((!a[l]||!O.isObject(a[l]))&&(a[l]=[]),t(r,n,a[l],i)&&O.isArray(a[l])&&(a[l]=FN(a[l])),!o)}if(O.isFormData(e)&&O.isFunction(e.entries)){const r={};return O.forEachEntry(e,(n,a)=>{t(LN(n),a,r,0)}),r}return null}function $N(e,t,r){if(O.isString(e))try{return(t||JSON.parse)(e),O.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(e)}const ql={transitional:Ay,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const n=r.getContentType()||"",a=n.indexOf("application/json")>-1,i=O.isObject(t);if(i&&O.isHTMLForm(t)&&(t=new FormData(t)),O.isFormData(t))return a?JSON.stringify(Ry(t)):t;if(O.isArrayBuffer(t)||O.isBuffer(t)||O.isStream(t)||O.isFile(t)||O.isBlob(t)||O.isReadableStream(t))return t;if(O.isArrayBufferView(t))return t.buffer;if(O.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let o;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return PN(t,this.formSerializer).toString();if((o=O.isFileList(t))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Qc(o?{"files[]":t}:t,c&&new c,this.formSerializer)}}return i||a?(r.setContentType("application/json",!1),$N(t)):t}],transformResponse:[function(t){const r=this.transitional||ql.transitional,n=r&&r.forcedJSONParsing,a=this.responseType==="json";if(O.isResponse(t)||O.isReadableStream(t))return t;if(t&&O.isString(t)&&(n&&!this.responseType||a)){const l=!(r&&r.silentJSONParsing)&&a;try{return JSON.parse(t,this.parseReviver)}catch(o){if(l)throw o.name==="SyntaxError"?Ie.from(o,Ie.ERR_BAD_RESPONSE,this,null,this.response):o}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ts.classes.FormData,Blob:ts.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};O.forEach(["delete","get","head","post","put","patch"],e=>{ql.headers[e]={}});const IN=O.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),ON=e=>{const t={};let r,n,a;return e&&e.split(`
`).forEach(function(l){a=l.indexOf(":"),r=l.substring(0,a).trim().toLowerCase(),n=l.substring(a+1).trim(),!(!r||t[r]&&IN[r])&&(r==="set-cookie"?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t},_f=Symbol("internals");function Li(e){return e&&String(e).trim().toLowerCase()}function zo(e){return e===!1||e==null?e:O.isArray(e)?e.map(zo):String(e)}function DN(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}const zN=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Pd(e,t,r,n,a){if(O.isFunction(n))return n.call(this,t,r);if(a&&(t=r),!!O.isString(t)){if(O.isString(n))return t.indexOf(n)!==-1;if(O.isRegExp(n))return n.test(t)}}function UN(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,n)=>r.toUpperCase()+n)}function HN(e,t){const r=O.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(a,i,l){return this[n].call(this,t,a,i,l)},configurable:!0})})}let ws=class{constructor(t){t&&this.set(t)}set(t,r,n){const a=this;function i(o,c,d){const m=Li(c);if(!m)throw new Error("header name must be a non-empty string");const h=O.findKey(a,m);(!h||a[h]===void 0||d===!0||d===void 0&&a[h]!==!1)&&(a[h||c]=zo(o))}const l=(o,c)=>O.forEach(o,(d,m)=>i(d,m,c));if(O.isPlainObject(t)||t instanceof this.constructor)l(t,r);else if(O.isString(t)&&(t=t.trim())&&!zN(t))l(ON(t),r);else if(O.isObject(t)&&O.isIterable(t)){let o={},c,d;for(const m of t){if(!O.isArray(m))throw TypeError("Object iterator must return a key-value pair");o[d=m[0]]=(c=o[d])?O.isArray(c)?[...c,m[1]]:[c,m[1]]:m[1]}l(o,r)}else t!=null&&i(r,t,n);return this}get(t,r){if(t=Li(t),t){const n=O.findKey(this,t);if(n){const a=this[n];if(!r)return a;if(r===!0)return DN(a);if(O.isFunction(r))return r.call(this,a,n);if(O.isRegExp(r))return r.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=Li(t),t){const n=O.findKey(this,t);return!!(n&&this[n]!==void 0&&(!r||Pd(this,this[n],n,r)))}return!1}delete(t,r){const n=this;let a=!1;function i(l){if(l=Li(l),l){const o=O.findKey(n,l);o&&(!r||Pd(n,n[o],o,r))&&(delete n[o],a=!0)}}return O.isArray(t)?t.forEach(i):i(t),a}clear(t){const r=Object.keys(this);let n=r.length,a=!1;for(;n--;){const i=r[n];(!t||Pd(this,this[i],i,t,!0))&&(delete this[i],a=!0)}return a}normalize(t){const r=this,n={};return O.forEach(this,(a,i)=>{const l=O.findKey(n,i);if(l){r[l]=zo(a),delete r[i];return}const o=t?UN(i):String(i).trim();o!==i&&delete r[i],r[o]=zo(a),n[o]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return O.forEach(this,(n,a)=>{n!=null&&n!==!1&&(r[a]=t&&O.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const n=new this(t);return r.forEach(a=>n.set(a)),n}static accessor(t){const n=(this[_f]=this[_f]={accessors:{}}).accessors,a=this.prototype;function i(l){const o=Li(l);n[o]||(HN(a,l),n[o]=!0)}return O.isArray(t)?t.forEach(i):i(t),this}};ws.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);O.reduceDescriptors(ws.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[r]=n}}});O.freezeMethods(ws);function Ld(e,t){const r=this||ql,n=t||r,a=ws.from(n.headers);let i=n.data;return O.forEach(e,function(o){i=o.call(r,i,a.normalize(),t?t.status:void 0)}),a.normalize(),i}function Py(e){return!!(e&&e.__CANCEL__)}function ji(e,t,r){Ie.call(this,e??"canceled",Ie.ERR_CANCELED,t,r),this.name="CanceledError"}O.inherits(ji,Ie,{__CANCEL__:!0});function Ly(e,t,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?e(r):t(new Ie("Request failed with status code "+r.status,[Ie.ERR_BAD_REQUEST,Ie.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function BN(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function qN(e,t){e=e||10;const r=new Array(e),n=new Array(e);let a=0,i=0,l;return t=t!==void 0?t:1e3,function(c){const d=Date.now(),m=n[i];l||(l=d),r[a]=c,n[a]=d;let h=i,p=0;for(;h!==a;)p+=r[h++],h=h%e;if(a=(a+1)%e,a===i&&(i=(i+1)%e),d-l<t)return;const j=m&&d-m;return j?Math.round(p*1e3/j):void 0}}function WN(e,t){let r=0,n=1e3/t,a,i;const l=(d,m=Date.now())=>{r=m,a=null,i&&(clearTimeout(i),i=null),e(...d)};return[(...d)=>{const m=Date.now(),h=m-r;h>=n?l(d,m):(a=d,i||(i=setTimeout(()=>{i=null,l(a)},n-h)))},()=>a&&l(a)]}const yc=(e,t,r=3)=>{let n=0;const a=qN(50,250);return WN(i=>{const l=i.loaded,o=i.lengthComputable?i.total:void 0,c=l-n,d=a(c),m=l<=o;n=l;const h={loaded:l,total:o,progress:o?l/o:void 0,bytes:c,rate:d||void 0,estimated:d&&o&&m?(o-l)/d:void 0,event:i,lengthComputable:o!=null,[t?"download":"upload"]:!0};e(h)},r)},Ef=(e,t)=>{const r=e!=null;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},Mf=e=>(...t)=>O.asap(()=>e(...t)),KN=ts.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,ts.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(ts.origin),ts.navigator&&/(msie|trident)/i.test(ts.navigator.userAgent)):()=>!0,QN=ts.hasStandardBrowserEnv?{write(e,t,r,n,a,i,l){if(typeof document>"u")return;const o=[`${e}=${encodeURIComponent(t)}`];O.isNumber(r)&&o.push(`expires=${new Date(r).toUTCString()}`),O.isString(n)&&o.push(`path=${n}`),O.isString(a)&&o.push(`domain=${a}`),i===!0&&o.push("secure"),O.isString(l)&&o.push(`SameSite=${l}`),document.cookie=o.join("; ")},read(e){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function VN(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function GN(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function Fy(e,t,r){let n=!VN(t);return e&&(n||r==!1)?GN(e,t):t}const Tf=e=>e instanceof ws?{...e}:e;function ua(e,t){t=t||{};const r={};function n(d,m,h,p){return O.isPlainObject(d)&&O.isPlainObject(m)?O.merge.call({caseless:p},d,m):O.isPlainObject(m)?O.merge({},m):O.isArray(m)?m.slice():m}function a(d,m,h,p){if(O.isUndefined(m)){if(!O.isUndefined(d))return n(void 0,d,h,p)}else return n(d,m,h,p)}function i(d,m){if(!O.isUndefined(m))return n(void 0,m)}function l(d,m){if(O.isUndefined(m)){if(!O.isUndefined(d))return n(void 0,d)}else return n(void 0,m)}function o(d,m,h){if(h in t)return n(d,m);if(h in e)return n(void 0,d)}const c={url:i,method:i,data:i,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:o,headers:(d,m,h)=>a(Tf(d),Tf(m),h,!0)};return O.forEach(Object.keys({...e,...t}),function(m){const h=c[m]||a,p=h(e[m],t[m],m);O.isUndefined(p)&&h!==o||(r[m]=p)}),r}const $y=e=>{const t=ua({},e);let{data:r,withXSRFToken:n,xsrfHeaderName:a,xsrfCookieName:i,headers:l,auth:o}=t;if(t.headers=l=ws.from(l),t.url=Ty(Fy(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),o&&l.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):""))),O.isFormData(r)){if(ts.hasStandardBrowserEnv||ts.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if(O.isFunction(r.getHeaders)){const c=r.getHeaders(),d=["content-type","content-length"];Object.entries(c).forEach(([m,h])=>{d.includes(m.toLowerCase())&&l.set(m,h)})}}if(ts.hasStandardBrowserEnv&&(n&&O.isFunction(n)&&(n=n(t)),n||n!==!1&&KN(t.url))){const c=a&&i&&QN.read(i);c&&l.set(a,c)}return t},YN=typeof XMLHttpRequest<"u",JN=YN&&function(e){return new Promise(function(r,n){const a=$y(e);let i=a.data;const l=ws.from(a.headers).normalize();let{responseType:o,onUploadProgress:c,onDownloadProgress:d}=a,m,h,p,j,f;function g(){j&&j(),f&&f(),a.cancelToken&&a.cancelToken.unsubscribe(m),a.signal&&a.signal.removeEventListener("abort",m)}let y=new XMLHttpRequest;y.open(a.method.toUpperCase(),a.url,!0),y.timeout=a.timeout;function v(){if(!y)return;const b=ws.from("getAllResponseHeaders"in y&&y.getAllResponseHeaders()),N={data:!o||o==="text"||o==="json"?y.responseText:y.response,status:y.status,statusText:y.statusText,headers:b,config:e,request:y};Ly(function(L){r(L),g()},function(L){n(L),g()},N),y=null}"onloadend"in y?y.onloadend=v:y.onreadystatechange=function(){!y||y.readyState!==4||y.status===0&&!(y.responseURL&&y.responseURL.indexOf("file:")===0)||setTimeout(v)},y.onabort=function(){y&&(n(new Ie("Request aborted",Ie.ECONNABORTED,e,y)),y=null)},y.onerror=function(w){const N=w&&w.message?w.message:"Network Error",E=new Ie(N,Ie.ERR_NETWORK,e,y);E.event=w||null,n(E),y=null},y.ontimeout=function(){let w=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const N=a.transitional||Ay;a.timeoutErrorMessage&&(w=a.timeoutErrorMessage),n(new Ie(w,N.clarifyTimeoutError?Ie.ETIMEDOUT:Ie.ECONNABORTED,e,y)),y=null},i===void 0&&l.setContentType(null),"setRequestHeader"in y&&O.forEach(l.toJSON(),function(w,N){y.setRequestHeader(N,w)}),O.isUndefined(a.withCredentials)||(y.withCredentials=!!a.withCredentials),o&&o!=="json"&&(y.responseType=a.responseType),d&&([p,f]=yc(d,!0),y.addEventListener("progress",p)),c&&y.upload&&([h,j]=yc(c),y.upload.addEventListener("progress",h),y.upload.addEventListener("loadend",j)),(a.cancelToken||a.signal)&&(m=b=>{y&&(n(!b||b.type?new ji(null,e,y):b),y.abort(),y=null)},a.cancelToken&&a.cancelToken.subscribe(m),a.signal&&(a.signal.aborted?m():a.signal.addEventListener("abort",m)));const x=BN(a.url);if(x&&ts.protocols.indexOf(x)===-1){n(new Ie("Unsupported protocol "+x+":",Ie.ERR_BAD_REQUEST,e));return}y.send(i||null)})},XN=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let n=new AbortController,a;const i=function(d){if(!a){a=!0,o();const m=d instanceof Error?d:this.reason;n.abort(m instanceof Ie?m:new ji(m instanceof Error?m.message:m))}};let l=t&&setTimeout(()=>{l=null,i(new Ie(`timeout ${t} of ms exceeded`,Ie.ETIMEDOUT))},t);const o=()=>{e&&(l&&clearTimeout(l),l=null,e.forEach(d=>{d.unsubscribe?d.unsubscribe(i):d.removeEventListener("abort",i)}),e=null)};e.forEach(d=>d.addEventListener("abort",i));const{signal:c}=n;return c.unsubscribe=()=>O.asap(o),c}},ZN=function*(e,t){let r=e.byteLength;if(r<t){yield e;return}let n=0,a;for(;n<r;)a=n+t,yield e.slice(n,a),n=a},ek=async function*(e,t){for await(const r of tk(e))yield*ZN(r,t)},tk=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:n}=await t.read();if(r)break;yield n}}finally{await t.cancel()}},Af=(e,t,r,n)=>{const a=ek(e,t);let i=0,l,o=c=>{l||(l=!0,n&&n(c))};return new ReadableStream({async pull(c){try{const{done:d,value:m}=await a.next();if(d){o(),c.close();return}let h=m.byteLength;if(r){let p=i+=h;r(p)}c.enqueue(new Uint8Array(m))}catch(d){throw o(d),d}},cancel(c){return o(c),a.return()}},{highWaterMark:2})},Rf=64*1024,{isFunction:yo}=O,sk=(({Request:e,Response:t})=>({Request:e,Response:t}))(O.global),{ReadableStream:Pf,TextEncoder:Lf}=O.global,Ff=(e,...t)=>{try{return!!e(...t)}catch{return!1}},rk=e=>{e=O.merge.call({skipUndefined:!0},sk,e);const{fetch:t,Request:r,Response:n}=e,a=t?yo(t):typeof fetch=="function",i=yo(r),l=yo(n);if(!a)return!1;const o=a&&yo(Pf),c=a&&(typeof Lf=="function"?(f=>g=>f.encode(g))(new Lf):async f=>new Uint8Array(await new r(f).arrayBuffer())),d=i&&o&&Ff(()=>{let f=!1;const g=new r(ts.origin,{body:new Pf,method:"POST",get duplex(){return f=!0,"half"}}).headers.has("Content-Type");return f&&!g}),m=l&&o&&Ff(()=>O.isReadableStream(new n("").body)),h={stream:m&&(f=>f.body)};a&&["text","arrayBuffer","blob","formData","stream"].forEach(f=>{!h[f]&&(h[f]=(g,y)=>{let v=g&&g[f];if(v)return v.call(g);throw new Ie(`Response type '${f}' is not supported`,Ie.ERR_NOT_SUPPORT,y)})});const p=async f=>{if(f==null)return 0;if(O.isBlob(f))return f.size;if(O.isSpecCompliantForm(f))return(await new r(ts.origin,{method:"POST",body:f}).arrayBuffer()).byteLength;if(O.isArrayBufferView(f)||O.isArrayBuffer(f))return f.byteLength;if(O.isURLSearchParams(f)&&(f=f+""),O.isString(f))return(await c(f)).byteLength},j=async(f,g)=>{const y=O.toFiniteNumber(f.getContentLength());return y??p(g)};return async f=>{let{url:g,method:y,data:v,signal:x,cancelToken:b,timeout:w,onDownloadProgress:N,onUploadProgress:E,responseType:L,headers:P,withCredentials:ee="same-origin",fetchOptions:H}=$y(f),Q=t||fetch;L=L?(L+"").toLowerCase():"text";let ae=XN([x,b&&b.toAbortSignal()],w),ne=null;const ve=ae&&ae.unsubscribe&&(()=>{ae.unsubscribe()});let je;try{if(E&&d&&y!=="get"&&y!=="head"&&(je=await j(P,v))!==0){let X=new r(g,{method:"POST",body:v,duplex:"half"}),he;if(O.isFormData(v)&&(he=X.headers.get("content-type"))&&P.setContentType(he),X.body){const[Oe,G]=Ef(je,yc(Mf(E)));v=Af(X.body,Rf,Oe,G)}}O.isString(ee)||(ee=ee?"include":"omit");const Se=i&&"credentials"in r.prototype,D={...H,signal:ae,method:y.toUpperCase(),headers:P.normalize().toJSON(),body:v,duplex:"half",credentials:Se?ee:void 0};ne=i&&new r(g,D);let T=await(i?Q(ne,H):Q(g,D));const Y=m&&(L==="stream"||L==="response");if(m&&(N||Y&&ve)){const X={};["status","statusText","headers"].forEach(Le=>{X[Le]=T[Le]});const he=O.toFiniteNumber(T.headers.get("content-length")),[Oe,G]=N&&Ef(he,yc(Mf(N),!0))||[];T=new n(Af(T.body,Rf,Oe,()=>{G&&G(),ve&&ve()}),X)}L=L||"text";let J=await h[O.findKey(h,L)||"text"](T,f);return!Y&&ve&&ve(),await new Promise((X,he)=>{Ly(X,he,{data:J,headers:ws.from(T.headers),status:T.status,statusText:T.statusText,config:f,request:ne})})}catch(Se){throw ve&&ve(),Se&&Se.name==="TypeError"&&/Load failed|fetch/i.test(Se.message)?Object.assign(new Ie("Network Error",Ie.ERR_NETWORK,f,ne),{cause:Se.cause||Se}):Ie.from(Se,Se&&Se.code,f,ne)}}},nk=new Map,Iy=e=>{let t=e&&e.env||{};const{fetch:r,Request:n,Response:a}=t,i=[n,a,r];let l=i.length,o=l,c,d,m=nk;for(;o--;)c=i[o],d=m.get(c),d===void 0&&m.set(c,d=o?new Map:rk(t)),m=d;return d};Iy();const Mh={http:jN,xhr:JN,fetch:{get:Iy}};O.forEach(Mh,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const $f=e=>`- ${e}`,ak=e=>O.isFunction(e)||e===null||e===!1;function ik(e,t){e=O.isArray(e)?e:[e];const{length:r}=e;let n,a;const i={};for(let l=0;l<r;l++){n=e[l];let o;if(a=n,!ak(n)&&(a=Mh[(o=String(n)).toLowerCase()],a===void 0))throw new Ie(`Unknown adapter '${o}'`);if(a&&(O.isFunction(a)||(a=a.get(t))))break;i[o||"#"+l]=a}if(!a){const l=Object.entries(i).map(([c,d])=>`adapter ${c} `+(d===!1?"is not supported by the environment":"is not available in the build"));let o=r?l.length>1?`since :
`+l.map($f).join(`
`):" "+$f(l[0]):"as no adapter specified";throw new Ie("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return a}const Oy={getAdapter:ik,adapters:Mh};function Fd(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new ji(null,e)}function If(e){return Fd(e),e.headers=ws.from(e.headers),e.data=Ld.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Oy.getAdapter(e.adapter||ql.adapter,e)(e).then(function(n){return Fd(e),n.data=Ld.call(e,e.transformResponse,n),n.headers=ws.from(n.headers),n},function(n){return Py(n)||(Fd(e),n&&n.response&&(n.response.data=Ld.call(e,e.transformResponse,n.response),n.response.headers=ws.from(n.response.headers))),Promise.reject(n)})}const Dy="1.13.2",Vc={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Vc[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const Of={};Vc.transitional=function(t,r,n){function a(i,l){return"[Axios v"+Dy+"] Transitional option '"+i+"'"+l+(n?". "+n:"")}return(i,l,o)=>{if(t===!1)throw new Ie(a(l," has been removed"+(r?" in "+r:"")),Ie.ERR_DEPRECATED);return r&&!Of[l]&&(Of[l]=!0,console.warn(a(l," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(i,l,o):!0}};Vc.spelling=function(t){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function lk(e,t,r){if(typeof e!="object")throw new Ie("options must be an object",Ie.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let a=n.length;for(;a-- >0;){const i=n[a],l=t[i];if(l){const o=e[i],c=o===void 0||l(o,i,e);if(c!==!0)throw new Ie("option "+i+" must be "+c,Ie.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Ie("Unknown option "+i,Ie.ERR_BAD_OPTION)}}const Uo={assertOptions:lk,validators:Vc},ir=Uo.validators;let ra=class{constructor(t){this.defaults=t||{},this.interceptors={request:new Cf,response:new Cf}}async request(t,r){try{return await this._request(t,r)}catch(n){if(n instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const i=a.stack?a.stack.replace(/^.+\n/,""):"";try{n.stack?i&&!String(n.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+i):n.stack=i}catch{}}throw n}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=ua(this.defaults,r);const{transitional:n,paramsSerializer:a,headers:i}=r;n!==void 0&&Uo.assertOptions(n,{silentJSONParsing:ir.transitional(ir.boolean),forcedJSONParsing:ir.transitional(ir.boolean),clarifyTimeoutError:ir.transitional(ir.boolean)},!1),a!=null&&(O.isFunction(a)?r.paramsSerializer={serialize:a}:Uo.assertOptions(a,{encode:ir.function,serialize:ir.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),Uo.assertOptions(r,{baseUrl:ir.spelling("baseURL"),withXsrfToken:ir.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let l=i&&O.merge(i.common,i[r.method]);i&&O.forEach(["delete","get","head","post","put","patch","common"],f=>{delete i[f]}),r.headers=ws.concat(l,i);const o=[];let c=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(r)===!1||(c=c&&g.synchronous,o.unshift(g.fulfilled,g.rejected))});const d=[];this.interceptors.response.forEach(function(g){d.push(g.fulfilled,g.rejected)});let m,h=0,p;if(!c){const f=[If.bind(this),void 0];for(f.unshift(...o),f.push(...d),p=f.length,m=Promise.resolve(r);h<p;)m=m.then(f[h++],f[h++]);return m}p=o.length;let j=r;for(;h<p;){const f=o[h++],g=o[h++];try{j=f(j)}catch(y){g.call(this,y);break}}try{m=If.call(this,j)}catch(f){return Promise.reject(f)}for(h=0,p=d.length;h<p;)m=m.then(d[h++],d[h++]);return m}getUri(t){t=ua(this.defaults,t);const r=Fy(t.baseURL,t.url,t.allowAbsoluteUrls);return Ty(r,t.params,t.paramsSerializer)}};O.forEach(["delete","get","head","options"],function(t){ra.prototype[t]=function(r,n){return this.request(ua(n||{},{method:t,url:r,data:(n||{}).data}))}});O.forEach(["post","put","patch"],function(t){function r(n){return function(i,l,o){return this.request(ua(o||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:i,data:l}))}}ra.prototype[t]=r(),ra.prototype[t+"Form"]=r(!0)});let ok=class zy{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(i){r=i});const n=this;this.promise.then(a=>{if(!n._listeners)return;let i=n._listeners.length;for(;i-- >0;)n._listeners[i](a);n._listeners=null}),this.promise.then=a=>{let i;const l=new Promise(o=>{n.subscribe(o),i=o}).then(a);return l.cancel=function(){n.unsubscribe(i)},l},t(function(i,l,o){n.reason||(n.reason=new ji(i,l,o),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=n=>{t.abort(n)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new zy(function(a){t=a}),cancel:t}}};function ck(e){return function(r){return e.apply(null,r)}}function dk(e){return O.isObject(e)&&e.isAxiosError===!0}const um={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(um).forEach(([e,t])=>{um[t]=e});function Uy(e){const t=new ra(e),r=yy(ra.prototype.request,t);return O.extend(r,ra.prototype,t,{allOwnKeys:!0}),O.extend(r,t,null,{allOwnKeys:!0}),r.create=function(a){return Uy(ua(e,a))},r}const kt=Uy(ql);kt.Axios=ra;kt.CanceledError=ji;kt.CancelToken=ok;kt.isCancel=Py;kt.VERSION=Dy;kt.toFormData=Qc;kt.AxiosError=Ie;kt.Cancel=kt.CanceledError;kt.all=function(t){return Promise.all(t)};kt.spread=ck;kt.isAxiosError=dk;kt.mergeConfig=ua;kt.AxiosHeaders=ws;kt.formToJSON=e=>Ry(O.isHTMLForm(e)?new FormData(e):e);kt.getAdapter=Oy.getAdapter;kt.HttpStatusCode=um;kt.default=kt;const{Axios:O6,AxiosError:D6,CanceledError:z6,isCancel:U6,CancelToken:H6,VERSION:B6,all:q6,Cancel:W6,isAxiosError:K6,spread:Q6,toFormData:V6,AxiosHeaders:G6,HttpStatusCode:Y6,formToJSON:J6,getAdapter:X6,mergeConfig:Z6}=kt,uk="https://dartmouth-os-worker.dartmouth.workers.dev",$=kt.create({baseURL:uk,headers:{"Content-Type":"application/json"}});$.interceptors.request.use(e=>{const t=localStorage.getItem("auth-storage");if(t)try{const{state:r}=JSON.parse(t);r!=null&&r.token&&(e.headers.Authorization=`Bearer ${r.token}`)}catch(r){console.error("Error parsing auth token:",r)}return e});$.interceptors.response.use(e=>e,e=>{var t;return((t=e.response)==null?void 0:t.status)===401&&(localStorage.removeItem("auth-storage"),window.location.href="/login"),Promise.reject(e)});const mk={login:(e,t)=>$.post("/api/auth/login",{email:e,password:t}),me:()=>$.get("/api/auth/me"),logout:()=>$.post("/api/auth/logout")},De={list:e=>$.get("/api/tickets",{params:e}),get:e=>$.get(`/api/tickets/${e}`),getById:e=>$.get(`/api/tickets/${e}`),getMessages:e=>$.get(`/api/tickets/${e}/messages`),assign:(e,t)=>$.put(`/api/tickets/${e}/assign`,{assignedTo:t}),updateStatus:(e,t)=>$.put(`/api/tickets/${e}/status`,{status:t}),reply:(e,t,r)=>$.post(`/api/tickets/${e}/reply`,{content:t,attachments:r}),addNote:(e,t,r,n)=>$.post(`/api/tickets/${e}/notes`,{content:t,noteType:r,attachments:n}),editNote:(e,t,r)=>$.put(`/api/tickets/${e}/notes/${t}`,{content:r}),deleteNote:(e,t)=>$.delete(`/api/tickets/${e}/notes/${t}`),snooze:(e,t,r)=>$.post(`/api/tickets/${e}/snooze`,{snoozedUntil:t,reason:r}),unsnooze:e=>$.post(`/api/tickets/${e}/unsnooze`),escalate:(e,t,r)=>$.post(`/api/tickets/${e}/escalate`,{staffIds:t,reason:r}),resolveEscalation:(e,t)=>$.post(`/api/tickets/${e}/resolve-escalation`,{escalationId:t}),scheduleReply:(e,t,r)=>$.post(`/api/tickets/${e}/schedule-reply`,{content:t,scheduledFor:r}),getScheduledMessages:e=>$.get(`/api/tickets/${e}/scheduled-messages`),updateScheduledMessage:(e,t,r)=>$.put(`/api/scheduled-messages/${e}`,{content:t,scheduledFor:r}),deleteScheduledMessage:e=>$.delete(`/api/scheduled-messages/${e}`),getAIDraft:e=>$.get(`/api/tickets/${e}/ai-draft`),approveAIDraft:e=>$.post(`/api/tickets/${e}/ai-draft/approve`),editAIDraft:(e,t)=>$.post(`/api/tickets/${e}/ai-draft/edit`,{editedContent:t}),rejectAIDraft:(e,t)=>$.post(`/api/tickets/${e}/ai-draft/reject`,{reason:t}),submitAIDraftFeedback:(e,t)=>$.post(`/api/tickets/${e}/ai-draft/feedback`,t),delete:e=>$.delete(`/api/tickets/${e}`),merge:(e,t)=>$.post(`/api/tickets/${e}/merge`,{secondaryTicketIds:t}),bulkAssign:(e,t)=>$.post("/api/tickets/bulk-assign",{ticketIds:e,assignedTo:t})},st={list:()=>$.get("/api/staff"),get:e=>$.get(`/api/staff/${e}`),me:()=>$.get("/api/staff/me"),onlineCount:()=>$.get("/api/staff/online-count"),create:e=>$.post("/api/staff",e),update:(e,t)=>$.put(`/api/staff/${e}`,t),updatePresence:(e,t)=>$.put(`/api/staff/${e}/presence`,{isAvailable:t}),updateAvailability:(e,t)=>$.put(`/api/staff/${e}/availability`,{status:t}),uploadAvatar:(e,t)=>{const r=new FormData;return r.append("avatar",t),$.post(`/api/staff/${e}/avatar`,r,{headers:{"Content-Type":"multipart/form-data"}})},deleteAvatar:e=>$.delete(`/api/staff/${e}/avatar`),getAvatarUrl:e=>e?e.startsWith("http")?e:`https://dartmouth-os-worker.dartmouth.workers.dev${e}`:null},Tr={getSettings:()=>$.get("/api/chat/settings"),updateSettings:e=>$.put("/api/chat/settings",e),getBusinessHours:()=>$.get("/api/chat/business-hours"),updateBusinessHours:e=>$.put("/api/chat/business-hours",{hours:e}),getStatus:()=>$.get("/api/chat/status"),getEmbedCode:()=>$.get("/api/chat/embed-code")},vo={listDocuments:()=>$.get("/api/ai-agent/knowledge"),uploadDocument:(e,t)=>{const r=new FormData;return r.append("file",e),r.append("category",t),$.post("/api/ai-agent/knowledge/upload",r,{headers:{"Content-Type":"multipart/form-data"}})},deleteDocument:e=>$.delete(`/api/ai-agent/knowledge/${e}`),reprocessDocuments:()=>$.post("/api/ai-agent/knowledge/reprocess")},$d={getConfig:()=>$.get("/api/ai-agent/system-message"),updateConfig:e=>$.put("/api/ai-agent/system-message",e),resetToDefault:()=>$.post("/api/ai-agent/system-message/reset")},Df={getAIAgentStats:(e="7d")=>$.get("/api/analytics/ai-agent",{params:{timeRange:e}}),getLearningExamples:(e=10)=>$.get("/api/analytics/ai-agent/learning-examples",{params:{limit:e}})},bo={getConfig:()=>$.get("/api/auto-assignment/config"),updateConfig:e=>$.put("/api/auto-assignment/config",e),runNow:()=>$.post("/api/auto-assignment/run"),getHistory:e=>$.get("/api/auto-assignment/history",{params:{limit:e}}),getStaffSettings:e=>$.get(`/api/auto-assignment/staff/${e}`),updateStaffSettings:(e,t)=>$.put(`/api/auto-assignment/staff/${e}`,t)},hk={getTicketData:e=>$.get("/api/shopify/ticket-data",{params:{email:e}}),getCustomer:e=>$.get("/api/shopify/customer",{params:{email:e}}),getCustomerOrders:(e,t)=>$.get(`/api/shopify/customer/${e}/orders`,{params:{limit:t}}),getOrdersByEmail:(e,t)=>$.get("/api/shopify/orders",{params:{email:e,limit:t}}),searchOrder:e=>$.get("/api/shopify/order",{params:{number:e}}),getOrder:e=>$.get(`/api/shopify/order/${e}`)},mt={listChannels:()=>$.get("/api/group-chat/channels"),createChannel:e=>$.post("/api/group-chat/channels",e),getChannel:e=>$.get(`/api/group-chat/channels/${e}`),updateChannel:(e,t)=>$.patch(`/api/group-chat/channels/${e}`,t),archiveChannel:e=>$.delete(`/api/group-chat/channels/${e}`),getMessages:(e,t)=>$.get(`/api/group-chat/channels/${e}/messages`,{params:t}),sendMessage:(e,t)=>$.post(`/api/group-chat/channels/${e}/messages`,t),pollMessages:(e,t)=>$.get(`/api/group-chat/channels/${e}/poll`,{params:{after:t}}),editMessage:(e,t,r)=>$.patch(`/api/group-chat/messages/${e}`,{content:t,deleteAttachment:r}),deleteMessage:e=>$.delete(`/api/group-chat/messages/${e}`),addReaction:(e,t)=>$.post(`/api/group-chat/messages/${e}/react`,{emoji:t}),getMembers:e=>$.get(`/api/group-chat/channels/${e}/members`),addMember:(e,t)=>$.post(`/api/group-chat/channels/${e}/members`,{staffId:t}),removeMember:(e,t)=>$.delete(`/api/group-chat/channels/${e}/members/${t}`),markAsRead:(e,t)=>$.post(`/api/group-chat/channels/${e}/read`,{messageId:t}),getUnreadCounts:()=>$.get("/api/group-chat/unread"),getTimeLimit:()=>$.get("/api/group-chat/settings/time-limit"),setTimeLimit:e=>$.put("/api/group-chat/settings/time-limit",{timeLimit:e}),getAutoArchiveHours:()=>$.get("/api/group-chat/settings/auto-archive"),setAutoArchiveHours:e=>$.put("/api/group-chat/settings/auto-archive",{hours:e})},Ki={getMemos:e=>$.get("/api/memos",{params:e}),createMemo:e=>$.post("/api/memos",e),editMemo:(e,t)=>$.patch(`/api/memos/${e}`,t),deleteMemo:e=>$.delete(`/api/memos/${e}`)},zf={getAllTags:e=>$.get("/api/tags",{params:e?{search:e}:{}}),searchTags:e=>$.get("/api/tags/search",{params:{search:e}})},jo={getGlobal:()=>$.get("/api/signatures/global"),setGlobal:e=>$.put("/api/signatures/global",{signatureHtml:e}),getPreview:()=>$.get("/api/signatures/preview"),getPlainText:()=>$.get("/api/signatures/plain-text"),uploadLogo:e=>$.post("/api/signatures/upload-logo",{attachment:e}),getSettings:()=>$.get("/api/signatures/settings"),saveSettings:e=>$.put("/api/signatures/settings",e),getPreviewFromSettings:e=>$.post("/api/signatures/preview-from-settings",e)},$n={getMentions:e=>$.get("/api/mentions",{params:e}),getMention:e=>$.get(`/api/mentions/${e}`),markAsRead:e=>$.patch(`/api/mentions/${e}/read`),markAsUnread:e=>$.patch(`/api/mentions/${e}/unread`),archiveMention:e=>$.patch(`/api/mentions/${e}/archive`),getUnreadCount:()=>$.get("/api/mentions/unread-count"),updateMention:(e,t)=>$.patch(`/api/mentions/${e}`,t),deleteMention:e=>$.delete(`/api/mentions/${e}`)};function fk(){const[e,t]=u.useState("john@dtf.com.au"),[r,n]=u.useState("changeme123"),[a,i]=u.useState(""),[l,o]=u.useState(!1),c=yr(),d=Rs(h=>h.setAuth),m=async h=>{var p,j;h.preventDefault(),i(""),o(!0);try{const f=await mk.login(e,r);d(f.data.token,f.data.user),c("/tickets")}catch(f){i(((j=(p=f.response)==null?void 0:p.data)==null?void 0:j.error)||"Login failed")}finally{o(!1)}};return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"max-w-md w-full space-y-8",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Customer Service Dashboard"}),s.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Sign in to your account"})]}),s.jsxs("form",{className:"mt-8 space-y-6",onSubmit:m,children:[a&&s.jsx("div",{className:"rounded-md bg-red-50 p-4",children:s.jsx("div",{className:"text-sm text-red-800",children:a})}),s.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email",className:"sr-only",children:"Email address"}),s.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 focus:z-10 sm:text-sm",placeholder:"Email address",value:e,onChange:h=>t(h.target.value)})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),s.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 focus:z-10 sm:text-sm",placeholder:"Password",value:r,onChange:h=>n(h.target.value)})]})]}),s.jsx("div",{children:s.jsx("button",{type:"submit",disabled:l,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50",children:l?"Signing in...":"Sign in"})}),s.jsxs("div",{className:"text-xs text-gray-500 text-center",children:[s.jsx("p",{children:"Test credentials:"}),s.jsx("p",{children:"Admin: john@dtf.com.au / changeme123"}),s.jsx("p",{children:"Agent: john+ted@dtf.com.au / changeme123"})]})]})]})})}var gk=Object.defineProperty,xk=(e,t,r)=>t in e?gk(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Id=(e,t,r)=>(xk(e,typeof t!="symbol"?t+"":t,r),r);let pk=class{constructor(){Id(this,"current",this.detect()),Id(this,"handoffState","pending"),Id(this,"currentId",0)}set(t){this.current!==t&&(this.handoffState="pending",this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},Rr=new pk,Dt=(e,t)=>{Rr.isServer?u.useEffect(e,t):u.useLayoutEffect(e,t)};function Pr(e){let t=u.useRef(e);return Dt(()=>{t.current=e},[e]),t}let Be=function(e){let t=Pr(e);return Fe.useCallback((...r)=>t.current(...r),[t])};function Gc(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function sr(){let e=[],t={addEventListener(r,n,a,i){return r.addEventListener(n,a,i),t.add(()=>r.removeEventListener(n,a,i))},requestAnimationFrame(...r){let n=requestAnimationFrame(...r);return t.add(()=>cancelAnimationFrame(n))},nextFrame(...r){return t.requestAnimationFrame(()=>t.requestAnimationFrame(...r))},setTimeout(...r){let n=setTimeout(...r);return t.add(()=>clearTimeout(n))},microTask(...r){let n={current:!0};return Gc(()=>{n.current&&r[0]()}),t.add(()=>{n.current=!1})},style(r,n,a){let i=r.style.getPropertyValue(n);return Object.assign(r.style,{[n]:a}),this.add(()=>{Object.assign(r.style,{[n]:i})})},group(r){let n=sr();return r(n),this.add(()=>n.dispose())},add(r){return e.push(r),()=>{let n=e.indexOf(r);if(n>=0)for(let a of e.splice(n,1))a()}},dispose(){for(let r of e.splice(0))r()}};return t}function Wl(){let[e]=u.useState(sr);return u.useEffect(()=>()=>e.dispose(),[e]),e}function yk(){let e=typeof document>"u";return"useSyncExternalStore"in Za?(t=>t.useSyncExternalStore)(Za)(()=>()=>{},()=>!1,()=>!e):!1}function wi(){let e=yk(),[t,r]=u.useState(Rr.isHandoffComplete);return t&&Rr.isHandoffComplete===!1&&r(!1),u.useEffect(()=>{t!==!0&&r(!0)},[t]),u.useEffect(()=>Rr.handoff(),[]),e?!1:t}var Uf;let zr=(Uf=Fe.useId)!=null?Uf:function(){let e=wi(),[t,r]=Fe.useState(e?()=>Rr.nextId():null);return Dt(()=>{t===null&&r(Rr.nextId())},[t]),t!=null?""+t:void 0};function It(e,t,...r){if(e in t){let a=t[e];return typeof a=="function"?a(...r):a}let n=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(a=>`"${a}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,It),n}function Yc(e){return Rr.isServer?null:e instanceof Node?e.ownerDocument:e!=null&&e.hasOwnProperty("current")&&e.current instanceof Node?e.current.ownerDocument:document}let mm=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var _r=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e))(_r||{}),Hy=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(Hy||{}),vk=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(vk||{});function By(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(mm)).sort((t,r)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(r.tabIndex||Number.MAX_SAFE_INTEGER)))}var Th=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(Th||{});function Ah(e,t=0){var r;return e===((r=Yc(e))==null?void 0:r.body)?!1:It(t,{0(){return e.matches(mm)},1(){let n=e;for(;n!==null;){if(n.matches(mm))return!0;n=n.parentElement}return!1}})}function qy(e){let t=Yc(e);sr().nextFrame(()=>{t&&!Ah(t.activeElement,0)&&Sn(e)})}var bk=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(bk||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function Sn(e){e==null||e.focus({preventScroll:!0})}let jk=["textarea","input"].join(",");function wk(e){var t,r;return(r=(t=e==null?void 0:e.matches)==null?void 0:t.call(e,jk))!=null?r:!1}function Wy(e,t=r=>r){return e.slice().sort((r,n)=>{let a=t(r),i=t(n);if(a===null||i===null)return 0;let l=a.compareDocumentPosition(i);return l&Node.DOCUMENT_POSITION_FOLLOWING?-1:l&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function Nk(e,t){return al(By(),t,{relativeTo:e})}function al(e,t,{sorted:r=!0,relativeTo:n=null,skipElements:a=[]}={}){let i=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e.ownerDocument,l=Array.isArray(e)?r?Wy(e):e:By(e);a.length>0&&l.length>1&&(l=l.filter(j=>!a.includes(j))),n=n??i.activeElement;let o=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,l.indexOf(n))-1;if(t&4)return Math.max(0,l.indexOf(n))+1;if(t&8)return l.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),d=t&32?{preventScroll:!0}:{},m=0,h=l.length,p;do{if(m>=h||m+h<=0)return 0;let j=c+m;if(t&16)j=(j+h)%h;else{if(j<0)return 3;if(j>=h)return 1}p=l[j],p==null||p.focus(d),m+=o}while(p!==i.activeElement);return t&6&&wk(p)&&p.select(),2}function Ky(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function kk(){return/Android/gi.test(window.navigator.userAgent)}function Sk(){return Ky()||kk()}function wo(e,t,r){let n=Pr(t);u.useEffect(()=>{function a(i){n.current(i)}return document.addEventListener(e,a,r),()=>document.removeEventListener(e,a,r)},[e,r])}function Qy(e,t,r){let n=Pr(t);u.useEffect(()=>{function a(i){n.current(i)}return window.addEventListener(e,a,r),()=>window.removeEventListener(e,a,r)},[e,r])}function Vy(e,t,r=!0){let n=u.useRef(!1);u.useEffect(()=>{requestAnimationFrame(()=>{n.current=r})},[r]);function a(l,o){if(!n.current||l.defaultPrevented)return;let c=o(l);if(c===null||!c.getRootNode().contains(c)||!c.isConnected)return;let d=function m(h){return typeof h=="function"?m(h()):Array.isArray(h)||h instanceof Set?h:[h]}(e);for(let m of d){if(m===null)continue;let h=m instanceof HTMLElement?m:m.current;if(h!=null&&h.contains(c)||l.composed&&l.composedPath().includes(h))return}return!Ah(c,Th.Loose)&&c.tabIndex!==-1&&l.preventDefault(),t(l,c)}let i=u.useRef(null);wo("pointerdown",l=>{var o,c;n.current&&(i.current=((c=(o=l.composedPath)==null?void 0:o.call(l))==null?void 0:c[0])||l.target)},!0),wo("mousedown",l=>{var o,c;n.current&&(i.current=((c=(o=l.composedPath)==null?void 0:o.call(l))==null?void 0:c[0])||l.target)},!0),wo("click",l=>{Sk()||i.current&&(a(l,()=>i.current),i.current=null)},!0),wo("touchend",l=>a(l,()=>l.target instanceof HTMLElement?l.target:null),!0),Qy("blur",l=>a(l,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function Ni(...e){return u.useMemo(()=>Yc(...e),[...e])}function Hf(e){var t;if(e.type)return e.type;let r=(t=e.as)!=null?t:"button";if(typeof r=="string"&&r.toLowerCase()==="button")return"button"}function Ck(e,t){let[r,n]=u.useState(()=>Hf(e));return Dt(()=>{n(Hf(e))},[e.type,e.as]),Dt(()=>{r||t.current&&t.current instanceof HTMLButtonElement&&!t.current.hasAttribute("type")&&n("button")},[r,t]),r}let Gy=Symbol();function _k(e,t=!0){return Object.assign(e,{[Gy]:t})}function hs(...e){let t=u.useRef(e);u.useEffect(()=>{t.current=e},[e]);let r=Be(n=>{for(let a of t.current)a!=null&&(typeof a=="function"?a(n):a.current=n)});return e.every(n=>n==null||(n==null?void 0:n[Gy]))?void 0:r}function Bf(e){return[e.screenX,e.screenY]}function Ek(){let e=u.useRef([-1,-1]);return{wasMoved(t){let r=Bf(t);return e.current[0]===r[0]&&e.current[1]===r[1]?!1:(e.current=r,!0)},update(t){e.current=Bf(t)}}}function Mk({container:e,accept:t,walk:r,enabled:n=!0}){let a=u.useRef(t),i=u.useRef(r);u.useEffect(()=>{a.current=t,i.current=r},[t,r]),Dt(()=>{if(!e||!n)return;let l=Yc(e);if(!l)return;let o=a.current,c=i.current,d=Object.assign(h=>o(h),{acceptNode:o}),m=l.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,d,!1);for(;m.nextNode();)c(m.currentNode)},[e,n,a,i])}function Rh(e,t){let r=u.useRef([]),n=Be(e);u.useEffect(()=>{let a=[...r.current];for(let[i,l]of t.entries())if(r.current[i]!==l){let o=n(t,a);return r.current=t,o}},[n,...t])}function vc(...e){return Array.from(new Set(e.flatMap(t=>typeof t=="string"?t.split(" "):[]))).filter(Boolean).join(" ")}var ci=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(ci||{}),hn=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(hn||{});function rs({ourProps:e,theirProps:t,slot:r,defaultTag:n,features:a,visible:i=!0,name:l,mergeRefs:o}){o=o??Tk;let c=Yy(t,e);if(i)return No(c,r,n,l,o);let d=a??0;if(d&2){let{static:m=!1,...h}=c;if(m)return No(h,r,n,l,o)}if(d&1){let{unmount:m=!0,...h}=c;return It(m?0:1,{0(){return null},1(){return No({...h,hidden:!0,style:{display:"none"}},r,n,l,o)}})}return No(c,r,n,l,o)}function No(e,t={},r,n,a){let{as:i=r,children:l,refName:o="ref",...c}=Od(e,["unmount","static"]),d=e.ref!==void 0?{[o]:e.ref}:{},m=typeof l=="function"?l(t):l;"className"in c&&c.className&&typeof c.className=="function"&&(c.className=c.className(t));let h={};if(t){let p=!1,j=[];for(let[f,g]of Object.entries(t))typeof g=="boolean"&&(p=!0),g===!0&&j.push(f);p&&(h["data-headlessui-state"]=j.join(" "))}if(i===u.Fragment&&Object.keys(qf(c)).length>0){if(!u.isValidElement(m)||Array.isArray(m)&&m.length>1)throw new Error(['Passing props on "Fragment"!',"",`The current component <${n} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(c).map(g=>`  - ${g}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(g=>`  - ${g}`).join(`
`)].join(`
`));let p=m.props,j=typeof(p==null?void 0:p.className)=="function"?(...g)=>vc(p==null?void 0:p.className(...g),c.className):vc(p==null?void 0:p.className,c.className),f=j?{className:j}:{};return u.cloneElement(m,Object.assign({},Yy(m.props,qf(Od(c,["ref"]))),h,d,{ref:a(m.ref,d.ref)},f))}return u.createElement(i,Object.assign({},Od(c,["ref"]),i!==u.Fragment&&d,i!==u.Fragment&&h),m)}function Tk(...e){return e.every(t=>t==null)?void 0:t=>{for(let r of e)r!=null&&(typeof r=="function"?r(t):r.current=t)}}function Yy(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},r={};for(let n of e)for(let a in n)a.startsWith("on")&&typeof n[a]=="function"?(r[a]!=null||(r[a]=[]),r[a].push(n[a])):t[a]=n[a];if(t.disabled||t["aria-disabled"])return Object.assign(t,Object.fromEntries(Object.keys(r).map(n=>[n,void 0])));for(let n in r)Object.assign(t,{[n](a,...i){let l=r[n];for(let o of l){if((a instanceof Event||(a==null?void 0:a.nativeEvent)instanceof Event)&&a.defaultPrevented)return;o(a,...i)}}});return t}function Vt(e){var t;return Object.assign(u.forwardRef(e),{displayName:(t=e.displayName)!=null?t:e.name})}function qf(e){let t=Object.assign({},e);for(let r in t)t[r]===void 0&&delete t[r];return t}function Od(e,t=[]){let r=Object.assign({},e);for(let n of t)n in r&&delete r[n];return r}let Ak="div";var bc=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(bc||{});function Rk(e,t){var r;let{features:n=1,...a}=e,i={ref:t,"aria-hidden":(n&2)===2?!0:(r=a["aria-hidden"])!=null?r:void 0,hidden:(n&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(n&4)===4&&(n&2)!==2&&{display:"none"}}};return rs({ourProps:i,theirProps:a,slot:{},defaultTag:Ak,name:"Hidden"})}let hm=Vt(Rk),Ph=u.createContext(null);Ph.displayName="OpenClosedContext";var qt=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(qt||{});function Jc(){return u.useContext(Ph)}function Jy({value:e,children:t}){return Fe.createElement(Ph.Provider,{value:e},t)}function Pk(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}let Zr=[];Pk(()=>{function e(t){t.target instanceof HTMLElement&&t.target!==document.body&&Zr[0]!==t.target&&(Zr.unshift(t.target),Zr=Zr.filter(r=>r!=null&&r.isConnected),Zr.splice(10))}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function Xy(e){let t=e.parentElement,r=null;for(;t&&!(t instanceof HTMLFieldSetElement);)t instanceof HTMLLegendElement&&(r=t),t=t.parentElement;let n=(t==null?void 0:t.getAttribute("disabled"))==="";return n&&Lk(r)?!1:n}function Lk(e){if(!e)return!1;let t=e.previousElementSibling;for(;t!==null;){if(t instanceof HTMLLegendElement)return!1;t=t.previousElementSibling}return!0}function Fk(e){throw new Error("Unexpected object: "+e)}var Js=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(Js||{});function $k(e,t){let r=t.resolveItems();if(r.length<=0)return null;let n=t.resolveActiveIndex(),a=n??-1;switch(e.focus){case 0:{for(let i=0;i<r.length;++i)if(!t.resolveDisabled(r[i],i,r))return i;return n}case 1:{for(let i=a-1;i>=0;--i)if(!t.resolveDisabled(r[i],i,r))return i;return n}case 2:{for(let i=a+1;i<r.length;++i)if(!t.resolveDisabled(r[i],i,r))return i;return n}case 3:{for(let i=r.length-1;i>=0;--i)if(!t.resolveDisabled(r[i],i,r))return i;return n}case 4:{for(let i=0;i<r.length;++i)if(t.resolveId(r[i],i,r)===e.id)return i;return n}case 5:return null;default:Fk(e)}}var Lt=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(Lt||{});function Zy(e,t,r,n){let a=Pr(r);u.useEffect(()=>{e=e??window;function i(l){a.current(l)}return e.addEventListener(t,i,n),()=>e.removeEventListener(t,i,n)},[e,t,n])}function Kl(){let e=u.useRef(!1);return Dt(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function ev(e){let t=Be(e),r=u.useRef(!1);u.useEffect(()=>(r.current=!1,()=>{r.current=!0,Gc(()=>{r.current&&t()})}),[t])}var Qi=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(Qi||{});function Ik(){let e=u.useRef(0);return Qy("keydown",t=>{t.key==="Tab"&&(e.current=t.shiftKey?1:0)},!0),e}function tv(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let r of e.current)r.current instanceof HTMLElement&&t.add(r.current);return t}let Ok="div";var sv=(e=>(e[e.None=1]="None",e[e.InitialFocus=2]="InitialFocus",e[e.TabLock=4]="TabLock",e[e.FocusLock=8]="FocusLock",e[e.RestoreFocus=16]="RestoreFocus",e[e.All=30]="All",e))(sv||{});function Dk(e,t){let r=u.useRef(null),n=hs(r,t),{initialFocus:a,containers:i,features:l=30,...o}=e;wi()||(l=1);let c=Ni(r);Hk({ownerDocument:c},!!(l&16));let d=Bk({ownerDocument:c,container:r,initialFocus:a},!!(l&2));qk({ownerDocument:c,container:r,containers:i,previousActiveElement:d},!!(l&8));let m=Ik(),h=Be(g=>{let y=r.current;y&&(v=>v())(()=>{It(m.current,{[Qi.Forwards]:()=>{al(y,_r.First,{skipElements:[g.relatedTarget]})},[Qi.Backwards]:()=>{al(y,_r.Last,{skipElements:[g.relatedTarget]})}})})}),p=Wl(),j=u.useRef(!1),f={ref:n,onKeyDown(g){g.key=="Tab"&&(j.current=!0,p.requestAnimationFrame(()=>{j.current=!1}))},onBlur(g){let y=tv(i);r.current instanceof HTMLElement&&y.add(r.current);let v=g.relatedTarget;v instanceof HTMLElement&&v.dataset.headlessuiFocusGuard!=="true"&&(rv(y,v)||(j.current?al(r.current,It(m.current,{[Qi.Forwards]:()=>_r.Next,[Qi.Backwards]:()=>_r.Previous})|_r.WrapAround,{relativeTo:g.target}):g.target instanceof HTMLElement&&Sn(g.target)))}};return Fe.createElement(Fe.Fragment,null,!!(l&4)&&Fe.createElement(hm,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:h,features:bc.Focusable}),rs({ourProps:f,theirProps:o,defaultTag:Ok,name:"FocusTrap"}),!!(l&4)&&Fe.createElement(hm,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:h,features:bc.Focusable}))}let zk=Vt(Dk),Fi=Object.assign(zk,{features:sv});function Uk(e=!0){let t=u.useRef(Zr.slice());return Rh(([r],[n])=>{n===!0&&r===!1&&Gc(()=>{t.current.splice(0)}),n===!1&&r===!0&&(t.current=Zr.slice())},[e,Zr,t]),Be(()=>{var r;return(r=t.current.find(n=>n!=null&&n.isConnected))!=null?r:null})}function Hk({ownerDocument:e},t){let r=Uk(t);Rh(()=>{t||(e==null?void 0:e.activeElement)===(e==null?void 0:e.body)&&Sn(r())},[t]),ev(()=>{t&&Sn(r())})}function Bk({ownerDocument:e,container:t,initialFocus:r},n){let a=u.useRef(null),i=Kl();return Rh(()=>{if(!n)return;let l=t.current;l&&Gc(()=>{if(!i.current)return;let o=e==null?void 0:e.activeElement;if(r!=null&&r.current){if((r==null?void 0:r.current)===o){a.current=o;return}}else if(l.contains(o)){a.current=o;return}r!=null&&r.current?Sn(r.current):al(l,_r.First)===Hy.Error&&console.warn("There are no focusable elements inside the <FocusTrap />"),a.current=e==null?void 0:e.activeElement})},[n]),a}function qk({ownerDocument:e,container:t,containers:r,previousActiveElement:n},a){let i=Kl();Zy(e==null?void 0:e.defaultView,"focus",l=>{if(!a||!i.current)return;let o=tv(r);t.current instanceof HTMLElement&&o.add(t.current);let c=n.current;if(!c)return;let d=l.target;d&&d instanceof HTMLElement?rv(o,d)?(n.current=d,Sn(d)):(l.preventDefault(),l.stopPropagation(),Sn(c)):Sn(n.current)},!0)}function rv(e,t){for(let r of e)if(r.contains(t))return!0;return!1}let nv=u.createContext(!1);function Wk(){return u.useContext(nv)}function fm(e){return Fe.createElement(nv.Provider,{value:e.force},e.children)}function Kk(e){let t=Wk(),r=u.useContext(av),n=Ni(e),[a,i]=u.useState(()=>{if(!t&&r!==null||Rr.isServer)return null;let l=n==null?void 0:n.getElementById("headlessui-portal-root");if(l)return l;if(n===null)return null;let o=n.createElement("div");return o.setAttribute("id","headlessui-portal-root"),n.body.appendChild(o)});return u.useEffect(()=>{a!==null&&(n!=null&&n.body.contains(a)||n==null||n.body.appendChild(a))},[a,n]),u.useEffect(()=>{t||r!==null&&i(r.current)},[r,i,t]),a}let Qk=u.Fragment;function Vk(e,t){let r=e,n=u.useRef(null),a=hs(_k(m=>{n.current=m}),t),i=Ni(n),l=Kk(n),[o]=u.useState(()=>{var m;return Rr.isServer?null:(m=i==null?void 0:i.createElement("div"))!=null?m:null}),c=u.useContext(gm),d=wi();return Dt(()=>{!l||!o||l.contains(o)||(o.setAttribute("data-headlessui-portal",""),l.appendChild(o))},[l,o]),Dt(()=>{if(o&&c)return c.register(o)},[c,o]),ev(()=>{var m;!l||!o||(o instanceof Node&&l.contains(o)&&l.removeChild(o),l.childNodes.length<=0&&((m=l.parentElement)==null||m.removeChild(l)))}),d?!l||!o?null:Bp.createPortal(rs({ourProps:{ref:a},theirProps:r,defaultTag:Qk,name:"Portal"}),o):null}let Gk=u.Fragment,av=u.createContext(null);function Yk(e,t){let{target:r,...n}=e,a={ref:hs(t)};return Fe.createElement(av.Provider,{value:r},rs({ourProps:a,theirProps:n,defaultTag:Gk,name:"Popover.Group"}))}let gm=u.createContext(null);function Jk(){let e=u.useContext(gm),t=u.useRef([]),r=Be(i=>(t.current.push(i),e&&e.register(i),()=>n(i))),n=Be(i=>{let l=t.current.indexOf(i);l!==-1&&t.current.splice(l,1),e&&e.unregister(i)}),a=u.useMemo(()=>({register:r,unregister:n,portals:t}),[r,n,t]);return[t,u.useMemo(()=>function({children:i}){return Fe.createElement(gm.Provider,{value:a},i)},[a])]}let Xk=Vt(Vk),Zk=Vt(Yk),xm=Object.assign(Xk,{Group:Zk});function e5(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}const t5=typeof Object.is=="function"?Object.is:e5,{useState:s5,useEffect:r5,useLayoutEffect:n5,useDebugValue:a5}=Za;function i5(e,t,r){const n=t(),[{inst:a},i]=s5({inst:{value:n,getSnapshot:t}});return n5(()=>{a.value=n,a.getSnapshot=t,Dd(a)&&i({inst:a})},[e,n,t]),r5(()=>(Dd(a)&&i({inst:a}),e(()=>{Dd(a)&&i({inst:a})})),[e]),a5(n),n}function Dd(e){const t=e.getSnapshot,r=e.value;try{const n=t();return!t5(r,n)}catch{return!0}}function l5(e,t,r){return t()}const o5=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",c5=!o5,d5=c5?l5:i5,u5="useSyncExternalStore"in Za?(e=>e.useSyncExternalStore)(Za):d5;function m5(e){return u5(e.subscribe,e.getSnapshot,e.getSnapshot)}function h5(e,t){let r=e(),n=new Set;return{getSnapshot(){return r},subscribe(a){return n.add(a),()=>n.delete(a)},dispatch(a,...i){let l=t[a].call(r,...i);l&&(r=l,n.forEach(o=>o()))}}}function f5(){let e;return{before({doc:t}){var r;let n=t.documentElement;e=((r=t.defaultView)!=null?r:window).innerWidth-n.clientWidth},after({doc:t,d:r}){let n=t.documentElement,a=n.clientWidth-n.offsetWidth,i=e-a;r.style(n,"paddingRight",`${i}px`)}}}function g5(){return Ky()?{before({doc:e,d:t,meta:r}){function n(a){return r.containers.flatMap(i=>i()).some(i=>i.contains(a))}t.microTask(()=>{var a;if(window.getComputedStyle(e.documentElement).scrollBehavior!=="auto"){let o=sr();o.style(e.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>o.dispose()))}let i=(a=window.scrollY)!=null?a:window.pageYOffset,l=null;t.addEventListener(e,"click",o=>{if(o.target instanceof HTMLElement)try{let c=o.target.closest("a");if(!c)return;let{hash:d}=new URL(c.href),m=e.querySelector(d);m&&!n(m)&&(l=m)}catch{}},!0),t.addEventListener(e,"touchstart",o=>{if(o.target instanceof HTMLElement)if(n(o.target)){let c=o.target;for(;c.parentElement&&n(c.parentElement);)c=c.parentElement;t.style(c,"overscrollBehavior","contain")}else t.style(o.target,"touchAction","none")}),t.addEventListener(e,"touchmove",o=>{if(o.target instanceof HTMLElement)if(n(o.target)){let c=o.target;for(;c.parentElement&&c.dataset.headlessuiPortal!==""&&!(c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth);)c=c.parentElement;c.dataset.headlessuiPortal===""&&o.preventDefault()}else o.preventDefault()},{passive:!1}),t.add(()=>{var o;let c=(o=window.scrollY)!=null?o:window.pageYOffset;i!==c&&window.scrollTo(0,i),l&&l.isConnected&&(l.scrollIntoView({block:"nearest"}),l=null)})})}}:{}}function x5(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function p5(e){let t={};for(let r of e)Object.assign(t,r(t));return t}let Wn=h5(()=>new Map,{PUSH(e,t){var r;let n=(r=this.get(e))!=null?r:{doc:e,count:0,d:sr(),meta:new Set};return n.count++,n.meta.add(t),this.set(e,n),this},POP(e,t){let r=this.get(e);return r&&(r.count--,r.meta.delete(t)),this},SCROLL_PREVENT({doc:e,d:t,meta:r}){let n={doc:e,d:t,meta:p5(r)},a=[g5(),f5(),x5()];a.forEach(({before:i})=>i==null?void 0:i(n)),a.forEach(({after:i})=>i==null?void 0:i(n))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});Wn.subscribe(()=>{let e=Wn.getSnapshot(),t=new Map;for(let[r]of e)t.set(r,r.documentElement.style.overflow);for(let r of e.values()){let n=t.get(r.doc)==="hidden",a=r.count!==0;(a&&!n||!a&&n)&&Wn.dispatch(r.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",r),r.count===0&&Wn.dispatch("TEARDOWN",r)}});function y5(e,t,r){let n=m5(Wn),a=e?n.get(e):void 0,i=a?a.count>0:!1;return Dt(()=>{if(!(!e||!t))return Wn.dispatch("PUSH",e,r),()=>Wn.dispatch("POP",e,r)},[t,e]),i}let zd=new Map,$i=new Map;function Wf(e,t=!0){Dt(()=>{var r;if(!t)return;let n=typeof e=="function"?e():e.current;if(!n)return;function a(){var l;if(!n)return;let o=(l=$i.get(n))!=null?l:1;if(o===1?$i.delete(n):$i.set(n,o-1),o!==1)return;let c=zd.get(n);c&&(c["aria-hidden"]===null?n.removeAttribute("aria-hidden"):n.setAttribute("aria-hidden",c["aria-hidden"]),n.inert=c.inert,zd.delete(n))}let i=(r=$i.get(n))!=null?r:0;return $i.set(n,i+1),i!==0||(zd.set(n,{"aria-hidden":n.getAttribute("aria-hidden"),inert:n.inert}),n.setAttribute("aria-hidden","true"),n.inert=!0),a},[e,t])}function v5({defaultContainers:e=[],portals:t,mainTreeNodeRef:r}={}){var n;let a=u.useRef((n=r==null?void 0:r.current)!=null?n:null),i=Ni(a),l=Be(()=>{var o,c,d;let m=[];for(let h of e)h!==null&&(h instanceof HTMLElement?m.push(h):"current"in h&&h.current instanceof HTMLElement&&m.push(h.current));if(t!=null&&t.current)for(let h of t.current)m.push(h);for(let h of(o=i==null?void 0:i.querySelectorAll("html > *, body > *"))!=null?o:[])h!==document.body&&h!==document.head&&h instanceof HTMLElement&&h.id!=="headlessui-portal-root"&&(h.contains(a.current)||h.contains((d=(c=a.current)==null?void 0:c.getRootNode())==null?void 0:d.host)||m.some(p=>h.contains(p))||m.push(h));return m});return{resolveContainers:l,contains:Be(o=>l().some(c=>c.contains(o))),mainTreeNodeRef:a,MainTreeNode:u.useMemo(()=>function(){return r!=null?null:Fe.createElement(hm,{features:bc.Hidden,ref:a})},[a,r])}}let Lh=u.createContext(()=>{});Lh.displayName="StackContext";var pm=(e=>(e[e.Add=0]="Add",e[e.Remove=1]="Remove",e))(pm||{});function b5(){return u.useContext(Lh)}function j5({children:e,onUpdate:t,type:r,element:n,enabled:a}){let i=b5(),l=Be((...o)=>{t==null||t(...o),i(...o)});return Dt(()=>{let o=a===void 0||a===!0;return o&&l(0,r,n),()=>{o&&l(1,r,n)}},[l,r,n,a]),Fe.createElement(Lh.Provider,{value:l},e)}let iv=u.createContext(null);function lv(){let e=u.useContext(iv);if(e===null){let t=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,lv),t}return e}function w5(){let[e,t]=u.useState([]);return[e.length>0?e.join(" "):void 0,u.useMemo(()=>function(r){let n=Be(i=>(t(l=>[...l,i]),()=>t(l=>{let o=l.slice(),c=o.indexOf(i);return c!==-1&&o.splice(c,1),o}))),a=u.useMemo(()=>({register:n,slot:r.slot,name:r.name,props:r.props}),[n,r.slot,r.name,r.props]);return Fe.createElement(iv.Provider,{value:a},r.children)},[t])]}let N5="p";function k5(e,t){let r=zr(),{id:n=`headlessui-description-${r}`,...a}=e,i=lv(),l=hs(t);Dt(()=>i.register(n),[n,i.register]);let o={ref:l,...i.props,id:n};return rs({ourProps:o,theirProps:a,slot:i.slot||{},defaultTag:N5,name:i.name||"Description"})}let S5=Vt(k5),C5=Object.assign(S5,{});var _5=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(_5||{}),E5=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(E5||{});let M5={0(e,t){return e.titleId===t.id?e:{...e,titleId:t.id}}},jc=u.createContext(null);jc.displayName="DialogContext";function Ql(e){let t=u.useContext(jc);if(t===null){let r=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,Ql),r}return t}function T5(e,t,r=()=>[document.body]){y5(e,t,n=>{var a;return{containers:[...(a=n.containers)!=null?a:[],r]}})}function A5(e,t){return It(t.type,M5,e,t)}let R5="div",P5=ci.RenderStrategy|ci.Static;function L5(e,t){let r=zr(),{id:n=`headlessui-dialog-${r}`,open:a,onClose:i,initialFocus:l,role:o="dialog",__demoMode:c=!1,...d}=e,[m,h]=u.useState(0),p=u.useRef(!1);o=function(){return o==="dialog"||o==="alertdialog"?o:(p.current||(p.current=!0,console.warn(`Invalid role [${o}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")}();let j=Jc();a===void 0&&j!==null&&(a=(j&qt.Open)===qt.Open);let f=u.useRef(null),g=hs(f,t),y=Ni(f),v=e.hasOwnProperty("open")||j!==null,x=e.hasOwnProperty("onClose");if(!v&&!x)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!v)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!x)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(typeof a!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${a}`);if(typeof i!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${i}`);let b=a?0:1,[w,N]=u.useReducer(A5,{titleId:null,descriptionId:null,panelRef:u.createRef()}),E=Be(()=>i(!1)),L=Be(re=>N({type:0,id:re})),P=wi()?c?!1:b===0:!1,ee=m>1,H=u.useContext(jc)!==null,[Q,ae]=Jk(),ne={get current(){var re;return(re=w.panelRef.current)!=null?re:f.current}},{resolveContainers:ve,mainTreeNodeRef:je,MainTreeNode:Se}=v5({portals:Q,defaultContainers:[ne]}),D=ee?"parent":"leaf",T=j!==null?(j&qt.Closing)===qt.Closing:!1,Y=H||T?!1:P,J=u.useCallback(()=>{var re,de;return(de=Array.from((re=y==null?void 0:y.querySelectorAll("body > *"))!=null?re:[]).find(U=>U.id==="headlessui-portal-root"?!1:U.contains(je.current)&&U instanceof HTMLElement))!=null?de:null},[je]);Wf(J,Y);let X=ee?!0:P,he=u.useCallback(()=>{var re,de;return(de=Array.from((re=y==null?void 0:y.querySelectorAll("[data-headlessui-portal]"))!=null?re:[]).find(U=>U.contains(je.current)&&U instanceof HTMLElement))!=null?de:null},[je]);Wf(he,X),Vy(ve,re=>{re.preventDefault(),E()},!(!P||ee));let G=!(ee||b!==0);Zy(y==null?void 0:y.defaultView,"keydown",re=>{G&&(re.defaultPrevented||re.key===Lt.Escape&&(re.preventDefault(),re.stopPropagation(),E()))}),T5(y,!(T||b!==0||H),ve),u.useEffect(()=>{if(b!==0||!f.current)return;let re=new ResizeObserver(de=>{for(let U of de){let Ce=U.target.getBoundingClientRect();Ce.x===0&&Ce.y===0&&Ce.width===0&&Ce.height===0&&E()}});return re.observe(f.current),()=>re.disconnect()},[b,f,E]);let[z,_]=w5(),B=u.useMemo(()=>[{dialogState:b,close:E,setTitleId:L},w],[b,w,E,L]),W=u.useMemo(()=>({open:b===0}),[b]),V={ref:g,id:n,role:o,"aria-modal":b===0?!0:void 0,"aria-labelledby":w.titleId,"aria-describedby":z};return Fe.createElement(j5,{type:"Dialog",enabled:b===0,element:f,onUpdate:Be((re,de)=>{de==="Dialog"&&It(re,{[pm.Add]:()=>h(U=>U+1),[pm.Remove]:()=>h(U=>U-1)})})},Fe.createElement(fm,{force:!0},Fe.createElement(xm,null,Fe.createElement(jc.Provider,{value:B},Fe.createElement(xm.Group,{target:f},Fe.createElement(fm,{force:!1},Fe.createElement(_,{slot:W,name:"Dialog.Description"},Fe.createElement(Fi,{initialFocus:l,containers:ve,features:P?It(D,{parent:Fi.features.RestoreFocus,leaf:Fi.features.All&~Fi.features.FocusLock}):Fi.features.None},Fe.createElement(ae,null,rs({ourProps:V,theirProps:d,slot:W,defaultTag:R5,features:P5,visible:b===0,name:"Dialog"}))))))))),Fe.createElement(Se,null))}let F5="div";function $5(e,t){let r=zr(),{id:n=`headlessui-dialog-overlay-${r}`,...a}=e,[{dialogState:i,close:l}]=Ql("Dialog.Overlay"),o=hs(t),c=Be(m=>{if(m.target===m.currentTarget){if(Xy(m.currentTarget))return m.preventDefault();m.preventDefault(),m.stopPropagation(),l()}}),d=u.useMemo(()=>({open:i===0}),[i]);return rs({ourProps:{ref:o,id:n,"aria-hidden":!0,onClick:c},theirProps:a,slot:d,defaultTag:F5,name:"Dialog.Overlay"})}let I5="div";function O5(e,t){let r=zr(),{id:n=`headlessui-dialog-backdrop-${r}`,...a}=e,[{dialogState:i},l]=Ql("Dialog.Backdrop"),o=hs(t);u.useEffect(()=>{if(l.panelRef.current===null)throw new Error("A <Dialog.Backdrop /> component is being used, but a <Dialog.Panel /> component is missing.")},[l.panelRef]);let c=u.useMemo(()=>({open:i===0}),[i]);return Fe.createElement(fm,{force:!0},Fe.createElement(xm,null,rs({ourProps:{ref:o,id:n,"aria-hidden":!0},theirProps:a,slot:c,defaultTag:I5,name:"Dialog.Backdrop"})))}let D5="div";function z5(e,t){let r=zr(),{id:n=`headlessui-dialog-panel-${r}`,...a}=e,[{dialogState:i},l]=Ql("Dialog.Panel"),o=hs(t,l.panelRef),c=u.useMemo(()=>({open:i===0}),[i]),d=Be(m=>{m.stopPropagation()});return rs({ourProps:{ref:o,id:n,onClick:d},theirProps:a,slot:c,defaultTag:D5,name:"Dialog.Panel"})}let U5="h2";function H5(e,t){let r=zr(),{id:n=`headlessui-dialog-title-${r}`,...a}=e,[{dialogState:i,setTitleId:l}]=Ql("Dialog.Title"),o=hs(t);u.useEffect(()=>(l(n),()=>l(null)),[n,l]);let c=u.useMemo(()=>({open:i===0}),[i]);return rs({ourProps:{ref:o,id:n},theirProps:a,slot:c,defaultTag:U5,name:"Dialog.Title"})}let B5=Vt(L5),q5=Vt(O5),W5=Vt(z5),K5=Vt($5),Q5=Vt(H5),Kf=Object.assign(B5,{Backdrop:q5,Panel:W5,Overlay:K5,Title:Q5,Description:C5}),Qf=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function Vf(e){var t,r;let n=(t=e.innerText)!=null?t:"",a=e.cloneNode(!0);if(!(a instanceof HTMLElement))return n;let i=!1;for(let o of a.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))o.remove(),i=!0;let l=i?(r=a.innerText)!=null?r:"":n;return Qf.test(l)&&(l=l.replace(Qf,"")),l}function V5(e){let t=e.getAttribute("aria-label");if(typeof t=="string")return t.trim();let r=e.getAttribute("aria-labelledby");if(r){let n=r.split(" ").map(a=>{let i=document.getElementById(a);if(i){let l=i.getAttribute("aria-label");return typeof l=="string"?l.trim():Vf(i).trim()}return null}).filter(Boolean);if(n.length>0)return n.join(", ")}return Vf(e).trim()}function G5(e){let t=u.useRef(""),r=u.useRef("");return Be(()=>{let n=e.current;if(!n)return"";let a=n.innerText;if(t.current===a)return r.current;let i=V5(n).trim().toLowerCase();return t.current=a,r.current=i,i})}var Y5=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Y5||{}),J5=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(J5||{}),X5=(e=>(e[e.OpenMenu=0]="OpenMenu",e[e.CloseMenu=1]="CloseMenu",e[e.GoToItem=2]="GoToItem",e[e.Search=3]="Search",e[e.ClearSearch=4]="ClearSearch",e[e.RegisterItem=5]="RegisterItem",e[e.UnregisterItem=6]="UnregisterItem",e))(X5||{});function Ud(e,t=r=>r){let r=e.activeItemIndex!==null?e.items[e.activeItemIndex]:null,n=Wy(t(e.items.slice()),i=>i.dataRef.current.domRef.current),a=r?n.indexOf(r):null;return a===-1&&(a=null),{items:n,activeItemIndex:a}}let Z5={1(e){return e.menuState===1?e:{...e,activeItemIndex:null,menuState:1}},0(e){return e.menuState===0?e:{...e,__demoMode:!1,menuState:0}},2:(e,t)=>{var r;let n=Ud(e),a=$k(t,{resolveItems:()=>n.items,resolveActiveIndex:()=>n.activeItemIndex,resolveId:i=>i.id,resolveDisabled:i=>i.dataRef.current.disabled});return{...e,...n,searchQuery:"",activeItemIndex:a,activationTrigger:(r=t.trigger)!=null?r:1}},3:(e,t)=>{let r=e.searchQuery!==""?0:1,n=e.searchQuery+t.value.toLowerCase(),a=(e.activeItemIndex!==null?e.items.slice(e.activeItemIndex+r).concat(e.items.slice(0,e.activeItemIndex+r)):e.items).find(l=>{var o;return((o=l.dataRef.current.textValue)==null?void 0:o.startsWith(n))&&!l.dataRef.current.disabled}),i=a?e.items.indexOf(a):-1;return i===-1||i===e.activeItemIndex?{...e,searchQuery:n}:{...e,searchQuery:n,activeItemIndex:i,activationTrigger:1}},4(e){return e.searchQuery===""?e:{...e,searchQuery:"",searchActiveItemIndex:null}},5:(e,t)=>{let r=Ud(e,n=>[...n,{id:t.id,dataRef:t.dataRef}]);return{...e,...r}},6:(e,t)=>{let r=Ud(e,n=>{let a=n.findIndex(i=>i.id===t.id);return a!==-1&&n.splice(a,1),n});return{...e,...r,activationTrigger:1}}},Fh=u.createContext(null);Fh.displayName="MenuContext";function Xc(e){let t=u.useContext(Fh);if(t===null){let r=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,Xc),r}return t}function e4(e,t){return It(t.type,Z5,e,t)}let t4=u.Fragment;function s4(e,t){let{__demoMode:r=!1,...n}=e,a=u.useReducer(e4,{__demoMode:r,menuState:r?0:1,buttonRef:u.createRef(),itemsRef:u.createRef(),items:[],searchQuery:"",activeItemIndex:null,activationTrigger:1}),[{menuState:i,itemsRef:l,buttonRef:o},c]=a,d=hs(t);Vy([o,l],(j,f)=>{var g;c({type:1}),Ah(f,Th.Loose)||(j.preventDefault(),(g=o.current)==null||g.focus())},i===0);let m=Be(()=>{c({type:1})}),h=u.useMemo(()=>({open:i===0,close:m}),[i,m]),p={ref:d};return Fe.createElement(Fh.Provider,{value:a},Fe.createElement(Jy,{value:It(i,{0:qt.Open,1:qt.Closed})},rs({ourProps:p,theirProps:n,slot:h,defaultTag:t4,name:"Menu"})))}let r4="button";function n4(e,t){var r;let n=zr(),{id:a=`headlessui-menu-button-${n}`,...i}=e,[l,o]=Xc("Menu.Button"),c=hs(l.buttonRef,t),d=Wl(),m=Be(g=>{switch(g.key){case Lt.Space:case Lt.Enter:case Lt.ArrowDown:g.preventDefault(),g.stopPropagation(),o({type:0}),d.nextFrame(()=>o({type:2,focus:Js.First}));break;case Lt.ArrowUp:g.preventDefault(),g.stopPropagation(),o({type:0}),d.nextFrame(()=>o({type:2,focus:Js.Last}));break}}),h=Be(g=>{switch(g.key){case Lt.Space:g.preventDefault();break}}),p=Be(g=>{if(Xy(g.currentTarget))return g.preventDefault();e.disabled||(l.menuState===0?(o({type:1}),d.nextFrame(()=>{var y;return(y=l.buttonRef.current)==null?void 0:y.focus({preventScroll:!0})})):(g.preventDefault(),o({type:0})))}),j=u.useMemo(()=>({open:l.menuState===0}),[l]),f={ref:c,id:a,type:Ck(e,l.buttonRef),"aria-haspopup":"menu","aria-controls":(r=l.itemsRef.current)==null?void 0:r.id,"aria-expanded":l.menuState===0,onKeyDown:m,onKeyUp:h,onClick:p};return rs({ourProps:f,theirProps:i,slot:j,defaultTag:r4,name:"Menu.Button"})}let a4="div",i4=ci.RenderStrategy|ci.Static;function l4(e,t){var r,n;let a=zr(),{id:i=`headlessui-menu-items-${a}`,...l}=e,[o,c]=Xc("Menu.Items"),d=hs(o.itemsRef,t),m=Ni(o.itemsRef),h=Wl(),p=Jc(),j=p!==null?(p&qt.Open)===qt.Open:o.menuState===0;u.useEffect(()=>{let x=o.itemsRef.current;x&&o.menuState===0&&x!==(m==null?void 0:m.activeElement)&&x.focus({preventScroll:!0})},[o.menuState,o.itemsRef,m]),Mk({container:o.itemsRef.current,enabled:o.menuState===0,accept(x){return x.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:x.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(x){x.setAttribute("role","none")}});let f=Be(x=>{var b,w;switch(h.dispose(),x.key){case Lt.Space:if(o.searchQuery!=="")return x.preventDefault(),x.stopPropagation(),c({type:3,value:x.key});case Lt.Enter:if(x.preventDefault(),x.stopPropagation(),c({type:1}),o.activeItemIndex!==null){let{dataRef:N}=o.items[o.activeItemIndex];(w=(b=N.current)==null?void 0:b.domRef.current)==null||w.click()}qy(o.buttonRef.current);break;case Lt.ArrowDown:return x.preventDefault(),x.stopPropagation(),c({type:2,focus:Js.Next});case Lt.ArrowUp:return x.preventDefault(),x.stopPropagation(),c({type:2,focus:Js.Previous});case Lt.Home:case Lt.PageUp:return x.preventDefault(),x.stopPropagation(),c({type:2,focus:Js.First});case Lt.End:case Lt.PageDown:return x.preventDefault(),x.stopPropagation(),c({type:2,focus:Js.Last});case Lt.Escape:x.preventDefault(),x.stopPropagation(),c({type:1}),sr().nextFrame(()=>{var N;return(N=o.buttonRef.current)==null?void 0:N.focus({preventScroll:!0})});break;case Lt.Tab:x.preventDefault(),x.stopPropagation(),c({type:1}),sr().nextFrame(()=>{Nk(o.buttonRef.current,x.shiftKey?_r.Previous:_r.Next)});break;default:x.key.length===1&&(c({type:3,value:x.key}),h.setTimeout(()=>c({type:4}),350));break}}),g=Be(x=>{switch(x.key){case Lt.Space:x.preventDefault();break}}),y=u.useMemo(()=>({open:o.menuState===0}),[o]),v={"aria-activedescendant":o.activeItemIndex===null||(r=o.items[o.activeItemIndex])==null?void 0:r.id,"aria-labelledby":(n=o.buttonRef.current)==null?void 0:n.id,id:i,onKeyDown:f,onKeyUp:g,role:"menu",tabIndex:0,ref:d};return rs({ourProps:v,theirProps:l,slot:y,defaultTag:a4,features:i4,visible:j,name:"Menu.Items"})}let o4=u.Fragment;function c4(e,t){let r=zr(),{id:n=`headlessui-menu-item-${r}`,disabled:a=!1,...i}=e,[l,o]=Xc("Menu.Item"),c=l.activeItemIndex!==null?l.items[l.activeItemIndex].id===n:!1,d=u.useRef(null),m=hs(t,d);Dt(()=>{if(l.__demoMode||l.menuState!==0||!c||l.activationTrigger===0)return;let N=sr();return N.requestAnimationFrame(()=>{var E,L;(L=(E=d.current)==null?void 0:E.scrollIntoView)==null||L.call(E,{block:"nearest"})}),N.dispose},[l.__demoMode,d,c,l.menuState,l.activationTrigger,l.activeItemIndex]);let h=G5(d),p=u.useRef({disabled:a,domRef:d,get textValue(){return h()}});Dt(()=>{p.current.disabled=a},[p,a]),Dt(()=>(o({type:5,id:n,dataRef:p}),()=>o({type:6,id:n})),[p,n]);let j=Be(()=>{o({type:1})}),f=Be(N=>{if(a)return N.preventDefault();o({type:1}),qy(l.buttonRef.current)}),g=Be(()=>{if(a)return o({type:2,focus:Js.Nothing});o({type:2,focus:Js.Specific,id:n})}),y=Ek(),v=Be(N=>y.update(N)),x=Be(N=>{y.wasMoved(N)&&(a||c||o({type:2,focus:Js.Specific,id:n,trigger:0}))}),b=Be(N=>{y.wasMoved(N)&&(a||c&&o({type:2,focus:Js.Nothing}))}),w=u.useMemo(()=>({active:c,disabled:a,close:j}),[c,a,j]);return rs({ourProps:{id:n,ref:m,role:"menuitem",tabIndex:a===!0?void 0:-1,"aria-disabled":a===!0?!0:void 0,disabled:void 0,onClick:f,onFocus:g,onPointerEnter:v,onMouseEnter:v,onPointerMove:x,onMouseMove:x,onPointerLeave:b,onMouseLeave:b},theirProps:i,slot:w,defaultTag:o4,name:"Menu.Item"})}let d4=Vt(s4),u4=Vt(n4),m4=Vt(l4),h4=Vt(c4),Ii=Object.assign(d4,{Button:u4,Items:m4,Item:h4});function f4(e=0){let[t,r]=u.useState(e),n=Kl(),a=u.useCallback(c=>{n.current&&r(d=>d|c)},[t,n]),i=u.useCallback(c=>!!(t&c),[t]),l=u.useCallback(c=>{n.current&&r(d=>d&~c)},[r,n]),o=u.useCallback(c=>{n.current&&r(d=>d^c)},[r]);return{flags:t,addFlag:a,hasFlag:i,removeFlag:l,toggleFlag:o}}function g4(e){let t={called:!1};return(...r)=>{if(!t.called)return t.called=!0,e(...r)}}function Hd(e,...t){e&&t.length>0&&e.classList.add(...t)}function Bd(e,...t){e&&t.length>0&&e.classList.remove(...t)}function x4(e,t){let r=sr();if(!e)return r.dispose;let{transitionDuration:n,transitionDelay:a}=getComputedStyle(e),[i,l]=[n,a].map(c=>{let[d=0]=c.split(",").filter(Boolean).map(m=>m.includes("ms")?parseFloat(m):parseFloat(m)*1e3).sort((m,h)=>h-m);return d}),o=i+l;if(o!==0){r.group(d=>{d.setTimeout(()=>{t(),d.dispose()},o),d.addEventListener(e,"transitionrun",m=>{m.target===m.currentTarget&&d.dispose()})});let c=r.addEventListener(e,"transitionend",d=>{d.target===d.currentTarget&&(t(),c())})}else t();return r.add(()=>t()),r.dispose}function p4(e,t,r,n){let a=r?"enter":"leave",i=sr(),l=n!==void 0?g4(n):()=>{};a==="enter"&&(e.removeAttribute("hidden"),e.style.display="");let o=It(a,{enter:()=>t.enter,leave:()=>t.leave}),c=It(a,{enter:()=>t.enterTo,leave:()=>t.leaveTo}),d=It(a,{enter:()=>t.enterFrom,leave:()=>t.leaveFrom});return Bd(e,...t.base,...t.enter,...t.enterTo,...t.enterFrom,...t.leave,...t.leaveFrom,...t.leaveTo,...t.entered),Hd(e,...t.base,...o,...d),i.nextFrame(()=>{Bd(e,...t.base,...o,...d),Hd(e,...t.base,...o,...c),x4(e,()=>(Bd(e,...t.base,...o),Hd(e,...t.base,...t.entered),l()))}),i.dispose}function y4({immediate:e,container:t,direction:r,classes:n,onStart:a,onStop:i}){let l=Kl(),o=Wl(),c=Pr(r);Dt(()=>{e&&(c.current="enter")},[e]),Dt(()=>{let d=sr();o.add(d.dispose);let m=t.current;if(m&&c.current!=="idle"&&l.current)return d.dispose(),a.current(c.current),d.add(p4(m,n.current,c.current==="enter",()=>{d.dispose(),i.current(c.current)})),d.dispose},[r])}function qr(e=""){return e.split(/\s+/).filter(t=>t.length>1)}let Zc=u.createContext(null);Zc.displayName="TransitionContext";var v4=(e=>(e.Visible="visible",e.Hidden="hidden",e))(v4||{});function b4(){let e=u.useContext(Zc);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function j4(){let e=u.useContext(ed);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let ed=u.createContext(null);ed.displayName="NestingContext";function td(e){return"children"in e?td(e.children):e.current.filter(({el:t})=>t.current!==null).filter(({state:t})=>t==="visible").length>0}function ov(e,t){let r=Pr(e),n=u.useRef([]),a=Kl(),i=Wl(),l=Be((j,f=hn.Hidden)=>{let g=n.current.findIndex(({el:y})=>y===j);g!==-1&&(It(f,{[hn.Unmount](){n.current.splice(g,1)},[hn.Hidden](){n.current[g].state="hidden"}}),i.microTask(()=>{var y;!td(n)&&a.current&&((y=r.current)==null||y.call(r))}))}),o=Be(j=>{let f=n.current.find(({el:g})=>g===j);return f?f.state!=="visible"&&(f.state="visible"):n.current.push({el:j,state:"visible"}),()=>l(j,hn.Unmount)}),c=u.useRef([]),d=u.useRef(Promise.resolve()),m=u.useRef({enter:[],leave:[],idle:[]}),h=Be((j,f,g)=>{c.current.splice(0),t&&(t.chains.current[f]=t.chains.current[f].filter(([y])=>y!==j)),t==null||t.chains.current[f].push([j,new Promise(y=>{c.current.push(y)})]),t==null||t.chains.current[f].push([j,new Promise(y=>{Promise.all(m.current[f].map(([v,x])=>x)).then(()=>y())})]),f==="enter"?d.current=d.current.then(()=>t==null?void 0:t.wait.current).then(()=>g(f)):g(f)}),p=Be((j,f,g)=>{Promise.all(m.current[f].splice(0).map(([y,v])=>v)).then(()=>{var y;(y=c.current.shift())==null||y()}).then(()=>g(f))});return u.useMemo(()=>({children:n,register:o,unregister:l,onStart:h,onStop:p,wait:d,chains:m}),[o,l,n,h,p,m,d])}function w4(){}let N4=["beforeEnter","afterEnter","beforeLeave","afterLeave"];function Gf(e){var t;let r={};for(let n of N4)r[n]=(t=e[n])!=null?t:w4;return r}function k4(e){let t=u.useRef(Gf(e));return u.useEffect(()=>{t.current=Gf(e)},[e]),t}let S4="div",cv=ci.RenderStrategy;function C4(e,t){var r,n;let{beforeEnter:a,afterEnter:i,beforeLeave:l,afterLeave:o,enter:c,enterFrom:d,enterTo:m,entered:h,leave:p,leaveFrom:j,leaveTo:f,...g}=e,y=u.useRef(null),v=hs(y,t),x=(r=g.unmount)==null||r?hn.Unmount:hn.Hidden,{show:b,appear:w,initial:N}=b4(),[E,L]=u.useState(b?"visible":"hidden"),P=j4(),{register:ee,unregister:H}=P;u.useEffect(()=>ee(y),[ee,y]),u.useEffect(()=>{if(x===hn.Hidden&&y.current){if(b&&E!=="visible"){L("visible");return}return It(E,{hidden:()=>H(y),visible:()=>ee(y)})}},[E,y,ee,H,b,x]);let Q=Pr({base:qr(g.className),enter:qr(c),enterFrom:qr(d),enterTo:qr(m),entered:qr(h),leave:qr(p),leaveFrom:qr(j),leaveTo:qr(f)}),ae=k4({beforeEnter:a,afterEnter:i,beforeLeave:l,afterLeave:o}),ne=wi();u.useEffect(()=>{if(ne&&E==="visible"&&y.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[y,E,ne]);let ve=N&&!w,je=w&&b&&N,Se=!ne||ve?"idle":b?"enter":"leave",D=f4(0),T=Be(G=>It(G,{enter:()=>{D.addFlag(qt.Opening),ae.current.beforeEnter()},leave:()=>{D.addFlag(qt.Closing),ae.current.beforeLeave()},idle:()=>{}})),Y=Be(G=>It(G,{enter:()=>{D.removeFlag(qt.Opening),ae.current.afterEnter()},leave:()=>{D.removeFlag(qt.Closing),ae.current.afterLeave()},idle:()=>{}})),J=ov(()=>{L("hidden"),H(y)},P),X=u.useRef(!1);y4({immediate:je,container:y,classes:Q,direction:Se,onStart:Pr(G=>{X.current=!0,J.onStart(y,G,T)}),onStop:Pr(G=>{X.current=!1,J.onStop(y,G,Y),G==="leave"&&!td(J)&&(L("hidden"),H(y))})});let he=g,Oe={ref:v};return je?he={...he,className:vc(g.className,...Q.current.enter,...Q.current.enterFrom)}:X.current&&(he.className=vc(g.className,(n=y.current)==null?void 0:n.className),he.className===""&&delete he.className),Fe.createElement(ed.Provider,{value:J},Fe.createElement(Jy,{value:It(E,{visible:qt.Open,hidden:qt.Closed})|D.flags},rs({ourProps:Oe,theirProps:he,defaultTag:S4,features:cv,visible:E==="visible",name:"Transition.Child"})))}function _4(e,t){let{show:r,appear:n=!1,unmount:a=!0,...i}=e,l=u.useRef(null),o=hs(l,t);wi();let c=Jc();if(r===void 0&&c!==null&&(r=(c&qt.Open)===qt.Open),![!0,!1].includes(r))throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[d,m]=u.useState(r?"visible":"hidden"),h=ov(()=>{m("hidden")}),[p,j]=u.useState(!0),f=u.useRef([r]);Dt(()=>{p!==!1&&f.current[f.current.length-1]!==r&&(f.current.push(r),j(!1))},[f,r]);let g=u.useMemo(()=>({show:r,appear:n,initial:p}),[r,n,p]);u.useEffect(()=>{if(r)m("visible");else if(!td(h))m("hidden");else{let b=l.current;if(!b)return;let w=b.getBoundingClientRect();w.x===0&&w.y===0&&w.width===0&&w.height===0&&m("hidden")}},[r,h]);let y={unmount:a},v=Be(()=>{var b;p&&j(!1),(b=e.beforeEnter)==null||b.call(e)}),x=Be(()=>{var b;p&&j(!1),(b=e.beforeLeave)==null||b.call(e)});return Fe.createElement(ed.Provider,{value:h},Fe.createElement(Zc.Provider,{value:g},rs({ourProps:{...y,as:u.Fragment,children:Fe.createElement(dv,{ref:o,...y,...i,beforeEnter:v,beforeLeave:x})},theirProps:{},defaultTag:u.Fragment,features:cv,visible:d==="visible",name:"Transition"})))}function E4(e,t){let r=u.useContext(Zc)!==null,n=Jc()!==null;return Fe.createElement(Fe.Fragment,null,!r&&n?Fe.createElement(ym,{ref:t,...e}):Fe.createElement(dv,{ref:t,...e}))}let ym=Vt(_4),dv=Vt(C4),M4=Vt(E4),Vi=Object.assign(ym,{Child:M4,Root:ym});/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T4=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),A4=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase()),Yf=e=>{const t=A4(e);return t.charAt(0).toUpperCase()+t.slice(1)},uv=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim(),R4=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var P4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L4=u.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:i,iconNode:l,...o},c)=>u.createElement("svg",{ref:c,...P4,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:uv("lucide",a),...!i&&!R4(o)&&{"aria-hidden":"true"},...o},[...l.map(([d,m])=>u.createElement(d,m)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=(e,t)=>{const r=u.forwardRef(({className:n,...a},i)=>u.createElement(L4,{ref:i,iconNode:t,className:uv(`lucide-${T4(Yf(e))}`,`lucide-${e}`,n),...a}));return r.displayName=Yf(e),r};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F4=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],mv=oe("archive",F4);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $4=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],I4=oe("arrow-down",$4);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O4=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],D4=oe("arrow-left",O4);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z4=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-4 8",key:"7n84p3"}]],Oi=oe("at-sign",z4);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U4=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],H4=oe("book-open",U4);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B4=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],q4=oe("bot",B4);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W4=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],hv=oe("building-2",W4);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K4=[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]],Q4=oe("building",K4);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V4=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],fv=oe("calendar",V4);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G4=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Y4=oe("camera",G4);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J4=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],vm=oe("check",J4);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X4=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Ks=oe("chevron-down",X4);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z4=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Vl=oe("chevron-right",Z4);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e3=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],di=oe("chevron-left",e3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t3=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],or=oe("chevron-up",t3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],sd=oe("circle-alert",s3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r3=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],lt=oe("circle-check-big",r3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],xr=oe("circle-x",n3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a3=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],wc=oe("clock",a3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i3=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],l3=oe("cloud",i3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o3=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],gv=oe("code",o3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c3=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],xv=oe("copy",c3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d3=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],u3=oe("dollar-sign",d3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m3=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Nc=oe("download",m3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h3=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],il=oe("external-link",h3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f3=[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]],pv=oe("facebook",f3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g3=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],x3=oe("eye",g3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p3=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Jf=oe("file-text",p3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y3=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}]],Ho=oe("file",y3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v3=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],b3=oe("funnel",v3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j3=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M6 21V9a9 9 0 0 0 9 9",key:"7kw0sc"}]],Xf=oe("git-merge",j3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],$h=oe("globe",w3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N3=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],$t=oe("hash",N3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k3=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],kc=oe("image",k3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S3=[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]],yv=oe("inbox",S3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],bm=oe("info",C3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _3=[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]],vv=oe("instagram",_3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E3=[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]],M3=oe("languages",E3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T3=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],bv=oe("loader-circle",T3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A3=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],En=oe("mail",A3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R3=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],P3=oe("message-circle",R3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L3=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],ma=oe("message-square",L3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F3=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],jv=oe("package",F3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $3=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],Ct=oe("paperclip",$3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I3=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Ih=oe("pen",I3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O3=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],wv=oe("pencil",O3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D3=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],ga=oe("phone",D3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z3=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Oh=oe("plus",z3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U3=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Gi=oe("refresh-cw",U3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H3=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Nv=oe("rotate-ccw",H3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B3=[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]],q3=oe("ruler",B3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W3=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Gl=oe("save",W3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K3=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],ui=oe("search",K3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q3=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],rd=oe("send",Q3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V3=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],mi=oe("settings",V3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G3=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Y3=oe("shield",G3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J3=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],ll=oe("shopping-bag",J3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],Z3=oe("smile",X3);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eS=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],er=oe("sparkles",eS);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tS=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],sS=oe("star",tS);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rS=[["path",{d:"M21 9a2.4 2.4 0 0 0-.706-1.706l-3.588-3.588A2.4 2.4 0 0 0 15 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2z",key:"1dfntj"}],["path",{d:"M15 3v5a1 1 0 0 0 1 1h5",key:"6s6qgf"}]],Sc=oe("sticky-note",rS);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nS=[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5",key:"slp6dd"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244",key:"o0xfot"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05",key:"wn3emo"}]],kv=oe("store",nS);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aS=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],Zf=oe("tag",aS);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iS=[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]],lS=oe("ticket",iS);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oS=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],hi=oe("trash-2",oS);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cS=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],dS=oe("triangle-alert",cS);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uS=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Sv=oe("upload",uS);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mS=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Ml=oe("user-plus",mS);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hS=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],fn=oe("user",hS);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fS=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Yl=oe("users",fS);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gS=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Rt=oe("x",gS);function xS({ticketCounts:e={all:0,myTickets:0,pending:0,unassigned:0,snoozed:0,resolved:0,escalated:0,escalatedToMe:0,vip:0,allAssigned:0,staffCounts:{}},isCollapsed:t,onToggle:r}){var z;const{data:n}=me({queryKey:["staff-list-sidebar"],queryFn:async()=>(await $.get("/api/staff")).data,staleTime:6e4}),a=(n==null?void 0:n.staff)||[],i=Pn(),l=yr(),[o,c]=u.useState(!1),[d,m]=u.useState(!1),[h,p]=u.useState(!1),[j,f]=u.useState(!1),[g,y]=u.useState(!1),[v,x]=u.useState(!1),[b,w]=u.useState(!1),[N,E]=u.useState(!1),[L,P]=u.useState(!1),[ee,H]=u.useState(!1),[Q,ae]=u.useState(!1),[ne,ve]=u.useState(!1),je=_=>i.pathname===_,Se=({title:_,icon:B,isExpanded:W,onToggle:V,children:re,hasSubmenu:de=!0})=>s.jsxs("div",{className:"mb-2",children:[s.jsxs("button",{onClick:V,className:"w-full flex items-center justify-between px-3 py-2 text-sm rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsxs("span",{className:"flex items-center text-gray-700 font-medium",children:[B,s.jsx("span",{className:B?"ml-2":"",children:_})]}),de&&(W?s.jsx(or,{className:"w-4 h-4 text-gray-400"}):s.jsx(Ks,{className:"w-4 h-4 text-gray-400"}))]}),W&&re&&s.jsx("div",{className:"ml-6 mt-1 space-y-1",children:re})]}),D=({to:_,children:B,count:W})=>{const V=()=>{const[re,de]=_.split("?"),U=i.pathname,Ce=i.search;return de?U===re&&Ce.includes(de):U===re&&!Ce};return s.jsxs(vt,{to:_,preventScrollReset:!0,className:`flex items-center justify-between px-3 py-2 text-sm rounded-lg transition-colors ${V()?"bg-indigo-50 text-indigo-700 font-medium":"text-gray-600 hover:bg-gray-50"}`,children:[s.jsx("span",{children:B}),W!==void 0&&s.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-gray-200 text-gray-700",children:W})]})},T=({to:_,children:B})=>s.jsx(vt,{to:_,preventScrollReset:!0,className:`block px-3 py-1.5 text-sm rounded-lg transition-colors ${je(_)?"bg-indigo-50 text-indigo-700 font-medium":"text-gray-500 hover:bg-gray-50 hover:text-gray-700"}`,children:B}),Y=()=>s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),J=()=>s.jsxs("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H5.17L4 17.17V4h16v12z"}),s.jsx("path",{d:"M7 9h10v2H7zm0-3h10v2H7z"})]}),X=()=>s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8h2a2 2 0 012 2v6a2 2 0 01-2 2h-2v4l-4-4H9a1.994 1.994 0 01-1.414-.586m0 0L11 14h4a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2v4l.586-.586z"})}),he=()=>s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),Oe=()=>s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),G=()=>s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),Le=()=>s.jsxs("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]});return s.jsxs("div",{className:`bg-white border-r border-gray-200 h-screen flex flex-col transition-all duration-300 ${t?"w-16":"w-64"}`,children:[s.jsx("div",{className:"flex-shrink-0 h-14 flex items-center px-4 border-b border-gray-200",children:s.jsx("button",{onClick:r,className:"p-2 text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors",title:t?"Expand Navigation":"Collapse Navigation",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})}),t?s.jsxs("div",{className:"flex flex-col items-center py-4 space-y-3",children:[s.jsx("button",{onClick:()=>{r(),l("/tickets"),c(!0)},className:`p-2 rounded-lg transition-colors ${i.pathname==="/tickets"||i.pathname.startsWith("/tickets/")?"bg-indigo-50 text-indigo-600":"text-gray-600 hover:bg-indigo-50 hover:text-indigo-600"}`,title:"Tickets",children:s.jsx(Y,{})}),s.jsx("button",{onClick:()=>{r(),l("/chat")},className:`p-2 rounded-lg transition-colors ${i.pathname==="/chat"?"bg-indigo-50 text-indigo-600":"text-gray-600 hover:bg-indigo-50 hover:text-indigo-600"}`,title:"AI Chat",children:s.jsx(J,{})}),s.jsx("button",{onClick:()=>{r(),l("/group-chat"),f(!0)},className:`p-2 rounded-lg transition-colors ${i.pathname.startsWith("/group-chat")||i.pathname==="/notifications"||i.pathname==="/mentions"?"bg-indigo-50 text-indigo-600":"text-gray-600 hover:bg-indigo-50 hover:text-indigo-600"}`,title:"Group Chat",children:s.jsx(X,{})}),s.jsx("button",{onClick:()=>{r(),l("/staff"),p(!0)},className:`p-2 rounded-lg transition-colors ${i.pathname.startsWith("/staff")?"bg-indigo-50 text-indigo-600":"text-gray-600 hover:bg-indigo-50 hover:text-indigo-600"}`,title:"Staff",children:s.jsx(he,{})}),s.jsx("button",{onClick:()=>{r(),l("/customers"),m(!0)},className:`p-2 rounded-lg transition-colors ${i.pathname.startsWith("/customers")?"bg-indigo-50 text-indigo-600":"text-gray-600 hover:bg-indigo-50 hover:text-indigo-600"}`,title:"Customers",children:s.jsx(Oe,{})}),s.jsx("button",{onClick:()=>{r(),l("/analytics/ai-agent")},className:`p-2 rounded-lg transition-colors ${i.pathname.startsWith("/analytics")?"bg-indigo-50 text-indigo-600":"text-gray-600 hover:bg-indigo-50 hover:text-indigo-600"}`,title:"Analytics",children:s.jsx(G,{})}),s.jsx("button",{onClick:()=>{r(),l("/settings"),y(!0)},className:`p-2 rounded-lg transition-colors ${i.pathname.startsWith("/settings")||i.pathname.startsWith("/ai-agent")?"bg-indigo-50 text-indigo-600":"text-gray-600 hover:bg-indigo-50 hover:text-indigo-600"}`,title:"Settings",children:s.jsx(Le,{})})]}):s.jsxs("div",{className:"overflow-y-auto flex-1 p-3",children:[s.jsxs(Se,{title:"Tickets",icon:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),isExpanded:o,onToggle:()=>c(!o),children:[s.jsx(D,{to:"/tickets",count:e.all,children:"All Tickets"}),s.jsx(D,{to:"/tickets?filter=my",count:e.myTickets,children:"My Tickets"}),s.jsx(D,{to:"/tickets?status=open",count:e.pending,children:"Open (in-progress)"}),s.jsxs("div",{children:[s.jsxs("button",{onClick:()=>x(!v),className:"w-full flex items-center justify-between px-3 py-2 text-sm rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsx("span",{className:"text-gray-600",children:"Assigned"}),v?s.jsx(or,{className:"w-4 h-4 text-gray-400"}):s.jsx(Ks,{className:"w-4 h-4 text-gray-400"})]}),v&&s.jsxs("div",{className:"ml-4 mt-1 space-y-1",children:[s.jsx(D,{to:"/tickets?filter=all-assigned",count:e.allAssigned,children:"All"}),a.filter(_=>_.id!=="ai-agent-001").map(_=>{var B;return s.jsx(D,{to:`/tickets?assigned=${_.id}`,count:((B=e.staffCounts)==null?void 0:B[_.id])||0,children:_.first_name},_.id)}),s.jsx(D,{to:"/tickets?assigned=ai-agent-001",count:((z=e.staffCounts)==null?void 0:z["ai-agent-001"])||0,children:"McCarthy AI"})]})]}),s.jsx(D,{to:"/tickets?filter=unassigned",count:e.unassigned,children:"Unassigned"}),s.jsx(D,{to:"/tickets?status=snoozed",count:e.snoozed,children:"Snoozed"}),s.jsx(D,{to:"/tickets?filter=vip",count:e.vip,children:"VIP"}),s.jsx(D,{to:"/tickets?status=resolved",count:e.resolved,children:"Resolved"})]}),s.jsxs(vt,{to:"/chat",className:`flex items-center px-3 py-2 mb-2 text-sm rounded-lg transition-colors ${je("/chat")?"bg-indigo-50 text-indigo-700 font-medium":"text-gray-700 hover:bg-gray-50"}`,children:[s.jsxs("svg",{className:"w-5 h-5 mr-2",fill:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H5.17L4 17.17V4h16v12z"}),s.jsx("path",{d:"M7 9h10v2H7zm0-3h10v2H7z"})]}),"AI Chat"]}),s.jsxs(Se,{title:"Group Chat",icon:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8h2a2 2 0 012 2v6a2 2 0 01-2 2h-2v4l-4-4H9a1.994 1.994 0 01-1.414-.586m0 0L11 14h4a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2v4l.586-.586z"})}),isExpanded:j,onToggle:()=>f(!j),children:[s.jsx(T,{to:"/group-chat",children:"All Chats"}),s.jsx(T,{to:"/mentions",children:"@Mentions"}),s.jsx(T,{to:"/memo",children:"@Memos"}),s.jsx(T,{to:"/tags",children:"Tags"})]}),s.jsx(Se,{title:"Staff",icon:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),isExpanded:h,onToggle:()=>p(!h),children:s.jsx(T,{to:"/staff",children:"List"})}),s.jsxs(Se,{title:"Customers",icon:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),isExpanded:d,onToggle:()=>m(!d),children:[s.jsx(T,{to:"/customers",children:"All Customers"}),s.jsx(T,{to:"/customers/vip",children:"VIP Customers"})]}),s.jsxs(vt,{to:"/analytics/ai-agent",className:`flex items-center px-3 py-2 mb-2 text-sm rounded-lg transition-colors ${i.pathname.startsWith("/analytics")?"bg-indigo-50 text-indigo-700 font-medium":"text-gray-700 hover:bg-gray-50"}`,children:[s.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"Analytics"]}),s.jsxs(Se,{title:"Settings",icon:s.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),isExpanded:g,onToggle:()=>y(!g),children:[s.jsx(T,{to:"/settings/dartmouth-os",children:"Dartmouth OS"}),s.jsxs("div",{className:"mb-1",children:[s.jsxs("button",{onClick:()=>ae(!Q),className:`w-full flex items-center justify-between px-3 py-2 text-sm rounded-lg transition-colors ${i.pathname.startsWith("/settings/business")?"bg-indigo-50 text-indigo-700 font-medium":"text-gray-600 hover:bg-gray-50"}`,children:[s.jsx("span",{children:"Business"}),Q?s.jsx(or,{className:"w-4 h-4 text-gray-400"}):s.jsx(Ks,{className:"w-4 h-4 text-gray-400"})]}),Q&&s.jsxs("div",{className:"ml-4 mt-1 space-y-1",children:[s.jsx(T,{to:"/settings/business-hours",children:"Operational Hours"}),s.jsx(T,{to:"/settings/auto-assignment",children:"Auto-Assignment"})]})]}),s.jsxs("div",{className:"mb-1",children:[s.jsxs("button",{onClick:()=>ve(!ne),className:`w-full flex items-center justify-between px-3 py-2 text-sm rounded-lg transition-colors ${i.pathname.startsWith("/ai-agent")?"bg-indigo-50 text-indigo-700 font-medium":"text-gray-600 hover:bg-gray-50"}`,children:[s.jsx("span",{children:"AI Agent"}),ne?s.jsx(or,{className:"w-4 h-4 text-gray-400"}):s.jsx(Ks,{className:"w-4 h-4 text-gray-400"})]}),ne&&s.jsxs("div",{className:"ml-4 mt-1 space-y-1",children:[s.jsx(T,{to:"/ai-agent/widget",children:"Widget & Embed"}),s.jsx(T,{to:"/ai-agent/knowledge",children:"RAG Knowledge"}),s.jsx(T,{to:"/ai-agent/system-message",children:"System Message"}),s.jsx(T,{to:"/ai-agent/regional-overrides",children:"Regional Overrides"})]})]}),s.jsx(T,{to:"/settings/group-chat",children:"Group Chat"}),s.jsxs("div",{className:"mb-1",children:[s.jsxs("button",{onClick:()=>w(!b),className:`w-full flex items-center justify-between px-3 py-2 text-sm rounded-lg transition-colors ${i.pathname.startsWith("/settings/integrations")?"bg-indigo-50 text-indigo-700 font-medium":"text-gray-600 hover:bg-gray-50"}`,children:[s.jsx("span",{children:"Integrations"}),b?s.jsx(or,{className:"w-4 h-4 text-gray-400"}):s.jsx(Ks,{className:"w-4 h-4 text-gray-400"})]}),b&&s.jsxs("div",{className:"ml-4 mt-1 space-y-1",children:[s.jsx(T,{to:"/settings/integrations/perp",children:"Print ERP"}),s.jsx(T,{to:"/settings/integrations/shopify",children:"Shopify"})]})]}),s.jsxs("div",{className:"mb-1",children:[s.jsxs("button",{onClick:()=>E(!N),className:`w-full flex items-center justify-between px-3 py-2 text-sm rounded-lg transition-colors ${i.pathname.startsWith("/settings/meta")?"bg-indigo-50 text-indigo-700 font-medium":"text-gray-600 hover:bg-gray-50"}`,children:[s.jsx("span",{children:"Meta"}),N?s.jsx(or,{className:"w-4 h-4 text-gray-400"}):s.jsx(Ks,{className:"w-4 h-4 text-gray-400"})]}),N&&s.jsxs("div",{className:"ml-4 mt-1 space-y-1",children:[s.jsx(T,{to:"/settings/meta/facebook",children:"Facebook"}),s.jsx(T,{to:"/settings/meta/instagram",children:"Instagram"}),s.jsx(T,{to:"/settings/meta/messenger",children:"Messenger"}),s.jsx(T,{to:"/settings/meta/whatsapp",children:"WhatsApp"})]})]}),s.jsxs("div",{className:"mb-1",children:[s.jsxs("button",{onClick:()=>P(!L),className:`w-full flex items-center justify-between px-3 py-2 text-sm rounded-lg transition-colors ${i.pathname.startsWith("/settings/general")?"bg-indigo-50 text-indigo-700 font-medium":"text-gray-600 hover:bg-gray-50"}`,children:[s.jsx("span",{children:"General"}),L?s.jsx(or,{className:"w-4 h-4 text-gray-400"}):s.jsx(Ks,{className:"w-4 h-4 text-gray-400"})]}),L&&s.jsxs("div",{className:"ml-4 mt-1 space-y-1",children:[s.jsx(T,{to:"/settings/general/auth",children:"Auth & Security"}),s.jsx(T,{to:"/settings/email",children:"Email"}),s.jsx(T,{to:"/settings/general/templates",children:"Templates"}),s.jsx(T,{to:"/settings/tags",children:"Tags"})]})]}),s.jsxs("div",{className:"mb-1",children:[s.jsxs("button",{onClick:()=>H(!ee),className:`w-full flex items-center justify-between px-3 py-2 text-sm rounded-lg transition-colors ${i.pathname.startsWith("/settings/billing")?"bg-indigo-50 text-indigo-700 font-medium":"text-gray-600 hover:bg-gray-50"}`,children:[s.jsx("span",{children:"Billing"}),ee?s.jsx(or,{className:"w-4 h-4 text-gray-400"}):s.jsx(Ks,{className:"w-4 h-4 text-gray-400"})]}),ee&&s.jsxs("div",{className:"ml-4 mt-1 space-y-1",children:[s.jsx(T,{to:"/settings/billing/subscription",children:"Subscription"}),s.jsx(T,{to:"/settings/billing/transactions",children:"Transactions"})]})]})]})]})]})}function pS({title:e,titleId:t,...r},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?u.createElement("title",{id:t},e):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"}))}const eg=u.forwardRef(pS);function yS({title:e,titleId:t,...r},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?u.createElement("title",{id:t},e):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"}))}const vS=u.forwardRef(yS);function bS({title:e,titleId:t,...r},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?u.createElement("title",{id:t},e):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))}const jS=u.forwardRef(bS);function wS({title:e,titleId:t,...r},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?u.createElement("title",{id:t},e):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0"}))}const NS=u.forwardRef(wS);function kS({title:e,titleId:t,...r},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?u.createElement("title",{id:t},e):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 0 1 5.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 0 0-1.134-.175 2.31 2.31 0 0 1-1.64-1.055l-.822-1.316a2.192 2.192 0 0 0-1.736-1.039 48.774 48.774 0 0 0-5.232 0 2.192 2.192 0 0 0-1.736 1.039l-.821 1.316Z"}),u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0ZM18.75 10.5h.008v.008h-.008V10.5Z"}))}const SS=u.forwardRef(kS);function CS({title:e,titleId:t,...r},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?u.createElement("title",{id:t},e):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const _S=u.forwardRef(CS);function ES({title:e,titleId:t,...r},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?u.createElement("title",{id:t},e):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"}))}const jm=u.forwardRef(ES);function MS({title:e,titleId:t,...r},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?u.createElement("title",{id:t},e):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const tg=u.forwardRef(MS);function TS({title:e,titleId:t,...r},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?u.createElement("title",{id:t},e):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const Bo=u.forwardRef(TS);function AS({title:e,titleId:t,...r},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?u.createElement("title",{id:t},e):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"}))}const RS=u.forwardRef(AS);function PS({title:e,titleId:t,...r},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?u.createElement("title",{id:t},e):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.347a1.125 1.125 0 0 1 0 1.972l-11.54 6.347a1.125 1.125 0 0 1-1.667-.986V5.653Z"}))}const LS=u.forwardRef(PS);function FS({title:e,titleId:t,...r},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?u.createElement("title",{id:t},e):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 6v.75m0 3v.75m0 3v.75m0 3V18m-9-5.25h5.25M7.5 15h3M3.375 5.25c-.621 0-1.125.504-1.125 1.125v3.026a2.999 2.999 0 0 1 0 5.198v3.026c0 .621.504 1.125 1.125 1.125h17.25c.621 0 1.125-.504 1.125-1.125v-3.026a2.999 2.999 0 0 1 0-5.198V6.375c0-.621-.504-1.125-1.125-1.125H3.375Z"}))}const $S=u.forwardRef(FS);function IS({title:e,titleId:t,...r},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?u.createElement("title",{id:t},e):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const OS=u.forwardRef(IS);function DS({title:e,titleId:t,...r},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?u.createElement("title",{id:t},e):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const zS=u.forwardRef(DS);function US({title:e,titleId:t,...r},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?u.createElement("title",{id:t},e):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const HS=u.forwardRef(US),qd={online:{color:"bg-green-500",ringColor:"ring-green-400",label:"Online"},away:{color:"bg-yellow-500",ringColor:"ring-yellow-400",label:"Away"},offline:{color:"bg-gray-400",ringColor:"ring-gray-400",label:"Offline"}};function BS(){var d,m,h,p,j,f;const e=yr(),{user:t,logout:r}=Rs(),n=ut(),{data:a}=me({queryKey:["currentStaff"],queryFn:()=>st.me().then(g=>g.data.staff),enabled:!!t,refetchInterval:3e4}),i=we({mutationFn:g=>st.updateAvailability((t==null?void 0:t.id)||"",g),onSuccess:()=>{n.invalidateQueries({queryKey:["currentStaff"]})}}),l=(a==null?void 0:a.availability_status)||"offline",o=qd[l],c=()=>{r(),e("/login")};return s.jsxs(Ii,{as:"div",className:"relative",children:[s.jsxs(Ii.Button,{className:"flex items-center gap-2 rounded-lg p-1.5 hover:bg-gray-100 transition-colors",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:`w-2.5 h-2.5 rounded-full ${o.color}`}),l==="online"&&s.jsx("div",{className:`absolute inset-0 w-2.5 h-2.5 rounded-full ${o.color} animate-ping opacity-50`})]}),s.jsx("div",{className:"relative",children:a!=null&&a.avatar_url?s.jsx("img",{src:st.getAvatarUrl(a.avatar_url)||"",alt:`${a.first_name} ${a.last_name}`,className:"w-8 h-8 rounded-full object-cover"}):s.jsxs("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-white text-sm font-semibold",children:[((d=a==null?void 0:a.first_name)==null?void 0:d[0])||((m=t==null?void 0:t.firstName)==null?void 0:m[0])||"U",((h=a==null?void 0:a.last_name)==null?void 0:h[0])||((p=t==null?void 0:t.lastName)==null?void 0:p[0])||""]})})]}),s.jsx(Vi,{as:u.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:s.jsxs(Ii.Items,{className:"absolute right-0 mt-2 w-64 origin-top-right rounded-xl bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-50",children:[s.jsx("div",{className:"px-4 py-3 border-b border-gray-100",children:s.jsxs("div",{className:"flex items-center gap-3",children:[a!=null&&a.avatar_url?s.jsx("img",{src:st.getAvatarUrl(a.avatar_url)||"",alt:`${a.first_name} ${a.last_name}`,className:"w-10 h-10 rounded-full object-cover"}):s.jsxs("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-white font-semibold",children:[(j=a==null?void 0:a.first_name)==null?void 0:j[0],(f=a==null?void 0:a.last_name)==null?void 0:f[0]]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("p",{className:"text-sm font-medium text-gray-900 truncate",children:[a==null?void 0:a.first_name," ",a==null?void 0:a.last_name]}),s.jsx("p",{className:"text-xs text-gray-500 truncate",children:a==null?void 0:a.email})]})]})}),s.jsxs("div",{className:"px-2 py-2 border-b border-gray-100",children:[s.jsx("p",{className:"px-2 py-1 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),Object.keys(qd).map(g=>{const y=qd[g],v=g===l;return s.jsxs("button",{onClick:()=>i.mutate(g),disabled:i.isPending,className:`w-full flex items-center gap-3 px-2 py-2 rounded-lg text-left transition-colors ${v?"bg-indigo-50 text-indigo-700":"hover:bg-gray-50 text-gray-700"}`,children:[s.jsx("div",{className:`w-2.5 h-2.5 rounded-full ${y.color}`}),s.jsx("span",{className:"text-sm font-medium flex-1",children:y.label}),v&&s.jsx(jm,{className:"w-4 h-4 text-indigo-600"})]},g)})]}),s.jsx("div",{className:"px-2 py-2",children:s.jsx(Ii.Item,{children:({active:g})=>s.jsxs("button",{onClick:()=>e("/account"),className:`${g?"bg-gray-50":""} flex items-center gap-3 w-full px-2 py-2 text-sm text-gray-700 rounded-lg`,children:[s.jsx(zS,{className:"w-5 h-5 text-gray-400"}),"My Account"]})})}),s.jsx("div",{className:"px-2 py-2 border-t border-gray-100",children:s.jsx(Ii.Item,{children:({active:g})=>s.jsxs("button",{onClick:c,className:`${g?"bg-red-50":""} flex items-center gap-3 w-full px-2 py-2 text-sm text-red-600 rounded-lg`,children:[s.jsx(vS,{className:"w-5 h-5"}),"Sign Out"]})})})]})})]})}const qS=[{name:"Tickets",href:"/tickets",icon:$S},{name:"Mentions",href:"/mentions",icon:NS},{name:"Settings",href:"/settings",icon:Bo}];function WS(){const[e,t]=u.useState(!1),[r,n]=u.useState(!0),a=Pn(),{user:i}=Rs(),{data:l}=me({queryKey:["tickets-all"],queryFn:async()=>(await De.list({limit:1e3})).data.tickets,refetchInterval:3e4}),o=l||[];console.log("DashboardLayout - All tickets:",o.map(d=>({id:d.ticket_number,assigned:d.assigned_to,status:d.status,channel:d.channel})));const c={all:o.filter(d=>d.status!=="resolved"&&d.status!=="closed").length,myTickets:o.filter(d=>(d.assigned_to===(i==null?void 0:i.id)||d.is_escalated_to_me===1)&&d.status!=="resolved"&&d.status!=="closed").length,pending:o.filter(d=>(d.status==="open"||d.status==="in-progress")&&d.assigned_to&&d.assigned_to!==null&&d.status!=="resolved"&&d.status!=="closed").length,unassigned:o.filter(d=>(!d.assigned_to||d.assigned_to===null)&&d.status!=="resolved"&&d.status!=="closed").length,snoozed:o.filter(d=>d.status==="snoozed").length,resolved:o.filter(d=>d.status==="resolved"||d.status==="closed").length,escalated:o.filter(d=>d.has_escalation===1).length,escalatedToMe:o.filter(d=>d.is_escalated_to_me===1).length,vip:o.filter(d=>d.vip===1&&d.status!=="resolved"&&d.status!=="closed").length,allAssigned:o.filter(d=>d.assigned_to&&d.assigned_to!==null&&d.status!=="resolved"&&d.status!=="closed").length,staffCounts:o.filter(d=>d.assigned_to&&d.status!=="resolved"&&d.status!=="closed").reduce((d,m)=>(d[m.assigned_to]=(d[m.assigned_to]||0)+1,d),{})};return console.log("DashboardLayout - Staff counts:",c.staffCounts),console.log("DashboardLayout - McCarthy AI count:",c.staffCounts["ai-agent-001"]),u.useEffect(()=>{const d=m=>{(m.ctrlKey||m.metaKey)&&m.key==="b"&&(m.preventDefault(),n(h=>!h))};return window.addEventListener("keydown",d),()=>window.removeEventListener("keydown",d)},[]),s.jsxs("div",{children:[s.jsx(Vi.Root,{show:e,as:u.Fragment,children:s.jsxs(Kf,{as:"div",className:"relative z-50 lg:hidden",onClose:t,children:[s.jsx(Vi.Child,{as:u.Fragment,enter:"transition-opacity ease-linear duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"transition-opacity ease-linear duration-300",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:s.jsx("div",{className:"fixed inset-0 bg-gray-900/80"})}),s.jsx("div",{className:"fixed inset-0 flex",children:s.jsx(Vi.Child,{as:u.Fragment,enter:"transition ease-in-out duration-300 transform",enterFrom:"-translate-x-full",enterTo:"translate-x-0",leave:"transition ease-in-out duration-300 transform",leaveFrom:"translate-x-0",leaveTo:"-translate-x-full",children:s.jsxs(Kf.Panel,{className:"relative mr-16 flex w-full max-w-xs flex-1",children:[s.jsx(Vi.Child,{as:u.Fragment,enter:"ease-in-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in-out duration-300",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:s.jsx("div",{className:"absolute left-full top-0 flex w-16 justify-center pt-5",children:s.jsxs("button",{type:"button",className:"-m-2.5 p-2.5",onClick:()=>t(!1),children:[s.jsx("span",{className:"sr-only",children:"Close sidebar"}),s.jsx(HS,{className:"h-6 w-6 text-white","aria-hidden":"true"})]})})}),s.jsxs("div",{className:"flex grow flex-col gap-y-5 overflow-y-auto bg-white px-6 pb-2",children:[s.jsx("div",{className:"flex h-16 shrink-0 items-center",children:s.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"CS Dashboard"})}),s.jsx("nav",{className:"flex flex-1 flex-col",children:s.jsx("ul",{role:"list",className:"flex flex-1 flex-col gap-y-7",children:s.jsx("li",{children:s.jsx("ul",{role:"list",className:"-mx-2 space-y-1",children:qS.map(d=>{const m=a.pathname.startsWith(d.href);return s.jsx("li",{children:s.jsxs(vt,{to:d.href,className:sg(m?"bg-gray-50 text-primary-600":"text-gray-700 hover:text-primary-600 hover:bg-gray-50","group flex gap-x-3 rounded-md p-2 text-sm leading-6 font-semibold"),children:[s.jsx(d.icon,{className:sg(m?"text-primary-600":"text-gray-400 group-hover:text-primary-600","h-6 w-6 shrink-0"),"aria-hidden":"true"}),d.name]})},d.name)})})})})})]})]})})})]})}),s.jsx("div",{className:"hidden lg:fixed lg:inset-y-0 lg:z-50 lg:flex lg:flex-col",children:s.jsx(xS,{ticketCounts:c,isCollapsed:r,onToggle:()=>n(!r)})}),s.jsx("div",{className:`fixed top-0 right-0 z-40 transition-all duration-300 ${r?"lg:left-16":"lg:left-64"} left-0`,children:s.jsxs("div",{className:"flex items-center justify-between h-14 px-4 bg-white border-b border-gray-200 shadow-sm",children:[s.jsxs("button",{type:"button",className:"-m-2.5 p-2.5 text-gray-700 lg:hidden",onClick:()=>t(!0),children:[s.jsx("span",{className:"sr-only",children:"Open sidebar"}),s.jsx(jS,{className:"h-6 w-6","aria-hidden":"true"})]}),s.jsx("div",{className:"hidden lg:block"}),s.jsx("div",{className:"flex items-center gap-4",children:s.jsx(BS,{})})]})}),s.jsx("main",{className:`transition-all duration-300 pt-14 ${r?"lg:pl-16":"lg:pl-64"}`,children:s.jsx(zj,{})})]})}function sg(...e){return e.filter(Boolean).join(" ")}function Wt(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function KS(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}const ko=43200,rg=1440;let QS={};function VS(){return QS}function ng(e){const t=Wt(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function qo(e,t){const r=Wt(e),n=Wt(t),a=r.getTime()-n.getTime();return a<0?-1:a>0?1:a}function GS(e){return KS(e,Date.now())}function YS(e,t){const r=Wt(e),n=Wt(t),a=r.getFullYear()-n.getFullYear(),i=r.getMonth()-n.getMonth();return a*12+i}function JS(e){return t=>{const n=(e?Math[e]:Math.trunc)(t);return n===0?0:n}}function XS(e,t){return+Wt(e)-+Wt(t)}function ZS(e){const t=Wt(e);return t.setHours(23,59,59,999),t}function eC(e){const t=Wt(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function tC(e){const t=Wt(e);return+ZS(t)==+eC(t)}function sC(e,t){const r=Wt(e),n=Wt(t),a=qo(r,n),i=Math.abs(YS(r,n));let l;if(i<1)l=0;else{r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-a*i);let o=qo(r,n)===-a;tC(Wt(e))&&i===1&&qo(e,n)===1&&(o=!1),l=a*(i-Number(o))}return l===0?0:l}function rC(e,t,r){const n=XS(e,t)/1e3;return JS(r==null?void 0:r.roundingMethod)(n)}const nC={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},aC=(e,t,r)=>{let n;const a=nC[e];return typeof a=="string"?n=a:t===1?n=a.one:n=a.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function Wd(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const iC={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},lC={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},oC={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},cC={date:Wd({formats:iC,defaultWidth:"full"}),time:Wd({formats:lC,defaultWidth:"full"}),dateTime:Wd({formats:oC,defaultWidth:"full"})},dC={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},uC=(e,t,r,n)=>dC[e];function Di(e){return(t,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let a;if(n==="formatting"&&e.formattingValues){const l=e.defaultFormattingWidth||e.defaultWidth,o=r!=null&&r.width?String(r.width):l;a=e.formattingValues[o]||e.formattingValues[l]}else{const l=e.defaultWidth,o=r!=null&&r.width?String(r.width):e.defaultWidth;a=e.values[o]||e.values[l]}const i=e.argumentCallback?e.argumentCallback(t):t;return a[i]}}const mC={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},hC={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},fC={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},gC={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},xC={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},pC={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},yC=(e,t)=>{const r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},vC={ordinalNumber:yC,era:Di({values:mC,defaultWidth:"wide"}),quarter:Di({values:hC,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Di({values:fC,defaultWidth:"wide"}),day:Di({values:gC,defaultWidth:"wide"}),dayPeriod:Di({values:xC,defaultWidth:"wide",formattingValues:pC,defaultFormattingWidth:"wide"})};function zi(e){return(t,r={})=>{const n=r.width,a=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;const l=i[0],o=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(o)?jC(o,h=>h.test(l)):bC(o,h=>h.test(l));let d;d=e.valueCallback?e.valueCallback(c):c,d=r.valueCallback?r.valueCallback(d):d;const m=t.slice(l.length);return{value:d,rest:m}}}function bC(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function jC(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function wC(e){return(t,r={})=>{const n=t.match(e.matchPattern);if(!n)return null;const a=n[0],i=t.match(e.parsePattern);if(!i)return null;let l=e.valueCallback?e.valueCallback(i[0]):i[0];l=r.valueCallback?r.valueCallback(l):l;const o=t.slice(a.length);return{value:l,rest:o}}}const NC=/^(\d+)(th|st|nd|rd)?/i,kC=/\d+/i,SC={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},CC={any:[/^b/i,/^(a|c)/i]},_C={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},EC={any:[/1/i,/2/i,/3/i,/4/i]},MC={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},TC={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},AC={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},RC={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},PC={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},LC={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},FC={ordinalNumber:wC({matchPattern:NC,parsePattern:kC,valueCallback:e=>parseInt(e,10)}),era:zi({matchPatterns:SC,defaultMatchWidth:"wide",parsePatterns:CC,defaultParseWidth:"any"}),quarter:zi({matchPatterns:_C,defaultMatchWidth:"wide",parsePatterns:EC,defaultParseWidth:"any",valueCallback:e=>e+1}),month:zi({matchPatterns:MC,defaultMatchWidth:"wide",parsePatterns:TC,defaultParseWidth:"any"}),day:zi({matchPatterns:AC,defaultMatchWidth:"wide",parsePatterns:RC,defaultParseWidth:"any"}),dayPeriod:zi({matchPatterns:PC,defaultMatchWidth:"any",parsePatterns:LC,defaultParseWidth:"any"})},$C={code:"en-US",formatDistance:aC,formatLong:cC,formatRelative:uC,localize:vC,match:FC,options:{weekStartsOn:0,firstWeekContainsDate:1}};function IC(e,t,r){const n=VS(),a=(r==null?void 0:r.locale)??n.locale??$C,i=2520,l=qo(e,t);if(isNaN(l))throw new RangeError("Invalid time value");const o=Object.assign({},r,{addSuffix:r==null?void 0:r.addSuffix,comparison:l});let c,d;l>0?(c=Wt(t),d=Wt(e)):(c=Wt(e),d=Wt(t));const m=rC(d,c),h=(ng(d)-ng(c))/1e3,p=Math.round((m-h)/60);let j;if(p<2)return r!=null&&r.includeSeconds?m<5?a.formatDistance("lessThanXSeconds",5,o):m<10?a.formatDistance("lessThanXSeconds",10,o):m<20?a.formatDistance("lessThanXSeconds",20,o):m<40?a.formatDistance("halfAMinute",0,o):m<60?a.formatDistance("lessThanXMinutes",1,o):a.formatDistance("xMinutes",1,o):p===0?a.formatDistance("lessThanXMinutes",1,o):a.formatDistance("xMinutes",p,o);if(p<45)return a.formatDistance("xMinutes",p,o);if(p<90)return a.formatDistance("aboutXHours",1,o);if(p<rg){const f=Math.round(p/60);return a.formatDistance("aboutXHours",f,o)}else{if(p<i)return a.formatDistance("xDays",1,o);if(p<ko){const f=Math.round(p/rg);return a.formatDistance("xDays",f,o)}else if(p<ko*2)return j=Math.round(p/ko),a.formatDistance("aboutXMonths",j,o)}if(j=sC(d,c),j<12){const f=Math.round(p/ko);return a.formatDistance("xMonths",f,o)}else{const f=j%12,g=Math.trunc(j/12);return f<3?a.formatDistance("aboutXYears",g,o):f<9?a.formatDistance("overXYears",g,o):a.formatDistance("almostXYears",g+1,o)}}function hr(e,t){return IC(e,GS(e),t)}function Cv({isOpen:e,onClose:t,onReassign:r,currentAssignment:n,bulkMode:a,selectedTickets:i}){const[l,o]=u.useState(""),[c,d]=u.useState(""),[m,h]=u.useState([]),{data:p}=me({queryKey:["staff-list"],queryFn:async()=>{var b;return((b=(await $.get("/api/staff")).data)==null?void 0:b.staff)||[]},enabled:e}),{data:j}=me({queryKey:["tickets-for-reassign"],queryFn:async()=>{var b;return((b=(await De.list({limit:1e3})).data)==null?void 0:b.tickets)||[]},enabled:e});if(u.useEffect(()=>{if(p&&j){const x=p.map(b=>{const w=j.filter(N=>N.assigned_to===b.id&&(N.status==="open"||N.status==="in-progress")).length;return{id:b.id,name:`${b.first_name} ${b.last_name}`,role:b.title||"Staff",online:b.availability_status==="online",availability_status:b.availability_status||"offline",openTickets:w}});h(x)}},[p,j]),u.useEffect(()=>{e&&(o(""),d(""))},[e]),!e)return null;const g=m.filter(x=>x.online).length===1,y=()=>{if(l){if(l==="unassigned")r(null,"Unassigned",c||void 0);else{const x=m.find(b=>b.id===l);x&&r(x.id,x.name,c||void 0)}t()}},v=a&&i?i.length:1;return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4 max-h-[90vh] flex flex-col",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200 flex-shrink-0",children:s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:a?`Reassign ${v} Ticket${v>1?"s":""}`:"Reassign Ticket"})}),s.jsxs("div",{className:"px-6 py-4 overflow-y-auto flex-1",children:[a&&i&&i.length>0?s.jsxs("div",{className:"mb-4",children:[s.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Reassign the following ticket",v>1?"s":""," to another staff member:"]}),s.jsx("div",{className:"bg-gray-50 rounded-lg p-3 max-h-32 overflow-y-auto",children:s.jsx("ul",{className:"space-y-1",children:i.map(x=>s.jsxs("li",{className:"flex items-center gap-2 text-sm",children:[s.jsx("span",{className:"font-medium text-gray-900",children:x.ticket_number}),s.jsxs("span",{className:"text-gray-500 truncate",children:["- ",x.subject]})]},x.ticket_id))})})]}):s.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Reassign ticket #",n||"Unassigned"," to another staff member:"]}),g&&s.jsx("div",{className:"mb-4 p-3 bg-amber-50 border border-amber-200 rounded-lg",children:s.jsx("p",{className:"text-sm text-amber-800",children:" You're the only staff member online"})}),s.jsxs("div",{className:"space-y-2",children:[m.filter(x=>x.id==="ai-agent-001").map(x=>s.jsxs("label",{className:`flex items-center p-3 border rounded-lg transition-colors cursor-pointer hover:bg-gray-50 ${l===x.id?"border-indigo-500 bg-indigo-50":"border-gray-300"}`,children:[s.jsx("input",{type:"radio",name:"staff",value:x.id,checked:l===x.id,onChange:b=>o(b.target.value),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 flex-shrink-0 mr-3"}),s.jsx("div",{className:"w-2 h-2 rounded-full mr-3 bg-green-500"}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("p",{className:"text-sm font-medium text-gray-900 flex items-center gap-1.5",children:[s.jsx(er,{className:"w-4 h-4 text-purple-600"}),"McCarthy AI"]}),s.jsx("p",{className:"text-xs text-gray-500",children:"Return to AI handling"})]}),s.jsx("div",{className:"text-right min-w-[60px]",children:s.jsxs("p",{className:"text-xs text-gray-500",children:[x.openTickets," open"]})})]},x.id)),m.filter(x=>x.id!=="ai-agent-001").map(x=>s.jsxs("label",{className:`flex items-center p-3 border rounded-lg transition-colors cursor-pointer hover:bg-gray-50 ${l===x.id?"border-indigo-500 bg-indigo-50":"border-gray-300"}`,children:[s.jsx("input",{type:"radio",name:"staff",value:x.id,checked:l===x.id,onChange:b=>o(b.target.value),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 flex-shrink-0 mr-3"}),s.jsx("div",{className:`w-2 h-2 rounded-full mr-3 ${x.availability_status==="online"?"bg-green-500":x.availability_status==="away"?"bg-yellow-500":"bg-gray-400"}`}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:x.name}),s.jsx("p",{className:"text-xs text-gray-500 capitalize",children:x.availability_status||"Offline"})]}),s.jsx("div",{className:"text-right min-w-[60px]",children:s.jsxs("p",{className:"text-xs text-gray-500",children:[x.openTickets," open"]})})]},x.id))]}),s.jsx("div",{className:"mt-2",children:s.jsxs("label",{className:`flex items-center p-3 border rounded-lg transition-colors cursor-pointer hover:bg-gray-50 ${l==="unassigned"?"border-amber-500 bg-amber-50":"border-gray-300"}`,children:[s.jsx("input",{type:"radio",name:"staff",value:"unassigned",checked:l==="unassigned",onChange:x=>o(x.target.value),className:"h-4 w-4 text-amber-600 focus:ring-amber-500 flex-shrink-0 mr-3"}),s.jsx("div",{className:"w-2 h-2 rounded-full mr-3 bg-gray-400"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Remove Assignment"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Ticket will be unassigned"})]})]})}),s.jsxs("div",{className:"mt-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reason (optional)"}),s.jsx("textarea",{value:c,onChange:x=>d(x.target.value),placeholder:"e.g., Sales inquiry, needs technical support...",rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm"})]})]}),s.jsxs("div",{className:"px-6 py-4 bg-gray-50 rounded-b-lg flex justify-end gap-3 border-t border-gray-200 flex-shrink-0",children:[s.jsx("button",{onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),s.jsx("button",{onClick:y,disabled:!l,className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed",children:a?`Reassign ${v} Ticket${v>1?"s":""}`:"Reassign Ticket"})]})]})})}const Kd=[{value:"all",label:"All Platforms",icon:null},{value:"email",label:"Email",icon:En},{value:"chat",label:"Live Chat",icon:ma},{value:"phone",label:"Phone",icon:ga},{value:"whatsapp",label:"WhatsApp",icon:ma},{value:"instagram",label:"Instagram",icon:vv},{value:"facebook",label:"Messenger",icon:pv}];function OC({value:e,onChange:t}){const[r,n]=u.useState(!1),a=u.useRef(null),i=Kd.find(o=>o.value===e)||Kd[0],l=i.icon;return u.useEffect(()=>{function o(c){a.current&&!a.current.contains(c.target)&&n(!1)}return document.addEventListener("mousedown",o),()=>document.removeEventListener("mousedown",o)},[]),s.jsxs("div",{className:"relative",ref:a,children:[s.jsxs("button",{type:"button",onClick:()=>n(!r),className:"w-full flex items-center justify-between gap-2 rounded-lg border-2 border-gray-300 bg-white px-3 py-2 text-sm focus:border-indigo-500 focus:outline-none focus:ring-indigo-500",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[l&&s.jsx(l,{className:"w-4 h-4 text-gray-500"}),s.jsx("span",{children:i.label})]}),s.jsx(Ks,{className:"w-4 h-4 text-gray-400"})]}),r&&s.jsx("div",{className:"absolute z-10 mt-1 w-full rounded-lg border border-gray-200 bg-white shadow-lg",children:Kd.map(o=>{const c=o.icon;return s.jsxs("button",{type:"button",onClick:()=>{t(o.value),n(!1)},className:`w-full flex items-center gap-2 px-3 py-2 text-sm hover:bg-gray-50 first:rounded-t-lg last:rounded-b-lg ${o.value===e?"bg-indigo-50 text-indigo-700":"text-gray-700"}`,children:[c&&s.jsx(c,{className:"w-4 h-4"}),s.jsx("span",{children:o.label})]},o.value)})})]})}const ag={open:"bg-green-50 text-green-700 ring-green-600/20",pending:"bg-yellow-50 text-yellow-700 ring-yellow-600/20","in-progress":"bg-blue-50 text-blue-700 ring-blue-600/20",resolved:"bg-gray-50 text-gray-700 ring-gray-600/20",closed:"bg-gray-50 text-gray-700 ring-gray-600/20",snoozed:"bg-purple-50 text-purple-700 ring-purple-600/20"},DC=({platform:e,className:t="w-4 h-4"})=>{switch(e){case"chat":return s.jsx(ma,{className:`${t} text-indigo-500`});case"phone":return s.jsx(ga,{className:`${t} text-red-500`});case"whatsapp":return s.jsx(ma,{className:`${t} text-green-600`});case"facebook":return s.jsx(pv,{className:`${t} text-blue-600`});case"instagram":return s.jsx(vv,{className:`${t} text-pink-500`});case"email":default:return s.jsx(En,{className:`${t} text-gray-500`})}},ig={low:"bg-gray-50 text-gray-700 ring-gray-600/20",normal:"bg-blue-50 text-blue-700 ring-blue-600/20",high:"bg-orange-50 text-orange-700 ring-orange-600/20",critical:"bg-red-50 text-red-700 ring-red-600/20",urgent:"bg-red-100 text-red-800 ring-red-700/30"},lg={positive:"bg-green-50 text-green-700 ring-green-600/20",neutral:"bg-gray-50 text-gray-600 ring-gray-500/20",negative:"bg-orange-50 text-orange-700 ring-orange-600/20",angry:"bg-red-50 text-red-700 ring-red-600/20"},zC={positive:"",neutral:"",negative:"",angry:""},Qd={"00000000-0000-0000-0000-000000000001":"John Hutchison","00000000-0000-0000-0000-000000000002":"Ted Smith","00000000-0000-0000-0000-000000000003":"Sam Johnson","00000000-0000-0000-0000-000000000004":"Gaille Hutchison","ai-agent-001":"McCarthy AI"},UC=e=>{const t=e.match(/\d+/);return t?`TKT-${parseInt(t[0],10)}`:e};function HC(){const[e]=zl(),{user:t}=Rs(),[r,n]=u.useState("all"),[a,i]=u.useState("all"),[l,o]=u.useState("created_at"),[c,d]=u.useState("desc"),[m,h]=u.useState("all"),[p,j]=u.useState("all"),[f,g]=u.useState("all"),[y,v]=u.useState("all"),[x,b]=u.useState(!1),[w,N]=u.useState(!1),[E,L]=u.useState(""),[P,ee]=u.useState([]),[H,Q]=u.useState(!1),[ae,ne]=u.useState(!1),[ve,je]=u.useState(!1),[Se,D]=u.useState(!1),[T,Y]=u.useState(!1);u.useEffect(()=>{const _=e.get("filter"),B=e.get("assigned"),W=e.get("status"),V=()=>{n("all"),v("all"),i("all"),h("all"),j("all"),g("all"),b(!1)};W==="open"?(V(),n("open-in-progress")):W==="resolved"?(V(),n("resolved")):W==="snoozed"?(V(),n("snoozed")):_==="my"?(V(),v((t==null?void 0:t.id)||"00000000-0000-0000-0000-000000000001")):_==="vip"?(V(),b(!0)):_==="unassigned"?(V(),v("unassigned")):_==="all-escalated"?(V(),v("all-escalated")):_==="all-assigned"?(V(),v("all-assigned")):B==="ted"?(V(),v("00000000-0000-0000-0000-000000000002")):B==="sam"?(V(),v("00000000-0000-0000-0000-000000000003")):B?(V(),v(B)):!_&&!W&&!B&&V()},[e,t==null?void 0:t.id]),u.useEffect(()=>{const _=e.get("search");_&&(L(_),N(!0))},[e]);const{data:J,isLoading:X}=me({queryKey:["tickets-all"],queryFn:async()=>{const _={limit:1e3};return(await De.list(_)).data.tickets},refetchInterval:3e4});u.useEffect(()=>{if(E.trim()&&J&&J.length>0){const _=E.trim();let B=J.filter(W=>{if(!W.ticket_number)return!1;const V=W.ticket_number.toLowerCase(),re=_.toLowerCase();if(V===re)return!0;const de=W.ticket_number.replace(/\D/g,"").replace(/^0+/,""),U=_.replace(/\D/g,"").replace(/^0+/,"");return!!(de===U&&U.length>0||V.includes(re))});if(B.length===1&&B[0].id){const W=B[0];console.log("[TicketsPage] Auto-navigating to ticket:",W.ticket_number,W.id),setTimeout(()=>{window.location.href=`/tickets/${W.id}`},1e3)}else B.length===0?console.log("[TicketsPage] No tickets found for search:",_):B.length>1&&console.log("[TicketsPage] Multiple tickets found:",B.length,"- showing list")}},[E,J]);const{data:he}=me({queryKey:["staff-list"],queryFn:async()=>(await $.get("/api/staff")).data,staleTime:6e4}),Oe=(he==null?void 0:he.staff)||[];if(X)return s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"text-gray-500",children:"Loading tickets..."})});let G=J||[];if(r==="open-in-progress"?G=G.filter(_=>_.status==="open"||_.status==="in-progress"||_.status==="pending"):r==="snoozed"?G=G.filter(_=>_.status==="snoozed"):r==="resolved"?G=G.filter(_=>_.status==="resolved"||_.status==="closed"):G=G.filter(_=>_.status!=="resolved"&&_.status!=="closed"),y!=="all"&&(y==="unassigned"?G=G.filter(_=>!_.assigned_to||_.assigned_to===null):y==="all-assigned"?G=G.filter(_=>_.assigned_to&&_.assigned_to!==null):y==="all-escalated"?G=G.filter(_=>_.has_escalation===1):y==="resolved"?G=(J||[]).filter(_=>_.status==="resolved"||_.status==="closed"):G=G.filter(_=>_.assigned_to===y||_.is_escalated_to_me===1)),x&&(G=G.filter(_=>_.vip===1)),a!=="all"&&(G=G.filter(_=>_.priority===a)),m!=="all"&&(G=G.filter(_=>_.sentiment===m)),p!=="all"&&(G=G.filter(_=>_.channel===p)),f!=="all"){const _=new Date;let B;f==="today"?B=new Date(_.getFullYear(),_.getMonth(),_.getDate()):f==="week"?B=new Date(_.getTime()-7*24*60*60*1e3):f==="month"?B=new Date(_.getTime()-30*24*60*60*1e3):B=new Date(0),G=G.filter(W=>new Date(W.created_at)>=B)}if(E.trim()){const _=E.trim();if(/^(TKT-)?[\d,\s-]+$/.test(_)){const W=_.replace(/TKT-/gi,"").split(",").map(V=>V.trim().replace(/\D/g,"")).filter(V=>V.length>0);G=G.filter(V=>{var de;const re=((de=V.ticket_number)==null?void 0:de.replace(/\D/g,"").replace(/^0+/,""))||"";return W.some(U=>{var Ge;const Ce=U.replace(/^0+/,"");return re===Ce||re.endsWith(Ce)||((Ge=V.ticket_number)==null?void 0:Ge.toLowerCase().includes(U.toLowerCase()))})})}else{const W=_.toLowerCase();G=G.filter(V=>{var re,de,U,Ce,Ge;return((re=V.ticket_number)==null?void 0:re.toLowerCase().includes(W))||((de=V.customer_name)==null?void 0:de.toLowerCase().includes(W))||((U=V.customer_email)==null?void 0:U.toLowerCase().includes(W))||((Ce=V.subject)==null?void 0:Ce.toLowerCase().includes(W))||((Ge=V.description)==null?void 0:Ge.toLowerCase().includes(W))})}}const Le=_=>{l===_?d(c==="asc"?"desc":"asc"):(o(_),d("asc"))};G=G.sort((_,B)=>{var re,de,U,Ce;let W=_[l],V=B[l];return l==="created_at"?(W=new Date(_.created_at).getTime(),V=new Date(B.created_at).getTime()):l==="customer_name"?(W=((re=_.customer_name)==null?void 0:re.toLowerCase())||"",V=((de=B.customer_name)==null?void 0:de.toLowerCase())||""):l==="subject"?(W=((U=_.subject)==null?void 0:U.toLowerCase())||"",V=((Ce=B.subject)==null?void 0:Ce.toLowerCase())||""):l==="assigned_to"&&(W=Qd[_.assigned_to]||"Unassigned",V=Qd[B.assigned_to]||"Unassigned"),c==="asc"?W>V?1:W<V?-1:0:W<V?1:W>V?-1:0});const z=()=>{if(y===(t==null?void 0:t.id))return"My Tickets";if(y==="unassigned")return"Unassigned";if(y==="all-escalated")return" All Escalated Tickets";if(y==="all-assigned")return"All Assigned";if(y==="ai-agent-001")return"McCarthy AI";const _=Oe.find(B=>B.id===y);return _?`${_.first_name} ${_.last_name}`:r==="snoozed"?"Snoozed":r==="resolved"?"Resolved":r==="open-in-progress"?"Open (in-progress)":x?"VIP":"All Tickets"};return s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"sticky top-0 z-10 bg-white pb-4 -mx-6 px-6 -mt-6 pt-6 border-b border-gray-200 mb-4",children:[s.jsx("div",{className:"sm:flex sm:items-center sm:justify-between",children:s.jsxs("div",{className:"sm:flex-auto",children:[s.jsxs("h1",{className:"text-2xl font-semibold leading-6 text-gray-900 flex items-center gap-3",children:[z(),s.jsx("span",{className:"inline-flex items-center rounded-full bg-indigo-100 px-3 py-1 text-sm font-semibold text-indigo-700 ring-1 ring-inset ring-indigo-600/20",children:G.length}),s.jsx("button",{onClick:()=>N(!w),className:`p-1.5 rounded-lg transition-colors ${w?"bg-indigo-100 text-indigo-600":"text-gray-400 hover:text-gray-600 hover:bg-gray-100"}`,title:"Search tickets",children:s.jsx(ui,{className:"w-5 h-5"})})]}),s.jsx("p",{className:"mt-2 text-sm text-gray-700",children:"A list of all customer service tickets including their status, priority, and assignment."})]})}),s.jsxs("div",{className:"mt-4",children:[s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3",children:[s.jsxs("select",{value:y,onChange:_=>{const B=_.target.value;v(B),b(B==="vip")},className:"block w-full rounded-lg border-2 text-sm focus:border-indigo-500 focus:ring-indigo-500 px-3 py-2 bg-white border-gray-300",children:[s.jsx("option",{value:"all",children:"All Tickets"}),s.jsx("option",{value:(t==null?void 0:t.id)||"",children:"My Tickets"}),Oe.filter(_=>_.id!=="ai-agent-001"&&_.id!==(t==null?void 0:t.id)).map(_=>s.jsxs("option",{value:_.id,children:[_.first_name," ",_.last_name]},_.id)),s.jsx("option",{value:"ai-agent-001",children:"McCarthy AI"}),s.jsx("option",{value:"all-assigned",children:"Assigned All"}),s.jsx("option",{value:"unassigned",children:"Unassigned"}),s.jsx("option",{value:"resolved",children:"Resolved"})]}),s.jsx(OC,{value:p,onChange:j}),s.jsxs("select",{value:r,onChange:_=>n(_.target.value),className:"block w-full rounded-lg border-2 text-sm focus:border-indigo-500 focus:ring-indigo-500 px-3 py-2 bg-white border-gray-300",children:[s.jsx("option",{value:"all",children:"All Statuses"}),s.jsx("option",{value:"open-in-progress",children:"Open (in-progress)"}),s.jsx("option",{value:"snoozed",children:"Snoozed"}),s.jsx("option",{value:"resolved",children:"Resolved"})]}),s.jsxs("select",{value:a,onChange:_=>i(_.target.value),className:"block w-full rounded-lg border-2 text-sm focus:border-indigo-500 focus:ring-indigo-500 px-3 py-2 bg-white border-gray-300",children:[s.jsx("option",{value:"all",children:"All Priorities"}),s.jsx("option",{value:"low",children:"Low"}),s.jsx("option",{value:"normal",children:"Normal"}),s.jsx("option",{value:"high",children:"High"}),s.jsx("option",{value:"urgent",children:"Urgent"}),s.jsx("option",{value:"critical",children:"Critical"})]}),s.jsxs("select",{value:m,onChange:_=>h(_.target.value),className:"block w-full rounded-lg border-2 text-sm focus:border-indigo-500 focus:ring-indigo-500 px-3 py-2 bg-white border-gray-300",children:[s.jsx("option",{value:"all",children:"All Sentiments"}),s.jsx("option",{value:"positive",children:" Positive"}),s.jsx("option",{value:"neutral",children:" Neutral"}),s.jsx("option",{value:"negative",children:" Negative"}),s.jsx("option",{value:"angry",children:" Angry"})]}),s.jsxs("select",{value:f,onChange:_=>g(_.target.value),className:"block w-full rounded-lg border-2 text-sm focus:border-indigo-500 focus:ring-indigo-500 px-3 py-2 bg-white border-gray-300",children:[s.jsx("option",{value:"all",children:"All Time"}),s.jsx("option",{value:"today",children:"Today"}),s.jsx("option",{value:"week",children:"This Week"}),s.jsx("option",{value:"month",children:"This Month"})]})]}),w&&s.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[s.jsxs("div",{className:"relative flex-1 max-w-lg",children:[s.jsx(ui,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx("input",{type:"text",value:E,onChange:_=>L(_.target.value),placeholder:"Search by ticket #, name, email, description... or enter ticket numbers: 112, 119, 122",className:"w-full pl-10 pr-10 py-2 rounded-lg border-2 border-indigo-300 text-sm focus:border-indigo-500 focus:ring-indigo-500 bg-white",autoFocus:!0}),E&&s.jsx("button",{onClick:()=>L(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:s.jsx(Rt,{className:"w-4 h-4"})})]}),s.jsx("button",{onClick:()=>{N(!1),L("")},className:"px-3 py-2 text-sm text-gray-600 hover:text-gray-800",children:"Close"})]}),P.length>0&&(()=>{const _=P.map(V=>G.find(re=>re.ticket_id===V)).filter(Boolean),B=new Set(_.map(V=>V==null?void 0:V.customer_email)),W=P.length>=2&&B.size===1;return s.jsxs("div",{className:"mt-3 flex items-center gap-2 bg-indigo-50 border border-indigo-200 rounded-lg px-4 py-2",children:[s.jsxs("span",{className:"text-sm font-medium text-indigo-700 mr-2",children:[P.length," ticket",P.length>1?"s":""," selected"]}),P.length>=2&&s.jsxs("button",{onClick:()=>W?Q(!0):alert("Can only merge tickets from the same customer email address"),className:`flex items-center gap-2 px-3 py-1.5 text-sm font-medium rounded-lg ${W?"text-white bg-indigo-600 hover:bg-indigo-700":"text-gray-400 bg-gray-200 cursor-not-allowed"}`,title:W?"Merge selected tickets":"Can only merge tickets from the same customer email",children:[s.jsx(Xf,{className:"w-4 h-4"}),s.jsx("span",{children:"Merge"}),!W&&s.jsx("span",{className:"text-xs",children:"(different emails)"})]}),s.jsxs("button",{onClick:()=>je(!0),className:"flex items-center gap-2 px-3 py-1.5 text-sm font-medium text-white bg-green-600 hover:bg-green-700 rounded-lg",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),s.jsx("span",{children:"Reassign"})]}),(t==null?void 0:t.role)==="admin"&&s.jsxs("button",{onClick:()=>D(!0),className:"flex items-center gap-2 px-3 py-1.5 text-sm font-medium text-white bg-red-600 hover:bg-red-700 rounded-lg",children:[s.jsx(hi,{className:"w-4 h-4"}),s.jsx("span",{children:"Delete"})]}),s.jsx("button",{onClick:()=>ee([]),className:"px-3 py-1.5 text-sm text-gray-600 hover:text-gray-800 hover:bg-white rounded-lg border border-gray-300",children:"Clear"})]})})()]})]}),s.jsx("div",{className:"mt-4",children:s.jsx("div",{className:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 rounded-lg",children:s.jsxs("table",{className:"w-full divide-y divide-gray-300",style:{tableLayout:"fixed"},children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{scope:"col",className:"py-3.5 w-14 text-center",children:s.jsx("input",{type:"checkbox",checked:P.length>0&&P.length===G.length,onChange:_=>{_.target.checked?ee(G.map(B=>B.ticket_id)):ee([])},className:"w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"})}),s.jsx("th",{scope:"col",className:"py-3.5 pl-2 pr-2 text-left text-xs font-semibold text-gray-900 cursor-pointer hover:bg-gray-100 whitespace-nowrap",onClick:()=>Le("ticket_number"),style:{width:"9%",minWidth:"90px"},children:s.jsxs("div",{className:"flex items-center gap-1",children:["Ticket #",l==="ticket_number"&&s.jsx("span",{className:"text-xs",children:c==="asc"?"":""})]})}),s.jsx("th",{scope:"col",className:"px-2 py-3.5 text-left text-xs font-semibold text-gray-900 cursor-pointer hover:bg-gray-100",onClick:()=>Le("created_at"),style:{width:"10%"},children:s.jsxs("div",{className:"flex items-center gap-1",children:["Created",l==="created_at"&&s.jsx("span",{className:"text-xs",children:c==="asc"?"":""})]})}),s.jsx("th",{scope:"col",className:"px-2 py-3.5 text-left text-xs font-semibold text-gray-900 cursor-pointer hover:bg-gray-100",onClick:()=>Le("customer_name"),style:{width:"14%"},children:s.jsxs("div",{className:"flex items-center gap-1",children:["Customer",l==="customer_name"&&s.jsx("span",{className:"text-xs",children:c==="asc"?"":""})]})}),s.jsx("th",{scope:"col",className:"px-2 py-3.5 text-left text-xs font-semibold text-gray-900 cursor-pointer hover:bg-gray-100",onClick:()=>Le("subject"),style:{width:"22%"},children:s.jsxs("div",{className:"flex items-center gap-1",children:["Subject",l==="subject"&&s.jsx("span",{className:"text-xs",children:c==="asc"?"":""})]})}),s.jsx("th",{scope:"col",className:"px-2 py-3.5 text-left text-xs font-semibold text-gray-900 cursor-pointer hover:bg-gray-100",onClick:()=>Le("priority"),style:{width:"8%"},children:s.jsxs("div",{className:"flex items-center gap-1",children:["Priority",l==="priority"&&s.jsx("span",{className:"text-xs",children:c==="asc"?"":""})]})}),s.jsx("th",{scope:"col",className:"px-2 py-3.5 text-left text-xs font-semibold text-gray-900 cursor-pointer hover:bg-gray-100",onClick:()=>Le("status"),style:{width:"9%"},children:s.jsxs("div",{className:"flex items-center gap-1",children:["Status",l==="status"&&s.jsx("span",{className:"text-xs",children:c==="asc"?"":""})]})}),s.jsx("th",{scope:"col",className:"px-2 py-3.5 text-left text-xs font-semibold text-gray-900 cursor-pointer hover:bg-gray-100",onClick:()=>Le("assigned_to"),style:{width:"10%"},children:s.jsxs("div",{className:"flex items-center gap-1",children:["Assignment",l==="assigned_to"&&s.jsx("span",{className:"text-xs",children:c==="asc"?"":""})]})}),s.jsx("th",{scope:"col",className:"px-2 py-3.5 pr-2 text-left text-xs font-semibold text-gray-900 cursor-pointer hover:bg-gray-100",onClick:()=>Le("sentiment"),style:{width:"10%"},children:s.jsxs("div",{className:"flex items-center gap-1",children:["Sentiment",l==="sentiment"&&s.jsx("span",{className:"text-xs",children:c==="asc"?"":""})]})})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200",children:G.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:10,className:"py-8 text-center text-sm text-gray-500",children:"No tickets found"})}):G.map(_=>{let B;if(_.channel==="chat")B=`/chat-ticket/${_.ticket_id}`;else{const de=new URLSearchParams;x?de.set("filter","vip"):y!=="all"&&y!=="vip"&&de.set("from",y),B=de.toString()?`/tickets/${_.ticket_id}?${de.toString()}`:`/tickets/${_.ticket_id}`}const W=_.has_escalation===1?"bg-orange-50":_.status==="snoozed"?"bg-purple-100":_.merged_from?"bg-cyan-50":"",V=P.includes(_.ticket_id),re=P.indexOf(_.ticket_id);return s.jsxs("tr",{className:`${W} ${V?"bg-indigo-50":""}`,children:[s.jsxs("td",{className:"py-3 w-14 text-center relative",children:[s.jsx("input",{type:"checkbox",checked:V,onChange:de=>{de.target.checked?ee([...P,_.ticket_id]):ee(P.filter(U=>U!==_.ticket_id))},className:"w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),V&&re===0&&s.jsx("span",{className:"absolute -right-1 top-1/2 -translate-y-1/2 text-xs font-bold text-indigo-600",title:"Primary ticket (will be kept)",children:""})]}),s.jsx("td",{className:"py-3 pl-2 pr-2 text-sm font-medium",children:s.jsxs(vt,{to:B,className:"text-indigo-600 hover:text-indigo-900 font-medium flex items-center gap-1.5",children:[s.jsx(DC,{platform:_.channel||"email",className:"w-4 h-4 flex-shrink-0"}),s.jsx("span",{className:"text-xs whitespace-nowrap",children:UC(_.ticket_number)})]})}),s.jsxs("td",{className:"px-2 py-3 text-sm text-gray-500",children:[s.jsx("div",{className:"text-xs truncate",children:new Date(_.created_at).toLocaleString()}),s.jsx("div",{className:"text-xs text-gray-400 truncate",children:hr(new Date(_.created_at),{addSuffix:!0})})]}),s.jsx("td",{className:"px-2 py-3 text-sm text-gray-500",children:s.jsx(vt,{to:`/tickets?customer=${encodeURIComponent(_.customer_email)}`,className:"block hover:bg-gray-50 -m-1 p-1 rounded transition-colors",children:s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"text-gray-900 hover:text-indigo-600 font-medium text-xs truncate",children:_.customer_name}),_.vip===1&&s.jsx("span",{className:"text-yellow-500 text-xs flex-shrink-0",title:"VIP Customer",children:""})]}),s.jsx("div",{className:"text-gray-500 hover:text-indigo-500 text-xs truncate",children:_.customer_email})]})})}),s.jsx("td",{className:"px-2 py-3 text-sm text-gray-500",children:s.jsx("div",{className:"truncate text-xs",children:_.subject||_.description||"No subject"})}),s.jsx("td",{className:"px-2 py-3 text-sm",children:s.jsx("span",{className:`inline-flex items-center rounded-md px-1.5 py-0.5 text-xs font-medium ring-1 ring-inset ${ig[_.priority]||ig.normal}`,children:_.priority})}),s.jsx("td",{className:"px-2 py-3 text-sm",children:s.jsxs("div",{className:"relative inline-block",children:[s.jsx("span",{className:`inline-flex items-center rounded-md px-1.5 py-0.5 text-xs font-medium ring-1 ring-inset ${ag[_.status]||ag.open}`,children:_.status}),_.is_escalated_to_me===1&&s.jsx("span",{className:"absolute -top-1 -right-1 text-xs leading-none",title:"Escalated - You've been asked for help",children:""})]})}),s.jsx("td",{className:"px-2 py-3 text-sm text-gray-500",children:_.assigned_to?s.jsx("span",{className:"inline-flex items-center rounded-md bg-blue-50 px-1.5 py-0.5 text-xs font-medium text-blue-700 ring-1 ring-inset ring-blue-700/10 truncate",children:Qd[_.assigned_to]||_.assigned_staff_name||_.assigned_to}):s.jsx("span",{className:"inline-flex items-center rounded-md bg-gray-50 px-1.5 py-0.5 text-xs font-medium text-gray-500 ring-1 ring-inset ring-gray-300",children:"Unassigned"})}),s.jsx("td",{className:"px-2 py-3 pr-2 text-sm",children:s.jsxs("span",{className:`inline-flex items-center rounded-md px-1.5 py-0.5 text-xs font-medium ring-1 ring-inset ${lg[_.sentiment]||lg.neutral}`,children:[zC[_.sentiment]||""," ",_.sentiment||"neutral"]})})]},_.ticket_id)})})]})})}),H&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-lg w-full mx-4",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("div",{className:"p-2 bg-indigo-100 rounded-full",children:s.jsx(Xf,{className:"w-6 h-6 text-indigo-600"})}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Merge Tickets"})]}),s.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["You are about to merge ",s.jsxs("span",{className:"font-semibold",children:[P.length," tickets"]})," into one."]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:[s.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Tickets to merge:"}),s.jsx("ul",{className:"space-y-1",children:P.map((_,B)=>{const W=G.find(V=>V.ticket_id===_);return s.jsxs("li",{className:"flex items-center gap-2 text-sm",children:[B===0?s.jsx("span",{className:"text-xs font-bold text-indigo-600 bg-indigo-100 px-1.5 py-0.5 rounded",children:"PRIMARY"}):s.jsx("span",{className:"text-xs text-gray-400 bg-gray-200 px-1.5 py-0.5 rounded",children:"merge"}),s.jsx("span",{className:"font-medium",children:W==null?void 0:W.ticket_number}),s.jsxs("span",{className:"text-gray-500 truncate",children:["- ",W==null?void 0:W.subject]})]},_)})})]}),s.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 mb-4",children:s.jsxs("p",{className:"text-xs text-yellow-800",children:[s.jsx("strong",{children:"What will happen:"}),s.jsx("br",{})," All messages will be merged into the PRIMARY ticket in chronological order",s.jsx("br",{})," Secondary tickets will be closed with a note",s.jsx("br",{})," This action cannot be undone"]})}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx("button",{onClick:()=>Q(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",disabled:ae,children:"Cancel"}),s.jsx("button",{onClick:async()=>{var _,B;ne(!0);try{const[W,...V]=P;await De.merge(W,V),Q(!1),ee([]),window.location.reload()}catch(W){console.error("Failed to merge tickets:",W),alert(`Failed to merge tickets: ${((B=(_=W.response)==null?void 0:_.data)==null?void 0:B.error)||W.message||"Unknown error"}`)}finally{ne(!1)}},className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-lg hover:bg-indigo-700 disabled:opacity-50",disabled:ae,children:ae?"Merging...":"Merge Tickets"})]})]})}),s.jsx(Cv,{isOpen:ve,onClose:()=>je(!1),onReassign:async(_,B,W)=>{var V,re;try{await De.bulkAssign(P,_),W&&console.log("Bulk reassignment reason:",W),je(!1),ee([]),window.location.reload()}catch(de){console.error("Failed to reassign tickets:",de),alert(`Failed to reassign tickets: ${((re=(V=de.response)==null?void 0:V.data)==null?void 0:re.error)||de.message||"Unknown error"}`)}},bulkMode:!0,selectedTickets:P.map(_=>{const B=G.find(W=>W.ticket_id===_);return{ticket_id:_,ticket_number:(B==null?void 0:B.ticket_number)||"",subject:(B==null?void 0:B.subject)||""}})}),Se&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-lg w-full mx-4",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("div",{className:"p-2 bg-red-100 rounded-full",children:s.jsx(hi,{className:"w-6 h-6 text-red-600"})}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Delete Tickets"})]}),s.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Are you sure you want to delete ",s.jsxs("span",{className:"font-semibold",children:[P.length," ticket",P.length>1?"s":""]}),"?"]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-4 max-h-48 overflow-y-auto",children:[s.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Tickets to delete:"}),s.jsx("ul",{className:"space-y-1",children:P.map(_=>{const B=G.find(W=>W.ticket_id===_);return s.jsxs("li",{className:"flex items-center gap-2 text-sm",children:[s.jsx("span",{className:"font-medium text-red-600",children:B==null?void 0:B.ticket_number}),s.jsxs("span",{className:"text-gray-500 truncate",children:["- ",B==null?void 0:B.subject]})]},_)})})]}),s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 mb-4",children:s.jsxs("p",{className:"text-xs text-red-800",children:[s.jsx("strong",{children:" Warning:"})," This action cannot be undone. All selected tickets and their messages will be permanently deleted."]})}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx("button",{onClick:()=>D(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",disabled:T,children:"Cancel"}),s.jsx("button",{onClick:async()=>{var _,B;Y(!0);try{for(const W of P)await De.delete(W);D(!1),ee([]),window.location.reload()}catch(W){console.error("Failed to delete tickets:",W),alert(`Failed to delete tickets: ${((B=(_=W.response)==null?void 0:_.data)==null?void 0:B.error)||W.message||"Unknown error"}`)}finally{Y(!1)}},className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 disabled:opacity-50",disabled:T,children:T?"Deleting...":`Delete ${P.length} Ticket${P.length>1?"s":""}`})]})]})})]})}const BC=["open","pending","in-progress","resolved","closed","escalated"];function qC({currentStatus:e,onClose:t,onSave:r}){const[n,a]=u.useState(e),[i,l]=u.useState(!1),o=async()=>{l(!0);try{await r(n),t()}catch(c){console.error("Failed to update status:",c),alert("Failed to update status")}finally{l(!1)}};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-96",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Change Status"}),s.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:s.jsx(Rt,{className:"w-5 h-5"})})]}),s.jsx("div",{className:"space-y-2",children:BC.map(c=>s.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[s.jsx("input",{type:"radio",value:c,checked:n===c,onChange:d=>a(d.target.value),className:"text-indigo-600"}),s.jsx("span",{className:"capitalize",children:c})]},c))}),s.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[s.jsx("button",{onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),s.jsx("button",{onClick:o,disabled:i,className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-lg hover:bg-indigo-700 disabled:opacity-50",children:i?"Saving...":"Save"})]})]})})}const og=[{id:"00000000-0000-0000-0000-000000000001",name:"John Hutchison",role:"Admin",online:!0},{id:"00000000-0000-0000-0000-000000000002",name:"Ted Smith",role:"Team Lead",online:!1},{id:"00000000-0000-0000-0000-000000000003",name:"Sam Johnson",role:"Manager",online:!1}];function WC({isOpen:e,onClose:t,onConfirm:r,ticketNumber:n}){const[a,i]=u.useState(""),[l,o]=u.useState("");if(!e)return null;const c=h=>{const p=og.find(j=>j.id===h);if(p){i(h);const j=p.name.split(" ")[0];o(f=>{const g=f.replace(/@\w+\s*/g,"").trim();return g?`@${j} ${g}`:`@${j} `})}},d=()=>{!a||!l.trim()||(r("escalation",[a],l),i(""),o(""),t())},m=()=>{i(""),o(""),t()};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] flex flex-col",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between flex-shrink-0",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-red-100 flex items-center justify-center mr-3",children:s.jsx("svg",{className:"w-5 h-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),s.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Escalate Ticket #",n]})]})}),s.jsxs("div",{className:"px-6 py-4 overflow-y-auto flex-1",children:[s.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Request assistance from other staff members to help resolve this ticket."}),s.jsxs("div",{className:"mb-6",children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:["Notify Staff Members: ",s.jsx("span",{className:"text-gray-500 font-normal",children:"(Select one or more)"})]}),s.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto border border-gray-200 rounded-lg p-3",children:og.map(h=>s.jsxs("label",{className:`flex items-center p-3 border rounded-lg cursor-pointer transition-colors ${a===h.id?"border-indigo-500 bg-indigo-50":"border-gray-300 hover:bg-gray-50"}`,children:[s.jsx("input",{type:"radio",name:"escalate-staff",value:h.id,checked:a===h.id,onChange:()=>c(h.id),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 flex-shrink-0 mr-3"}),s.jsx("div",{className:`w-2 h-2 rounded-full mr-3 ${h.online?"bg-green-500":"bg-gray-400"}`}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:h.name}),s.jsxs("p",{className:"text-xs text-gray-500",children:[h.role,"  ",h.online?"Online":"Offline"]})]})]},h.id))}),s.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:[a?"1":"0"," staff member selected"]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Your Message: ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("textarea",{value:l,onChange:h=>o(h.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"@mention message asking for help or advice on this ticket..."}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"This will be sent as an @mention linked to this ticket"})]}),s.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:s.jsxs("div",{className:"flex",children:[s.jsx("svg",{className:"w-5 h-5 text-blue-600 mr-2 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-blue-800",children:"Note:"}),s.jsx("p",{className:"text-xs text-blue-700 mt-1",children:"Selected staff will receive an alert notification and this will appear in their @mentions with higher priority (at the top, in a different color)."})]})]})})]}),s.jsxs("div",{className:"px-6 py-4 bg-gray-50 rounded-b-lg flex justify-end gap-3 border-t border-gray-200 flex-shrink-0",children:[s.jsx("button",{onClick:m,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),s.jsx("button",{onClick:d,disabled:!a||!l.trim(),className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Send Escalation"})]})]})})}const cg=[{id:"30-mins",title:"30 Minutes",description:"Quick snooze - resume in 30 mins",value:"30m"},{id:"later-today",title:"Later Today",description:"Resume in 3 hours",value:"3h"},{id:"tomorrow",title:"Tomorrow",description:"Next business day at 9:00 AM",value:"1d"},{id:"this-week",title:"This Week",description:"Friday at 9:00 AM",value:"friday"},{id:"next-week",title:"Next Week",description:"Following Monday at 9:00 AM",value:"1w"},{id:"custom",title:"Custom Date & Time",description:"Pick specific date and time",value:"custom"}];function KC({isOpen:e,onClose:t,onConfirm:r,onRemoveSnooze:n,ticketNumber:a,isSnoozed:i}){const[l,o]=u.useState(""),[c,d]=u.useState("");if(!e)return null;const m=()=>{if(!l)return;if(l==="custom"&&!c){alert("Please select a custom date and time");return}const p=cg.find(j=>j.id===l);p&&r(p.value,l==="custom"?c:void 0),o(""),d(""),t()},h=()=>{o(""),d(""),t()};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full mx-4 max-h-[90vh] flex flex-col",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between flex-shrink-0",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-purple-100 flex items-center justify-center mr-3",children:s.jsx("svg",{className:"w-5 h-5 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Snooze Ticket #",a]})]})}),s.jsxs("div",{className:"px-6 py-4 overflow-y-auto flex-1",children:[s.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Temporarily hide this ticket and automatically resume it later."}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Snooze until:"}),s.jsx("div",{className:"space-y-2",children:cg.map(p=>s.jsxs("div",{children:[s.jsxs("label",{className:`flex items-start p-4 border rounded-lg cursor-pointer transition-colors ${l===p.id?"border-indigo-500 bg-indigo-50":"border-gray-300 hover:bg-gray-50"}`,children:[s.jsx("input",{type:"radio",name:"snooze",value:p.id,checked:l===p.id,onChange:j=>o(j.target.value),className:"mt-1 h-4 w-4 text-indigo-600 focus:ring-indigo-500"}),s.jsxs("div",{className:"ml-3 flex-1",children:[s.jsx("p",{className:"text-sm font-semibold text-gray-900",children:p.title}),s.jsx("p",{className:"text-xs text-gray-600 mt-1",children:p.description})]})]}),p.id==="custom"&&l==="custom"&&s.jsxs("div",{className:"mt-2 ml-7 p-3 bg-indigo-50 border border-indigo-200 rounded-lg",children:[s.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:"Select Date & Time:"}),s.jsx("input",{type:"datetime-local",value:c,onChange:j=>d(j.target.value),min:new Date().toISOString().slice(0,16),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm"})]})]},p.id))})]})]}),s.jsxs("div",{className:"px-6 py-4 bg-gray-50 rounded-b-lg flex justify-between gap-3 border-t border-gray-200 flex-shrink-0",children:[s.jsx("button",{onClick:h,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:m,disabled:!l||l==="custom"&&!c,className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Snooze Ticket"}),i&&n&&s.jsx("button",{onClick:()=>{n(),h()},className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-lg hover:bg-indigo-700",children:"Remove Snooze"})]})]})]})})}function QC({isOpen:e,onClose:t,onConfirm:r}){const[n,a]=u.useState(""),[i,l]=u.useState("09"),[o,c]=u.useState("00"),d=()=>{const f=new Date,g=f.getFullYear(),y=(f.getMonth()+1).toString().padStart(2,"0"),v=f.getDate().toString().padStart(2,"0");return`${g}-${y}-${v}`},m=()=>{const g=new Date().getHours()+1;return g>=24?"09":g.toString().padStart(2,"0")};if(u.useEffect(()=>{e&&(a(d()),l(m()),c("00"))},[e]),!e)return null;const h=()=>{if(!n||!i||!o){alert("Please select date and time");return}const f=`${i}:${o}`;r(n,f),t()},p=()=>{t()},j=d();return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full mx-4",children:[s.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-yellow-100 flex items-center justify-center mr-3",children:s.jsx("svg",{className:"w-5 h-5 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Schedule Reply"})]}),s.jsx("button",{onClick:p,className:"text-gray-400 hover:text-gray-600",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"px-6 py-4",children:[s.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Schedule when this message will be sent to the customer. Scheduled messages are only visible to staff until the scheduled time."}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date"}),s.jsx("input",{type:"date",value:n,onChange:f=>a(f.target.value),min:j,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Time"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("select",{value:i,onChange:f=>l(f.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:Array.from({length:24},(f,g)=>{const y=g.toString().padStart(2,"0");return s.jsx("option",{value:y,children:y},y)})}),s.jsx("span",{className:"flex items-center text-gray-500 font-semibold",children:":"}),s.jsx("select",{value:o,onChange:f=>c(f.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:Array.from({length:60},(f,g)=>{const y=g.toString().padStart(2,"0");return s.jsx("option",{value:y,children:y},y)})})]})]}),s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:s.jsxs("p",{className:"text-sm text-blue-800",children:[s.jsx("strong",{children:"Note:"})," This message will be sent automatically at the scheduled time during business hours (9 AM - 6 PM)."]})})]})]}),s.jsxs("div",{className:"px-6 py-4 bg-gray-50 rounded-b-lg flex justify-end gap-3 border-t border-gray-200",children:[s.jsx("button",{onClick:p,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),s.jsx("button",{onClick:h,disabled:!n,className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Schedule Reply"})]})]})})}function VC({isOpen:e,onClose:t,onConfirm:r,onRemove:n,message:a}){const[i,l]=u.useState(""),[o,c]=u.useState(""),[d,m]=u.useState("09"),[h,p]=u.useState("00");if(u.useEffect(()=>{if(e&&a){l(a.content);const y=new Date(a.scheduled_for);c(y.toISOString().split("T")[0]),m(y.getHours().toString().padStart(2,"0")),p(y.getMinutes().toString().padStart(2,"0"))}},[e,a]),!e)return null;const j=()=>{if(!i.trim()){alert("Message content cannot be empty");return}if(!o){alert("Please select a date");return}const y=`${d}:${h}`;r(i,o,y),t()},f=()=>{l(""),c(""),m("09"),p("00"),t()},g=new Date().toISOString().split("T")[0];return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4",children:[s.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center mr-3",children:s.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Edit Scheduled Message"})]}),s.jsx("button",{onClick:f,className:"text-gray-400 hover:text-gray-600",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"px-6 py-4",children:[s.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Edit the message content and scheduled time for this reply."}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Message Content"}),s.jsx("textarea",{value:i,onChange:y=>l(y.target.value),rows:6,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 resize-none",placeholder:"Enter your message..."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Scheduled Date"}),s.jsx("input",{type:"date",value:o,onChange:y=>c(y.target.value),min:g,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Scheduled Time"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("select",{value:d,onChange:y=>m(y.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:Array.from({length:24},(y,v)=>{const x=v.toString().padStart(2,"0");return s.jsx("option",{value:x,children:x},x)})}),s.jsx("span",{className:"flex items-center text-gray-500 font-semibold",children:":"}),s.jsx("select",{value:h,onChange:y=>p(y.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:Array.from({length:60},(y,v)=>{const x=v.toString().padStart(2,"0");return s.jsx("option",{value:x,children:x},x)})})]})]}),s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:s.jsxs("p",{className:"text-sm text-blue-800",children:[s.jsx("strong",{children:"Note:"})," This message will be sent automatically at the scheduled time."]})})]})]}),s.jsxs("div",{className:"px-6 py-4 bg-gray-50 rounded-b-lg flex justify-between gap-3 border-t border-gray-200",children:[s.jsx("button",{onClick:f,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:j,disabled:!i.trim()||!o,className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Save Changes"}),n&&s.jsx("button",{onClick:()=>{confirm("Are you sure you want to remove this scheduled message? It will not be sent.")&&(n(),f())},className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-lg hover:bg-indigo-700",children:"Remove"})]})]})]})})}const GC=({draft:e,loading:t,onApprove:r,onEdit:n,onReject:a})=>{const[i,l]=u.useState(!1),[o,c]=u.useState(""),[d,m]=u.useState(""),[h,p]=u.useState(!1),[j,f]=u.useState(!1);if(t)return s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(er,{className:"w-5 h-5 text-blue-500 animate-pulse"}),s.jsx("span",{className:"text-gray-600",children:"AI is analyzing this ticket..."})]})});if(!e)return null;const g=Math.round(e.confidence_score*100),y=g>=85?"text-green-600 bg-green-50":g>=70?"text-yellow-600 bg-yellow-50":"text-red-600 bg-red-50",v=async()=>{f(!0);try{await r()}finally{f(!1)}},x=async()=>{if(!i){c(e.draft_content),l(!0);return}f(!0);try{await n(o),l(!1)}finally{f(!1)}},b=async()=>{f(!0);try{await a(d),p(!1),m("")}finally{f(!1)}};return s.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-lg shadow-lg p-6 border-2 border-blue-200",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(er,{className:"w-6 h-6 text-blue-600"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"AI Draft Response"}),s.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${y}`,children:[g,"% Confidence"]})]}),e.processing_time_ms&&e.processing_time_ms>0&&s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[s.jsx(wc,{className:"w-4 h-4"}),s.jsxs("span",{children:[e.processing_time_ms,"ms"]})]})]}),e.should_escalate===!0&&s.jsx("div",{className:"mb-4 p-4 bg-yellow-50 border-l-4 border-yellow-400 rounded",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx(dS,{className:"w-5 h-5 text-yellow-600 mt-0.5 mr-3"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-yellow-800",children:"Escalation Recommended"}),s.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:e.escalation_reason})]})]})}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Draft Response:"}),i?s.jsx("textarea",{value:o,onChange:w=>c(w.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:8}):s.jsx("div",{className:"bg-white p-4 rounded-lg border border-gray-200 whitespace-pre-wrap",children:e.draft_content})]}),s.jsxs("div",{className:"mb-4 p-4 bg-white rounded-lg border border-gray-200",children:[s.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"AI Reasoning:"}),s.jsx("p",{className:"text-sm text-gray-600",children:e.reasoning}),s.jsx("div",{className:"mt-3",children:s.jsxs("p",{className:"text-xs text-gray-500",children:["Intent: ",s.jsx("span",{className:"font-medium",children:e.intent})," | Handler: ",s.jsx("span",{className:"font-medium",children:e.handler_used})]})})]}),e.suggested_actions&&e.suggested_actions.length>0&&s.jsxs("div",{className:"mb-4 p-4 bg-white rounded-lg border border-gray-200",children:[s.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Suggested Actions:"}),s.jsx("ul",{className:"space-y-1",children:e.suggested_actions.map((w,N)=>s.jsxs("li",{className:"text-sm text-gray-600 flex items-start",children:[s.jsx("span",{className:"text-blue-500 mr-2",children:""}),w]},N))})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("button",{onClick:v,disabled:j||i,className:"flex-1 flex items-center justify-center px-4 py-2 bg-green-50 text-green-700 border border-green-200 rounded-lg hover:bg-green-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium",children:[s.jsx(lt,{className:"w-4 h-4 mr-2"}),j?"Sending...":"Approve & Send"]}),s.jsxs("button",{onClick:x,disabled:j,className:"flex-1 flex items-center justify-center px-4 py-2 bg-yellow-50 text-yellow-700 border border-yellow-200 rounded-lg hover:bg-yellow-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium",children:[s.jsx(Ih,{className:"w-4 h-4 mr-2"}),i?j?"Sending...":"Send Edited":"Edit & Send"]}),s.jsxs("button",{onClick:()=>p(!0),disabled:j||i,className:"flex-1 flex items-center justify-center px-4 py-2 bg-gray-100 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium",children:[s.jsx(xr,{className:"w-4 h-4 mr-2"}),"Reject"]})]}),i&&s.jsx("button",{onClick:()=>{l(!1),c("")},className:"mt-2 w-full px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Cancel Editing"}),h&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Reject AI Draft"}),s.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Please provide a reason for rejecting this draft (optional):"}),s.jsx("textarea",{value:d,onChange:w=>m(w.target.value),placeholder:"e.g., Incorrect information, wrong tone, missing details...",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent mb-4",rows:3}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("button",{onClick:()=>{p(!1),m("")},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),s.jsx("button",{onClick:b,disabled:j,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:j?"Rejecting...":"Reject Draft"})]})]})})]})};function YC({isOpen:e,onClose:t,onSubmit:r}){const[n,a]=u.useState(0),[i,l]=u.useState(null),[o,c]=u.useState(""),[d,m]=u.useState(!1),[h,p]=u.useState(0);if(!e)return null;const j=async()=>{if(n===0||i===null){alert("Please rate the draft and indicate if it was helpful");return}m(!0);try{await r({qualityScore:n,wasHelpful:i,improvementNotes:o}),t()}catch(g){console.error("Failed to submit feedback:",g),alert("Failed to submit feedback. Please try again.")}finally{m(!1)}},f=()=>{t()};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:" Help Improve the AI"}),s.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx(Rt,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"How good was the AI draft?"}),s.jsxs("div",{className:"flex items-center gap-2",children:[[1,2,3,4,5].map(g=>s.jsx("button",{onClick:()=>a(g),onMouseEnter:()=>p(g),onMouseLeave:()=>p(0),className:"transition-transform hover:scale-110",children:s.jsx(sS,{className:`w-8 h-8 ${g<=(h||n)?"fill-yellow-400 text-yellow-400":"text-gray-300"}`})},g)),s.jsxs("span",{className:"ml-2 text-sm text-gray-600",children:[n===0&&"Click to rate",n===1&&"Poor",n===2&&"Fair",n===3&&"Good",n===4&&"Very Good",n===5&&"Excellent"]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Did the AI draft save you time?"}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>l(!0),className:`flex-1 py-2 px-4 rounded-lg border-2 transition-all ${i===!0?"border-green-500 bg-green-50 text-green-700":"border-gray-300 text-gray-700 hover:border-green-300"}`,children:" Yes"}),s.jsx("button",{onClick:()=>l(!1),className:`flex-1 py-2 px-4 rounded-lg border-2 transition-all ${i===!1?"border-red-500 bg-red-50 text-red-700":"border-gray-300 text-gray-700 hover:border-red-300"}`,children:" No"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"What could be improved? (Optional)"}),s.jsx("textarea",{value:o,onChange:g=>c(g.target.value),placeholder:"e.g., Too formal, missing product details, wrong tone...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",rows:3})]}),s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:s.jsxs("p",{className:"text-xs text-blue-800",children:[" ",s.jsx("strong",{children:"Your feedback helps the AI learn!"})," Every rating makes the AI smarter and more helpful for future tickets."]})})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 border-t border-gray-200 bg-gray-50",children:[s.jsx("button",{onClick:f,className:"px-4 py-2 text-sm text-gray-600 hover:text-gray-800 transition-colors",disabled:d,children:"Skip for now"}),s.jsx("button",{onClick:j,disabled:d||n===0||i===null,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors font-medium",children:d?"Submitting...":"Submit Feedback"})]})]})})}function Jl(e){return e?e.split(",").map(t=>t.trim()).filter(t=>t.length>0):[]}const _v="Use #keyword to add tags (e.g., #james-scott, #artwork-issue)",dg={open:"bg-green-100 text-green-800 border-green-200",pending:"bg-yellow-100 text-yellow-800 border-yellow-200","in-progress":"bg-blue-100 text-blue-800 border-blue-200",resolved:"bg-gray-100 text-gray-800 border-gray-200",closed:"bg-gray-100 text-gray-800 border-gray-200",snoozed:"bg-purple-100 text-purple-800 border-purple-200"},ug={low:"bg-gray-50 text-gray-700 ring-gray-600/20",normal:"bg-blue-50 text-blue-700 ring-blue-600/20",high:"bg-orange-50 text-orange-700 ring-orange-600/20",critical:"bg-red-50 text-red-700 ring-red-600/20",urgent:"bg-red-100 text-red-800 ring-red-700/30"},mg={positive:"bg-green-50 text-green-700 ring-green-600/20",neutral:"bg-gray-50 text-gray-600 ring-gray-500/20",negative:"bg-orange-50 text-orange-700 ring-orange-600/20",angry:"bg-red-50 text-red-700 ring-red-600/20"},JC={positive:"",neutral:"",negative:"",angry:""},hg={"00000000-0000-0000-0000-000000000001":"John Hutchison","00000000-0000-0000-0000-000000000002":"Ted Smith","00000000-0000-0000-0000-000000000003":"Sam Johnson"},ja=e=>e?e.startsWith("data:")||e.startsWith("http")?e:`https://dartmouth-os-worker.dartmouth.workers.dev/api/attachments/${e}`:"",In=e=>{const t=e.match(/\d+/);return t?`TKT-${parseInt(t[0],10)}`:e};function XC(){var Dh,zh,Uh,Hh;const{id:e}=ly(),t=yr(),[r]=zl(),n=ut(),{user:a}=Rs(),[i,l]=u.useState(!1),[o,c]=u.useState(!1),[d,m]=u.useState(!1),[h,p]=u.useState(0),[j,f]=u.useState(null),[g,y]=u.useState(""),[v,x]=u.useState(!1),[b,w]=u.useState([]),N=u.useRef(null),E=u.useRef(null),L=u.useRef(null),[P,ee]=u.useState(!1),[H,Q]=u.useState(!1),[ae,ne]=u.useState(!1),[ve,je]=u.useState(!1),[Se,D]=u.useState(!1),[T,Y]=u.useState(!1),[J,X]=u.useState(null),[he,Oe]=u.useState(!1),[G,Le]=u.useState(!1),[z,_]=u.useState(!1),[B,W]=u.useState(!1),[V,re]=u.useState(null),[de,U]=u.useState(!1),[Ce,Ge]=u.useState(!1),[Ee,ce]=u.useState("approve"),[I,Ae]=u.useState(""),[Te,A]=u.useState(250),[te,le]=u.useState(250),[Ne,Re]=u.useState(!1),[Ze,tt]=u.useState(!1),[ct,zt]=u.useState([]),[Ns,ns]=u.useState(null),[St,Gt]=u.useState(""),[nr,Ps]=u.useState(null),[ge,Hs]=u.useState(null),[bt,vr]=u.useState(!1),[as,ks]=u.useState(null),{data:Yt,isLoading:Bs,refetch:jt}=me({queryKey:["ticket",e],queryFn:async()=>(await De.get(e)).data,enabled:!!e}),{data:R}=me({queryKey:["tickets"],queryFn:async()=>(await De.list()).data}),{data:_e,refetch:ze}=me({queryKey:["scheduledMessages",e],queryFn:async()=>(await De.getScheduledMessages(e)).data,enabled:!!e}),{data:$e,isLoading:rt,refetch:Ut}=me({queryKey:["aiDraft",e],queryFn:async()=>{var S;try{return(await De.getAIDraft(e)).data}catch(q){if(((S=q.response)==null?void 0:S.status)===404)return null;throw q}},enabled:!!e,retry:!1}),K=Yt==null?void 0:Yt.ticket,M=(Yt==null?void 0:Yt.messages)||[],fe=(Yt==null?void 0:Yt.notes)||[],Me=(_e==null?void 0:_e.scheduledMessages)||[];let ke=(R==null?void 0:R.tickets)||[];const Ye=r.get("filter"),Jt=r.get("from");Ye==="my"||Jt==="my"?ke=ke.filter(S=>S.assigned_to==="00000000-0000-0000-0000-000000000001"):Ye==="vip"||Jt==="vip"?ke=ke.filter(S=>S.vip===1):Jt&&(ke=ke.filter(S=>S.assigned_to===Jt));const Ur=ke.findIndex(S=>S.ticket_id===e),ki=Ur>0,Si=Ur>=0&&Ur<ke.length-1,k=()=>{if(ki){const S=ke[Ur-1],q=new URLSearchParams(r);S.channel==="chat"?t(`/chat-ticket/${S.ticket_id}?${q.toString()}`):t(`/tickets/${S.ticket_id}?${q.toString()}`)}},xe=()=>{if(Si){const S=ke[Ur+1],q=new URLSearchParams(r);S.channel==="chat"?t(`/chat-ticket/${S.ticket_id}?${q.toString()}`):t(`/tickets/${S.ticket_id}?${q.toString()}`)}};u.useEffect(()=>{if(K&&K.channel==="chat"){const S=new URLSearchParams(r);t(`/chat-ticket/${K.ticket_id}?${S.toString()}`,{replace:!0})}},[K,t,r]),u.useEffect(()=>{p(0)},[e,d]),u.useEffect(()=>{K&&L.current&&setTimeout(()=>{var S;(S=L.current)==null||S.scrollIntoView({behavior:"smooth"})},100)},[K==null?void 0:K.ticket_id]),u.useEffect(()=>{d&&(K!=null&&K.customer_email)&&!ge&&(vr(!0),ks(null),hk.getTicketData(K.customer_email).then(S=>{Hs(S.data)}).catch(S=>{var q,F;console.error("Failed to fetch Shopify data:",S),ks(((F=(q=S.response)==null?void 0:q.data)==null?void 0:F.error)||"Failed to load Shopify data")}).finally(()=>{vr(!1)}))},[d,K==null?void 0:K.customer_email,ge]);const pe=S=>{const q=S.target.files;q&&(Array.from(q).forEach(F=>{if(F.size>10*1024*1024){alert(`File ${F.name} is too large. Maximum size is 10MB.`);return}const se=new FileReader;se.onload=ye=>{var Ht;const We=(Ht=ye.target)==null?void 0:Ht.result;w(Ln=>[...Ln,{name:F.name,content:We,type:F.type,size:F.size}])},se.readAsDataURL(F)}),N.current&&(N.current.value=""))},Pe=S=>{w(q=>q.filter((F,se)=>se!==S))},He=S=>new Promise((q,F)=>{const se=new FileReader;se.readAsDataURL(S),se.onload=()=>q(se.result),se.onerror=ye=>F(ye)}),at=async S=>{const q=Array.from(S.target.files||[]);for(const F of q)if(F.size>10*1024*1024){alert(`File ${F.name} is too large. Maximum size is 10MB.`),S.target.value="";return}zt(F=>[...F,...q]),S.target.value=""},xt=S=>{zt(q=>q.filter((F,se)=>se!==S))},Ss=async()=>{var S,q,F;if(!(!g.trim()&&b.length===0||!K)){x(!0);try{console.log("Sending reply to ticket:",K.ticket_id,"with",b.length,"attachments");const se=await De.reply(K.ticket_id,g,b);console.log("Reply sent successfully:",se),y(""),w([]),jt()}catch(se){console.error("Failed to send reply:",se),console.error("Error details:",((S=se.response)==null?void 0:S.data)||se.message),alert(`Failed to send reply: ${((F=(q=se.response)==null?void 0:q.data)==null?void 0:F.error)||se.message||"Unknown error"}`)}finally{x(!1)}}},Hr=async()=>{var S,q;if(K)try{await De.delete(K.ticket_id),console.log("Ticket deleted successfully"),_(!1),t("/tickets")}catch(F){console.error("Failed to delete ticket:",F),alert(`Failed to delete ticket: ${((q=(S=F.response)==null?void 0:S.data)==null?void 0:q.error)||F.message||"Unknown error"}`)}},Qe=async S=>{K&&(await De.updateStatus(K.ticket_id,S),jt())},Et=async(S,q,F)=>{var se,ye;if(K)try{await De.assign(K.ticket_id,S||""),F&&console.log("Reassignment reason:",F),Q(!1),jt()}catch(We){console.error("Failed to reassign ticket:",We),alert(`Failed to reassign ticket: ${((ye=(se=We.response)==null?void 0:se.data)==null?void 0:ye.error)||We.message||"Unknown error"}`)}},xa=async(S,q,F)=>{var se,ye;if(K){console.log("Escalating ticket:",{level:S,staffIds:q,reason:F});try{await De.escalate(K.ticket_id,q,F),console.log("Ticket escalated successfully"),ne(!1),jt()}catch(We){console.error("Failed to escalate ticket:",We),alert(`Failed to escalate ticket: ${((ye=(se=We.response)==null?void 0:se.data)==null?void 0:ye.error)||We.message||"Unknown error"}`)}}},Ev=async(S,q)=>{var ye,We;if(!K)return;console.log("Snoozing ticket:",{duration:S,customDate:q});let F;const se=new Date;switch(S){case"30m":F=new Date(se.getTime()+30*60*1e3);break;case"3h":F=new Date(se.getTime()+3*60*60*1e3);break;case"1d":F=new Date(se.getTime()+24*60*60*1e3),F.setHours(9,0,0,0);break;case"friday":F=new Date(se);const Ht=(5-se.getDay()+7)%7||7;F.setDate(se.getDate()+Ht),F.setHours(9,0,0,0);break;case"1w":F=new Date(se.getTime()+7*24*60*60*1e3),F.setHours(9,0,0,0);break;case"custom":if(!q)return;F=new Date(q);break;default:return}try{await De.snooze(K.ticket_id,F.toISOString(),`Snoozed until ${F.toLocaleString()}`),console.log("Ticket snoozed successfully"),je(!1),jt()}catch(Ht){console.error("Failed to snooze ticket:",Ht),alert(`Failed to snooze ticket: ${((We=(ye=Ht.response)==null?void 0:ye.data)==null?void 0:We.error)||Ht.message||"Unknown error"}`)}},Mv=async()=>{var S,q;if(K)try{await De.unsnooze(K.ticket_id),console.log("Snooze removed successfully"),je(!1),jt()}catch(F){console.error("Failed to remove snooze:",F),alert(`Failed to remove snooze: ${((q=(S=F.response)==null?void 0:S.data)==null?void 0:q.error)||F.message||"Unknown error"}`)}},pa=((R==null?void 0:R.tickets)||[]).filter(S=>S.customer_email===(K==null?void 0:K.customer_email)&&S.ticket_id!==(K==null?void 0:K.ticket_id)&&(S.status==="open"||S.status==="in-progress"||S.status==="snoozed")),Tv=async()=>{var S,q;if(!(!K||!V)){U(!0);try{await De.merge(K.ticket_id,[V]),console.log("Tickets merged successfully"),W(!1),re(null),jt()}catch(F){console.error("Failed to merge tickets:",F),alert(`Failed to merge tickets: ${((q=(S=F.response)==null?void 0:S.data)==null?void 0:q.error)||F.message||"Unknown error"}`)}finally{U(!1)}}},Av=async()=>{var S,q;if(K&&confirm("Mark this ticket as resolved and close it?"))try{await De.updateStatus(K.ticket_id,"resolved"),t("/tickets")}catch(F){console.error("Failed to resolve ticket:",F),alert(`Failed to resolve ticket: ${((q=(S=F.response)==null?void 0:S.data)==null?void 0:q.error)||F.message||"Unknown error"}`)}},Rv=()=>{if(!g.trim()||!K){alert("Please write a response first");return}D(!0)},Pv=async(S,q)=>{var F,se;if(K)try{const ye=`${S}T${q}:00`,We=new Date(ye),Ht=We.toISOString();console.log("Scheduling reply:",{input:ye,localDate:We.toString(),utcDate:Ht,serverNow:new Date().toISOString()}),await De.scheduleReply(K.ticket_id,g,Ht),y(""),D(!1),jt(),ze()}catch(ye){console.error("Failed to schedule reply:",ye),alert(`Failed to schedule reply: ${((se=(F=ye.response)==null?void 0:F.data)==null?void 0:se.error)||ye.message||"Unknown error"}`)}},Lv=S=>{X(S),Y(!0)},Fv=async()=>{var S,q;if(J)try{await De.deleteScheduledMessage(J.id),console.log("[handleRemoveScheduledMessage] Deleted successfully"),Y(!1),X(null),jt()}catch(F){console.error("[handleRemoveScheduledMessage] Error:",F),alert(`Failed to remove scheduled message: ${((q=(S=F.response)==null?void 0:S.data)==null?void 0:q.error)||F.message||"Unknown error"}`)}},$v=async()=>{var S,q;if(e)try{await De.approveAIDraft(e),jt(),Ut(),ce("approve"),Ge(!0)}catch(F){console.error("Failed to approve AI draft:",F),alert(`Failed to approve AI draft: ${((q=(S=F.response)==null?void 0:S.data)==null?void 0:q.error)||F.message||"Unknown error"}`)}},Iv=async S=>{var q,F;if(e)try{await De.editAIDraft(e,S),jt(),Ut(),ce("edit"),Ge(!0)}catch(se){console.error("Failed to edit AI draft:",se),alert(`Failed to edit AI draft: ${((F=(q=se.response)==null?void 0:q.data)==null?void 0:F.error)||se.message||"Unknown error"}`)}},Ov=async S=>{var q,F;if(e)try{await De.rejectAIDraft(e,S),Ut()}catch(se){console.error("Failed to reject AI draft:",se),alert(`Failed to reject AI draft: ${((F=(q=se.response)==null?void 0:q.data)==null?void 0:F.error)||se.message||"Unknown error"}`)}},Dv=async S=>{if(e)try{await De.submitAIDraftFeedback(e,{...S,action:Ee}),console.log("Feedback submitted successfully")}catch(q){console.error("Failed to submit feedback:",q)}},zv=async(S,q,F)=>{var se,ye;if(console.log("[handleEditScheduledMessageConfirm] Called with:",{newContent:S,scheduledDate:q,scheduledTime:F,messageToEdit:J}),!J){console.error("[handleEditScheduledMessageConfirm] No message to edit!");return}try{const We=`${q}T${F}:00`,Ht=new Date(We),Ln=Ht.toISOString();console.log("[handleEditScheduledMessageConfirm] Updating:",{messageId:J.id,input:We,localDate:Ht.toString(),utcDate:Ln,serverNow:new Date().toISOString()});const Fn=await De.updateScheduledMessage(J.id,S,Ln);console.log("[handleEditScheduledMessageConfirm] Response:",Fn),Y(!1),X(null),jt(),ze()}catch(We){console.error("[handleEditScheduledMessageConfirm] Error:",We),alert(`Failed to update message: ${((ye=(se=We.response)==null?void 0:se.data)==null?void 0:ye.error)||We.message||"Unknown error"}`)}},ya=S=>{var ye,We,Ht,Ln;if(!K)return;let q="";const F=ge==null?void 0:ge.latestOrder,se=ge==null?void 0:ge.customer;switch(S){case"order-status":if(F){const Fn=((ye=F.lineItems)==null?void 0:ye.slice(0,3).map(va=>`- ${va.quantity}x ${va.title}`).join(`
`))||"";q=`Hi ${K.customer_name||"there"},

I can see your order details:

Order #${F.orderNumber}
Status: ${F.fulfillmentStatus||"Unfulfilled"}
Payment: ${F.financialStatus||"Pending"}
Total: $${(We=F.totalPrice)==null?void 0:We.toFixed(2)} ${F.currency||"AUD"}
Ordered: ${new Date(F.createdAt).toLocaleDateString()}

Items:
${Fn}

Is there anything else I can help you with?

Best regards,
${a?`${a.firstName} ${a.lastName}`:"Support Team"}`}else q=`Hi ${K.customer_name||"there"},

I'm checking on your order status now. Let me look that up for you.

Order #: [ORDER_NUMBER]
Status: [STATUS]

Is there anything else I can help you with?

Best regards,
${a?`${a.firstName} ${a.lastName}`:"Support Team"}`;break;case"tracking":F!=null&&F.trackingNumber?q=`Hi ${K.customer_name||"there"},

Here's your tracking information:

Order #${F.orderNumber}
Tracking #: ${F.trackingNumber}
${F.trackingCompany?`Carrier: ${F.trackingCompany}
`:""}${F.trackingUrl?`
Track your package: ${F.trackingUrl}`:""}

Best regards,
${a?`${a.firstName} ${a.lastName}`:"Support Team"}`:F?q=`Hi ${K.customer_name||"there"},

I can see your order #${F.orderNumber} is currently ${F.fulfillmentStatus||"unfulfilled"}. Once it ships, I'll send you the tracking information right away.

Best regards,
${a?`${a.firstName} ${a.lastName}`:"Support Team"}`:q=`Hi ${K.customer_name||"there"},

Let me look up your tracking information for you.

Best regards,
${a?`${a.firstName} ${a.lastName}`:"Support Team"}`;break;case"vip-wallet":if(se){const Fn=se.totalSpent>=1e3?"Platinum":se.totalSpent>=500?"Gold":se.totalSpent>=100?"Silver":"Bronze";q=`Hi ${K.customer_name||"there"},

Thank you for being a valued customer!

Customer Stats:
- Total Orders: ${se.ordersCount||0}
- Total Spent: $${((Ht=se.totalSpent)==null?void 0:Ht.toFixed(2))||"0.00"}
- VIP Tier: ${Fn}
- Member Since: ${se.createdAt?new Date(se.createdAt).toLocaleDateString():"N/A"}

Is there anything else I can assist you with?

Best regards,
${a?`${a.firstName} ${a.lastName}`:"Support Team"}`}else q=`Hi ${K.customer_name||"there"},

Let me check your customer account details.

Best regards,
${a?`${a.firstName} ${a.lastName}`:"Support Team"}`;break;case"artwork":q=`Hi ${K.customer_name||"there"},

I've reviewed your artwork file. Here's what I found:

 Resolution: [DPI]
 Color mode: [COLOR_MODE]
 File format: [FORMAT]

Recommendations:
[RECOMMENDATIONS]

Best regards,
${a?`${a.firstName} ${a.lastName}`:"Support Team"}`;break;case"quote":q=`Hi ${K.customer_name||"there"},

Thank you for your quote request. Here are the details:

Product: [PRODUCT]
Quantity: [QUANTITY]
Price per unit: $[PRICE]
Total: $[TOTAL]

This quote is valid for 30 days. Would you like to proceed with the order?

Best regards,
${a?`${a.firstName} ${a.lastName}`:"Support Team"}`;break;case"products":if(F!=null&&F.lineItems&&F.lineItems.length>0){const Fn=F.lineItems.map(va=>{var Bh;return`- ${va.title}
  Quantity: ${va.quantity}
  Price: $${((Bh=va.price)==null?void 0:Bh.toFixed(2))||"0.00"} each`}).join(`

`);q=`Hi ${K.customer_name||"there"},

Here are the products from your order #${F.orderNumber}:

${Fn}

Total: $${(Ln=F.totalPrice)==null?void 0:Ln.toFixed(2)} ${F.currency||"AUD"}

Is there anything else you'd like to know about these products?

Best regards,
${a?`${a.firstName} ${a.lastName}`:"Support Team"}`}else q=`Hi ${K.customer_name||"there"},

Let me look up your product details for you.

Best regards,
${a?`${a.firstName} ${a.lastName}`:"Support Team"}`;break;default:return}y(q)};return u.useEffect(()=>{const S=q=>{(q.ctrlKey||q.metaKey)&&q.key==="y"&&(q.preventDefault(),Oe(F=>(F||Le(!1),!F))),(q.ctrlKey||q.metaKey)&&q.key==="r"&&(q.preventDefault(),Le(F=>(F||Oe(!1),!F)))};return window.addEventListener("keydown",S),()=>window.removeEventListener("keydown",S)},[]),u.useEffect(()=>{const S=F=>{if(!Ne)return;const se=Te+(window.innerHeight-F.clientY-Te),ye=150,We=window.innerHeight*.6;se>=ye&&se<=We&&A(se)},q=()=>{Re(!1),document.body.style.cursor="default",document.body.style.userSelect="auto"};return Ne&&(document.body.style.cursor="ns-resize",document.body.style.userSelect="none",window.addEventListener("mousemove",S),window.addEventListener("mouseup",q)),()=>{window.removeEventListener("mousemove",S),window.removeEventListener("mouseup",q)}},[Ne,Te]),u.useEffect(()=>{const S=F=>{if(!Ze)return;const se=te+(window.innerHeight-F.clientY-te),ye=150,We=window.innerHeight*.6;se>=ye&&se<=We&&le(se)},q=()=>{tt(!1),document.body.style.cursor="default",document.body.style.userSelect="auto"};return Ze&&(document.body.style.cursor="ns-resize",document.body.style.userSelect="none",window.addEventListener("mousemove",S),window.addEventListener("mouseup",q)),()=>{window.removeEventListener("mousemove",S),window.removeEventListener("mouseup",q)}},[Ze,te]),Bs?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"text-gray-500",children:"Loading ticket..."})}):K?s.jsxs("div",{className:"flex h-[calc(100vh-4rem)] bg-gray-50",children:[s.jsxs("div",{className:"flex flex-col flex-1 overflow-hidden",children:[s.jsxs("div",{className:"bg-white border-b border-gray-200 p-3 flex-shrink-0",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(vt,{to:"/tickets",className:"text-gray-400 hover:text-gray-600",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),s.jsxs("div",{className:"flex items-center gap-2",children:[(Dh=K.subject)!=null&&Dh.toLowerCase().includes("callback request")?s.jsx(ga,{className:"w-4 h-4 text-red-600 fill-current"}):s.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),s.jsx("h1",{className:"text-base font-semibold text-gray-900",children:In(K.ticket_number)})]}),K.vip===1&&s.jsx("span",{className:"px-1.5 py-0.5 bg-yellow-100 text-yellow-800 rounded-lg text-xs border border-yellow-200 font-medium",children:" VIP"}),s.jsx("button",{onClick:()=>ee(!0),className:`px-1.5 py-0.5 rounded-lg text-xs border font-medium hover:opacity-80 ${dg[K.status]||dg.open}`,children:K.status}),s.jsx("span",{className:`inline-flex items-center rounded-md px-2 py-1 text-xs font-medium ring-1 ring-inset ${ug[K.priority]||ug.normal}`,children:K.priority}),s.jsxs("span",{className:`inline-flex items-center rounded-md px-2 py-1 text-xs font-medium ring-1 ring-inset ${mg[K.sentiment]||mg.neutral}`,children:[JC[K.sentiment]||""," ",K.sentiment||"neutral"]})]}),s.jsx("button",{className:"text-xs px-2 py-1 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:K.assigned_to?hg[K.assigned_to]||K.assigned_to:"Unassigned"})]}),s.jsx("div",{className:"flex items-center justify-between mb-2",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("span",{className:"text-sm font-medium text-gray-900",children:K.customer_name||K.customer_email}),s.jsx("span",{className:"text-xs text-gray-500",children:new Date(K.created_at).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})]})}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("p",{className:"text-sm text-gray-600 flex-1 truncate mr-4",children:[s.jsx("span",{className:"font-medium",children:"Subject:"})," ",K.subject]}),s.jsxs("div",{className:"flex items-center gap-1.5 flex-shrink-0",children:[s.jsxs("button",{onClick:()=>Q(!0),className:"text-xs px-2 py-1 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center gap-1",children:[s.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),s.jsx("span",{children:"Reassign"})]}),s.jsxs("button",{onClick:()=>ne(!0),className:"text-xs px-2 py-1 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center gap-1",children:[s.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),s.jsx("span",{children:"Escalate"})]}),s.jsxs("button",{onClick:()=>je(!0),className:"text-xs px-2 py-1 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center gap-1",children:[s.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.jsx("span",{children:"Snooze"})]}),s.jsxs("button",{onClick:()=>W(!0),className:"text-xs px-2 py-1 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center gap-1",title:pa.length===0?"No other tickets from this customer":`${pa.length} other ticket(s) from this customer`,children:[s.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),s.jsx("span",{children:"Merge"}),pa.length>0&&s.jsx("span",{className:"bg-indigo-100 text-indigo-700 px-1 rounded text-xs",children:pa.length})]}),(a==null?void 0:a.role)==="admin"&&s.jsxs("button",{onClick:()=>_(!0),className:"text-xs px-2 py-1 bg-white border border-red-300 text-red-600 rounded-lg hover:bg-red-50 flex items-center gap-1",children:[s.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),s.jsx("span",{children:"Delete"})]})]})]})]}),s.jsxs("div",{className:"p-4 bg-white border-b border-gray-200 flex items-center justify-between flex-shrink-0",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("button",{onClick:()=>l(!i),className:"h-7 text-xs px-2 py-1 bg-white border border-indigo-200 rounded-lg hover:bg-indigo-50 transition-colors flex items-center justify-center space-x-1",children:[s.jsx(fn,{className:"w-3 h-3"}),s.jsx("span",{children:"Customer Info"})]}),s.jsxs("button",{onClick:()=>c(!o),className:"h-7 text-xs px-2 py-1 bg-white border border-indigo-200 rounded-lg hover:bg-indigo-50 transition-colors flex items-center justify-center space-x-1",children:[s.jsx(jv,{className:"w-3 h-3"}),s.jsx("span",{children:"Order History"})]}),s.jsxs("button",{onClick:()=>m(!d),className:`h-7 text-xs px-2 py-1 border rounded-lg hover:opacity-80 transition-colors flex items-center justify-center space-x-1 font-medium ${d?"bg-green-600 text-white border-green-700":"bg-white text-green-700 border-green-300"}`,children:[s.jsx(ll,{className:"w-3 h-3"}),s.jsx("span",{children:"Shopify"})]}),K.merged_from&&s.jsxs("div",{className:"h-7 text-xs px-2 py-1 bg-indigo-50 border border-indigo-200 rounded-lg flex items-center gap-1.5 text-indigo-900",children:[s.jsx("svg",{className:"w-3 h-3 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})}),s.jsxs("span",{children:[s.jsx("strong",{children:"Merged:"})," ",In(K.ticket_number)," and ",In(K.merged_from||"")]})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[Me.length>0&&s.jsxs("div",{className:"h-7 text-xs px-2 py-1 bg-yellow-100 border border-yellow-300 rounded-lg flex items-center gap-1.5 font-medium text-yellow-900",title:`${Me.length} scheduled message${Me.length>1?"s":""}`,children:[s.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),s.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.jsxs("span",{children:[Me.length," Scheduled"]})]}),s.jsx("button",{onClick:k,disabled:!ki,className:"h-7 text-xs px-2 py-1 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed",children:s.jsx(di,{className:"w-3.5 h-3.5"})}),s.jsx("button",{onClick:xe,disabled:!Si,className:"h-7 text-xs px-2 py-1 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed",children:s.jsx(Vl,{className:"w-3.5 h-3.5"})})]})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto",style:{minHeight:0},children:[i&&s.jsx("div",{className:"p-3 bg-blue-50 border-b border-blue-100 flex-shrink-0",children:s.jsxs("div",{className:"bg-white rounded-lg p-3 text-xs",children:[s.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Customer Profile"}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Name:"}),s.jsx("span",{className:"ml-2 font-medium",children:K.customer_name})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"VIP:"}),s.jsx("span",{className:"ml-2 font-medium text-amber-600",children:K.vip?"Yes":"No"})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx("span",{className:"text-gray-500",children:"Email:"}),s.jsx("span",{className:"ml-2 font-medium",children:K.customer_email})]})]})]})}),o&&s.jsx("div",{className:"p-3 bg-green-50 border-b border-green-100 flex-shrink-0",children:s.jsxs("div",{className:"bg-white rounded-lg p-3",children:[s.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-xs",children:"Order History"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Order history will be loaded from Shopify"})]})}),s.jsxs("div",{className:"p-4 space-y-4 bg-gray-50",children:[s.jsxs("div",{className:"p-4 rounded-lg bg-gray-100",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("div",{className:"w-6 h-6 rounded-full flex items-center justify-center bg-gray-300",children:s.jsx("svg",{className:"w-3 h-3 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),s.jsx("span",{className:"font-medium text-sm text-gray-900",children:K.customer_name}),s.jsx("span",{className:"text-xs text-gray-400",children:K.created_at&&typeof K.created_at=="string"?hr(new Date(K.created_at.includes("Z")?K.created_at:K.created_at+"Z"),{addSuffix:!0}):""})]}),s.jsx("div",{className:"text-sm text-gray-700 whitespace-pre-wrap ml-8",children:K.description})]}),M.map(S=>{var ye;const q=S.sender_type==="customer",F=S.sender_id==="ai-agent-001",se=S.was_scheduled===!0||S.was_scheduled===1;return s.jsxs("div",{className:`p-4 rounded-lg ${q?"bg-gray-100":F?"bg-purple-50":"bg-blue-50"}`,children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center ${q?"bg-gray-300":F?"bg-purple-200":"bg-blue-200"}`,children:q?s.jsx("svg",{className:"w-3 h-3 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}):F?s.jsx(er,{className:"w-3 h-3 text-purple-600"}):s.jsx("svg",{className:"w-3 h-3 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),s.jsx("span",{className:"font-medium text-sm text-gray-900",children:q?S.sender_name||"Customer":F?"McCarthy AI":S.sender_name?S.sender_name.split(" ")[0]:"Staff"}),s.jsx("span",{className:"text-xs text-gray-400",children:S.created_at&&typeof S.created_at=="string"?hr(new Date(S.created_at.includes("Z")?S.created_at:S.created_at+"Z"),{addSuffix:!0}):""}),se&&!q&&s.jsxs("span",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 bg-blue-100 text-blue-600 text-xs rounded",title:"This message was scheduled",children:[s.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Scheduled"]})]}),s.jsx("div",{className:"text-sm text-gray-700 whitespace-pre-wrap ml-8",children:S.content}),S.attachment_url&&s.jsx("div",{className:"mt-2 ml-8",children:(ye=S.attachment_type)!=null&&ye.startsWith("image/")?s.jsxs("a",{href:ja(S.attachment_url),target:"_blank",rel:"noopener noreferrer",className:"block",children:[s.jsx("img",{src:ja(S.attachment_url),alt:S.attachment_name||"Attachment",className:"max-w-md rounded border border-gray-300 hover:opacity-90 transition-opacity cursor-pointer"}),s.jsx("span",{className:"text-xs text-gray-600 mt-1 block",children:S.attachment_name})]}):s.jsxs("a",{href:ja(S.attachment_url),download:S.attachment_name||"file",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-3 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 text-sm",children:[s.jsx(Ct,{className:"w-4 h-4"}),s.jsx("span",{children:S.attachment_name}),s.jsxs("span",{className:"text-xs text-gray-500",children:["(",(S.attachment_size/1024).toFixed(1)," KB)"]})]})})]},S.id)}),Me.map(S=>s.jsxs("div",{className:"p-4 rounded-lg bg-yellow-50 border border-yellow-200",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("div",{className:"w-6 h-6 rounded-full flex items-center justify-center bg-yellow-200",children:s.jsx("svg",{className:"w-3 h-3 text-yellow-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsx("span",{className:"font-medium text-sm text-gray-900",children:S.first_name}),s.jsxs("button",{onClick:()=>Lv(S),className:"inline-flex items-center gap-1 px-2 py-0.5 bg-yellow-100 border border-yellow-300 text-yellow-800 text-xs font-medium rounded hover:bg-yellow-200 transition-colors",title:"Click to edit message and scheduled time",children:[s.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Scheduled: ",new Date(S.scheduled_for).toLocaleString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})]})]}),s.jsx("div",{className:"text-sm text-gray-700 whitespace-pre-wrap ml-8",children:S.content})]},S.id)),$e!=null&&$e.draft?s.jsx("div",{className:"mt-4",children:s.jsx(GC,{ticketId:e,draft:$e.draft,loading:rt,onApprove:$v,onEdit:Iv,onReject:Ov})}):null,s.jsx("div",{ref:L})]})]}),s.jsxs("div",{className:"flex-shrink-0",children:[s.jsxs("div",{className:"border-t border-gray-200 bg-white",children:[G&&s.jsx("div",{className:"h-1 bg-gray-200 hover:bg-purple-400 cursor-ns-resize transition-colors flex-shrink-0 relative group",onMouseDown:()=>Re(!0),children:s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:s.jsx("div",{className:"w-12 h-1 bg-gray-400 rounded-full group-hover:bg-purple-500 transition-colors"})})}),s.jsxs("div",{className:"px-4 py-2.5 bg-gradient-to-r from-purple-50 to-purple-100 border-b border-purple-200 flex items-center gap-2 cursor-pointer hover:from-purple-100 hover:to-purple-150 transition-colors",onClick:()=>{Le(S=>(S||Oe(!1),!S))},children:[s.jsx("svg",{className:"w-4 h-4 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),s.jsx("h3",{className:"text-sm font-semibold text-gray-800",children:" Response Area"}),s.jsx("span",{className:"text-xs text-gray-500 bg-white px-2 py-0.5 rounded border border-gray-300",children:"Ctrl+R"})]}),G&&s.jsxs("div",{className:"p-4 flex flex-col",style:{height:`${Te}px`},children:[b.length>0&&s.jsx("div",{className:"mb-2 flex flex-wrap gap-2",children:b.map((S,q)=>s.jsxs("div",{className:"flex items-center gap-2 px-2 py-1 bg-gray-100 rounded-lg text-xs",children:[s.jsx(Ct,{className:"w-3 h-3 text-gray-500"}),s.jsx("span",{className:"max-w-[150px] truncate",children:S.name}),s.jsx("button",{onClick:()=>Pe(q),className:"text-gray-400 hover:text-red-500",children:s.jsx(Rt,{className:"w-3 h-3"})})]},q))}),s.jsx("div",{className:"flex-1 mb-2 min-h-0",children:s.jsx("textarea",{value:g,onChange:S=>y(S.target.value),placeholder:"Type your response...",className:"w-full h-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:border-indigo-500 resize-none min-h-0"})}),s.jsxs("div",{className:"space-y-3 flex-shrink-0",children:[s.jsx("input",{type:"file",ref:N,onChange:pe,className:"hidden",multiple:!0,accept:"image/*,.pdf,.doc,.docx,.txt,.xls,.xlsx"}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsxs("button",{onClick:()=>{var S;return(S=N.current)==null?void 0:S.click()},className:"text-xs px-2.5 py-1 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center gap-1",children:[s.jsx(Ct,{className:"w-3 h-3"}),"Attach File"]}),s.jsx("button",{className:"text-xs px-2.5 py-1 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:" All Templates"}),s.jsx("button",{onClick:()=>ya("order-status"),className:"text-xs px-2.5 py-1 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:" @order-status"}),s.jsx("button",{onClick:()=>ya("tracking"),className:"text-xs px-2.5 py-1 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:" @tracking"}),s.jsx("button",{onClick:()=>ya("vip-wallet"),className:"text-xs px-2.5 py-1 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:" @vip-wallet"}),s.jsx("button",{onClick:()=>ya("artwork"),className:"text-xs px-2.5 py-1 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:" @artwork"}),s.jsx("button",{onClick:()=>ya("quote"),className:"text-xs px-2.5 py-1 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:" @quote"}),s.jsx("button",{onClick:()=>ya("products"),className:"text-xs px-2.5 py-1 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:" Products"}),s.jsx("button",{className:"text-xs px-2.5 py-1 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:" Generate Invoice"})]}),s.jsxs("div",{className:"flex items-center justify-end gap-x-2",children:[s.jsxs("button",{onClick:Ss,disabled:!g.trim()&&b.length===0||v,className:"px-4 py-2 text-sm bg-purple-200 text-purple-800 border border-purple-300 rounded-lg hover:bg-purple-300 font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})}),v?"Sending...":`Send Reply${b.length>0?` (${b.length})`:""}`]}),s.jsxs("button",{onClick:Rv,className:"px-4 py-2 text-sm bg-yellow-100 text-yellow-700 rounded-lg hover:bg-yellow-200 font-medium flex items-center gap-2",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Schedule Reply"]}),s.jsxs("button",{onClick:Av,className:"px-4 py-2 text-sm bg-green-100 text-green-700 rounded-lg hover:bg-green-200 font-medium flex items-center gap-2",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Resolve & Close"]})]})]})]})]}),s.jsxs("div",{className:"border-t border-gray-200 bg-white flex-shrink-0",children:[he&&s.jsx("div",{className:"h-1 bg-gray-200 hover:bg-yellow-400 cursor-ns-resize transition-colors flex-shrink-0 relative group",onMouseDown:()=>tt(!0),children:s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:s.jsx("div",{className:"w-12 h-1 bg-gray-400 rounded-full group-hover:bg-yellow-500 transition-colors"})})}),s.jsxs("div",{className:"px-4 py-2.5 bg-gradient-to-r from-yellow-50 to-yellow-100 border-b border-yellow-200 flex items-center gap-2 cursor-pointer hover:from-yellow-100 hover:to-yellow-150 transition-colors",onClick:()=>{Oe(S=>(S||Le(!1),!S))},children:[s.jsx("svg",{className:"w-4 h-4 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),s.jsx("h3",{className:"text-sm font-semibold text-gray-800",children:" Staff Notes (Internal Only)"}),s.jsx("span",{className:"text-xs text-gray-500 bg-white px-2 py-0.5 rounded border border-gray-300",children:"Ctrl+Y"})]}),he&&s.jsxs("div",{className:"flex flex-col bg-yellow-50",style:{height:`${te}px`},children:[fe&&fe.length>0&&s.jsx("div",{className:"p-4 space-y-2 overflow-y-auto flex-shrink-0",style:{maxHeight:"60%"},children:fe.map(S=>{var q;return s.jsxs("div",{className:"bg-yellow-100 rounded-lg p-3 border border-yellow-200",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-xs font-medium text-gray-800",children:S.first_name||"Staff"}),s.jsx("span",{className:"text-xs text-gray-500",children:S.created_at&&typeof S.created_at=="string"?hr(new Date(S.created_at.includes("Z")?S.created_at:S.created_at+"Z"),{addSuffix:!0}):""}),S.edited_at&&s.jsx("span",{className:"text-xs text-gray-400 italic",children:"(edited)"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[(S.staff_id===(a==null?void 0:a.id)||(a==null?void 0:a.role)==="admin")&&Ns!==S.id&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>{ns(S.id),Gt(S.content)},className:"text-xs px-2 py-1 text-gray-600 hover:text-blue-600 hover:bg-white rounded transition-colors",title:"Edit note",children:"Edit"}),s.jsx("button",{onClick:()=>Ps(S.id),className:"text-xs px-2 py-1 text-gray-600 hover:text-red-600 hover:bg-white rounded transition-colors",title:"Delete note",children:"Delete"})]}),S.note_type==="escalation"&&S.escalated_to===(a==null?void 0:a.id)&&(S.escalation_status==="pending"?s.jsx("button",{type:"button",onClick:async()=>{var F,se;if(!(!K||!S.escalation_id))try{await De.resolveEscalation(K.ticket_id,S.escalation_id),jt()}catch(ye){console.error("Failed to resolve escalation:",ye),alert(`Failed to resolve escalation: ${((se=(F=ye.response)==null?void 0:F.data)==null?void 0:se.error)||ye.message||"Unknown error"}`)}},className:"text-xs px-3 py-1 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Resolve"}):S.escalation_status==="resolved"&&S.resolved_at?s.jsxs("span",{className:"text-xs text-green-600 font-medium",children:["Resolved: ",new Date(S.resolved_at).toLocaleString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0})]}):null)]})]}),Ns===S.id?s.jsxs("div",{className:"space-y-2",children:[s.jsx("textarea",{value:St,onChange:F=>Gt(F.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",rows:3}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:async()=>{var F,se;if(!(!K||!St.trim()))try{await De.editNote(K.ticket_id,S.id,St),ns(null),Gt(""),n.invalidateQueries({queryKey:["ticket",e]})}catch(ye){console.error("Failed to edit note:",ye),alert(`Failed to edit note: ${((se=(F=ye.response)==null?void 0:F.data)==null?void 0:se.error)||ye.message||"Unknown error"}`)}},className:"text-xs px-3 py-1 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Save"}),s.jsx("button",{onClick:()=>{ns(null),Gt("")},className:"text-xs px-3 py-1 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300",children:"Cancel"})]})]}):s.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:(()=>{let F=S.content||"";return F.includes("MERGE_TIMESTAMP:")&&(F=F.replace(/MERGE_TIMESTAMP:([^\n]+)\n?/g,(se,ye)=>{try{return new Date(ye.trim()).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})+`
`}catch{return""}})),F.includes("SCHEDULE_TIME:")&&(F=F.replace(/SCHEDULE_TIME:([^\s]+)/g,(se,ye)=>{try{return new Date(ye.trim()).toLocaleString("en-US",{month:"numeric",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})}catch{return ye}})),F.includes("SNOOZE_TIME:")&&(F=F.replace(/SNOOZE_TIME:(\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(?:\.\d+)?Z?)/g,(se,ye)=>{try{return new Date(ye.trim()).toLocaleString("en-AU",{day:"numeric",month:"short",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})}catch{return ye}})),F.includes("BULK_REASSIGN_TIME:")&&(F=F.replace(/BULK_REASSIGN_TIME:(\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(?:\.\d+)?Z?)/g,(se,ye)=>{try{return new Date(ye.trim()).toLocaleString("en-AU",{day:"numeric",month:"short",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})}catch{return ye}})),F})()}),S.tags&&s.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:Jl(S.tags).map((F,se)=>s.jsxs(vt,{to:`/tags?search=${encodeURIComponent(F)}`,className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 hover:bg-blue-200",children:[s.jsx($t,{className:"w-3 h-3 mr-1"}),F]},se))}),S.attachment_url&&s.jsx("div",{className:"mt-2",children:(q=S.attachment_type)!=null&&q.startsWith("image/")?s.jsxs("a",{href:ja(S.attachment_url),target:"_blank",rel:"noopener noreferrer",className:"block",children:[s.jsx("img",{src:ja(S.attachment_url),alt:S.attachment_name||"Attachment",className:"max-w-xs rounded border border-yellow-300 hover:opacity-90 transition-opacity cursor-pointer"}),s.jsx("span",{className:"text-xs text-gray-600 mt-1 block",children:S.attachment_name})]}):s.jsxs("a",{href:ja(S.attachment_url),download:S.attachment_name||"file",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-3 py-2 bg-white border border-yellow-300 rounded-lg hover:bg-yellow-50 text-sm",children:[s.jsx(Ct,{className:"w-4 h-4"}),s.jsx("span",{children:S.attachment_name}),s.jsxs("span",{className:"text-xs text-gray-500",children:["(",(S.attachment_size/1024).toFixed(1)," KB)"]})]})})]},S.id)})}),nr&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Delete Note?"}),s.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Are you sure you want to delete this note? This action cannot be undone."}),s.jsxs("div",{className:"flex items-center gap-3 justify-end",children:[s.jsx("button",{onClick:()=>Ps(null),className:"px-4 py-2 text-sm bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300",children:"Cancel"}),s.jsx("button",{onClick:async()=>{var S,q;if(K)try{await De.deleteNote(K.ticket_id,nr),Ps(null),n.invalidateQueries({queryKey:["ticket",e]})}catch(F){console.error("Failed to delete note:",F),alert(`Failed to delete note: ${((q=(S=F.response)==null?void 0:S.data)==null?void 0:q.error)||F.message||"Unknown error"}`)}},className:"px-4 py-2 text-sm bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Delete"})]})]})}),s.jsxs("div",{className:"p-4 flex-1 flex flex-col min-h-0 border-t border-yellow-200",children:[ct.length>0&&s.jsx("div",{className:"mb-2 flex flex-wrap gap-2",children:ct.map((S,q)=>s.jsxs("div",{className:"flex items-center gap-1 bg-white border border-yellow-300 rounded px-2 py-1 text-xs",children:[s.jsx(Ct,{className:"w-3 h-3"}),s.jsx("span",{className:"max-w-[150px] truncate",children:S.name}),s.jsx("button",{onClick:()=>xt(q),className:"text-red-500 hover:text-red-700",children:s.jsx(Rt,{className:"w-3 h-3"})})]},q))}),s.jsx("textarea",{value:I,onChange:S=>Ae(S.target.value),onKeyDown:async S=>{var q,F;if(S.key==="Enter"&&!S.shiftKey&&I.trim()&&K){S.preventDefault(),console.log("[Staff Notes] Submitting note");try{const se=await Promise.all(ct.map(async ye=>({name:ye.name,content:await He(ye),type:ye.type,size:ye.size})));await De.addNote(K.ticket_id,I,void 0,se.length>0?se:void 0),Ae(""),zt([]),jt()}catch(se){console.error("Failed to add note:",se),alert(`Failed to add note: ${((F=(q=se.response)==null?void 0:q.data)==null?void 0:F.error)||se.message||"Unknown error"}`)}}},placeholder:"Add internal notes... Use @to mention staff, #keyword to add tags (Press Enter to save, Shift+Enter for new line)",className:"w-full flex-1 border border-yellow-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:border-yellow-500 resize-none bg-white min-h-0"}),s.jsx("input",{type:"file",ref:E,onChange:at,className:"hidden",multiple:!0,accept:"image/*,.pdf,.doc,.docx,.txt,.xls,.xlsx"}),s.jsxs("button",{onClick:()=>{var S;return(S=E.current)==null?void 0:S.click()},className:"mt-2 text-xs px-3 py-1.5 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 self-start flex-shrink-0 flex items-center gap-1",children:[s.jsx(Ct,{className:"w-3 h-3"}),"Attach File"]})]})]})]})]})]}),s.jsx("div",{className:`bg-white border-l border-gray-200 transition-all duration-300 ease-in-out overflow-y-auto ${d?"w-96":"w-0"}`,children:d&&s.jsxs("div",{className:"p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4 pb-3 border-b border-gray-200",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ll,{className:"w-5 h-5 text-green-600"}),s.jsx("h2",{className:"text-base font-semibold text-gray-900",children:"Shopify"})]}),s.jsx("button",{onClick:()=>m(!1),className:"text-gray-400 hover:text-gray-600",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),bt&&s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-600"})}),as&&s.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 mb-4",children:[s.jsx("p",{className:"text-sm text-red-600",children:as}),s.jsx("button",{onClick:()=>{Hs(null),ks(null)},className:"text-xs text-red-700 underline mt-2",children:"Try again"})]}),ge&&!ge.configured&&s.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 mb-4",children:s.jsx("p",{className:"text-sm text-yellow-700",children:ge.message})}),ge&&ge.configured&&!ge.customer&&s.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3 mb-4",children:s.jsx("p",{className:"text-sm text-gray-600",children:ge.message||"Customer not found in Shopify"})}),ge&&ge.customer&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase mb-3",children:"CUSTOMER"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[ge.customer.firstName," ",ge.customer.lastName]}),s.jsx("p",{className:"text-xs text-gray-500",children:ge.customer.email}),ge.customer.phone&&s.jsx("p",{className:"text-xs text-gray-500",children:ge.customer.phone}),ge.customer.isVIP&&s.jsx("span",{className:"inline-flex items-center mt-1 text-xs px-2 py-0.5 bg-amber-100 text-amber-800 rounded-full font-medium",children:" VIP Customer"})]}),s.jsxs("div",{className:"pt-2 border-t border-gray-100",children:[s.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[s.jsx("span",{className:"text-gray-500",children:"Total Spent:"}),s.jsxs("span",{className:"font-semibold text-indigo-600",children:["$",((zh=ge.customer.totalSpent)==null?void 0:zh.toLocaleString("en-US",{minimumFractionDigits:2}))||"0.00"]})]}),s.jsxs("div",{className:"flex justify-between text-xs",children:[s.jsx("span",{className:"text-gray-500",children:"Total Orders:"}),s.jsx("span",{className:"font-semibold text-gray-900",children:ge.customer.ordersCount||0})]}),ge.customer.lastOrderDate&&s.jsxs("div",{className:"flex justify-between text-xs mt-1",children:[s.jsx("span",{className:"text-gray-500",children:"Last Order:"}),s.jsx("span",{className:"text-gray-900",children:new Date(ge.customer.lastOrderDate).toLocaleDateString()})]})]})]})]}),ge.orders&&ge.orders.length>0?s.jsxs("div",{className:"mb-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("h3",{className:"text-xs font-semibold text-gray-500 uppercase",children:["ORDER ",h+1," OF ",ge.orders.length]}),ge.orders.length>1&&s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("button",{onClick:()=>p(Math.max(0,h-1)),disabled:h===0,className:"p-1 rounded hover:bg-gray-200 disabled:opacity-30 disabled:cursor-not-allowed transition-colors",title:"Previous order",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),s.jsx("button",{onClick:()=>p(Math.min(ge.orders.length-1,h+1)),disabled:h===ge.orders.length-1,className:"p-1 rounded hover:bg-gray-200 disabled:opacity-30 disabled:cursor-not-allowed transition-colors",title:"Next order",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 space-y-2",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:["Order ",ge.orders[h].orderNumber]}),s.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[s.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full font-medium ${ge.orders[h].fulfillmentStatus==="fulfilled"?"bg-green-100 text-green-800":ge.orders[h].fulfillmentStatus==="partial"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:ge.orders[h].fulfillmentStatus||"Unfulfilled"}),s.jsxs("span",{className:"text-xs text-gray-500",children:["Total: ",s.jsxs("span",{className:"font-semibold text-gray-900",children:["$",(Uh=ge.orders[h].totalPrice)==null?void 0:Uh.toFixed(2)," ",ge.orders[h].currency]})]})]})]}),s.jsxs("div",{className:"pt-2 border-t border-gray-200 space-y-1",children:[s.jsxs("div",{className:"flex justify-between text-xs",children:[s.jsx("span",{className:"text-gray-500",children:"Created:"}),s.jsx("span",{className:"text-gray-900",children:new Date(ge.orders[h].createdAt).toLocaleDateString()})]}),s.jsxs("div",{className:"flex justify-between text-xs",children:[s.jsx("span",{className:"text-gray-500",children:"Payment:"}),s.jsx("span",{className:`font-medium ${ge.orders[h].financialStatus==="paid"?"text-green-600":"text-yellow-600"}`,children:ge.orders[h].financialStatus||"Pending"})]})]}),ge.orders[h].lineItems&&ge.orders[h].lineItems.length>0&&s.jsxs("div",{className:"pt-2 border-t border-gray-200",children:[s.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Items:"}),s.jsx("div",{className:"space-y-2",children:ge.orders[h].lineItems.map((S,q)=>{var F;return s.jsxs("div",{className:"border border-gray-200 rounded-md overflow-hidden",children:[s.jsxs("button",{onClick:()=>f(j===S.id?null:S.id),className:"w-full text-left px-2 py-1.5 hover:bg-gray-50 transition-colors flex justify-between items-center",children:[s.jsx("span",{className:"text-xs text-gray-700 truncate flex-1",children:S.title}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("span",{className:"text-xs text-gray-500",children:["x",S.quantity]}),s.jsx("svg",{className:`w-3 h-3 text-gray-400 transition-transform ${j===S.id?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),j===S.id&&s.jsxs("div",{className:"px-2 py-2 bg-gray-50 border-t border-gray-200 text-xs space-y-1.5",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-500",children:"Price:"}),s.jsxs("span",{className:"text-gray-900 font-medium",children:["$",(F=S.price)==null?void 0:F.toFixed(2)]})]}),S.sku&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-500",children:"SKU:"}),s.jsx("span",{className:"text-gray-900 font-mono",children:S.sku})]}),S.variantTitle&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-500",children:"Variant:"}),s.jsx("span",{className:"text-gray-900",children:S.variantTitle})]}),S.customAttributes&&S.customAttributes.length>0&&s.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-200",children:[s.jsx("p",{className:"text-gray-500 font-medium mb-1.5",children:"Product Details:"}),S.customAttributes.map((se,ye)=>s.jsxs("div",{className:"flex justify-between py-0.5",children:[s.jsxs("span",{className:"text-gray-500",children:[se.key.replace("_",""),":"]}),se.key.includes("Link")||se.key.includes("link")?s.jsx("a",{href:se.value,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-700 underline truncate max-w-[180px]",onClick:We=>We.stopPropagation(),children:"View "}):s.jsx("span",{className:"text-gray-900 font-mono text-right truncate max-w-[180px]",children:se.value})]},ye))]})]})]},S.id||q)})})]})]})]}):s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase mb-3",children:"ORDERS"}),s.jsx("div",{className:"bg-gray-50 rounded-lg p-3",children:s.jsx("p",{className:"text-sm text-gray-500",children:"No orders found"})})]}),ge.orders&&((Hh=ge.orders[h])==null?void 0:Hh.trackingNumber)&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase mb-3",children:"FULFILLMENT & TRACKING"}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 space-y-2",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Tracking:"}),s.jsx("p",{className:"text-sm font-mono font-semibold text-gray-900",children:ge.orders[h].trackingNumber}),ge.orders[h].trackingCompany&&s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Carrier: ",s.jsx("span",{className:"text-gray-900",children:ge.orders[h].trackingCompany})]})]}),ge.orders[h].trackingUrl&&s.jsx("a",{href:ge.orders[h].trackingUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center text-xs text-green-600 hover:text-green-700 font-medium",children:"Track Package "})]})]})]}),!bt&&!as&&!ge&&s.jsxs("div",{className:"text-center py-8",children:[s.jsx(ll,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Loading Shopify data..."})]})]})}),P&&s.jsx(qC,{currentStatus:K.status,onClose:()=>ee(!1),onSave:Qe}),s.jsx(Cv,{isOpen:H,onClose:()=>Q(!1),onReassign:Et,currentAssignment:K.assigned_to?hg[K.assigned_to]:void 0}),s.jsx(WC,{isOpen:ae,onClose:()=>ne(!1),onConfirm:xa,ticketNumber:K.ticket_number}),s.jsx(KC,{isOpen:ve,onClose:()=>je(!1),onConfirm:Ev,onRemoveSnooze:Mv,ticketNumber:K.ticket_number,isSnoozed:K.status==="snoozed"}),s.jsx(QC,{isOpen:Se,onClose:()=>D(!1),onConfirm:Pv}),s.jsx(VC,{isOpen:T,onClose:()=>{Y(!1),X(null)},onConfirm:zv,onRemove:Fv,message:J}),z&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Delete Ticket"}),s.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Are you sure you want to delete ticket ",s.jsx("span",{className:"font-medium",children:In(K.ticket_number)}),"? This action cannot be undone."]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx("button",{onClick:()=>_(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),s.jsx("button",{onClick:Hr,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700",children:"Delete Ticket"})]})]})}),s.jsx(YC,{isOpen:Ce,onClose:()=>Ge(!1),onSubmit:Dv}),B&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-lg w-full mx-4 max-h-[80vh] overflow-hidden flex flex-col",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Merge Tickets"}),s.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Select a ticket to merge into ",s.jsx("span",{className:"font-medium",children:In(K.ticket_number)})," (primary).",s.jsx("br",{}),s.jsxs("span",{className:"text-xs text-gray-500",children:["Only showing tickets from: ",K.customer_email]})]}),pa.length===0?s.jsxs("div",{className:"py-8 text-center text-gray-500",children:[s.jsx("svg",{className:"w-12 h-12 mx-auto mb-3 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),s.jsx("p",{className:"text-sm",children:"No other open tickets from this customer"})]}):s.jsx("div",{className:"flex-1 overflow-y-auto space-y-2 mb-4",children:pa.map(S=>s.jsxs("label",{className:`flex items-start p-3 rounded-lg border cursor-pointer transition-colors ${V===S.ticket_id?"border-purple-500 bg-purple-50":"border-gray-200 hover:border-purple-300 hover:bg-purple-25"}`,children:[s.jsx("input",{type:"radio",name:"mergeTicket",value:S.ticket_id,checked:V===S.ticket_id,onChange:()=>re(S.ticket_id),className:"mt-1 mr-3 text-purple-600 focus:ring-purple-500"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"font-medium text-sm text-gray-900",children:In(S.ticket_number)}),s.jsx("span",{className:`px-1.5 py-0.5 text-xs rounded ${S.status==="snoozed"?"bg-purple-100 text-purple-700":S.status==="in-progress"?"bg-blue-100 text-blue-700":"bg-green-100 text-green-700"}`,children:S.status}),s.jsx("span",{className:"text-xs text-gray-400",children:hr(new Date(S.created_at),{addSuffix:!0})})]}),s.jsx("p",{className:"text-sm text-gray-600 truncate",children:S.subject})]})]},S.ticket_id))}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[s.jsx("button",{onClick:()=>{W(!1),re(null)},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),s.jsx("button",{onClick:Tv,disabled:!V||de,className:"px-4 py-2 text-sm font-medium text-white bg-purple-600 rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:de?s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"animate-spin w-4 h-4",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Merging..."]}):s.jsxs(s.Fragment,{children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),"Merge into ",In(K.ticket_number)]})})]})]})})]}):s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"text-gray-500",children:"Ticket not found"})})}function ZC(){var I,Ae,Te;const e=yr(),t=ut(),r=Rs(A=>A.user),[n,a]=u.useState(null),[i,l]=u.useState(!1),[o,c]=u.useState([]),[d,m]=u.useState(null),h=(r==null?void 0:r.role)==="admin"||(r==null?void 0:r.role)==="manager",[p,j]=u.useState("my-mentions"),[f,g]=u.useState(""),[y,v]=u.useState(""),[x,b]=u.useState(""),[w,N]=u.useState(""),[E,L]=u.useState("all"),[P,ee]=u.useState("active"),[H,Q]=u.useState(""),[ae,ne]=u.useState(""),[ve,je]=u.useState(""),{data:Se}=me({queryKey:["staff-users"],queryFn:async()=>(await st.list()).data}),D=Fe.useMemo(()=>[...(Se==null?void 0:Se.staff)||[],{id:"ai-agent-001",firstName:"McCarthy",lastName:"AI",email:"mccarthy@dartmouth.ai"}],[Se]),{data:T,isLoading:Y}=me({queryKey:["mentions",p,f,y,x,w,E,P,H,ae],queryFn:async()=>{const A={};return p==="my-mentions"||(p==="all-mentions"&&h?A.view_all=!0:p==="by-staff"&&f?A.mentioned_staff_id=f:p==="by-ticket"&&y&&(A.ticket_number=y)),x&&(A.channel_id=x),w&&w!=="all"&&(A.time_filter=w),E==="unread"&&(A.is_read=!1),E==="read"&&(A.is_read=!0),P==="archived"&&(A.is_archived=!0),P==="active"&&(A.is_archived=!1),H&&(A.start_date=H),ae&&(A.end_date=ae),(await $n.getMentions(A)).data},refetchInterval:3e4,refetchOnWindowFocus:!1}),J=(T==null?void 0:T.mentions)||[],X=Fe.useMemo(()=>{if(!ve.trim())return J;const A=ve.toLowerCase().trim();return J.filter(te=>{var Re,Ze,tt,ct;const le=(Re=A.match(/\d+/))==null?void 0:Re[0];if(le&&te.message_content){const zt=te.message_content.toLowerCase();if([`@${le}`,`#${le}`,`ticket ${le}`,`tkt-${le}`,`tkt-000${le}`].some(ns=>zt.includes(ns))||zt.includes(le))return!0}return!!(le&&te.ticket_number&&((Ze=te.ticket_number.match(/\d+/))==null?void 0:Ze[0])===le||`${te.mentioning_first_name} ${te.mentioning_last_name}`.toLowerCase().includes(A)||(tt=te.message_content)!=null&&tt.toLowerCase().includes(A)||(ct=te.channel_name)!=null&&ct.toLowerCase().includes(A))})},[J,ve]);Fe.useEffect(()=>{X.length>0&&!n&&a(X[0])},[X]),Fe.useEffect(()=>{n&&X.find(A=>A.id===n.id)},[n]);const he=()=>{if(!n||X.length===0)return;const A=X.findIndex(te=>te.id===n.id);if(A>0){const te=X[A-1];a(te)}},Oe=()=>{if(!n||X.length===0)return;const A=X.findIndex(te=>te.id===n.id);if(A<X.length-1){const te=X[A+1];a(te)}},G=n?X.findIndex(A=>A.id===n.id):-1,{data:Le}=me({queryKey:["mentions-unread-count"],queryFn:async()=>(await $n.getUnreadCount()).data,refetchInterval:5e3}),z=(Le==null?void 0:Le.count)||0,{data:_}=me({queryKey:["group-chat-channels"],queryFn:async()=>(await mt.listChannels()).data}),B=(_==null?void 0:_.channels)||[],W=we({mutationFn:async A=>{console.log("[Mentions] Marking as read:",A);const te=await $n.markAsRead(A);return console.log("[Mentions] Mark as read response:",te),te},onMutate:async A=>{console.log("[Mentions] onMutate - marking as read:",A);const te=["mentions",p,f,y,x,w,E,P,H,ae];await t.cancelQueries({queryKey:te});const le=t.getQueryData(te);return t.setQueryData(te,Ne=>Ne!=null&&Ne.mentions?{...Ne,mentions:Ne.mentions.map(Re=>Re.id===A?{...Re,is_read:1,read_at:new Date().toISOString()}:Re)}:Ne),n&&n.id===A&&a({...n,is_read:1,read_at:new Date().toISOString()}),{previousMentions:le,currentQueryKey:te}},onError:(A,te,le)=>{console.error("[Mentions] Error marking as read:",A),t.setQueryData(le.currentQueryKey,le.previousMentions),t.invalidateQueries({queryKey:le.currentQueryKey}),t.invalidateQueries({queryKey:["mentions-unread-count"]})},onSuccess:()=>{console.log("[Mentions] Successfully marked as read"),t.invalidateQueries({queryKey:["mentions-unread-count"]})}}),V=we({mutationFn:async A=>{console.log("[Mentions] Marking as unread:",A);const te=await $n.markAsUnread(A);return console.log("[Mentions] Mark as unread response:",te),te},onMutate:async A=>{const te=["mentions",p,f,y,x,w,E,P,H,ae];await t.cancelQueries({queryKey:te});const le=t.getQueryData(te);return t.setQueryData(te,Ne=>Ne!=null&&Ne.mentions?{...Ne,mentions:Ne.mentions.map(Re=>Re.id===A?{...Re,is_read:0,read_at:null}:Re)}:Ne),n&&n.id===A&&a({...n,is_read:0,read_at:null}),{previousMentions:le,currentQueryKey:te}},onError:(A,te,le)=>{t.setQueryData(le.currentQueryKey,le.previousMentions),t.invalidateQueries({queryKey:le.currentQueryKey}),t.invalidateQueries({queryKey:["mentions-unread-count"]})},onSuccess:()=>{t.invalidateQueries({queryKey:["mentions-unread-count"]})}}),re=we({mutationFn:async A=>{const te=A.mentionIds.map(le=>A.isRead?$n.markAsRead(le):$n.markAsUnread(le));return Promise.all(te)},onMutate:async A=>{const te=["mentions",p,f,y,x,w,E,P,H,ae];await t.cancelQueries({queryKey:te});const le=t.getQueryData(te);return t.setQueryData(te,Ne=>Ne!=null&&Ne.mentions?{...Ne,mentions:Ne.mentions.map(Re=>A.mentionIds.includes(Re.id)?{...Re,is_read:A.isRead?1:0,read_at:A.isRead?new Date().toISOString():null}:Re)}:Ne),{previousMentions:le,currentQueryKey:te}},onError:(A,te,le)=>{t.setQueryData(le.currentQueryKey,le.previousMentions),t.invalidateQueries({queryKey:le.currentQueryKey}),t.invalidateQueries({queryKey:["mentions-unread-count"]})},onSuccess:()=>{c([]),t.invalidateQueries({queryKey:["mentions-unread-count"]})}}),de=we({mutationFn:async()=>{const te=J.filter(le=>le.is_read===1&&le.is_archived===0).map(le=>$n.archiveMention(le.id));return Promise.all(te)},onSuccess:()=>{t.invalidateQueries({queryKey:["mentions"]})}}),U=(A,te)=>{if(console.log("[MentionsPage] Clicking mention:",A.id),te!=null&&te.shiftKey&&d!==null){const le=X.findIndex(tt=>tt.id===A.id),Ne=Math.min(d,le),Re=Math.max(d,le),Ze=X.slice(Ne,Re+1).map(tt=>tt.id);c(Ze)}else te!=null&&te.ctrlKey||te!=null&&te.metaKey?(c(le=>le.includes(A.id)?le.filter(Ne=>Ne!==A.id):[...le,A.id]),m(X.findIndex(le=>le.id===A.id))):(c([]),m(X.findIndex(le=>le.id===A.id)),a(A))},Ce=()=>{n&&(n.context_type==="group_chat"?e(`/group-chat?channel=${n.context_id}&message=${n.message_id}`):n.ticket_id&&e(`/tickets/${n.ticket_id}`))},Ge=A=>{if(!A)return"";const te=A.match(/\d+/);return te?`@${parseInt(te[0],10)}`:A},Ee=(A,te="w-3 h-3")=>{switch(A){case"email":return s.jsx(En,{className:te});case"phone":case"callback":return s.jsx(ga,{className:`${te} text-red-600`});case"chat":return s.jsx(ma,{className:te});case"whatsapp":case"facebook":case"instagram":return s.jsx(P3,{className:te});default:return s.jsx(ma,{className:te})}},ce=A=>{if(!A)return null;const te=/(@(\d+)|TKT-(\d+)|ticket\s+(\d+)|#(\d+))/gi,le=[];let Ne=0,Re;for(;(Re=te.exec(A))!==null;){Re.index>Ne&&le.push({text:A.substring(Ne,Re.index),isTicket:!1});const Ze=Re[2]||Re[3]||Re[4]||Re[5];le.push({text:Re[0],isTicket:!0,ticketNumber:Ze}),Ne=Re.index+Re[0].length}return Ne<A.length&&le.push({text:A.substring(Ne),isTicket:!1}),le.length===0?s.jsx("span",{children:A}):s.jsx("span",{children:le.map((Ze,tt)=>Ze.isTicket?s.jsx("a",{href:`/tickets?search=TKT-${Ze.ticketNumber}`,target:"_blank",rel:"noopener noreferrer",onClick:ct=>{ct.stopPropagation()},className:"text-blue-600 hover:text-blue-800 underline font-medium cursor-pointer",children:Ze.text},tt):s.jsx("span",{children:Ze.text},tt))})};return s.jsxs("div",{className:"flex h-full",children:[s.jsxs("div",{className:"w-96 bg-white flex flex-col h-full border-r border-gray-200",children:[s.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex-shrink-0",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("h1",{className:"text-xl font-bold text-gray-900 flex items-center gap-2",children:[s.jsx(Oi,{className:"w-6 h-6"}),"Mentions",p==="all-mentions"&&h&&s.jsx("span",{title:"Admin View",children:s.jsx(Y3,{className:"w-5 h-5 text-blue-600"})})]}),z>0&&p==="my-mentions"&&s.jsx("span",{className:"bg-red-500 text-white text-xs font-bold px-2 py-1 rounded-full",children:z})]}),s.jsxs("p",{className:"text-sm text-gray-500",children:[p==="my-mentions"&&"Messages where you were mentioned",p==="all-mentions"&&h&&"All mentions (Admin view)",p==="by-staff"&&f&&`Mentions for ${((I=D.find(A=>A.id===f))==null?void 0:I.firstName)||"staff member"}`,p==="by-staff"&&!f&&"Select a staff member to view their mentions",p==="by-ticket"&&y&&`Mentions in ${y}`,p==="by-ticket"&&!y&&"Enter a ticket number to view mentions"]}),s.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[ve?`${X.length} of ${J.length}`:`${J.length}`," mention",J.length!==1?"s":""," ",ve?"matching":"found"]})]}),s.jsx("div",{className:"px-4 py-3 border-b border-gray-200 bg-white",children:s.jsxs("div",{className:"relative",children:[s.jsx(ui,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx("input",{type:"text",value:ve,onChange:A=>je(A.target.value),placeholder:"Search by ticket (@261), staff name, or message...",className:"w-full pl-10 pr-10 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),ve&&s.jsx("button",{onClick:()=>je(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",title:"Clear search",children:s.jsx(Rt,{className:"w-4 h-4"})})]})}),s.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 bg-gray-50",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("button",{onClick:()=>l(!i),className:"flex items-center gap-2 text-sm font-semibold text-gray-700 hover:text-gray-900",children:[s.jsx(b3,{className:"w-4 h-4"}),"Filters ",i?"":""]}),s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsxs("button",{onClick:()=>{o.length>0?re.mutate({mentionIds:o,isRead:!1}):L("unread")},className:`px-2 py-0.5 text-xs font-medium rounded-full transition-colors ${E==="unread"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,title:o.length>0?`Mark ${o.length} as unread`:"Show unread only",children:["Unread (",J.filter(A=>A.is_read===0&&A.is_archived===0).length,")"]}),s.jsxs("button",{onClick:()=>{o.length>0?re.mutate({mentionIds:o,isRead:!0}):L("read")},className:`px-2 py-0.5 text-xs font-medium rounded-full transition-colors ${E==="read"?"bg-gray-100 text-gray-600":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,title:o.length>0?`Mark ${o.length} as read`:"Show read only",children:["Read (",J.filter(A=>A.is_read===1&&A.is_archived===0).length,")"]}),s.jsx("button",{onClick:()=>{P==="archived"?ee("active"):de.mutate()},disabled:de.isPending,className:"px-2 py-0.5 text-xs font-medium rounded-full transition-colors bg-pink-100 text-pink-700 hover:bg-pink-200 disabled:opacity-50",title:"Archive all Read mentions",children:"Archive"})]})]}),o.length>0?s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[" ",o.length," selected  Click pill to toggle read/unread"]}):s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:" Shift+Click: Select range  Ctrl/Cmd+Click: Toggle selection"}),!i&&s.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[p!==(h?"all-mentions":"my-mentions")&&s.jsxs("span",{className:"px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded-full",children:[p==="my-mentions"&&"My Mentions",p==="all-mentions"&&"All Mentions",p==="by-staff"&&f&&`Staff: ${(Ae=D.find(A=>A.id===f))==null?void 0:Ae.firstName}`,p==="by-ticket"&&y&&`Ticket: ${y}`]}),x&&s.jsxs("span",{className:"px-2 py-1 text-xs bg-purple-100 text-purple-700 rounded-full",children:["#",((Te=B.find(A=>A.id===x))==null?void 0:Te.name)||"Channel"]}),E!=="all"&&s.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${E==="unread"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"}`,children:E==="unread"?"Unread":"Read"}),w&&w!==""&&s.jsxs("span",{className:"px-2 py-1 text-xs bg-orange-100 text-orange-700 rounded-full",children:[w==="hour"&&"Last hour",w==="12hours"&&"Last 12h",w==="24hours"&&"Last 24h",w==="custom"&&"Custom dates"]}),!x&&E==="all"&&!w&&p===(h?"all-mentions":"my-mentions")&&s.jsx("span",{className:"text-xs text-gray-500 italic",children:"No filters applied"})]}),i&&s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-semibold text-gray-700 mb-1",children:"View"}),s.jsxs("select",{value:p,onChange:A=>{j(A.target.value),g(""),v("")},className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"my-mentions",children:"My Mentions"}),h&&s.jsx("option",{value:"all-mentions",children:"All Mentions (Admin)"}),s.jsx("option",{value:"by-staff",children:"By Staff Member"}),s.jsx("option",{value:"by-ticket",children:"By Ticket Number"})]})]}),p==="by-staff"&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-semibold text-gray-700 mb-1",children:"Staff Member"}),s.jsxs("select",{value:f,onChange:A=>g(A.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"",children:"Select staff member..."}),D.map(A=>s.jsxs("option",{value:A.id,children:[A.firstName," ",A.lastName]},A.id))]})]}),p==="by-ticket"&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-semibold text-gray-700 mb-1",children:"Ticket Number"}),s.jsx("input",{type:"text",value:y,onChange:A=>v(A.target.value),placeholder:"e.g., TKT-000261",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-semibold text-gray-700 mb-1",children:"Channel"}),s.jsxs("select",{value:x,onChange:A=>b(A.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"",children:"All channels"}),B.map(A=>s.jsxs("option",{value:A.id,children:["#",A.name]},A.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-semibold text-gray-700 mb-1",children:"Status"}),s.jsxs("select",{value:E,onChange:A=>L(A.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"all",children:"All"}),s.jsx("option",{value:"unread",children:"Unread only"}),s.jsx("option",{value:"read",children:"Read only"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-semibold text-gray-700 mb-1",children:"Archive"}),s.jsxs("select",{value:P,onChange:A=>ee(A.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"active",children:"Active mentions"}),s.jsx("option",{value:"archived",children:"All Archived"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-semibold text-gray-700 mb-1",children:"Time Range"}),s.jsxs("select",{value:w,onChange:A=>N(A.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"",children:"All time"}),s.jsx("option",{value:"hour",children:"Last hour"}),s.jsx("option",{value:"12hours",children:"Last 12 hours"}),s.jsx("option",{value:"24hours",children:"Last 24 hours"}),s.jsx("option",{value:"custom",children:"Custom date range"})]})]}),w==="custom"&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-semibold text-gray-700 mb-1",children:"From"}),s.jsx("input",{type:"date",value:H,onChange:A=>Q(A.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-semibold text-gray-700 mb-1",children:"To"}),s.jsx("input",{type:"date",value:ae,onChange:A=>ne(A.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),s.jsx("button",{onClick:()=>{j(h?"all-mentions":"my-mentions"),g(""),v(""),b(""),N(""),L("all"),Q(""),ne("")},className:"w-full px-3 py-2 text-sm text-gray-600 hover:bg-gray-100 rounded-lg border border-gray-300",children:"Clear All Filters"})]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto",children:Y?s.jsx("div",{className:"flex items-center justify-center h-full",children:s.jsx("div",{className:"text-gray-500",children:"Loading mentions..."})}):X.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center p-6",children:[s.jsx(Oi,{className:"w-16 h-16 text-gray-300 mb-4"}),s.jsx("p",{className:"text-gray-500 font-medium",children:"No mentions yet"}),s.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"When someone mentions you with @yourname, it will appear here"})]}):s.jsx("div",{className:"divide-y divide-gray-200",children:X.map(A=>{const te=(n==null?void 0:n.id)===A.id,le=o.includes(A.id),Ne=A.is_read===0;let Re="",Ze="";return le?(Re="bg-indigo-100",Ze="border-indigo-500"):te?(Re=Ne?"bg-blue-100":"bg-gray-100",Ze=Ne?"border-blue-500":"border-gray-500",console.log("[MentionsPage] Selected mention:",A.id,"border:",Ze)):(Re=Ne?"bg-blue-50":"bg-white",Ze="border-transparent"),s.jsxs("button",{onClick:tt=>U(A,tt),style:{borderLeft:le?"6px solid #6366f1":te?Ne?"6px solid #3b82f6":"6px solid #6b7280":"6px solid transparent"},className:`w-full text-left px-4 py-3 hover:bg-gray-50 transition-colors ${Re} relative`,children:[le&&s.jsx("div",{className:"absolute top-2 right-2 w-5 h-5 bg-indigo-600 rounded flex items-center justify-center",children:s.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[A.context_type==="group_chat"?s.jsxs("span",{className:"inline-flex items-center gap-0.5 px-2 py-0.5 text-xs font-medium bg-indigo-100 text-indigo-700 rounded-full",children:[s.jsx($t,{className:"w-3 h-3"}),A.channel_name]}):s.jsxs("span",{className:"inline-flex items-center gap-0.5 px-2 py-0.5 text-xs font-medium bg-purple-100 text-purple-700 rounded-full",children:[Ee(A.ticket_channel),Ge(A.ticket_number)]}),s.jsxs("span",{className:"inline-flex items-center gap-0.5 px-2 py-0.5 text-xs font-medium bg-orange-50 text-orange-600 rounded-full",children:[s.jsx(Oi,{className:"w-3 h-3"}),"Mention by ",A.mentioning_first_name]}),s.jsx("span",{className:"text-xs text-gray-600",children:new Date(A.created_at).toLocaleString()}),A.is_read===0?s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 text-xs font-semibold bg-blue-100 text-blue-700 rounded-full",children:[s.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),"Unread"]}):s.jsx("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 text-xs font-medium bg-emerald-100 text-emerald-700 rounded-full",children:" Read"})]}),A.message_content&&s.jsx("div",{className:`text-sm line-clamp-2 ${A.is_read===0?"text-gray-900 font-medium":"text-gray-600"}`,children:ce(A.message_content)}),A.attachment_url&&s.jsxs("div",{onClick:tt=>{tt.stopPropagation(),A.context_type==="group_chat"&&e(`/group-chat?channel=${A.context_id}&message=${A.message_id}`)},className:"flex items-center gap-1 text-xs text-blue-600 hover:text-blue-800 mt-1 cursor-pointer",children:[s.jsx(Ct,{className:"w-3 h-3"}),s.jsx("span",{className:"hover:underline",children:A.attachment_name||"Attachment"})]})]})]},A.id)})})})]}),s.jsx("div",{className:"flex-1 bg-white flex flex-col h-full",children:n?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[n.context_type==="group_chat"?s.jsxs("span",{className:"inline-flex items-center gap-0.5 px-3 py-1 text-sm font-medium bg-indigo-100 text-indigo-700 rounded-full",children:[s.jsx($t,{className:"w-3.5 h-3.5"}),n.channel_name]}):s.jsxs("span",{className:"inline-flex items-center gap-0.5 px-3 py-1 text-sm font-medium bg-purple-100 text-purple-700 rounded-full",children:[Ee(n.ticket_channel,"w-3.5 h-3.5"),Ge(n.ticket_number)]}),s.jsxs("span",{className:"inline-flex items-center gap-0.5 px-3 py-1 text-sm font-medium bg-orange-50 text-orange-600 rounded-full",children:[s.jsx(Oi,{className:"w-3.5 h-3.5"}),"Mention by ",n.mentioning_first_name]}),s.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 text-sm font-medium bg-slate-100 text-slate-700 rounded-full",children:[s.jsx(fv,{className:"w-3.5 h-3.5"}),new Date(n.created_at).toLocaleString()]}),n.is_read===0?s.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 text-sm font-semibold bg-blue-100 text-blue-700 rounded-full",children:[s.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),"Unread"]}):s.jsx("span",{className:"inline-flex items-center gap-1 px-3 py-1 text-sm font-medium bg-emerald-100 text-emerald-700 rounded-full",children:" Read"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:he,disabled:G===0,className:"p-1.5 rounded hover:bg-gray-100 disabled:opacity-30 disabled:cursor-not-allowed",title:"Previous mention",children:s.jsx(di,{className:"w-4 h-4"})}),s.jsx("button",{onClick:Oe,disabled:G===X.length-1,className:"p-1.5 rounded hover:bg-gray-100 disabled:opacity-30 disabled:cursor-not-allowed",title:"Next mention",children:s.jsx(Vl,{className:"w-4 h-4"})}),n.is_read===1?s.jsx("button",{onClick:()=>V.mutate(n.id),className:"px-3 py-1.5 text-sm text-gray-600 hover:bg-gray-100 rounded-lg border border-gray-300",children:"Mark as Unread"}):s.jsx("button",{onClick:()=>W.mutate(n.id),className:"px-3 py-1.5 text-sm text-blue-600 hover:bg-blue-50 rounded-lg border border-blue-300",children:"Mark as Read"}),s.jsxs("button",{onClick:Ce,className:"px-3 py-1.5 text-sm bg-blue-600 text-white hover:bg-blue-700 rounded-lg flex items-center gap-1",children:[s.jsx(il,{className:"w-4 h-4"}),"Go to Chat"]})]})]})}),s.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:s.jsxs("div",{className:"max-w-3xl",children:[s.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Message"}),s.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[s.jsx("div",{className:"text-gray-900 whitespace-pre-wrap text-base leading-relaxed",children:n.message_content?ce(n.message_content):"No message content available"}),n.attachment_url&&s.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[s.jsxs("button",{onClick:()=>{n.context_type==="group_chat"&&e(`/group-chat?channel=${n.context_id}&message=${n.message_id}`)},className:"flex items-center gap-2 text-sm text-blue-600 hover:text-blue-800 hover:underline",children:[s.jsx(Ct,{className:"w-4 h-4"}),s.jsx("span",{children:n.attachment_name||"Attachment"}),n.attachment_size&&s.jsxs("span",{className:"text-xs text-gray-500",children:["(",(n.attachment_size/1024).toFixed(1)," KB)"]})]}),s.jsx("p",{className:"text-xs text-gray-400 mt-1 ml-6",children:"Click to view in Group Chat"})]})]})]})})]}):s.jsx("div",{className:"flex-1 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Oi,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500 font-medium",children:"Select a mention to view details"})]})})})]})}function e6(){const e=ut(),t=u.useRef(null),r=u.useRef(null),[n,a]=u.useState(""),[i,l]=u.useState(null),[o,c]=u.useState(null),[d,m]=u.useState(""),[h,p]=u.useState(!1),[j,f]=u.useState(null),[g,y]=u.useState(""),[v,x]=u.useState([]),[b,w]=u.useState(0),[N,E]=u.useState(!1),[L,P]=u.useState(null),{data:ee}=me({queryKey:["memos"],queryFn:async()=>(await Ki.getMemos()).data,refetchInterval:1e4}),H=(ee==null?void 0:ee.memos)||[];u.useEffect(()=>{r.current&&r.current.scrollIntoView({behavior:"smooth",block:"end"})},[H]),u.useEffect(()=>{const z=setTimeout(()=>{r.current&&r.current.scrollIntoView({behavior:"auto",block:"end"})},100);return()=>clearTimeout(z)},[]);const Q=we({mutationFn:async z=>Ki.createMemo(z),onSuccess:()=>{a(""),l(null),e.invalidateQueries({queryKey:["memos"]})}}),ae=we({mutationFn:({memoId:z,content:_,deleteAttachment:B})=>Ki.editMemo(z,{content:_,deleteAttachment:B}),onSuccess:()=>{c(null),p(!1),m(""),e.invalidateQueries({queryKey:["memos"]})}}),ne=we({mutationFn:z=>Ki.deleteMemo(z),onSuccess:()=>{f(null),e.invalidateQueries({queryKey:["memos"]})}}),ve=z=>{if(y(z),!z.trim()||!H.length){x([]),w(0);return}const _=z.toLowerCase(),B=[];[...H].reverse().forEach(W=>{let V=!1;W.content.toLowerCase().includes(_)&&(V=!0),W.tags&&W.tags.split(",").map(de=>de.trim().toLowerCase()).some(de=>de.includes(_))&&(V=!0),V&&B.push(W.id)}),x(B),w(0),B.length>0&&je(B[0])},je=z=>{P(z),setTimeout(()=>{const _=document.getElementById(`memo-${z}`);_&&_.scrollIntoView({behavior:"smooth",block:"center"})},100),setTimeout(()=>{P(null)},5e3)},Se=()=>{if(v.length===0)return;const z=(b+1)%v.length;w(z),je(v[z])},D=()=>{if(v.length===0)return;const z=b===0?v.length-1:b-1;w(z),je(v[z])},T=z=>{var B;const _=(B=z.target.files)==null?void 0:B[0];_&&l(_)},Y=z=>new Promise((_,B)=>{const W=new FileReader;W.readAsDataURL(z),W.onload=()=>_(W.result),W.onerror=V=>B(V)}),J=async()=>{if(!n.trim()&&!i||Q.isPending)return;let z=null;i&&(z={data:await Y(i),name:i.name,type:i.type,size:i.size}),Q.mutate({content:n.trim()||"(Attachment)",attachment:z})},X=z=>{c(z.id),m(z.content),p(!1)},he=()=>{!o||!d.trim()||ae.mutate({memoId:o,content:d,deleteAttachment:h})},Oe=async(z,_)=>{try{const W=await(await fetch(z)).blob(),V=URL.createObjectURL(W),re=document.createElement("a");re.href=V,re.download=_,document.body.appendChild(re),re.click(),document.body.removeChild(re),URL.revokeObjectURL(V)}catch(B){console.error("Error downloading file:",B)}},G=z=>z.split(/(@\w+|@\d+|#\d+|TKT-\d+|ticket\s+\d+)/gi).map((B,W)=>{if(B.match(/^@\w+$/)&&!B.match(/^@\d+$/))return s.jsx("span",{className:"bg-blue-100 text-blue-700 font-semibold px-1 rounded",children:B},W);const V=B.match(/^@(\d+)$|^#(\d+)$|^TKT-(\d+)$|^ticket\s+(\d+)$/i);if(V){const re=V[1]||V[2]||V[3]||V[4];return s.jsx(vt,{to:`/tickets?search=TKT-${re}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 hover:underline font-medium",onClick:de=>{de.stopPropagation()},children:B},W)}return B}),Le=z=>z.startsWith("http")?z:`https://dartmouth-os-worker.dartmouth.workers.dev/api/attachments/${z}`;return s.jsxs("div",{className:"flex flex-col overflow-hidden bg-gray-50",style:{height:"calc(100vh - 3.5rem)"},children:[s.jsxs("div",{className:"bg-white border-b border-gray-200 px-6 py-4 flex-shrink-0",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Sc,{className:"w-6 h-6 text-yellow-600"}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"@Memos"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Personal notes to yourself"})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{onClick:()=>E(!N),className:`p-2 rounded-lg ${N?"bg-blue-100 text-blue-600":"text-gray-600 hover:bg-gray-100"}`,title:"Search memos",children:s.jsx(ui,{className:"w-5 h-5"})}),s.jsxs("div",{className:"text-sm text-gray-500",children:[H.length," memo",H.length!==1?"s":""]})]})]}),N&&s.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx("input",{type:"text",value:g,onChange:z=>ve(z.target.value),placeholder:"Search memos and tags... (e.g., James Scott, #james-scott)",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",autoFocus:!0}),v.length>0&&s.jsxs("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 flex items-center gap-2 bg-white px-2",children:[s.jsxs("span",{className:"text-sm text-gray-600",children:[b+1," / ",v.length]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx("button",{onClick:D,className:"p-1 hover:bg-gray-100 rounded",title:"Previous result",children:s.jsx(or,{className:"w-4 h-4"})}),s.jsx("button",{onClick:Se,className:"p-1 hover:bg-gray-100 rounded",title:"Next result",children:s.jsx(Ks,{className:"w-4 h-4"})})]})]})]}),s.jsx("button",{onClick:()=>{E(!1),y(""),x([]),w(0)},className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg",title:"Close search",children:s.jsx(Rt,{className:"w-5 h-5"})})]})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto px-6 py-4 space-y-4",children:[H.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Sc,{className:"w-16 h-16 mx-auto text-gray-300 mb-4"}),s.jsx("p",{className:"text-gray-500",children:"No @Memos yet. Create your first note below!"})]}):H.map(z=>{var B;const _=L===z.id;return s.jsx("div",{id:`memo-${z.id}`,className:`bg-white rounded-lg shadow-sm border border-gray-200 p-4 transition-colors duration-500 ${_?"bg-yellow-100 border-yellow-400":""}`,children:o===z.id?s.jsxs("div",{className:"space-y-3",children:[s.jsx("textarea",{value:d,onChange:W=>m(W.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none",rows:3}),z.attachment_url&&!h&&s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[s.jsx(Ct,{className:"w-4 h-4"}),s.jsx("span",{children:z.attachment_name}),s.jsx("button",{onClick:()=>p(!0),className:"text-red-600 hover:text-red-700 text-xs",children:"Remove"})]}),h&&s.jsx("div",{className:"text-sm text-red-600",children:"Attachment will be removed when you save"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:he,disabled:!d.trim(),className:"px-3 py-1.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 text-sm",children:"Save"}),s.jsx("button",{onClick:()=>{c(null),p(!1)},className:"px-3 py-1.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 text-sm",children:"Cancel"})]})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-gray-900 whitespace-pre-wrap break-words",children:G(z.content)}),z.tags&&s.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:Jl(z.tags).map((W,V)=>s.jsxs(vt,{to:`/tags?tag=${encodeURIComponent(W)}`,className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-100 text-blue-700 text-sm rounded hover:bg-blue-200 transition-colors",children:[s.jsx($t,{className:"w-3 h-3"}),W]},V))}),z.attachment_url&&s.jsx("div",{className:"mt-3",children:(B=z.attachment_type)!=null&&B.startsWith("image/")?s.jsxs("div",{className:"relative group inline-block",children:[s.jsx("img",{src:Le(z.attachment_url),alt:z.attachment_name||"Attachment",className:"max-w-md max-h-64 rounded-lg border border-gray-200"}),s.jsx("div",{className:"absolute top-2 right-2 bg-white rounded-full shadow-md p-1 opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx("button",{onClick:()=>Oe(Le(z.attachment_url),z.attachment_name||"download"),className:"text-gray-500 hover:text-blue-600",title:"Download image",children:s.jsx(Nc,{className:"w-4 h-4"})})})]}):s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("a",{href:Le(z.attachment_url),target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-blue-600 hover:text-blue-700 text-sm",children:[s.jsx(Ct,{className:"w-4 h-4"}),s.jsx("span",{children:z.attachment_name}),z.attachment_size&&s.jsxs("span",{className:"text-xs text-gray-500",children:["(",(z.attachment_size/1024).toFixed(1)," KB)"]})]}),s.jsx("button",{onClick:()=>Oe(Le(z.attachment_url),z.attachment_name||"download"),className:"p-1 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded",title:"Download file",children:s.jsx(Nc,{className:"w-4 h-4"})})]})})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("button",{onClick:()=>X(z),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg",title:"Edit memo",children:s.jsx(Ih,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>f(z.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",title:"Delete memo",children:s.jsx(hi,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{className:"flex items-center gap-3 mt-3 text-xs text-gray-500",children:[s.jsx("span",{children:new Date(z.created_at).toLocaleString()}),z.edited_at&&s.jsxs("span",{className:"italic",children:["(edited ",new Date(z.edited_at).toLocaleString([],{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),")"]})]})]})},z.id)}),s.jsx("div",{ref:r})]}),s.jsxs("div",{className:"bg-white p-4 flex-shrink-0",children:[i&&s.jsxs("div",{className:"mb-3 flex items-center gap-2 bg-gray-100 rounded-lg px-3 py-2",children:[i.type.startsWith("image/")?s.jsx(kc,{className:"w-4 h-4 text-gray-600"}):s.jsx(Ho,{className:"w-4 h-4 text-gray-600"}),s.jsx("span",{className:"text-sm text-gray-700",children:i.name}),s.jsx("button",{onClick:()=>l(null),className:"text-gray-400 hover:text-gray-600 ml-auto",children:s.jsx(Rt,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"file",ref:t,onChange:T,className:"hidden"}),s.jsx("button",{onClick:()=>{var z;return(z=t.current)==null?void 0:z.click()},className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg",children:s.jsx(Ct,{className:"w-5 h-5"})}),s.jsx("input",{value:n,onChange:z=>a(z.target.value),onKeyDown:z=>{z.key==="Enter"&&!z.shiftKey&&(z.preventDefault(),J())},placeholder:"Write a note... Use #keyword to add tags (e.g., #james-scott, #artwork-issue)",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),s.jsx("span",{className:"absolute -top-6 left-0 text-xs text-gray-500",children:_v}),s.jsx("button",{onClick:J,disabled:!n.trim()&&!i||Q.isPending,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:Q.isPending?s.jsxs(s.Fragment,{children:[s.jsx(bv,{className:"w-4 h-4 animate-spin"}),"Uploading..."]}):s.jsxs(s.Fragment,{children:[s.jsx(rd,{className:"w-4 h-4"}),"Add"]})})]})]}),j&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Delete Memo?"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to delete this memo? This action cannot be undone."}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>f(null),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancel"}),s.jsx("button",{onClick:()=>j&&ne.mutate(j),className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Delete"})]})]})})]})}function fg({rating:e,size:t="sm"}){const r={sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6"};return s.jsx("div",{className:"flex items-center gap-0.5",children:[1,2,3,4,5].map(n=>s.jsx("svg",{className:`${r[t]} ${n<=e?"text-yellow-400 fill-yellow-400":"text-gray-300"}`,viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},n))})}function So({title:e,value:t,subtitle:r,trend:n,icon:a,color:i="indigo"}){const l={indigo:"bg-indigo-50 text-indigo-600",green:"bg-green-50 text-green-600",yellow:"bg-yellow-50 text-yellow-600",red:"bg-red-50 text-red-600",blue:"bg-blue-50 text-blue-600"};return s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6 shadow-sm",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:`p-2 rounded-lg ${l[i]}`,children:a}),n&&s.jsxs("span",{className:`text-xs font-medium px-2 py-1 rounded-full ${n.positive?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[n.positive?"":""," ",n.value]})]}),s.jsxs("div",{className:"mt-4",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-500",children:e}),s.jsx("p",{className:"mt-1 text-2xl font-semibold text-gray-900",children:t}),r&&s.jsx("p",{className:"mt-1 text-xs text-gray-500",children:r})]})]})}function t6(){var c,d;const[e,t]=u.useState("7d"),{data:r,isLoading:n}=me({queryKey:["ai-agent-analytics",e],queryFn:async()=>(await Df.getAIAgentStats(e)).data.data}),{data:a}=me({queryKey:["ai-learning-examples"],queryFn:async()=>(await Df.getLearningExamples(10)).data.data}),i=(r==null?void 0:r.stats)||{totalDrafts:0,avgQualityScore:0,helpfulRate:0,approvalRate:0,editRate:0,rejectRate:0},l=(r==null?void 0:r.qualityDistribution)||[],o=(r==null?void 0:r.intentPerformance)||[];return n?s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"animate-pulse",children:[s.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-4"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[1,2,3,4].map(m=>s.jsx("div",{className:"h-32 bg-gray-200 rounded-lg"},m))})]})}):s.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"AI Agent Analytics"}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Monitor AI performance, quality scores, and learning progress"})]}),s.jsx("div",{className:"flex items-center gap-3",children:s.jsxs("select",{value:e,onChange:m=>t(m.target.value),className:"rounded-lg border border-gray-300 bg-white px-3 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[s.jsx("option",{value:"24h",children:"Last 24 hours"}),s.jsx("option",{value:"7d",children:"Last 7 days"}),s.jsx("option",{value:"30d",children:"Last 30 days"}),s.jsx("option",{value:"all",children:"All time"})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[s.jsx(So,{title:"Total AI Drafts",value:i.totalDrafts,subtitle:"Responses generated",icon:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),color:"indigo"}),s.jsx(So,{title:"Average Quality",value:`${i.avgQualityScore.toFixed(1)}/5`,subtitle:"Staff rating",icon:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})}),color:"yellow"}),s.jsx(So,{title:"Helpful Rate",value:`${i.helpfulRate.toFixed(0)}%`,subtitle:"Saved staff time",icon:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 10h4.764a2 2 0 011.789 2.894l-3.5 7A2 2 0 0115.263 21h-4.017c-.163 0-.326-.02-.485-.06L7 20m7-10V5a2 2 0 00-2-2h-.095c-.5 0-.905.405-.905.905 0 .714-.211 1.412-.608 2.006L7 11v9m7-10h-2M7 20H5a2 2 0 01-2-2v-6a2 2 0 012-2h2.5"})}),color:"green"}),s.jsx(So,{title:"Approval Rate",value:`${i.approvalRate.toFixed(0)}%`,subtitle:"Sent without edits",icon:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),color:"blue"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6 shadow-sm",children:[s.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Quality Score Distribution"}),s.jsx("div",{className:"space-y-3",children:[5,4,3,2,1].map(m=>{const h=l.find(p=>p.score===m)||{count:0,percentage:0};return s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"flex items-center gap-1 w-20",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:m}),s.jsx("svg",{className:"w-4 h-4 text-yellow-400 fill-yellow-400",viewBox:"0 0 20 20",children:s.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})})]}),s.jsx("div",{className:"flex-1 bg-gray-100 rounded-full h-4 overflow-hidden",children:s.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${m>=4?"bg-green-500":m===3?"bg-yellow-500":"bg-red-500"}`,style:{width:`${h.percentage}%`}})}),s.jsxs("span",{className:"text-sm text-gray-600 w-16 text-right",children:[h.count," (",h.percentage.toFixed(0),"%)"]})]},m)})})]}),s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6 shadow-sm",children:[s.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Response Actions"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:s.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Approved (No Edits)"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Sent exactly as AI generated"})]})]}),s.jsxs("span",{className:"text-lg font-semibold text-green-700",children:[i.approvalRate.toFixed(0),"%"]})]}),s.jsxs("div",{className:"flex items-center justify-between p-3 bg-yellow-50 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:s.jsx("svg",{className:"w-5 h-5 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Edited Before Sending"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Modified by staff"})]})]}),s.jsxs("span",{className:"text-lg font-semibold text-yellow-700",children:[i.editRate.toFixed(0),"%"]})]}),s.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:s.jsx("svg",{className:"w-5 h-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Rejected"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Staff wrote new response"})]})]}),s.jsxs("span",{className:"text-lg font-semibold text-red-700",children:[i.rejectRate.toFixed(0),"%"]})]})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6 shadow-sm mb-8",children:[s.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Performance by Intent"}),o.length>0?s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Intent"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Volume"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Avg Quality"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Helpful %"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Trend"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200",children:o.map(m=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900 capitalize",children:m.intent.replace(/_/g," ")}),s.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:m.count}),s.jsx("td",{className:"px-4 py-3",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(fg,{rating:Math.round(m.avgQuality),size:"sm"}),s.jsx("span",{className:"text-sm text-gray-600",children:m.avgQuality.toFixed(1)})]})}),s.jsx("td",{className:"px-4 py-3",children:s.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${m.helpfulRate>=80?"bg-green-100 text-green-800":m.helpfulRate>=60?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:[m.helpfulRate.toFixed(0),"%"]})}),s.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:m.trend>0?s.jsx("span",{className:"text-green-600",children:" Improving"}):m.trend<0?s.jsx("span",{className:"text-red-600",children:" Declining"}):s.jsx("span",{className:"text-gray-500",children:" Stable"})})]},m.intent))})]})}):s.jsx("p",{className:"text-sm text-gray-500 text-center py-8",children:"No intent data available yet. Start approving AI drafts to see performance by intent."})]}),s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6 shadow-sm",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Learning Examples"}),s.jsx("p",{className:"text-sm text-gray-500",children:"High-quality responses (4-5 stars) used to improve AI"})]}),s.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800",children:[((c=a==null?void 0:a.examples)==null?void 0:c.length)||0," examples"]})]}),((d=a==null?void 0:a.examples)==null?void 0:d.length)>0?s.jsx("div",{className:"space-y-4",children:a.examples.slice(0,5).map(m=>{var h;return s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition-colors",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-xs font-medium text-gray-500 capitalize px-2 py-1 bg-gray-100 rounded",children:((h=m.intent)==null?void 0:h.replace(/_/g," "))||"General"}),s.jsx(fg,{rating:m.quality_score,size:"sm"})]}),s.jsx("span",{className:"text-xs text-gray-500",children:m.created_at?hr(new Date(m.created_at),{addSuffix:!0}):""})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-3",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-medium text-gray-500 mb-1",children:"Customer Message"}),s.jsx("p",{className:"text-sm text-gray-700 line-clamp-2",children:m.customer_message})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-medium text-gray-500 mb-1",children:"AI Response"}),s.jsx("p",{className:"text-sm text-gray-700 line-clamp-2",children:m.ai_response})]})]})]},m.id)})}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),s.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"No learning examples yet"}),s.jsx("p",{className:"text-xs text-gray-400",children:"Rate AI responses 4-5 stars to add them as learning examples"})]})]})]})}const s6=[1,2,3,4,5,6,0],gg=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function r6(){const e=ut(),[t,r]=u.useState(gg.map((f,g)=>({day_of_week:g,day_name:f,is_open:g>=1&&g<=5,open_time:"09:00",close_time:"17:00"}))),[n,a]=u.useState("Australia/Sydney"),[i,l]=u.useState("idle"),[o,c]=u.useState(""),{data:d,isLoading:m}=me({queryKey:["businessHours"],queryFn:()=>Tr.getBusinessHours().then(f=>f.data.businessHours)}),{data:h}=me({queryKey:["chatSettings"],queryFn:()=>Tr.getSettings().then(f=>f.data.settings)});u.useEffect(()=>{d&&r(d)},[d]),u.useEffect(()=>{h!=null&&h.timezone&&a(h.timezone)},[h]);const p=we({mutationFn:async()=>{await Tr.updateBusinessHours(t.map(f=>({day_of_week:f.day_of_week,is_open:f.is_open,open_time:f.is_open?f.open_time:null,close_time:f.is_open?f.close_time:null}))),await Tr.updateSettings({timezone:n})},onSuccess:()=>{e.invalidateQueries({queryKey:["businessHours"]}),e.invalidateQueries({queryKey:["chatSettings"]}),l("success"),setTimeout(()=>l("idle"),3e3)},onError:f=>{l("error"),c(f.message),setTimeout(()=>l("idle"),5e3)}}),j=(f,g,y)=>{r(v=>v.map(x=>x.day_of_week===f?{...x,[g]:y}:x))};return m?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):s.jsxs("div",{className:"max-w-3xl mx-auto p-6",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Business Hours"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Set your operating hours for live chat availability"})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsxs("div",{className:"mb-6 pb-6 border-b border-gray-200",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Timezone"}),s.jsxs("select",{value:n,onChange:f=>a(f.target.value),className:"w-full max-w-xs px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[s.jsx("option",{value:"Australia/Sydney",children:"Australia/Sydney (AEST/AEDT)"}),s.jsx("option",{value:"Australia/Melbourne",children:"Australia/Melbourne"}),s.jsx("option",{value:"Australia/Brisbane",children:"Australia/Brisbane"}),s.jsx("option",{value:"Australia/Perth",children:"Australia/Perth (AWST)"}),s.jsx("option",{value:"Pacific/Auckland",children:"New Zealand (NZST/NZDT)"}),s.jsx("option",{value:"America/New_York",children:"US Eastern (EST/EDT)"}),s.jsx("option",{value:"America/Los_Angeles",children:"US Pacific (PST/PDT)"}),s.jsx("option",{value:"Europe/London",children:"UK (GMT/BST)"})]})]}),s.jsx("div",{className:"space-y-3",children:s6.map(f=>{const g=t.find(y=>y.day_of_week===f)||{day_of_week:f,day_name:gg[f],is_open:!1,open_time:"09:00",close_time:"17:00"};return s.jsxs("div",{className:"flex items-center gap-4 py-3 border-b border-gray-100 last:border-0",children:[s.jsx("div",{className:"w-28",children:s.jsx("span",{className:"font-medium text-gray-900",children:g.day_name})}),s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer min-w-[80px]",children:[s.jsx("input",{type:"checkbox",checked:g.is_open,onChange:y=>j(g.day_of_week,"is_open",y.target.checked),className:"h-4 w-4 text-indigo-600 rounded border-gray-300"}),s.jsx("span",{className:"text-sm text-gray-600",children:g.is_open?"Open":"Closed"})]}),g.is_open?s.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[s.jsx("input",{type:"time",value:g.open_time||"09:00",onChange:y=>j(g.day_of_week,"open_time",y.target.value),className:"px-3 py-1.5 border border-gray-300 rounded-lg text-sm"}),s.jsx("span",{className:"text-gray-500",children:"to"}),s.jsx("input",{type:"time",value:g.close_time||"17:00",onChange:y=>j(g.day_of_week,"close_time",y.target.value),className:"px-3 py-1.5 border border-gray-300 rounded-lg text-sm"})]}):s.jsx("span",{className:"text-sm text-gray-400 italic flex-1",children:"Closed all day"})]},g.day_of_week)})}),s.jsxs("div",{className:"flex gap-2 pt-6 mt-4 border-t border-gray-200",children:[s.jsx("button",{onClick:()=>r(f=>f.map(g=>({...g,is_open:g.day_of_week>=1&&g.day_of_week<=5,open_time:"09:00",close_time:"17:00"}))),className:"px-3 py-1.5 text-sm text-indigo-600 hover:bg-indigo-50 rounded-lg border border-indigo-200",children:"Mon-Fri 9am-5pm"}),s.jsx("button",{onClick:()=>r(f=>f.map(g=>({...g,is_open:g.day_of_week>=1&&g.day_of_week<=6,open_time:"08:00",close_time:"18:00"}))),className:"px-3 py-1.5 text-sm text-indigo-600 hover:bg-indigo-50 rounded-lg border border-indigo-200",children:"Mon-Sat 8am-6pm"}),s.jsx("button",{onClick:()=>r(f=>f.map(g=>({...g,is_open:!0,open_time:"00:00",close_time:"23:59"}))),className:"px-3 py-1.5 text-sm text-indigo-600 hover:bg-indigo-50 rounded-lg border border-indigo-200",children:"24/7"})]}),s.jsxs("div",{className:"flex justify-end pt-6 mt-6 border-t border-gray-200",children:[i==="success"&&s.jsxs("span",{className:"text-green-600 flex items-center gap-2",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Saved"]}),i==="error"&&s.jsx("span",{className:"text-red-600 text-sm",children:o||"Failed to save"}),s.jsx("button",{onClick:()=>p.mutate(),disabled:p.isPending,className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 font-medium",children:p.isPending?"Saving...":"Save Business Hours"})]})]})]})}function n6(){const e=ut(),[t,r]=u.useState({is_enabled:!0,primary_color:"#1e40af",secondary_color:"#ffffff",button_text:"Chat with us",welcome_message:"Hi! How can we help you today?",offline_message:"Our team is currently offline. Please leave a message.",show_business_hours:!0,require_email_when_offline:!0}),[n,a]=u.useState("idle"),[i,l]=u.useState(""),{data:o,isLoading:c}=me({queryKey:["chatSettings"],queryFn:()=>Tr.getSettings().then(m=>m.data.settings)});u.useEffect(()=>{o&&r(o)},[o]);const d=we({mutationFn:()=>Tr.updateSettings(t),onSuccess:()=>{e.invalidateQueries({queryKey:["chatSettings"]}),a("success"),setTimeout(()=>a("idle"),3e3)},onError:m=>{a("error"),l(m.message),setTimeout(()=>a("idle"),5e3)}});return c?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):s.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"AI Chat Widget"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Configure the chat widget appearance and behavior"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Enable Chat Widget"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Show the chat widget on your website"})]}),s.jsx("button",{onClick:()=>r(m=>({...m,is_enabled:!m.is_enabled})),className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none ${t.is_enabled?"bg-indigo-600":"bg-gray-200"}`,children:s.jsx("span",{className:`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${t.is_enabled?"translate-x-5":"translate-x-0"}`})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[s.jsxs("div",{className:"min-w-0",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Button Color"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("label",{className:"flex-shrink-0 cursor-pointer",children:[s.jsx("input",{type:"color",value:t.primary_color,onChange:m=>r(h=>({...h,primary_color:m.target.value})),className:"sr-only"}),s.jsx("div",{className:"w-10 h-10 rounded-lg border-2 border-gray-400 shadow-sm",style:{backgroundColor:t.primary_color}})]}),s.jsx("input",{type:"text",value:t.primary_color,onChange:m=>r(h=>({...h,primary_color:m.target.value})),className:"w-24 px-2 py-2 border border-gray-300 rounded-lg text-sm font-mono"})]})]}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Text Color"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("label",{className:"flex-shrink-0 cursor-pointer",children:[s.jsx("input",{type:"color",value:t.secondary_color,onChange:m=>r(h=>({...h,secondary_color:m.target.value})),className:"sr-only"}),s.jsx("div",{className:"w-10 h-10 rounded-lg border-2 border-gray-400 shadow-sm",style:{backgroundColor:t.secondary_color}})]}),s.jsx("input",{type:"text",value:t.secondary_color,onChange:m=>r(h=>({...h,secondary_color:m.target.value})),className:"w-24 px-2 py-2 border border-gray-300 rounded-lg text-sm font-mono"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Button Text"}),s.jsx("input",{type:"text",value:t.button_text,onChange:m=>r(h=>({...h,button_text:m.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",placeholder:"Chat with us"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Welcome Message"}),s.jsx("textarea",{value:t.welcome_message,onChange:m=>r(h=>({...h,welcome_message:m.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",placeholder:"Hi! How can we help you today?"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"First message shown when chat opens"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Offline Message"}),s.jsx("textarea",{value:t.offline_message,onChange:m=>r(h=>({...h,offline_message:m.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",placeholder:"Our team is currently offline..."}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Shown when no staff are online"})]}),s.jsxs("div",{className:"space-y-4 pt-4 border-t border-gray-200",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Show Business Hours"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Display hours in the widget"})]}),s.jsx("button",{onClick:()=>r(m=>({...m,show_business_hours:!m.show_business_hours})),className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none ${t.show_business_hours?"bg-indigo-600":"bg-gray-200"}`,children:s.jsx("span",{className:`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${t.show_business_hours?"translate-x-5":"translate-x-0"}`})})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Require Email When Offline"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Collect email for follow-up"})]}),s.jsx("button",{onClick:()=>r(m=>({...m,require_email_when_offline:!m.require_email_when_offline})),className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none ${t.require_email_when_offline?"bg-indigo-600":"bg-gray-200"}`,children:s.jsx("span",{className:`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${t.require_email_when_offline?"translate-x-5":"translate-x-0"}`})})]})]}),s.jsxs("div",{className:"flex justify-end pt-4 border-t border-gray-200",children:[n==="success"&&s.jsxs("span",{className:"text-green-600 flex items-center gap-2",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Saved"]}),n==="error"&&s.jsx("span",{className:"text-red-600 text-sm",children:i||"Failed to save"}),s.jsx("button",{onClick:()=>d.mutate(),disabled:d.isPending,className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 font-medium",children:d.isPending?"Saving...":"Save Settings"})]})]})}),s.jsxs("div",{className:"bg-gray-100 rounded-lg p-6",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-4",children:"Preview"}),s.jsxs("div",{className:"bg-white rounded-lg shadow-inner h-96 relative overflow-hidden",children:[s.jsxs("div",{className:"absolute inset-0 p-4",children:[s.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),s.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-4"}),s.jsx("div",{className:"h-24 bg-gray-100 rounded mb-4"}),s.jsx("div",{className:"h-4 bg-gray-200 rounded w-2/3 mb-2"}),s.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]}),s.jsx("div",{className:"absolute bottom-4 right-4",children:s.jsxs("div",{className:"inline-flex items-center gap-2 px-5 py-3 rounded-full shadow-lg cursor-pointer transform hover:scale-105 transition-transform",style:{backgroundColor:t.primary_color,color:t.secondary_color},children:[s.jsxs("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H5.17L4 17.17V4h16v12z"}),s.jsx("path",{d:"M7 9h10v2H7zm0-3h10v2H7z"})]}),s.jsx("span",{className:"font-medium",children:t.button_text})]})})]})]})]})]})}const Vd={email:"",first_name:"",last_name:"",role:"agent",job_title:"",phone:"",department:"Customer Service",password:""};function a6(){const e=ut(),{user:t}=Rs(),r=(t==null?void 0:t.role)==="admin",[n,a]=u.useState(!1),[i,l]=u.useState(null),[o,c]=u.useState(Vd),[d,m]=u.useState(""),[h,p]=u.useState(null),j=u.useRef(null),[f,g]=u.useState(null),{data:y,isLoading:v}=me({queryKey:["staffUsers"],queryFn:()=>st.list().then(D=>{const T=D.data.staff;return!r&&(t!=null&&t.id)?T.filter(Y=>Y.id===t.id):T})}),{data:x}=me({queryKey:["tickets","all"],queryFn:()=>De.list({limit:1e3}).then(D=>D.data.tickets)}),b=D=>x?x.filter(T=>T.assigned_to===D&&T.status!=="resolved"&&T.status!=="closed").length:0,w=we({mutationFn:({staffId:D,status:T})=>st.updateAvailability(D,T),onSuccess:()=>{e.invalidateQueries({queryKey:["staffUsers"]})}}),N=we({mutationFn:D=>st.create({...D,password:D.password||""}),onSuccess:()=>{e.invalidateQueries({queryKey:["staffUsers"]}),je()},onError:D=>{var T,Y;m(((Y=(T=D.response)==null?void 0:T.data)==null?void 0:Y.error)||"Failed to create staff member")}}),E=we({mutationFn:({id:D,data:T})=>st.update(D,T),onSuccess:()=>{e.invalidateQueries({queryKey:["staffUsers"]}),je()},onError:D=>{var T,Y;m(((Y=(T=D.response)==null?void 0:T.data)==null?void 0:Y.error)||"Failed to update staff member")}}),L=we({mutationFn:({staffId:D,file:T})=>st.uploadAvatar(D,T),onSuccess:()=>{e.invalidateQueries({queryKey:["staffUsers"]}),e.invalidateQueries({queryKey:["currentStaff"]}),p(null)},onError:D=>{var T,Y;m(((Y=(T=D.response)==null?void 0:T.data)==null?void 0:Y.error)||"Failed to upload photo"),p(null)}}),P=D=>{var T;!r&&D!==(t==null?void 0:t.id)||(g(D),(T=j.current)==null||T.click())},ee=D=>{var Y;const T=(Y=D.target.files)==null?void 0:Y[0];if(T&&f){if(!["image/jpeg","image/png","image/gif","image/webp"].includes(T.type)){m("Invalid file type. Please use JPEG, PNG, GIF, or WebP");return}if(T.size>5*1024*1024){m("File too large. Maximum size is 5MB");return}p(f),L.mutate({staffId:f,file:T})}j.current&&(j.current.value=""),g(null)},H={online:{color:"bg-green-500",label:"Available",badgeClass:"bg-green-100 text-green-700 border-green-200"},offline:{color:"bg-gray-400",label:"Offline",badgeClass:"bg-gray-100 text-gray-600 border-gray-200"},away:{color:"bg-amber-500",label:"Away",badgeClass:"bg-amber-100 text-amber-700 border-amber-200"}},Q=D=>{if(D.job_title)return D.job_title;switch(D.role){case"admin":return"Administrator";case"manager":return"Customer Service Manager";default:return"Support Agent"}},ae=D=>new Date(D).toLocaleDateString("en-AU",{month:"short",day:"numeric",year:"numeric"}),ne=()=>{l(null),c(Vd),m(""),a(!0)},ve=D=>{!r&&D.id!==(t==null?void 0:t.id)||(l(D),c({email:D.email,first_name:D.first_name,last_name:D.last_name,role:D.role,job_title:D.job_title||"",phone:D.phone||"",department:D.department||"Customer Service",password:""}),m(""),a(!0))},je=()=>{a(!1),l(null),c(Vd),m("")},Se=D=>{if(D.preventDefault(),m(""),!o.email||!o.first_name){m("Email and First Name are required");return}if(i){const T={first_name:o.first_name,last_name:o.last_name,job_title:o.job_title,phone:o.phone,department:o.department};r&&(T.role=o.role,T.email=o.email),o.password&&(T.password=o.password),E.mutate({id:i.id,data:T})}else{if(!o.password){m("Password is required for new staff members");return}N.mutate(o)}};return v?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Team Members"}),s.jsx("p",{className:"text-gray-600 mt-1",children:r?"Manage your support team and their availability":"View and edit your profile"})]}),r&&s.jsxs("button",{onClick:ne,className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:[s.jsx(Oh,{className:"w-5 h-5"}),"Add Staff Member"]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:y==null?void 0:y.map(D=>{const T=D.availability_status||"offline",Y=H[T],J=b(D.id),X=D.id===(t==null?void 0:t.id),he=r||X;return s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm hover:shadow-md transition-shadow",children:[s.jsx("div",{className:"p-5 pb-4",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"relative group",children:[D.avatar_url?s.jsx("img",{src:st.getAvatarUrl(D.avatar_url)||"",alt:`${D.first_name} ${D.last_name}`,className:"w-12 h-12 rounded-full object-cover"}):s.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-100 flex items-center justify-center text-gray-500",children:s.jsx(Yl,{className:"w-6 h-6"})}),s.jsx("span",{className:`absolute bottom-0 right-0 w-3.5 h-3.5 rounded-full border-2 border-white ${Y.color}`}),(r||X)&&s.jsx("button",{onClick:()=>P(D.id),className:"absolute inset-0 rounded-full bg-black bg-opacity-50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",title:"Upload photo",children:h===D.id?s.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}):s.jsx(Y4,{className:"w-5 h-5 text-white"})})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"font-semibold text-gray-900",children:[X?"You":`${D.first_name}`,D.last_name&&!X&&` ${D.last_name}`]}),s.jsx("p",{className:"text-sm text-gray-500",children:Q(D)})]})]}),r||X?s.jsxs("select",{value:T,onChange:Oe=>w.mutate({staffId:D.id,status:Oe.target.value}),className:`text-xs font-medium px-3 py-1 rounded-full border cursor-pointer ${Y.badgeClass}`,children:[s.jsx("option",{value:"online",children:"Available"}),s.jsx("option",{value:"away",children:"Away"}),s.jsx("option",{value:"offline",children:"Offline"})]}):s.jsx("span",{className:`text-xs font-medium px-3 py-1 rounded-full border ${Y.badgeClass}`,children:Y.label})]})}),s.jsxs("div",{className:"px-5 pb-4 space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[s.jsx(En,{className:"w-4 h-4 text-gray-400"}),s.jsx("span",{className:"truncate",children:D.email})]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[s.jsx(ga,{className:"w-4 h-4 text-gray-400"}),s.jsx("span",{children:D.phone||"Not set"})]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[s.jsx(hv,{className:"w-4 h-4 text-gray-400"}),s.jsx("span",{children:D.department||"Customer Service"})]})]}),s.jsxs("div",{className:"px-5 py-3 bg-gray-50 border-t border-gray-100 flex items-center justify-between text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Active Tickets: "}),s.jsx("span",{className:`font-medium ${J>0?"text-indigo-600":"text-gray-900"}`,children:J})]}),he?s.jsxs("button",{onClick:()=>ve(D),className:"flex items-center gap-1 text-indigo-600 hover:text-indigo-800 font-medium",children:[s.jsx(wv,{className:"w-4 h-4"}),"Edit"]}):s.jsxs("div",{className:"text-gray-500",children:["Joined: ",s.jsx("span",{className:"font-medium text-gray-700",children:ae(D.created_at)})]})]})]},D.id)})}),(!y||y.length===0)&&s.jsx("div",{className:"text-center py-12 text-gray-500 bg-white rounded-lg border border-gray-200",children:"No team members found"}),s.jsx("input",{ref:j,type:"file",accept:"image/jpeg,image/png,image/gif,image/webp",onChange:ee,className:"hidden"}),n&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full mx-4 max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:i?"Edit Staff Member":"Add Staff Member"}),s.jsx("button",{onClick:je,className:"text-gray-400 hover:text-gray-600",children:s.jsx(Rt,{className:"w-5 h-5"})})]}),s.jsxs("form",{onSubmit:Se,className:"p-6 space-y-4",children:[d&&s.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:d}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["First Name ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:o.first_name,onChange:D=>c(T=>({...T,first_name:D.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name"}),s.jsx("input",{type:"text",value:o.last_name,onChange:D=>c(T=>({...T,last_name:D.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Email ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"email",value:o.email,onChange:D=>c(T=>({...T,email:D.target.value})),disabled:!!i&&!r,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 disabled:bg-gray-100 disabled:text-gray-500",required:!0}),i&&!r&&s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Contact an admin to change your email"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),s.jsx("input",{type:"tel",value:o.phone,onChange:D=>c(T=>({...T,phone:D.target.value})),placeholder:"+1 (555) 123-4567",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Job Title"}),s.jsx("input",{type:"text",value:o.job_title,onChange:D=>c(T=>({...T,job_title:D.target.value})),placeholder:"e.g., Senior Support Agent",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Department"}),s.jsx("input",{type:"text",value:o.department,onChange:D=>c(T=>({...T,department:D.target.value})),placeholder:"e.g., Customer Service",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})]}),r&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),s.jsxs("select",{value:o.role,onChange:D=>c(T=>({...T,role:D.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[s.jsx("option",{value:"agent",children:"Support Agent"}),s.jsx("option",{value:"manager",children:"Manager"}),s.jsx("option",{value:"admin",children:"Administrator"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[i?"New Password":"Password",!i&&s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"password",value:o.password,onChange:D=>c(T=>({...T,password:D.target.value})),placeholder:i?"Leave blank to keep current password":"Enter password",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",required:!i})]}),s.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200",children:[s.jsx("button",{type:"button",onClick:je,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),s.jsx("button",{type:"submit",disabled:N.isPending||E.isPending,className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-lg hover:bg-indigo-700 disabled:opacity-50",children:N.isPending||E.isPending?"Saving...":i?"Save Changes":"Add Staff Member"})]})]})]})})]})}function i6(){const{data:e,isLoading:t}=me({queryKey:["staffUsers"],queryFn:()=>st.list().then(r=>r.data.staff)});return t?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Staff Performance"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Track team productivity and response metrics"})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-indigo-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx("svg",{className:"w-8 h-8 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Performance Analytics Coming Soon"}),s.jsx("p",{className:"text-gray-600 max-w-md mx-auto mb-6",children:"We're building detailed performance metrics including response times, ticket resolution rates, customer satisfaction scores, and more."}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 max-w-2xl mx-auto mt-8",children:[s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[s.jsx("div",{className:"text-2xl font-bold text-gray-400",children:"--"}),s.jsx("div",{className:"text-sm text-gray-500",children:"Avg Response Time"})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[s.jsx("div",{className:"text-2xl font-bold text-gray-400",children:"--"}),s.jsx("div",{className:"text-sm text-gray-500",children:"Tickets Resolved"})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[s.jsx("div",{className:"text-2xl font-bold text-gray-400",children:"--"}),s.jsx("div",{className:"text-sm text-gray-500",children:"Satisfaction Score"})]})]}),s.jsxs("div",{className:"mt-8 border-t border-gray-200 pt-8",children:[s.jsxs("h3",{className:"text-sm font-medium text-gray-700 mb-4",children:["Team Members (",(e==null?void 0:e.length)||0,")"]}),s.jsx("div",{className:"flex justify-center gap-2 flex-wrap",children:e==null?void 0:e.map(r=>{var n,a;return s.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 rounded-full px-3 py-1.5",children:[s.jsxs("div",{className:"w-6 h-6 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-600 text-xs font-medium",children:[(n=r.first_name)==null?void 0:n[0],(a=r.last_name)==null?void 0:a[0]]}),s.jsx("span",{className:"text-sm text-gray-700",children:r.first_name})]},r.id)})})]})]})]})}const Wr={listConversations:async e=>(await $.get(`/api/chat/conversations?tab=${e}`)).data,getConversation:async e=>(await $.get(`/api/chat/conversation/${e}`)).data,takeoverConversation:async e=>(await $.post(`/api/chat/conversation/${e}/takeover`)).data,replyToConversation:async(e,t)=>(await $.post(`/api/chat/conversation/${e}/reply`,{message:t})).data,closeConversation:async(e,t)=>(await $.post(`/api/chat/conversation/${e}/close`,{resolution_type:t})).data,pickupFromQueue:async e=>(await $.post(`/api/chat/conversation/${e}/pickup`)).data,reassignConversation:async(e,t,r)=>(await $.post(`/api/chat/conversation/${e}/reassign`,{assignTo:t,reason:r})).data,getStaffList:async()=>(await $.get("/api/staff")).data},xg=[{key:"ai",label:"AI",icon:s.jsx(er,{className:"w-4 h-4"}),description:"Active chats with AI"},{key:"staff",label:"Staff",icon:s.jsx(Yl,{className:"w-4 h-4"}),description:"Escalated to staff"},{key:"queued",label:"Queued",icon:s.jsx(yv,{className:"w-4 h-4"}),description:"Awaiting staff"},{key:"closed",label:"Closed",icon:s.jsx(mv,{className:"w-4 h-4"}),description:"Resolved & inactive"}],Gd=e=>e?e.startsWith("data:")||e.startsWith("http")?e:`https://dartmouth-os-worker.dartmouth.workers.dev/api/attachments/${e}`:"";function l6(){var ze,$e,rt,Ut,K;const{user:e}=Rs(),t=ut(),[r,n]=zl(),[a,i]=u.useState("ai"),[l,o]=u.useState(null),[c,d]=u.useState(""),[m,h]=u.useState(!1),[p,j]=u.useState(!1),[f,g]=u.useState(""),[y,v]=u.useState(""),[x,b]=u.useState(!1),[w,N]=u.useState(""),[E,L]=u.useState(250),[P,ee]=u.useState(null),[H,Q]=u.useState(""),[ae,ne]=u.useState(null),[ve,je]=u.useState(!1),[Se,D]=u.useState([]),[T,Y]=u.useState(!1),[J,X]=u.useState(!1),[he,Oe]=u.useState(!1),[G,Le]=u.useState("all"),[z,_]=u.useState(0),[B,W]=u.useState(null),V=u.useRef(null),re=u.useRef(null);u.useEffect(()=>{_(0)},[l,he]),u.useEffect(()=>{const M=fe=>{(fe.ctrlKey||fe.metaKey)&&fe.key==="y"&&(fe.preventDefault(),b(Me=>!Me))};return window.addEventListener("keydown",M),()=>window.removeEventListener("keydown",M)},[]),u.useEffect(()=>{const M=r.get("conversation"),fe=r.get("ticket");M?(o(M),r.delete("conversation"),n(r,{replace:!0})):fe&&($.get(`/api/chat/conversation/by-ticket/${fe}`).then(Me=>{if(Me.data.conversation){o(Me.data.conversation.id);const ke=Me.data.conversation;ke.status==="closed"||ke.resolution_type?i("closed"):ke.status==="queued"?i("queued"):ke.status==="ai_handling"?i("ai"):ke.status==="assigned"||ke.status==="staff_handling"?i("staff"):i("ai")}}).catch(Me=>console.error("Failed to find conversation for ticket:",Me)),r.delete("ticket"),n(r,{replace:!0}))},[r,n]);const{data:de,isLoading:U}=me({queryKey:["chat-conversations",a],queryFn:()=>Wr.listConversations(a),refetchInterval:5e3}),{data:Ce}=me({queryKey:["chat-tab-counts"],queryFn:async()=>{const[M,fe,Me,ke]=await Promise.all([$.get("/api/chat/conversations?tab=ai&count_only=true"),$.get("/api/chat/conversations?tab=staff&count_only=true"),$.get("/api/chat/conversations?tab=queued&count_only=true"),$.get("/api/chat/conversations?tab=closed&count_only=true")]);return{ai:M.data.count||0,staff:fe.data.count||0,queued:Me.data.count||0,closed:ke.data.count||0}},refetchInterval:1e4}),{data:Ge,isLoading:Ee}=me({queryKey:["chat-conversation",l],queryFn:()=>Wr.getConversation(l),enabled:!!l,refetchInterval:3e3}),ce=(Ge==null?void 0:Ge.messages)||[],I=Ge==null?void 0:Ge.conversation,{data:Ae,isLoading:Te}=me({queryKey:["shopify-data",I==null?void 0:I.customer_email],queryFn:async()=>I!=null&&I.customer_email?(await $.get(`/api/shopify/ticket-data?email=${encodeURIComponent(I.customer_email)}`)).data:null,enabled:!!(I!=null&&I.customer_email)&&he}),{data:A,refetch:te}=me({queryKey:["ticket-notes",I==null?void 0:I.ticket_id],queryFn:async()=>I!=null&&I.ticket_id?(await De.get(I.ticket_id)).data:null,enabled:!!(I!=null&&I.ticket_id)}),le=(A==null?void 0:A.notes)||[],Ne=we({mutationFn:M=>Wr.takeoverConversation(M),onSuccess:()=>{t.invalidateQueries({queryKey:["chat-conversations"]}),t.invalidateQueries({queryKey:["chat-conversation"]}),t.invalidateQueries({queryKey:["chat-tab-counts"]})}}),Re=we({mutationFn:M=>Wr.pickupFromQueue(M),onSuccess:()=>{t.invalidateQueries({queryKey:["chat-conversations"]}),t.invalidateQueries({queryKey:["chat-conversation"]}),t.invalidateQueries({queryKey:["chat-tab-counts"]}),i("staff")}}),Ze=we({mutationFn:({id:M,message:fe})=>Wr.replyToConversation(M,fe),onSuccess:()=>{d(""),t.invalidateQueries({queryKey:["chat-conversation"]})}}),tt=we({mutationFn:({id:M,resolutionType:fe})=>Wr.closeConversation(M,fe),onSuccess:()=>{o(null),h(!1),t.invalidateQueries({queryKey:["chat-conversations"]}),t.invalidateQueries({queryKey:["chat-tab-counts"]})}}),ct=we({mutationFn:({id:M,assignTo:fe,reason:Me})=>Wr.reassignConversation(M,fe,Me),onSuccess:()=>{j(!1),g(""),v(""),t.invalidateQueries({queryKey:["chat-conversations"]}),t.invalidateQueries({queryKey:["chat-conversation"]}),t.invalidateQueries({queryKey:["chat-tab-counts"]})}}),{data:zt}=me({queryKey:["staff-list"],queryFn:()=>Wr.getStaffList(),enabled:p||a==="staff"}),Ns=(zt==null?void 0:zt.staff)||[],ns=(de==null?void 0:de.conversations)||[];u.useEffect(()=>{!l&&ns.length>0&&!U&&o(ns[0].id)},[ns,l,U]);const St=ns.filter(M=>G==="all"||M.assigned_to===G),Gt=()=>{if(!l||St.length===0)return;const M=St.findIndex(fe=>fe.id===l);M>0&&o(St[M-1].id)},nr=()=>{if(!l||St.length===0)return;const M=St.findIndex(fe=>fe.id===l);M<St.length-1&&o(St[M+1].id)},Ps=l?St.findIndex(M=>M.id===l):-1,ge=Ps>0,Hs=Ps>=0&&Ps<St.length-1;u.useEffect(()=>{const M=Me=>{if(!ve)return;const ke=E+(window.innerHeight-Me.clientY-E),Ye=150,Jt=window.innerHeight*.6;ke>=Ye&&ke<=Jt&&L(ke)},fe=()=>{je(!1),document.body.style.cursor="default",document.body.style.userSelect="auto"};return ve&&(document.body.style.cursor="ns-resize",document.body.style.userSelect="none",window.addEventListener("mousemove",M),window.addEventListener("mouseup",fe)),()=>{window.removeEventListener("mousemove",M),window.removeEventListener("mouseup",fe)}},[ve,E]);const bt=M=>new Promise((fe,Me)=>{const ke=new FileReader;ke.readAsDataURL(M),ke.onload=()=>fe(ke.result),ke.onerror=Ye=>Me(Ye)}),vr=async M=>{const fe=Array.from(M.target.files||[]);for(const Me of fe)if(Me.size>10*1024*1024){alert(`File ${Me.name} is too large. Maximum size is 10MB.`),M.target.value="";return}D(Me=>[...Me,...fe]),M.target.value=""},as=M=>{D(fe=>fe.filter((Me,ke)=>ke!==M))},ks=()=>{!l||!c.trim()||(Ze.mutate({id:l,message:c.trim()}),setTimeout(()=>{var M;(M=re.current)==null||M.scrollIntoView({behavior:"smooth"})},100))},Yt=M=>new Date(M).toLocaleTimeString("en-AU",{hour:"2-digit",minute:"2-digit"}),Bs=M=>{if(!M)return null;const fe=new Date(M),ke=new Date().getTime()-fe.getTime(),Ye=Math.floor(ke/6e4);return Ye<1?"Just now":Ye===1?"1 min":`${Ye} mins`},jt=M=>{switch(M){case"urgent":case"critical":return s.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-red-100 text-red-700",children:M});case"high":return s.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-orange-100 text-orange-700",children:"high"});default:return null}},R=M=>{switch(M){case"angry":return s.jsx("span",{className:"text-xs",children:""});case"negative":return s.jsx("span",{className:"text-xs",children:""});case"positive":return s.jsx("span",{className:"text-xs",children:""});default:return null}},_e=M=>{switch(M){case"ai_resolved":return s.jsxs("span",{className:"text-xs px-2 py-0.5 rounded-full bg-green-100 text-green-700 flex items-center gap-1",children:[s.jsx(lt,{className:"w-3 h-3"})," AI Resolved"]});case"staff_resolved":return s.jsxs("span",{className:"text-xs px-2 py-0.5 rounded-full bg-blue-100 text-blue-700 flex items-center gap-1",children:[s.jsx(lt,{className:"w-3 h-3"})," Staff Resolved"]});case"inactive_closed":return s.jsxs("span",{className:"text-xs px-2 py-0.5 rounded-full bg-gray-100 text-gray-600 flex items-center gap-1",children:[s.jsx(xr,{className:"w-3 h-3"})," Inactive"]});default:return null}};return s.jsxs("div",{className:"h-[calc(100vh-4rem)] flex",children:[s.jsxs("div",{className:"w-80 border-r border-gray-200 bg-white flex flex-col",children:[s.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 bg-gray-50 flex-shrink-0",children:[s.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2 mb-2",children:[s.jsx(vt,{to:"/tickets",className:"p-1 rounded-lg hover:bg-gray-100 transition-colors",title:"Back to Tickets",children:s.jsx(di,{className:"w-5 h-5 text-gray-500"})}),s.jsxs("svg",{className:"w-5 h-5 text-indigo-600",fill:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H5.17L4 17.17V4h16v12z"}),s.jsx("path",{d:"M7 9h10v2H7zm0-3h10v2H7z"})]}),"Live Chats"]}),s.jsx("div",{className:"flex gap-1 mb-2",children:xg.map(M=>s.jsxs("button",{onClick:()=>{i(M.key),o(null)},className:`flex-1 flex flex-col items-center px-2 py-1.5 text-xs rounded-lg transition-colors ${a===M.key?"bg-indigo-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,title:M.description,children:[M.icon,s.jsx("span",{className:"mt-0.5",children:M.label}),Ce&&Ce[M.key]>0&&s.jsx("span",{className:`mt-0.5 px-1.5 py-0.5 text-xs rounded-full ${a===M.key?"bg-white/20 text-white":"bg-indigo-100 text-indigo-700"}`,children:Ce[M.key]})]},M.key))}),s.jsxs("select",{value:a==="staff"?G:"all",onChange:M=>Le(M.target.value),disabled:a!=="staff",className:`w-full h-7 text-xs border rounded-lg px-2 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 ${a==="staff"?"border-indigo-300 bg-white":"border-gray-200 bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:[s.jsx("option",{value:"all",children:"All Staff"}),Ns.filter(M=>M.id!=="ai-agent-001").map(M=>s.jsxs("option",{value:M.id,children:[M.first_name," ",M.last_name," (",M.availability_status==="online"?"Online":M.availability_status==="away"?"Away":"Offline",")"]},M.id))]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto",children:U?s.jsx("div",{className:"p-4 text-center text-gray-500",children:"Loading..."}):St.length===0?s.jsxs("div",{className:"p-4 text-center text-gray-500",children:[s.jsxs("div",{className:"text-gray-300 mb-2",children:[a==="ai"&&s.jsx(q4,{className:"w-8 h-8 mx-auto"}),a==="staff"&&s.jsx(Yl,{className:"w-8 h-8 mx-auto"}),a==="queued"&&s.jsx(yv,{className:"w-8 h-8 mx-auto"}),a==="closed"&&s.jsx(mv,{className:"w-8 h-8 mx-auto"})]}),G!=="all"?"No chats for selected staff member":`No ${(ze=xg.find(M=>M.key===a))==null?void 0:ze.label.toLowerCase()} chats`]}):St.map(M=>s.jsxs("div",{onClick:()=>o(M.id),className:`p-4 border-b border-gray-100 cursor-pointer hover:bg-gray-50 ${l===M.id?"bg-indigo-50 border-l-4 border-l-indigo-600":""}`,children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-full flex items-center justify-center",children:s.jsx(fn,{className:"w-4 h-4 text-indigo-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900 text-sm",children:M.customer_name}),s.jsx("p",{className:"text-xs text-gray-500",children:M.customer_email})]})]}),s.jsx("span",{className:"text-xs text-gray-400",children:Yt(M.last_message_at)})]}),s.jsx("p",{className:"mt-2 text-sm text-gray-600 truncate",children:M.last_message==="__SHOW_CALLBACK_FORM__"?"CALL BACK REQUEST":M.last_message||"No messages yet"}),s.jsxs("div",{className:"mt-2 flex items-center gap-2 flex-wrap",children:[jt(M.priority),R(M.sentiment),a==="ai"&&s.jsxs("span",{className:"text-xs px-2 py-0.5 rounded-full bg-purple-100 text-purple-700 flex items-center gap-1",children:[s.jsx(er,{className:"w-3 h-3"})," McCarthy AI"]}),a==="staff"&&M.assigned_staff_first_name&&s.jsxs("span",{className:"text-xs px-2 py-0.5 rounded-full bg-indigo-100 text-indigo-700",children:[" ",M.assigned_staff_first_name]}),a==="queued"&&s.jsxs("span",{className:"text-xs px-2 py-0.5 rounded-full bg-yellow-100 text-yellow-700 flex items-center gap-1",children:[s.jsx(wc,{className:"w-3 h-3"})," ",Bs(M.queue_entered_at)||"Waiting"]}),a==="closed"&&_e(M.resolution_type),s.jsxs("span",{className:"text-xs text-gray-400",children:[M.message_count," msgs"]})]})]},M.id))})]}),s.jsx("div",{className:"flex-1 flex flex-col bg-gray-50 overflow-hidden",children:l?Ee?s.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-500",children:"Loading conversation..."}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-white border-b border-gray-200 p-3 flex-shrink-0",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[($e=I==null?void 0:I.subject)!=null&&$e.toLowerCase().includes("callback request")?s.jsx(ga,{className:"w-4 h-4 text-red-600 fill-current"}):s.jsxs("svg",{className:"w-4 h-4 text-indigo-500",fill:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H5.17L4 17.17V4h16v12z"}),s.jsx("path",{d:"M7 9h10v2H7zm0-3h10v2H7z"})]}),I!=null&&I.ticket_number?s.jsx(vt,{to:`/tickets?search=${encodeURIComponent(I.ticket_number)}`,className:"text-base font-semibold text-blue-600 hover:text-blue-800 hover:underline",title:"View in All Tickets",children:I.ticket_number}):s.jsx("h1",{className:"text-base font-semibold text-gray-900",children:"Chat"})]}),s.jsx("button",{className:`px-1.5 py-0.5 rounded-lg text-xs border font-medium ${(I==null?void 0:I.status)==="ai_handling"?"bg-green-100 text-green-800 border-green-200":(I==null?void 0:I.status)==="staff_handling"||(I==null?void 0:I.status)==="assigned"?"bg-blue-100 text-blue-800 border-blue-200":(I==null?void 0:I.status)==="queued"?"bg-green-100 text-green-800 border-green-200":(I==null?void 0:I.status)==="closed"?"bg-gray-100 text-gray-800 border-gray-200":"bg-green-100 text-green-800 border-green-200"}`,children:(I==null?void 0:I.status)==="ai_handling"?"open":(I==null?void 0:I.status)==="staff_handling"||(I==null?void 0:I.status)==="assigned"?"in-progress":(I==null?void 0:I.status)==="queued"?"open":(I==null?void 0:I.status)==="closed"?"resolved":I==null?void 0:I.status}),s.jsx("span",{className:"inline-flex items-center rounded-md px-2 py-1 text-xs font-medium ring-1 ring-inset bg-blue-50 text-blue-700 ring-blue-600/20",children:(I==null?void 0:I.priority)||"normal"}),s.jsxs("span",{className:"inline-flex items-center rounded-md px-2 py-1 text-xs font-medium ring-1 ring-inset bg-gray-50 text-gray-600 ring-gray-500/20",children:[(I==null?void 0:I.sentiment)==="positive"?"":(I==null?void 0:I.sentiment)==="negative"?"":(I==null?void 0:I.sentiment)==="angry"?"":""," ",(I==null?void 0:I.sentiment)||"neutral"]})]}),s.jsx("button",{className:"text-xs px-2 py-1 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:(I==null?void 0:I.assigned_to)==="ai-agent-001"?"McCarthy AI":I!=null&&I.assigned_staff_first_name?`${I.assigned_staff_first_name} ${I.assigned_staff_last_name||""}`:"Unassigned"})]}),s.jsx("div",{className:"flex items-center justify-between mb-2",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("span",{className:"text-sm font-medium text-gray-900",children:(I==null?void 0:I.customer_name)||(I==null?void 0:I.customer_email)}),s.jsx("span",{className:"text-xs text-gray-500",children:(I==null?void 0:I.started_at)&&new Date(I.started_at).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})]})}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("p",{className:"text-sm text-gray-600 flex-1 truncate mr-4",children:[s.jsx("span",{className:"font-medium",children:"Subject:"})," Live Chat Conversation"]}),s.jsxs("div",{className:"flex items-center gap-1.5 flex-shrink-0",children:[(I==null?void 0:I.status)==="queued"&&s.jsxs("button",{onClick:()=>Re.mutate(l),disabled:Re.isPending,className:"text-xs px-2 py-1 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center gap-1 disabled:opacity-50",children:[s.jsx(Ml,{className:"w-3 h-3"}),s.jsx("span",{children:"Pick Up"})]}),(I==null?void 0:I.status)==="ai_handling"&&(I==null?void 0:I.assigned_to)==="ai-agent-001"&&s.jsxs("button",{onClick:()=>Ne.mutate(l),disabled:Ne.isPending,className:"text-xs px-2 py-1 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center gap-1 disabled:opacity-50",children:[s.jsx(Ml,{className:"w-3 h-3"}),s.jsx("span",{children:"Take Over"})]}),s.jsxs("button",{onClick:()=>j(!0),className:"text-xs px-2 py-1 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center gap-1",children:[s.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),s.jsx("span",{children:"Reassign"})]}),(I==null?void 0:I.status)!=="closed"&&s.jsxs("button",{onClick:()=>h(!0),className:"text-xs px-2 py-1 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center gap-1",children:[s.jsx(lt,{className:"w-3 h-3"}),s.jsx("span",{children:"Close Chat"})]})]})]})]}),s.jsxs("div",{className:"px-4 py-3 bg-white border-b border-gray-200 flex items-center justify-between flex-shrink-0",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("button",{onClick:()=>Y(!T),className:"h-7 text-xs px-2 py-1 bg-white border border-indigo-200 rounded-lg hover:bg-indigo-50 transition-colors flex items-center justify-center space-x-1",children:[s.jsx(fn,{className:"w-3 h-3"}),s.jsx("span",{children:"Customer Info"})]}),s.jsxs("button",{onClick:()=>X(!J),className:"h-7 text-xs px-2 py-1 bg-white border border-indigo-200 rounded-lg hover:bg-indigo-50 transition-colors flex items-center justify-center space-x-1",children:[s.jsx(wc,{className:"w-3 h-3"}),s.jsx("span",{children:"Order History"})]}),s.jsxs("button",{onClick:()=>Oe(!he),className:`h-7 text-xs px-2 py-1 border rounded-lg hover:opacity-80 transition-colors flex items-center justify-center space-x-1 font-medium ${he?"bg-green-600 text-white border-green-700":"bg-white text-green-700 border-green-300"}`,children:[s.jsx(lt,{className:"w-3 h-3"}),s.jsx("span",{children:"Shopify"})]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("button",{onClick:Gt,disabled:!ge,className:`p-1 border border-gray-200 rounded ${ge?"text-gray-400 hover:text-gray-600 hover:bg-gray-50":"text-gray-200 cursor-not-allowed"}`,children:s.jsx(di,{className:"w-4 h-4"})}),s.jsx("button",{onClick:nr,disabled:!Hs,className:`p-1 border border-gray-200 rounded ${Hs?"text-gray-400 hover:text-gray-600 hover:bg-gray-50":"text-gray-200 cursor-not-allowed"}`,children:s.jsx(Vl,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto",style:{minHeight:0},children:[T&&s.jsx("div",{className:"p-3 bg-blue-50 border-b border-blue-100 flex-shrink-0",children:s.jsxs("div",{className:"bg-white rounded-lg p-3 text-xs",children:[s.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Customer Profile"}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Name:"}),s.jsx("span",{className:"ml-2 font-medium",children:I==null?void 0:I.customer_name})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"VIP:"}),s.jsx("span",{className:"ml-2 font-medium text-amber-600",children:"No"})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx("span",{className:"text-gray-500",children:"Email:"}),s.jsx("span",{className:"ml-2 font-medium",children:I==null?void 0:I.customer_email})]})]})]})}),J&&s.jsx("div",{className:"p-3 bg-green-50 border-b border-green-100 flex-shrink-0",children:s.jsxs("div",{className:"bg-white rounded-lg p-3",children:[s.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-xs",children:"Order History"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Order history will be loaded from Shopify"})]})}),s.jsxs("div",{className:"p-4 space-y-4 bg-gray-50",children:[ce.map(M=>{const fe=M.sender_type==="customer",Me=M.sender_type==="system",ke=M.sender_type==="ai";if(Me){const Ye=M.content==="__SHOW_CALLBACK_FORM__"?"CALL BACK REQUEST":M.content;return s.jsx("div",{className:"py-3 text-center",children:s.jsx("span",{className:"inline-block px-3 py-1 text-xs text-gray-500 bg-gray-100 rounded-full",children:Ye})},M.id)}return s.jsxs("div",{className:`p-4 rounded-lg ${fe?"bg-gray-100":ke?"bg-purple-50":"bg-blue-50"}`,children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center ${fe?"bg-gray-300":ke?"bg-purple-200":"bg-blue-200"}`,children:fe?s.jsx(fn,{className:"w-3 h-3 text-gray-600"}):ke?s.jsx(er,{className:"w-3 h-3 text-purple-600"}):s.jsx(fn,{className:"w-3 h-3 text-blue-600"})}),s.jsx("span",{className:"font-medium text-sm text-gray-900",children:M.sender_name||(fe?I==null?void 0:I.customer_name:ke?"McCarthy AI":"Staff")}),s.jsx("span",{className:"text-xs text-gray-400",children:M.created_at&&hr(new Date(M.created_at),{addSuffix:!0})})]}),s.jsx("div",{className:"text-sm text-gray-700 whitespace-pre-wrap ml-8",children:M.content})]},M.id)}),s.jsx("div",{ref:re})]})]}),(a==="staff"||a==="ai"&&(I==null?void 0:I.assigned_to)!=="ai-agent-001")&&(I==null?void 0:I.status)!=="closed"&&s.jsx("div",{className:"flex-shrink-0 bg-gray-50 border-t border-gray-200 p-4",children:s.jsxs("div",{className:"flex gap-3",children:[s.jsx("textarea",{value:c,onChange:M=>d(M.target.value),onKeyDown:M=>{M.key==="Enter"&&!M.shiftKey&&(M.preventDefault(),ks())},placeholder:"Type your reply... (Press Enter to send, Shift+Enter for new line)",className:"flex-1 border border-gray-300 rounded-lg px-4 py-3 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 resize-none bg-white",rows:3}),s.jsxs("button",{onClick:ks,disabled:!c.trim()||Ze.isPending,className:"px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 font-medium transition-colors self-end",children:[s.jsx(rd,{className:"w-4 h-4"}),"Send"]})]})}),(I==null?void 0:I.status)==="closed"&&s.jsxs("div",{className:"flex-shrink-0 bg-gray-100 border-t border-gray-200 p-4 text-center text-gray-500",children:[s.jsx(lt,{className:"w-5 h-5 inline-block mr-2"}),s.jsx("span",{className:"text-sm",children:"This chat has been closed"})]}),s.jsxs("div",{className:"border-t border-gray-200 bg-white flex-shrink-0",children:[x&&s.jsx("div",{className:"h-1 bg-gray-200 hover:bg-yellow-400 cursor-ns-resize transition-colors flex-shrink-0 relative group",onMouseDown:()=>je(!0),children:s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:s.jsx("div",{className:"w-12 h-1 bg-gray-400 rounded-full group-hover:bg-yellow-500 transition-colors"})})}),s.jsxs("div",{className:"px-4 py-2.5 bg-gradient-to-r from-yellow-50 to-yellow-100 border-b border-yellow-200 flex items-center gap-2 cursor-pointer hover:from-yellow-100 hover:to-yellow-150 transition-colors",onClick:()=>b(!x),children:[s.jsx("svg",{className:"w-4 h-4 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),s.jsx("h3",{className:"text-sm font-semibold text-gray-800",children:" Staff Notes (Internal Only)"}),s.jsx("span",{className:"text-xs text-gray-500 bg-white px-2 py-0.5 rounded border border-gray-300",children:"Ctrl+Y"})]}),x&&s.jsxs("div",{className:"flex flex-col bg-yellow-50",style:{height:`${E}px`},children:[le&&le.length>0&&s.jsx("div",{className:"p-4 space-y-2 overflow-y-auto flex-shrink-0",style:{maxHeight:"60%"},children:le.map(M=>{var fe;return s.jsxs("div",{className:"bg-yellow-100 rounded-lg p-3 border border-yellow-200",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-xs font-medium text-gray-800",children:M.first_name||"Staff"}),s.jsx("span",{className:"text-xs text-gray-500",children:M.created_at&&typeof M.created_at=="string"?hr(new Date(M.created_at.includes("Z")?M.created_at:M.created_at+"Z"),{addSuffix:!0}):""}),M.edited_at&&s.jsx("span",{className:"text-xs text-gray-400 italic",children:"(edited)"})]}),s.jsx("div",{className:"flex items-center gap-2",children:(M.staff_id===(e==null?void 0:e.id)||(e==null?void 0:e.role)==="admin")&&P!==M.id&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>{ee(M.id),Q(M.content)},className:"text-xs px-2 py-1 text-gray-600 hover:text-blue-600 hover:bg-white rounded transition-colors",title:"Edit note",children:"Edit"}),s.jsx("button",{onClick:()=>ne(M.id),className:"text-xs px-2 py-1 text-gray-600 hover:text-red-600 hover:bg-white rounded transition-colors",title:"Delete note",children:"Delete"})]})})]}),P===M.id?s.jsxs("div",{className:"space-y-2",children:[s.jsx("textarea",{value:H,onChange:Me=>Q(Me.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",rows:3}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:async()=>{var Me,ke;if(!(!(A!=null&&A.ticket)||!H.trim()))try{await De.editNote(A.ticket.ticket_id,M.id,H),ee(null),Q(""),t.invalidateQueries({queryKey:["ticket-notes",I==null?void 0:I.ticket_id]})}catch(Ye){console.error("Failed to edit note:",Ye),alert(`Failed to edit note: ${((ke=(Me=Ye.response)==null?void 0:Me.data)==null?void 0:ke.error)||Ye.message||"Unknown error"}`)}},className:"text-xs px-3 py-1 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Save"}),s.jsx("button",{onClick:()=>{ee(null),Q("")},className:"text-xs px-3 py-1 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300",children:"Cancel"})]})]}):s.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:M.content}),M.tags&&s.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:Jl(M.tags).map((Me,ke)=>s.jsxs(vt,{to:`/tags?search=${encodeURIComponent(Me)}`,className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 hover:bg-blue-200",children:[s.jsx($t,{className:"w-3 h-3 mr-1"}),Me]},ke))}),M.attachment_url&&s.jsx("div",{className:"mt-2",children:(fe=M.attachment_type)!=null&&fe.startsWith("image/")?s.jsxs("a",{href:Gd(M.attachment_url),target:"_blank",rel:"noopener noreferrer",className:"block",children:[s.jsx("img",{src:Gd(M.attachment_url),alt:M.attachment_name||"Attachment",className:"max-w-xs rounded border border-yellow-300 hover:opacity-90 transition-opacity cursor-pointer"}),s.jsx("span",{className:"text-xs text-gray-600 mt-1 block",children:M.attachment_name})]}):s.jsxs("a",{href:Gd(M.attachment_url),download:M.attachment_name||"file",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-3 py-2 bg-white border border-yellow-300 rounded-lg hover:bg-yellow-50 text-sm",children:[s.jsx(Ct,{className:"w-4 h-4"}),s.jsx("span",{children:M.attachment_name}),s.jsxs("span",{className:"text-xs text-gray-500",children:["(",(M.attachment_size/1024).toFixed(1)," KB)"]})]})})]},M.id)})}),ae&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Delete Note?"}),s.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Are you sure you want to delete this note? This action cannot be undone."}),s.jsxs("div",{className:"flex items-center gap-3 justify-end",children:[s.jsx("button",{onClick:()=>ne(null),className:"px-4 py-2 text-sm bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300",children:"Cancel"}),s.jsx("button",{onClick:async()=>{var M,fe;if(A!=null&&A.ticket)try{await De.deleteNote(A.ticket.ticket_id,ae),ne(null),t.invalidateQueries({queryKey:["ticket-notes",I==null?void 0:I.ticket_id]})}catch(Me){console.error("Failed to delete note:",Me),alert(`Failed to delete note: ${((fe=(M=Me.response)==null?void 0:M.data)==null?void 0:fe.error)||Me.message||"Unknown error"}`)}},className:"px-4 py-2 text-sm bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Delete"})]})]})}),s.jsxs("div",{className:"p-4 flex-1 flex flex-col min-h-0 border-t border-yellow-200",children:[Se.length>0&&s.jsx("div",{className:"mb-2 flex flex-wrap gap-2",children:Se.map((M,fe)=>s.jsxs("div",{className:"flex items-center gap-1 bg-white border border-yellow-300 rounded px-2 py-1 text-xs",children:[s.jsx(Ct,{className:"w-3 h-3"}),s.jsx("span",{className:"max-w-[150px] truncate",children:M.name}),s.jsx("button",{onClick:()=>as(fe),className:"text-red-500 hover:text-red-700",children:s.jsx(Rt,{className:"w-3 h-3"})})]},fe))}),s.jsx("textarea",{value:w,onChange:M=>N(M.target.value),onKeyDown:async M=>{var fe,Me;if(M.key==="Enter"&&!M.shiftKey){M.preventDefault();const ke=M.currentTarget.value.trim();if(ke&&I){console.log("[DASHBOARD STAFF NOTES] Submitting note:",ke);try{const Ye=await Promise.all(Se.map(async Jt=>({name:Jt.name,content:await bt(Jt),type:Jt.type,size:Jt.size})));await De.addNote(I.ticket_id,ke,void 0,Ye.length>0?Ye:void 0),N(""),D([]),te(),console.log("[DASHBOARD STAFF NOTES] Note saved successfully")}catch(Ye){console.error("Failed to add note:",Ye),alert(`Failed to add note: ${((Me=(fe=Ye.response)==null?void 0:fe.data)==null?void 0:Me.error)||Ye.message||"Unknown error"}`)}}}},placeholder:"Add internal notes for other staff members... (Press Enter to save, Shift+Enter for new line)",className:"w-full flex-1 border border-yellow-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:border-yellow-500 resize-none bg-white min-h-0"}),s.jsx("input",{type:"file",ref:V,onChange:vr,className:"hidden",multiple:!0,accept:"image/*,.pdf,.doc,.docx,.txt,.xls,.xlsx"}),s.jsxs("button",{onClick:()=>{var M;return(M=V.current)==null?void 0:M.click()},className:"mt-2 text-xs px-3 py-1.5 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 self-start flex-shrink-0 flex items-center gap-1",children:[s.jsx(Ct,{className:"w-3 h-3"}),"Attach File"]})]})]})]})]}):s.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-500",children:s.jsxs("div",{className:"text-center",children:[s.jsxs("svg",{className:"w-12 h-12 mx-auto text-gray-300 mb-3",fill:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H5.17L4 17.17V4h16v12z"}),s.jsx("path",{d:"M7 9h10v2H7zm0-3h10v2H7z"})]}),s.jsx("p",{children:"Select a conversation to view"})]})})}),s.jsx("div",{className:`bg-white border-l border-gray-200 transition-all duration-300 ease-in-out overflow-y-auto ${he?"w-96":"w-0"}`,children:he&&I&&s.jsxs("div",{className:"p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4 pb-3 border-b border-gray-200",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(lt,{className:"w-5 h-5 text-green-600"}),s.jsx("h2",{className:"text-base font-semibold text-gray-900",children:"Shopify"})]}),s.jsx("button",{onClick:()=>Oe(!1),className:"text-gray-400 hover:text-gray-600",children:s.jsx(xr,{className:"w-5 h-5"})})]}),Te&&s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx("div",{className:"text-sm text-gray-500",children:"Loading Shopify data..."})}),Ae&&Ae.customer&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase mb-3",children:"CUSTOMER"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[Ae.customer.firstName," ",Ae.customer.lastName]}),s.jsx("p",{className:"text-xs text-gray-500",children:Ae.customer.email}),Ae.customer.phone&&s.jsx("p",{className:"text-xs text-gray-500",children:Ae.customer.phone}),Ae.customer.isVIP&&s.jsx("span",{className:"inline-flex items-center mt-1 text-xs px-2 py-0.5 bg-amber-100 text-amber-800 rounded-full font-medium",children:" VIP Customer"})]}),s.jsxs("div",{className:"pt-2 border-t border-gray-100",children:[s.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[s.jsx("span",{className:"text-gray-500",children:"Total Spent:"}),s.jsxs("span",{className:"font-semibold text-indigo-600",children:["$",((rt=Ae.customer.totalSpent)==null?void 0:rt.toLocaleString("en-US",{minimumFractionDigits:2}))||"0.00"]})]}),s.jsxs("div",{className:"flex justify-between text-xs",children:[s.jsx("span",{className:"text-gray-500",children:"Total Orders:"}),s.jsx("span",{className:"font-semibold text-gray-900",children:Ae.customer.ordersCount||0})]}),Ae.customer.lastOrderDate&&s.jsxs("div",{className:"flex justify-between text-xs mt-1",children:[s.jsx("span",{className:"text-gray-500",children:"Last Order:"}),s.jsx("span",{className:"text-gray-900",children:new Date(Ae.customer.lastOrderDate).toLocaleDateString()})]})]})]})]}),Ae.orders&&Ae.orders.length>0?s.jsxs("div",{className:"mb-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("h3",{className:"text-xs font-semibold text-gray-500 uppercase",children:["ORDER ",z+1," OF ",Ae.orders.length]}),Ae.orders.length>1&&s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("button",{onClick:()=>_(Math.max(0,z-1)),disabled:z===0,className:"p-1 rounded hover:bg-gray-200 disabled:opacity-30 disabled:cursor-not-allowed transition-colors",title:"Previous order",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),s.jsx("button",{onClick:()=>_(Math.min(Ae.orders.length-1,z+1)),disabled:z===Ae.orders.length-1,className:"p-1 rounded hover:bg-gray-200 disabled:opacity-30 disabled:cursor-not-allowed transition-colors",title:"Next order",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 space-y-2",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:["Order ",Ae.orders[z].orderNumber]}),s.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[s.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full font-medium ${Ae.orders[z].fulfillmentStatus==="fulfilled"?"bg-green-100 text-green-800":Ae.orders[z].fulfillmentStatus==="partial"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:Ae.orders[z].fulfillmentStatus||"Unfulfilled"}),s.jsxs("span",{className:"text-xs text-gray-500",children:["Total: ",s.jsxs("span",{className:"font-semibold text-gray-900",children:["$",(Ut=Ae.orders[z].totalPrice)==null?void 0:Ut.toFixed(2)," ",Ae.orders[z].currency]})]})]})]}),s.jsxs("div",{className:"pt-2 border-t border-gray-200 space-y-1",children:[s.jsxs("div",{className:"flex justify-between text-xs",children:[s.jsx("span",{className:"text-gray-500",children:"Created:"}),s.jsx("span",{className:"text-gray-900",children:new Date(Ae.orders[z].createdAt).toLocaleDateString()})]}),s.jsxs("div",{className:"flex justify-between text-xs",children:[s.jsx("span",{className:"text-gray-500",children:"Payment:"}),s.jsx("span",{className:`font-medium ${Ae.orders[z].financialStatus==="paid"?"text-green-600":"text-yellow-600"}`,children:Ae.orders[z].financialStatus||"Pending"})]})]}),Ae.orders[z].lineItems&&Ae.orders[z].lineItems.length>0&&s.jsxs("div",{className:"pt-2 border-t border-gray-200",children:[s.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Items:"}),s.jsx("div",{className:"space-y-2",children:Ae.orders[z].lineItems.map((M,fe)=>{var Me;return s.jsxs("div",{className:"border border-gray-200 rounded-md overflow-hidden",children:[s.jsxs("button",{onClick:()=>W(B===M.id?null:M.id),className:"w-full text-left px-2 py-1.5 hover:bg-gray-50 transition-colors flex justify-between items-center",children:[s.jsx("span",{className:"text-xs text-gray-700 truncate flex-1",children:M.title}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("span",{className:"text-xs text-gray-500",children:["x",M.quantity]}),s.jsx("svg",{className:`w-3 h-3 text-gray-400 transition-transform ${B===M.id?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),B===M.id&&s.jsxs("div",{className:"px-2 py-2 bg-gray-50 border-t border-gray-200 text-xs space-y-1.5",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-500",children:"Price:"}),s.jsxs("span",{className:"text-gray-900 font-medium",children:["$",(Me=M.price)==null?void 0:Me.toFixed(2)]})]}),M.sku&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-500",children:"SKU:"}),s.jsx("span",{className:"text-gray-900 font-mono",children:M.sku})]}),M.variantTitle&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-500",children:"Variant:"}),s.jsx("span",{className:"text-gray-900",children:M.variantTitle})]}),M.customAttributes&&M.customAttributes.length>0&&s.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-200",children:[s.jsx("p",{className:"text-gray-500 font-medium mb-1.5",children:"Product Details:"}),M.customAttributes.map((ke,Ye)=>s.jsxs("div",{className:"flex justify-between py-0.5",children:[s.jsxs("span",{className:"text-gray-500",children:[ke.key.replace("_",""),":"]}),ke.key.includes("Link")||ke.key.includes("link")?s.jsx("a",{href:ke.value,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-700 underline truncate max-w-[180px]",onClick:Jt=>Jt.stopPropagation(),children:"View "}):s.jsx("span",{className:"text-gray-900 font-mono text-right truncate max-w-[180px]",children:ke.value})]},Ye))]})]})]},M.id||fe)})})]})]})]}):s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase mb-3",children:"ORDERS"}),s.jsx("div",{className:"bg-gray-50 rounded-lg p-3",children:s.jsx("p",{className:"text-sm text-gray-500",children:"No orders found"})})]}),Ae.orders&&((K=Ae.orders[z])==null?void 0:K.trackingNumber)&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase mb-3",children:"FULFILLMENT & TRACKING"}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 space-y-2",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Tracking:"}),s.jsx("p",{className:"text-sm font-mono font-semibold text-gray-900",children:Ae.orders[z].trackingNumber}),Ae.orders[z].trackingCompany&&s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Carrier: ",s.jsx("span",{className:"text-gray-900",children:Ae.orders[z].trackingCompany})]})]}),Ae.orders[z].trackingUrl&&s.jsx("a",{href:Ae.orders[z].trackingUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center text-xs text-green-600 hover:text-green-700 font-medium",children:"Track Package "})]})]})]})]})}),m&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 w-96",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Close Chat"}),s.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"How would you like to close this chat?"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("button",{onClick:()=>tt.mutate({id:l,resolutionType:"resolved"}),disabled:tt.isPending,className:"w-full flex items-center gap-3 p-3 border-2 border-green-200 rounded-lg hover:bg-green-50 transition-colors",children:[s.jsx(lt,{className:"w-6 h-6 text-green-600"}),s.jsxs("div",{className:"text-left",children:[s.jsx("p",{className:"font-medium text-gray-900",children:"Mark as Resolved"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Customer's issue was solved"})]})]}),s.jsxs("button",{onClick:()=>tt.mutate({id:l,resolutionType:"closed"}),disabled:tt.isPending,className:"w-full flex items-center gap-3 p-3 border-2 border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsx(xr,{className:"w-6 h-6 text-gray-500"}),s.jsxs("div",{className:"text-left",children:[s.jsx("p",{className:"font-medium text-gray-900",children:"Close as Inactive"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Customer stopped responding"})]})]})]}),s.jsx("button",{onClick:()=>h(!1),className:"w-full mt-4 px-4 py-2 text-sm text-gray-600 hover:text-gray-800",children:"Cancel"})]})}),p&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4 max-h-[90vh] flex flex-col",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200 flex-shrink-0",children:s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Reassign Chat"})}),s.jsxs("div",{className:"px-6 py-4 overflow-y-auto flex-1",children:[s.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Reassign this chat to another staff member:"}),Ns.filter(M=>M.availability_status==="online").length===1&&s.jsx("div",{className:"mb-4 p-3 bg-amber-50 border border-amber-200 rounded-lg",children:s.jsx("p",{className:"text-sm text-amber-800",children:" You're the only staff member online"})}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("label",{className:`flex items-center p-3 border rounded-lg transition-colors cursor-pointer hover:bg-gray-50 ${f==="ai-agent-001"?"border-indigo-500 bg-indigo-50":"border-gray-300"}`,children:[s.jsx("input",{type:"radio",name:"staff",value:"ai-agent-001",checked:f==="ai-agent-001",onChange:M=>g(M.target.value),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 flex-shrink-0 mr-3"}),s.jsx("div",{className:"w-2 h-2 rounded-full mr-3 bg-purple-500"}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("p",{className:"text-sm font-medium text-gray-900 flex items-center gap-1.5",children:[s.jsx(er,{className:"w-4 h-4 text-purple-600"}),"McCarthy AI"]}),s.jsx("p",{className:"text-xs text-gray-500",children:"Return to McCarthy AI"})]})]}),Ns.filter(M=>M.id!=="ai-agent-001").map(M=>s.jsxs("label",{className:`flex items-center p-3 border rounded-lg transition-colors cursor-pointer hover:bg-gray-50 ${f===M.id?"border-indigo-500 bg-indigo-50":"border-gray-300"}`,children:[s.jsx("input",{type:"radio",name:"staff",value:M.id,checked:f===M.id,onChange:fe=>g(fe.target.value),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 flex-shrink-0 mr-3"}),s.jsx("div",{className:`w-2 h-2 rounded-full mr-3 ${M.availability_status==="online"?"bg-green-500":M.availability_status==="away"?"bg-yellow-500":"bg-gray-400"}`}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[M.first_name," ",M.last_name]}),s.jsx("p",{className:"text-xs text-gray-500 capitalize",children:M.availability_status||"Offline"})]})]},M.id))]}),s.jsxs("div",{className:"mt-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reason (optional)"}),s.jsx("textarea",{value:y,onChange:M=>v(M.target.value),placeholder:"e.g., Sales inquiry, needs technical support...",rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm"})]})]}),s.jsxs("div",{className:"px-6 py-4 bg-gray-50 rounded-b-lg flex justify-end gap-3 border-t border-gray-200 flex-shrink-0",children:[s.jsx("button",{onClick:()=>{j(!1),g(""),v("")},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),s.jsx("button",{onClick:()=>{f&&l&&ct.mutate({id:l,assignTo:f,reason:y||void 0})},disabled:!f||ct.isPending,className:"flex-1 px-4 py-2 text-sm text-white bg-indigo-600 rounded-lg hover:bg-indigo-700 disabled:opacity-50",children:ct.isPending?"Reassigning...":"Reassign"})]})]})})]})}const o6={"in-progress":"bg-blue-100 text-blue-800 border-blue-200"},pg={low:"bg-gray-50 text-gray-700 ring-gray-600/20",normal:"bg-blue-50 text-blue-700 ring-blue-600/20",high:"bg-orange-50 text-orange-700 ring-orange-600/20",critical:"bg-red-50 text-red-700 ring-red-600/20",urgent:"bg-red-100 text-red-800 ring-red-700/30"},yg={positive:"bg-green-50 text-green-700 ring-green-600/20",neutral:"bg-gray-50 text-gray-600 ring-gray-500/20",negative:"bg-orange-50 text-orange-700 ring-orange-600/20",angry:"bg-red-50 text-red-700 ring-red-600/20"},c6={positive:"",neutral:"",negative:"",angry:""},d6={"00000000-0000-0000-0000-000000000001":"John Hutchison","00000000-0000-0000-0000-000000000002":"Ted Smith","00000000-0000-0000-0000-000000000003":"Sam Johnson","ai-agent-001":"McCarthy AI"},Kr={getConversationByTicket:async e=>(await $.get(`/api/chat/conversation/by-ticket/${e}`)).data,getConversation:async e=>(await $.get(`/api/chat/conversation/${e}`)).data,takeoverConversation:async e=>(await $.post(`/api/chat/conversation/${e}/takeover`)).data,replyToConversation:async(e,t)=>(await $.post(`/api/chat/conversation/${e}/reply`,{message:t})).data,closeConversation:async(e,t)=>(await $.post(`/api/chat/conversation/${e}/close`,{resolution_type:t})).data,pickupFromQueue:async e=>(await $.post(`/api/chat/conversation/${e}/pickup`)).data,reassignConversation:async(e,t,r)=>(await $.post(`/api/chat/conversation/${e}/reassign`,{assignTo:t,reason:r})).data,getStaffList:async()=>(await $.get("/api/staff")).data},wa=e=>e?e.startsWith("data:")||e.startsWith("http")?e:`https://dartmouth-os-worker.dartmouth.workers.dev/api/attachments/${e}`:"";function u6(){var ks,Yt,Bs,jt;const{id:e}=ly(),t=yr(),r=ut(),[n]=zl(),{user:a}=Rs(),[i,l]=u.useState(!1),[o,c]=u.useState(!1),[d,m]=u.useState(!1),[h,p]=u.useState(0),[j,f]=u.useState(null),[g,y]=u.useState(""),[v,x]=u.useState(!1),[b,w]=u.useState(""),[N,E]=u.useState(250),[L,P]=u.useState(null),[ee,H]=u.useState(""),[Q,ae]=u.useState(null),[ne,ve]=u.useState(!1),[je,Se]=u.useState(!1),[D,T]=u.useState([]),[Y,J]=u.useState(!1),[X,he]=u.useState(""),[Oe,G]=u.useState(""),Le=u.useRef(null),z=u.useRef(null),{data:_,isLoading:B}=me({queryKey:["ticket",e],queryFn:async()=>(await De.get(e)).data,enabled:!!e}),{data:W,isLoading:V}=me({queryKey:["chat-conversation-by-ticket",e],queryFn:async()=>{const R=await Kr.getConversationByTicket(e);return R.conversation?await Kr.getConversation(R.conversation.id):null},enabled:!!e,refetchInterval:3e3}),{data:re}=me({queryKey:["tickets"],queryFn:async()=>(await De.list()).data}),{data:de}=me({queryKey:["staff-list"],queryFn:()=>Kr.getStaffList(),enabled:Y}),U=(de==null?void 0:de.staff)||[],{data:Ce,refetch:Ge}=me({queryKey:["ticket-notes",e],queryFn:async()=>(await De.get(e)).data,enabled:!!e}),Ee=_==null?void 0:_.ticket,ce=W==null?void 0:W.conversation,I=(W==null?void 0:W.messages)||[],Ae=(Ce==null?void 0:Ce.notes)||[],{data:Te,isLoading:A}=me({queryKey:["shopify-data",Ee==null?void 0:Ee.customer_email],queryFn:async()=>Ee!=null&&Ee.customer_email?(await $.get(`/api/shopify/ticket-data?email=${encodeURIComponent(Ee.customer_email)}`)).data:null,enabled:!!(Ee!=null&&Ee.customer_email)&&d});let te=(re==null?void 0:re.tickets)||[];const le=n.get("filter"),Ne=n.get("from");le==="my"||Ne==="my"?te=te.filter(R=>R.assigned_to==="00000000-0000-0000-0000-000000000001"):le==="vip"||Ne==="vip"?te=te.filter(R=>R.vip===1):Ne&&(te=te.filter(R=>R.assigned_to===Ne));const Re=te.findIndex(R=>R.ticket_id===e),Ze=Re>0,tt=Re>=0&&Re<te.length-1,ct=()=>{if(Ze){const R=te[Re-1],_e=new URLSearchParams(n);R.channel==="chat"?t(`/chat-ticket/${R.ticket_id}?${_e.toString()}`):t(`/tickets/${R.ticket_id}?${_e.toString()}`)}},zt=()=>{if(tt){const R=te[Re+1],_e=new URLSearchParams(n);R.channel==="chat"?t(`/chat-ticket/${R.ticket_id}?${_e.toString()}`):t(`/tickets/${R.ticket_id}?${_e.toString()}`)}},Ns=we({mutationFn:()=>Kr.takeoverConversation(ce.id),onSuccess:()=>{r.invalidateQueries({queryKey:["chat-conversation-by-ticket"]})}}),ns=we({mutationFn:()=>Kr.pickupFromQueue(ce.id),onSuccess:()=>{r.invalidateQueries({queryKey:["chat-conversation-by-ticket"]})}}),St=we({mutationFn:R=>Kr.replyToConversation(ce.id,R),onSuccess:()=>{y(""),r.invalidateQueries({queryKey:["chat-conversation-by-ticket"]})}}),Gt=we({mutationFn:R=>Kr.closeConversation(ce.id,R),onSuccess:()=>{Se(!1),r.invalidateQueries({queryKey:["chat-conversation-by-ticket"]}),r.invalidateQueries({queryKey:["tickets"]})}}),nr=we({mutationFn:({assignTo:R,reason:_e})=>Kr.reassignConversation(ce.id,R,_e),onSuccess:()=>{J(!1),he(""),G(""),r.invalidateQueries({queryKey:["chat-conversation-by-ticket"]})}}),Ps=()=>{!g.trim()||!ce||(St.mutate(g.trim()),setTimeout(()=>{var R;(R=z.current)==null||R.scrollIntoView({behavior:"smooth"})},100))};u.useEffect(()=>{p(0)},[e,d]),u.useEffect(()=>{const R=_e=>{(_e.ctrlKey||_e.metaKey)&&_e.key==="y"&&(_e.preventDefault(),x(ze=>!ze))};return window.addEventListener("keydown",R),()=>window.removeEventListener("keydown",R)},[]);const ge=R=>new Promise((_e,ze)=>{const $e=new FileReader;$e.readAsDataURL(R),$e.onload=()=>_e($e.result),$e.onerror=rt=>ze(rt)}),Hs=async R=>{const _e=Array.from(R.target.files||[]);for(const ze of _e)if(ze.size>10*1024*1024){alert(`File ${ze.name} is too large. Maximum size is 10MB.`),R.target.value="";return}T(ze=>[...ze,..._e]),R.target.value=""},bt=R=>{T(_e=>_e.filter((ze,$e)=>$e!==R))};if(u.useEffect(()=>{const R=ze=>{if(!ne)return;const $e=N+(window.innerHeight-ze.clientY-N),rt=150,Ut=window.innerHeight*.6;$e>=rt&&$e<=Ut&&E($e)},_e=()=>{ve(!1),document.body.style.cursor="default",document.body.style.userSelect="auto"};return ne&&(document.body.style.cursor="ns-resize",document.body.style.userSelect="none",window.addEventListener("mousemove",R),window.addEventListener("mouseup",_e)),()=>{window.removeEventListener("mousemove",R),window.removeEventListener("mouseup",_e)}},[ne,N]),B||V)return s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})});if(!Ee)return s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"text-gray-500",children:"Ticket not found"})});const as=ce&&(ce.status==="staff_handling"||ce.status==="assigned"||ce.status==="ai_handling"&&ce.assigned_to!=="ai-agent-001");return s.jsxs("div",{className:"flex h-[calc(100vh-4rem)] bg-gray-50",children:[s.jsxs("div",{className:"flex flex-col flex-1 overflow-hidden",children:[s.jsxs("div",{className:"bg-white border-b border-gray-200 p-3 flex-shrink-0",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(vt,{to:"/tickets",className:"text-gray-400 hover:text-gray-600",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),s.jsxs("div",{className:"flex items-center gap-2",children:[(ks=Ee.subject)!=null&&ks.toLowerCase().includes("callback request")?s.jsx(ga,{className:"w-4 h-4 text-red-600 fill-current"}):s.jsxs("svg",{className:"w-4 h-4 text-indigo-500",fill:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H5.17L4 17.17V4h16v12z"}),s.jsx("path",{d:"M7 9h10v2H7zm0-3h10v2H7z"})]}),s.jsx(vt,{to:`/tickets?search=${encodeURIComponent(Ee.ticket_number)}`,className:"text-base font-semibold text-blue-600 hover:text-blue-800 hover:underline",title:"View in All Tickets",children:Ee.ticket_number})]}),Ee.vip===1&&s.jsx("span",{className:"px-1.5 py-0.5 bg-yellow-100 text-yellow-800 rounded-lg text-xs border border-yellow-200 font-medium",children:" VIP"}),s.jsx("button",{className:`px-1.5 py-0.5 rounded-lg text-xs border font-medium ${o6["in-progress"]}`,children:(ce==null?void 0:ce.status)==="ai_handling"?"open":(ce==null?void 0:ce.status)==="staff_handling"||(ce==null?void 0:ce.status)==="assigned"?"in-progress":(ce==null?void 0:ce.status)==="queued"?"open":(ce==null?void 0:ce.status)==="closed"?"resolved":Ee.status}),s.jsx("span",{className:`inline-flex items-center rounded-md px-2 py-1 text-xs font-medium ring-1 ring-inset ${pg[Ee.priority]||pg.normal}`,children:Ee.priority}),s.jsxs("span",{className:`inline-flex items-center rounded-md px-2 py-1 text-xs font-medium ring-1 ring-inset ${yg[Ee.sentiment]||yg.neutral}`,children:[c6[Ee.sentiment]||""," ",Ee.sentiment||"neutral"]})]}),s.jsx("button",{className:"text-xs px-2 py-1 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:(ce==null?void 0:ce.assigned_to)==="ai-agent-001"?"McCarthy AI":ce!=null&&ce.assigned_staff_first_name?`${ce.assigned_staff_first_name} ${ce.assigned_staff_last_name||""}`:Ee.assigned_to?d6[Ee.assigned_to]||Ee.assigned_to:"Unassigned"})]}),s.jsx("div",{className:"flex items-center justify-between mb-2",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("span",{className:"text-sm font-medium text-gray-900",children:Ee.customer_name||Ee.customer_email}),s.jsx("span",{className:"text-xs text-gray-500",children:new Date(Ee.created_at).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})]})}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("p",{className:"text-sm text-gray-600 flex-1 truncate mr-4",children:[s.jsx("span",{className:"font-medium",children:"Subject:"})," ",Ee.subject||"Live Chat Conversation"]}),s.jsxs("div",{className:"flex items-center gap-1.5 flex-shrink-0",children:[(ce==null?void 0:ce.status)==="queued"&&s.jsxs("button",{onClick:()=>ns.mutate(),disabled:ns.isPending,className:"text-xs px-2 py-1 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center gap-1 disabled:opacity-50",children:[s.jsx(Ml,{className:"w-3 h-3"}),s.jsx("span",{children:"Pick Up"})]}),(ce==null?void 0:ce.status)==="ai_handling"&&(ce==null?void 0:ce.assigned_to)==="ai-agent-001"&&s.jsxs("button",{onClick:()=>Ns.mutate(),disabled:Ns.isPending,className:"text-xs px-2 py-1 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center gap-1 disabled:opacity-50",children:[s.jsx(Ml,{className:"w-3 h-3"}),s.jsx("span",{children:"Take Over"})]}),s.jsxs("button",{onClick:()=>J(!0),className:"text-xs px-2 py-1 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center gap-1",children:[s.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),s.jsx("span",{children:"Reassign"})]}),(ce==null?void 0:ce.status)!=="closed"&&s.jsxs("button",{onClick:()=>Se(!0),className:"text-xs px-2 py-1 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center gap-1",children:[s.jsx(lt,{className:"w-3 h-3"}),s.jsx("span",{children:"Close Chat"})]})]})]})]}),s.jsxs("div",{className:"p-4 bg-white border-b border-gray-200 flex items-center justify-between flex-shrink-0",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("button",{onClick:()=>l(!i),className:"h-7 text-xs px-2 py-1 bg-white border border-indigo-200 rounded-lg hover:bg-indigo-50 transition-colors flex items-center justify-center space-x-1",children:[s.jsx(fn,{className:"w-3 h-3"}),s.jsx("span",{children:"Customer Info"})]}),s.jsxs("button",{onClick:()=>c(!o),className:"h-7 text-xs px-2 py-1 bg-white border border-indigo-200 rounded-lg hover:bg-indigo-50 transition-colors flex items-center justify-center space-x-1",children:[s.jsx(jv,{className:"w-3 h-3"}),s.jsx("span",{children:"Order History"})]}),s.jsxs("button",{onClick:()=>m(!d),className:`h-7 text-xs px-2 py-1 border rounded-lg hover:opacity-80 transition-colors flex items-center justify-center space-x-1 font-medium ${d?"bg-green-600 text-white border-green-700":"bg-white text-green-700 border-green-300"}`,children:[s.jsx(ll,{className:"w-3 h-3"}),s.jsx("span",{children:"Shopify"})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:ct,disabled:!Ze,className:"h-7 text-xs px-2 py-1 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed",children:s.jsx(di,{className:"w-3.5 h-3.5"})}),s.jsx("button",{onClick:zt,disabled:!tt,className:"h-7 text-xs px-2 py-1 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed",children:s.jsx(Vl,{className:"w-3.5 h-3.5"})})]})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto",style:{minHeight:0},children:[i&&s.jsx("div",{className:"p-3 bg-blue-50 border-b border-blue-100 flex-shrink-0",children:s.jsxs("div",{className:"bg-white rounded-lg p-3 text-xs",children:[s.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Customer Profile"}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Name:"}),s.jsx("span",{className:"ml-2 font-medium",children:Ee.customer_name})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"VIP:"}),s.jsx("span",{className:"ml-2 font-medium text-amber-600",children:Ee.vip?"Yes":"No"})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx("span",{className:"text-gray-500",children:"Email:"}),s.jsx("span",{className:"ml-2 font-medium",children:Ee.customer_email})]})]})]})}),o&&s.jsx("div",{className:"p-3 bg-green-50 border-b border-green-100 flex-shrink-0",children:s.jsxs("div",{className:"bg-white rounded-lg p-3",children:[s.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-xs",children:"Order History"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Order history will be loaded from Shopify"})]})}),s.jsxs("div",{className:"p-4 space-y-4 bg-gray-50",children:[I.length===0?s.jsxs("div",{className:"text-center text-gray-500 py-8",children:[s.jsxs("svg",{className:"w-12 h-12 mx-auto text-gray-300 mb-3",fill:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H5.17L4 17.17V4h16v12z"}),s.jsx("path",{d:"M7 9h10v2H7zm0-3h10v2H7z"})]}),s.jsx("p",{children:"No messages yet"})]}):I.map(R=>{var rt;const _e=R.sender_type==="customer",ze=R.sender_type==="system",$e=R.sender_type==="ai";return ze?s.jsx("div",{className:"text-center py-2",children:s.jsx("span",{className:"inline-block px-3 py-1 text-xs text-gray-500 bg-gray-100 rounded-full",children:R.content})},R.id):s.jsxs("div",{className:`p-4 rounded-lg ${_e?"bg-gray-100":$e?"bg-purple-50":"bg-blue-50"}`,children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center ${_e?"bg-gray-300":$e?"bg-purple-200":"bg-blue-200"}`,children:_e?s.jsx(fn,{className:"w-3 h-3 text-gray-600"}):$e?s.jsx(er,{className:"w-3 h-3 text-purple-600"}):s.jsx(fn,{className:"w-3 h-3 text-blue-600"})}),s.jsx("span",{className:"font-medium text-sm text-gray-900",children:_e?R.sender_name||Ee.customer_name||"Customer":$e?"McCarthy AI":R.sender_name?R.sender_name.split(" ")[0]:"Staff"}),s.jsx("span",{className:"text-xs text-gray-400",children:R.created_at&&typeof R.created_at=="string"?hr(new Date(R.created_at.includes("Z")?R.created_at:R.created_at+"Z"),{addSuffix:!0}):""})]}),s.jsx("div",{className:"text-sm text-gray-700 whitespace-pre-wrap ml-8",children:R.content}),R.attachment_url&&s.jsx("div",{className:"mt-2 ml-8",children:(rt=R.attachment_type)!=null&&rt.startsWith("image/")?s.jsxs("a",{href:wa(R.attachment_url),target:"_blank",rel:"noopener noreferrer",className:"block",children:[s.jsx("img",{src:wa(R.attachment_url),alt:R.attachment_name||"Attachment",className:"max-w-md rounded border border-gray-300 hover:opacity-90 transition-opacity cursor-pointer"}),s.jsx("span",{className:"text-xs text-gray-600 mt-1 block",children:R.attachment_name})]}):s.jsxs("a",{href:wa(R.attachment_url),download:R.attachment_name||"file",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-3 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 text-sm",children:[s.jsx(Ct,{className:"w-4 h-4"}),s.jsx("span",{children:R.attachment_name}),s.jsxs("span",{className:"text-xs text-gray-500",children:["(",((R.attachment_size||0)/1024).toFixed(1)," KB)"]})]})})]},R.id)}),s.jsx("div",{ref:z})]})]}),as&&s.jsx("div",{className:"flex-shrink-0 bg-gray-50 border-t border-gray-200 p-4",children:s.jsxs("div",{className:"flex gap-3",children:[s.jsx("textarea",{value:g,onChange:R=>y(R.target.value),onKeyDown:R=>{R.key==="Enter"&&!R.shiftKey&&(R.preventDefault(),Ps())},placeholder:"Type your reply... (Press Enter to send, Shift+Enter for new line)",className:"flex-1 border border-gray-300 rounded-lg px-4 py-3 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 resize-none bg-white",rows:3}),s.jsxs("button",{onClick:Ps,disabled:!g.trim()||St.isPending,className:"px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 font-medium transition-colors self-end",children:[s.jsx(rd,{className:"w-4 h-4"}),"Send"]})]})}),!as&&(ce==null?void 0:ce.status)!=="closed"&&s.jsx("div",{className:"flex-shrink-0 bg-gray-100 border-t border-gray-200 p-4 text-center text-gray-500",children:s.jsx("p",{className:"text-sm",children:(ce==null?void 0:ce.status)==="ai_handling"?'AI is handling this chat. Click "Take Over" to respond.':(ce==null?void 0:ce.status)==="queued"?'This chat is in queue. Click "Pick Up" to respond.':"Unable to respond to this chat."})}),(ce==null?void 0:ce.status)==="closed"&&s.jsxs("div",{className:"flex-shrink-0 bg-gray-100 border-t border-gray-200 p-4 text-center text-gray-500",children:[s.jsx(lt,{className:"w-5 h-5 inline-block mr-2"}),s.jsx("span",{className:"text-sm",children:"This chat has been closed"})]}),s.jsxs("div",{className:"border-t border-gray-200 bg-white flex-shrink-0",children:[v&&s.jsx("div",{className:"h-1 bg-gray-200 hover:bg-yellow-400 cursor-ns-resize transition-colors flex-shrink-0 relative group",onMouseDown:()=>ve(!0),children:s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:s.jsx("div",{className:"w-12 h-1 bg-gray-400 rounded-full group-hover:bg-yellow-500 transition-colors"})})}),s.jsxs("div",{className:"px-4 py-2.5 bg-gradient-to-r from-yellow-50 to-yellow-100 border-b border-yellow-200 flex items-center gap-2 cursor-pointer hover:from-yellow-100 hover:to-yellow-150 transition-colors",onClick:()=>x(!v),children:[s.jsx("svg",{className:"w-4 h-4 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),s.jsx("h3",{className:"text-sm font-semibold text-gray-800",children:" Staff Notes (Internal Only)"}),s.jsx("span",{className:"text-xs text-gray-500 bg-white px-2 py-0.5 rounded border border-gray-300",children:"Ctrl+Y"})]}),v&&s.jsxs("div",{className:"flex flex-col bg-yellow-50",style:{height:`${N}px`},children:[Ae&&Ae.length>0&&s.jsx("div",{className:"p-4 space-y-2 overflow-y-auto flex-shrink-0",style:{maxHeight:"60%"},children:Ae.map(R=>{var _e;return s.jsxs("div",{className:"bg-yellow-100 rounded-lg p-3 border border-yellow-200",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-xs font-medium text-gray-800",children:R.first_name||"Staff"}),s.jsx("span",{className:"text-xs text-gray-500",children:R.created_at&&typeof R.created_at=="string"?hr(new Date(R.created_at.includes("Z")?R.created_at:R.created_at+"Z"),{addSuffix:!0}):""}),R.edited_at&&s.jsx("span",{className:"text-xs text-gray-400 italic",children:"(edited)"})]}),s.jsx("div",{className:"flex items-center gap-2",children:(R.staff_id===(a==null?void 0:a.id)||(a==null?void 0:a.role)==="admin")&&L!==R.id&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>{P(R.id),H(R.content)},className:"text-xs px-2 py-1 text-gray-600 hover:text-blue-600 hover:bg-white rounded transition-colors",title:"Edit note",children:"Edit"}),s.jsx("button",{onClick:()=>ae(R.id),className:"text-xs px-2 py-1 text-gray-600 hover:text-red-600 hover:bg-white rounded transition-colors",title:"Delete note",children:"Delete"})]})})]}),L===R.id?s.jsxs("div",{className:"space-y-2",children:[s.jsx("textarea",{value:ee,onChange:ze=>H(ze.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",rows:3}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:async()=>{var ze,$e;if(!(!Ee||!ee.trim()))try{await De.editNote(Ee.ticket_id,R.id,ee),P(null),H(""),r.invalidateQueries({queryKey:["ticket",e]})}catch(rt){console.error("Failed to edit note:",rt),alert(`Failed to edit note: ${(($e=(ze=rt.response)==null?void 0:ze.data)==null?void 0:$e.error)||rt.message||"Unknown error"}`)}},className:"text-xs px-3 py-1 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Save"}),s.jsx("button",{onClick:()=>{P(null),H("")},className:"text-xs px-3 py-1 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300",children:"Cancel"})]})]}):s.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:R.content}),R.tags&&s.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:Jl(R.tags).map((ze,$e)=>s.jsxs(vt,{to:`/tags?search=${encodeURIComponent(ze)}`,className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 hover:bg-blue-200",children:[s.jsx($t,{className:"w-3 h-3 mr-1"}),ze]},$e))}),R.attachment_url&&s.jsx("div",{className:"mt-2",children:(_e=R.attachment_type)!=null&&_e.startsWith("image/")?s.jsxs("a",{href:wa(R.attachment_url),target:"_blank",rel:"noopener noreferrer",className:"block",children:[s.jsx("img",{src:wa(R.attachment_url),alt:R.attachment_name||"Attachment",className:"max-w-xs rounded border border-yellow-300 hover:opacity-90 transition-opacity cursor-pointer"}),s.jsx("span",{className:"text-xs text-gray-600 mt-1 block",children:R.attachment_name})]}):s.jsxs("a",{href:wa(R.attachment_url),download:R.attachment_name||"file",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-3 py-2 bg-white border border-yellow-300 rounded-lg hover:bg-yellow-50 text-sm",children:[s.jsx(Ct,{className:"w-4 h-4"}),s.jsx("span",{children:R.attachment_name}),s.jsxs("span",{className:"text-xs text-gray-500",children:["(",(R.attachment_size/1024).toFixed(1)," KB)"]})]})})]},R.id)})}),Q&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Delete Note?"}),s.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Are you sure you want to delete this note? This action cannot be undone."}),s.jsxs("div",{className:"flex items-center gap-3 justify-end",children:[s.jsx("button",{onClick:()=>ae(null),className:"px-4 py-2 text-sm bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300",children:"Cancel"}),s.jsx("button",{onClick:async()=>{var R,_e;if(Ee)try{await De.deleteNote(Ee.ticket_id,Q),ae(null),r.invalidateQueries({queryKey:["ticket",e]})}catch(ze){console.error("Failed to delete note:",ze),alert(`Failed to delete note: ${((_e=(R=ze.response)==null?void 0:R.data)==null?void 0:_e.error)||ze.message||"Unknown error"}`)}},className:"px-4 py-2 text-sm bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Delete"})]})]})}),s.jsxs("div",{className:"p-4 flex-1 flex flex-col min-h-0 border-t border-yellow-200",children:[D.length>0&&s.jsx("div",{className:"mb-2 flex flex-wrap gap-2",children:D.map((R,_e)=>s.jsxs("div",{className:"flex items-center gap-1 bg-white border border-yellow-300 rounded px-2 py-1 text-xs",children:[s.jsx(Ct,{className:"w-3 h-3"}),s.jsx("span",{className:"max-w-[150px] truncate",children:R.name}),s.jsx("button",{onClick:()=>bt(_e),className:"text-red-500 hover:text-red-700",children:s.jsx(Rt,{className:"w-3 h-3"})})]},_e))}),s.jsx("textarea",{"data-test":"chat-staff-notes-textarea",value:b,onChange:R=>{console.log("[CHAT STAFF NOTES] onChange fired:",R.target.value),w(R.target.value)},onKeyDown:async R=>{var _e,ze;if(console.log("[CHAT STAFF NOTES] onKeyDown fired - key:",R.key),R.key==="Enter"&&!R.shiftKey){R.preventDefault();const $e=R.currentTarget.value.trim();if($e&&Ee){console.log("[CHAT STAFF NOTES] Submitting note:",$e);try{const rt=await Promise.all(D.map(async Ut=>({name:Ut.name,content:await ge(Ut),type:Ut.type,size:Ut.size})));await De.addNote(Ee.ticket_id,$e,void 0,rt.length>0?rt:void 0),w(""),T([]),Ge()}catch(rt){console.error("Failed to add note:",rt),alert(`Failed to add note: ${((ze=(_e=rt.response)==null?void 0:_e.data)==null?void 0:ze.error)||rt.message||"Unknown error"}`)}}else console.log("[CHAT STAFF NOTES] Cannot submit - noteText:",$e,"ticket:",!!Ee)}},onFocus:()=>console.log("[CHAT STAFF NOTES] onFocus fired"),onBlur:()=>console.log("[CHAT STAFF NOTES] onBlur fired"),placeholder:"Add internal notes... Use @to mention staff, #keyword to add tags (Press Enter to save, Shift+Enter for new line)",className:"w-full flex-1 border border-yellow-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:border-yellow-500 resize-none bg-white min-h-0"}),s.jsx("input",{type:"file",ref:Le,onChange:Hs,className:"hidden",multiple:!0,accept:"image/*,.pdf,.doc,.docx,.txt,.xls,.xlsx"}),s.jsxs("button",{onClick:()=>{var R;return(R=Le.current)==null?void 0:R.click()},className:"mt-2 text-xs px-3 py-1.5 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 self-start flex-shrink-0 flex items-center gap-1",children:[s.jsx(Ct,{className:"w-3 h-3"}),"Attach File"]})]})]})]})]}),s.jsx("div",{className:`bg-white border-l border-gray-200 transition-all duration-300 ease-in-out overflow-y-auto ${d?"w-96":"w-0"}`,children:d&&s.jsxs("div",{className:"p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4 pb-3 border-b border-gray-200",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ll,{className:"w-5 h-5 text-green-600"}),s.jsx("h2",{className:"text-base font-semibold text-gray-900",children:"Shopify"})]}),s.jsx("button",{onClick:()=>m(!1),className:"text-gray-400 hover:text-gray-600",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),A&&s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx("div",{className:"text-sm text-gray-500",children:"Loading Shopify data..."})}),Te&&Te.customer&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase mb-3",children:"CUSTOMER"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[Te.customer.firstName," ",Te.customer.lastName]}),s.jsx("p",{className:"text-xs text-gray-500",children:Te.customer.email}),Te.customer.phone&&s.jsx("p",{className:"text-xs text-gray-500",children:Te.customer.phone}),Te.customer.isVIP&&s.jsx("span",{className:"inline-flex items-center mt-1 text-xs px-2 py-0.5 bg-amber-100 text-amber-800 rounded-full font-medium",children:" VIP Customer"})]}),s.jsxs("div",{className:"pt-2 border-t border-gray-100",children:[s.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[s.jsx("span",{className:"text-gray-500",children:"Total Spent:"}),s.jsxs("span",{className:"font-semibold text-indigo-600",children:["$",((Yt=Te.customer.totalSpent)==null?void 0:Yt.toLocaleString("en-US",{minimumFractionDigits:2}))||"0.00"]})]}),s.jsxs("div",{className:"flex justify-between text-xs",children:[s.jsx("span",{className:"text-gray-500",children:"Total Orders:"}),s.jsx("span",{className:"font-semibold text-gray-900",children:Te.customer.ordersCount||0})]}),Te.customer.lastOrderDate&&s.jsxs("div",{className:"flex justify-between text-xs mt-1",children:[s.jsx("span",{className:"text-gray-500",children:"Last Order:"}),s.jsx("span",{className:"text-gray-900",children:new Date(Te.customer.lastOrderDate).toLocaleDateString()})]})]})]})]}),Te.orders&&Te.orders.length>0?s.jsxs("div",{className:"mb-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("h3",{className:"text-xs font-semibold text-gray-500 uppercase",children:["ORDER ",h+1," OF ",Te.orders.length]}),Te.orders.length>1&&s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("button",{onClick:()=>p(Math.max(0,h-1)),disabled:h===0,className:"p-1 rounded hover:bg-gray-200 disabled:opacity-30 disabled:cursor-not-allowed transition-colors",title:"Previous order",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),s.jsx("button",{onClick:()=>p(Math.min(Te.orders.length-1,h+1)),disabled:h===Te.orders.length-1,className:"p-1 rounded hover:bg-gray-200 disabled:opacity-30 disabled:cursor-not-allowed transition-colors",title:"Next order",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 space-y-2",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:["Order ",Te.orders[h].orderNumber]}),s.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[s.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full font-medium ${Te.orders[h].fulfillmentStatus==="fulfilled"?"bg-green-100 text-green-800":Te.orders[h].fulfillmentStatus==="partial"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:Te.orders[h].fulfillmentStatus||"Unfulfilled"}),s.jsxs("span",{className:"text-xs text-gray-500",children:["Total: ",s.jsxs("span",{className:"font-semibold text-gray-900",children:["$",(Bs=Te.orders[h].totalPrice)==null?void 0:Bs.toFixed(2)," ",Te.orders[h].currency]})]})]})]}),s.jsxs("div",{className:"pt-2 border-t border-gray-200 space-y-1",children:[s.jsxs("div",{className:"flex justify-between text-xs",children:[s.jsx("span",{className:"text-gray-500",children:"Created:"}),s.jsx("span",{className:"text-gray-900",children:new Date(Te.orders[h].createdAt).toLocaleDateString()})]}),s.jsxs("div",{className:"flex justify-between text-xs",children:[s.jsx("span",{className:"text-gray-500",children:"Payment:"}),s.jsx("span",{className:`font-medium ${Te.orders[h].financialStatus==="paid"?"text-green-600":"text-yellow-600"}`,children:Te.orders[h].financialStatus||"Pending"})]})]}),Te.orders[h].lineItems&&Te.orders[h].lineItems.length>0&&s.jsxs("div",{className:"pt-2 border-t border-gray-200",children:[s.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Items:"}),s.jsx("div",{className:"space-y-2",children:Te.orders[h].lineItems.map((R,_e)=>{var ze;return s.jsxs("div",{className:"border border-gray-200 rounded-md overflow-hidden",children:[s.jsxs("button",{onClick:()=>f(j===R.id?null:R.id),className:"w-full text-left px-2 py-1.5 hover:bg-gray-50 transition-colors flex justify-between items-center",children:[s.jsx("span",{className:"text-xs text-gray-700 truncate flex-1",children:R.title}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("span",{className:"text-xs text-gray-500",children:["x",R.quantity]}),s.jsx("svg",{className:`w-3 h-3 text-gray-400 transition-transform ${j===R.id?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),j===R.id&&s.jsxs("div",{className:"px-2 py-2 bg-gray-50 border-t border-gray-200 text-xs space-y-1.5",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-500",children:"Price:"}),s.jsxs("span",{className:"text-gray-900 font-medium",children:["$",(ze=R.price)==null?void 0:ze.toFixed(2)]})]}),R.sku&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-500",children:"SKU:"}),s.jsx("span",{className:"text-gray-900 font-mono",children:R.sku})]}),R.variantTitle&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-500",children:"Variant:"}),s.jsx("span",{className:"text-gray-900",children:R.variantTitle})]}),R.customAttributes&&R.customAttributes.length>0&&s.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-200",children:[s.jsx("p",{className:"text-gray-500 font-medium mb-1.5",children:"Product Details:"}),R.customAttributes.map(($e,rt)=>s.jsxs("div",{className:"flex justify-between py-0.5",children:[s.jsxs("span",{className:"text-gray-500",children:[$e.key.replace("_",""),":"]}),$e.key.includes("Link")||$e.key.includes("link")?s.jsx("a",{href:$e.value,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-700 underline truncate max-w-[180px]",onClick:Ut=>Ut.stopPropagation(),children:"View "}):s.jsx("span",{className:"text-gray-900 font-mono text-right truncate max-w-[180px]",children:$e.value})]},rt))]})]})]},R.id||_e)})})]})]})]}):s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase mb-3",children:"ORDERS"}),s.jsx("div",{className:"bg-gray-50 rounded-lg p-3",children:s.jsx("p",{className:"text-sm text-gray-500",children:"No orders found"})})]}),Te.orders&&((jt=Te.orders[h])==null?void 0:jt.trackingNumber)&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase mb-3",children:"FULFILLMENT & TRACKING"}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 space-y-2",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Tracking:"}),s.jsx("p",{className:"text-sm font-mono font-semibold text-gray-900",children:Te.orders[h].trackingNumber}),Te.orders[h].trackingCompany&&s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Carrier: ",s.jsx("span",{className:"text-gray-900",children:Te.orders[h].trackingCompany})]})]}),Te.orders[h].trackingUrl&&s.jsx("a",{href:Te.orders[h].trackingUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center text-xs text-green-600 hover:text-green-700 font-medium",children:"Track Package "})]})]})]})]})}),je&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 w-96",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Close Chat"}),s.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"How would you like to close this chat?"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("button",{onClick:()=>Gt.mutate("resolved"),disabled:Gt.isPending,className:"w-full flex items-center gap-3 p-3 border-2 border-green-200 rounded-lg hover:bg-green-50 transition-colors",children:[s.jsx(lt,{className:"w-6 h-6 text-green-600"}),s.jsxs("div",{className:"text-left",children:[s.jsx("p",{className:"font-medium text-gray-900",children:"Mark as Resolved"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Customer's issue was solved"})]})]}),s.jsxs("button",{onClick:()=>Gt.mutate("closed"),disabled:Gt.isPending,className:"w-full flex items-center gap-3 p-3 border-2 border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsx(xr,{className:"w-6 h-6 text-gray-500"}),s.jsxs("div",{className:"text-left",children:[s.jsx("p",{className:"font-medium text-gray-900",children:"Close as Inactive"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Customer stopped responding"})]})]})]}),s.jsx("button",{onClick:()=>Se(!1),className:"w-full mt-4 px-4 py-2 text-sm text-gray-600 hover:text-gray-800",children:"Cancel"})]})}),Y&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4 max-h-[90vh] flex flex-col",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200 flex-shrink-0",children:s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Reassign Chat"})}),s.jsxs("div",{className:"px-6 py-4 overflow-y-auto flex-1",children:[s.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Reassign chat #",Ee==null?void 0:Ee.ticket_number," to another staff member:"]}),U.filter(R=>R.availability_status==="online").length===1&&s.jsx("div",{className:"mb-4 p-3 bg-amber-50 border border-amber-200 rounded-lg",children:s.jsx("p",{className:"text-sm text-amber-800",children:" You're the only staff member online"})}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("label",{className:`flex items-center p-3 border rounded-lg transition-colors cursor-pointer hover:bg-gray-50 ${X==="ai-agent-001"?"border-indigo-500 bg-indigo-50":"border-gray-300"}`,children:[s.jsx("input",{type:"radio",name:"staff",value:"ai-agent-001",checked:X==="ai-agent-001",onChange:R=>he(R.target.value),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 flex-shrink-0 mr-3"}),s.jsx("div",{className:"w-2 h-2 rounded-full mr-3 bg-purple-500"}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("p",{className:"text-sm font-medium text-gray-900 flex items-center gap-1.5",children:[s.jsx(er,{className:"w-4 h-4 text-purple-600"}),"McCarthy AI"]}),s.jsx("p",{className:"text-xs text-gray-500",children:"Return to McCarthy AI"})]})]}),U.filter(R=>R.id!=="ai-agent-001").map(R=>s.jsxs("label",{className:`flex items-center p-3 border rounded-lg transition-colors cursor-pointer hover:bg-gray-50 ${X===R.id?"border-indigo-500 bg-indigo-50":"border-gray-300"}`,children:[s.jsx("input",{type:"radio",name:"staff",value:R.id,checked:X===R.id,onChange:_e=>he(_e.target.value),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 flex-shrink-0 mr-3"}),s.jsx("div",{className:`w-2 h-2 rounded-full mr-3 ${R.availability_status==="online"?"bg-green-500":R.availability_status==="away"?"bg-yellow-500":"bg-gray-400"}`}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[R.first_name," ",R.last_name]}),s.jsx("p",{className:"text-xs text-gray-500 capitalize",children:R.availability_status||"Offline"})]})]},R.id))]}),s.jsxs("div",{className:"mt-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reason (optional)"}),s.jsx("textarea",{value:Oe,onChange:R=>G(R.target.value),placeholder:"e.g., Sales inquiry, needs technical support...",rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm"})]})]}),s.jsxs("div",{className:"px-6 py-4 bg-gray-50 rounded-b-lg flex justify-end gap-3 border-t border-gray-200 flex-shrink-0",children:[s.jsx("button",{onClick:()=>{J(!1),he(""),G("")},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),s.jsx("button",{onClick:()=>{X&&nr.mutate({assignTo:X,reason:Oe||void 0})},disabled:!X||nr.isPending,className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed",children:nr.isPending?"Reassigning...":"Reassign Chat"})]})]})})]})}function m6(){const[e,t]=u.useState(!1),{data:r,isLoading:n,error:a}=me({queryKey:["chat-embed-code"],queryFn:async()=>(await $.get("/api/chat/embed-code")).data}),i=async()=>{r!=null&&r.embedCode&&(await navigator.clipboard.writeText(r.embedCode),t(!0),setTimeout(()=>t(!1),2e3))};return n?s.jsx("div",{className:"p-8",children:s.jsxs("div",{className:"animate-pulse",children:[s.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3 mb-4"}),s.jsx("div",{className:"h-64 bg-gray-200 rounded"})]})}):a?s.jsx("div",{className:"p-8",children:s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 text-red-700",children:"Failed to load embed code. Please try again."})}):s.jsxs("div",{className:"p-8 max-w-4xl mx-auto",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-3",children:[s.jsx(gv,{className:"w-7 h-7 text-indigo-600"}),"Chat Widget Embed Code"]}),s.jsx("p",{className:"mt-2 text-gray-600",children:"Add the McCarthy AI chat widget to your website with a simple code snippet."})]}),s.jsxs("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-6 mb-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-indigo-900 mb-3",children:"Installation Instructions"}),s.jsx("ol",{className:"list-decimal list-inside space-y-2 text-indigo-800",children:r==null?void 0:r.instructions.map((l,o)=>s.jsx("li",{children:l},o))})]}),s.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:[s.jsxs("div",{className:"bg-gray-50 border-b border-gray-200 px-4 py-3 flex items-center justify-between",children:[s.jsx("span",{className:"font-medium text-gray-700",children:"Embed Code"}),s.jsx("button",{onClick:i,className:`flex items-center gap-2 px-3 py-1.5 rounded-md text-sm font-medium transition-colors ${e?"bg-green-100 text-green-700":"bg-indigo-100 text-indigo-700 hover:bg-indigo-200"}`,children:e?s.jsxs(s.Fragment,{children:[s.jsx(vm,{className:"w-4 h-4"}),"Copied!"]}):s.jsxs(s.Fragment,{children:[s.jsx(xv,{className:"w-4 h-4"}),"Copy Code"]})})]}),s.jsx("div",{className:"p-4 bg-gray-900 overflow-x-auto",children:s.jsx("pre",{className:"text-sm text-gray-100 whitespace-pre-wrap font-mono",children:r==null?void 0:r.embedCode})})]}),s.jsxs("div",{className:"mt-6 bg-white border border-gray-200 rounded-lg p-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Current Widget Settings"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-gray-500",children:"Primary Color"}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.jsx("div",{className:"w-6 h-6 rounded border border-gray-200",style:{backgroundColor:(r==null?void 0:r.settings.primary_color)||"#4F46E5"}}),s.jsx("span",{className:"font-mono text-sm",children:(r==null?void 0:r.settings.primary_color)||"#4F46E5"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-gray-500",children:"Button Text"}),s.jsx("p",{className:"font-medium text-gray-900 mt-1",children:(r==null?void 0:r.settings.button_text)||"Chat with us"})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx("label",{className:"text-sm text-gray-500",children:"Welcome Message"}),s.jsx("p",{className:"font-medium text-gray-900 mt-1",children:(r==null?void 0:r.settings.welcome_message)||"Hi!  I'm McCarthy AI. How can I help you today?"})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx("label",{className:"text-sm text-gray-500",children:"Offline Message"}),s.jsx("p",{className:"font-medium text-gray-900 mt-1",children:(r==null?void 0:r.settings.offline_message)||"We're currently offline. Please leave a message!"})]})]}),s.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:s.jsxs("a",{href:"/settings/chat-widget",className:"inline-flex items-center gap-2 text-indigo-600 hover:text-indigo-800 font-medium",children:[s.jsx(il,{className:"w-4 h-4"}),"Customize Widget Settings"]})})]}),s.jsxs("div",{className:"mt-6 bg-amber-50 border border-amber-200 rounded-lg p-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-amber-900 mb-2",children:"Test Your Widget"}),s.jsx("p",{className:"text-amber-800 mb-4",children:"After adding the embed code to your website, test the widget to ensure it's working correctly:"}),s.jsxs("ul",{className:"list-disc list-inside space-y-1 text-amber-800",children:[s.jsx("li",{children:"Check that the chat bubble appears in the bottom-right corner"}),s.jsx("li",{children:"Click the bubble to open the chat window"}),s.jsx("li",{children:"Enter your name and email to start a conversation"}),s.jsx("li",{children:"Send a test message and verify you receive an AI response"}),s.jsx("li",{children:"Check the Chat Dashboard to see the conversation appear"})]})]})]})}function h6(){const e=ut(),[t,r]=u.useState("widget"),[n,a]=u.useState(!1),[i,l]=u.useState("idle"),[o,c]=u.useState(""),[d,m]=u.useState({is_enabled:!0,primary_color:"#4F46E5",secondary_color:"#FFFFFF",button_text:"Chat with us",welcome_message:"Hi!  I'm McCarthy AI. How can I help you today?",offline_message:"We're currently offline. Please leave a message and we'll get back to you!",show_business_hours:!0,require_email_when_offline:!0}),{data:h,isLoading:p}=me({queryKey:["chatSettings"],queryFn:()=>Tr.getSettings().then(y=>y.data)}),{data:j}=me({queryKey:["embedCode"],queryFn:()=>Tr.getEmbedCode().then(y=>y.data)});u.useEffect(()=>{h!=null&&h.settings&&m({is_enabled:h.settings.is_enabled??!0,primary_color:h.settings.primary_color||"#4F46E5",secondary_color:h.settings.secondary_color||"#FFFFFF",button_text:h.settings.button_text||"Chat with us",welcome_message:h.settings.welcome_message||"Hi!  I'm McCarthy AI. How can I help you today?",offline_message:h.settings.offline_message||"We're currently offline. Please leave a message!",show_business_hours:h.settings.show_business_hours??!0,require_email_when_offline:h.settings.require_email_when_offline??!0})},[h]);const f=we({mutationFn:()=>Tr.updateSettings(d),onSuccess:()=>{l("success"),e.invalidateQueries({queryKey:["chatSettings"]}),e.invalidateQueries({queryKey:["embedCode"]}),setTimeout(()=>l("idle"),3e3)},onError:y=>{l("error"),c(y.message||"Failed to save settings"),setTimeout(()=>l("idle"),5e3)}}),g=()=>{j!=null&&j.embedCode&&(navigator.clipboard.writeText(j.embedCode),a(!0),setTimeout(()=>a(!1),2e3))};return p?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):s.jsxs("div",{className:"max-w-5xl mx-auto p-6",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"AI Chat Widget"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Configure and embed the McCarthy AI chat widget on your website"})]}),s.jsx("div",{className:"border-b border-gray-200 mb-6",children:s.jsxs("nav",{className:"-mb-px flex space-x-8",children:[s.jsxs("button",{onClick:()=>r("widget"),className:`flex items-center gap-2 py-4 px-1 border-b-2 font-medium text-sm ${t==="widget"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[s.jsx(mi,{className:"w-4 h-4"}),"Widget Settings"]}),s.jsxs("button",{onClick:()=>r("embed"),className:`flex items-center gap-2 py-4 px-1 border-b-2 font-medium text-sm ${t==="embed"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[s.jsx(gv,{className:"w-4 h-4"}),"Embed Code"]})]})}),t==="widget"&&s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Enable Chat Widget"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Show the chat widget on your website"})]}),s.jsx("button",{onClick:()=>m(y=>({...y,is_enabled:!y.is_enabled})),className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none ${d.is_enabled?"bg-indigo-600":"bg-gray-200"}`,children:s.jsx("span",{className:`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${d.is_enabled?"translate-x-5":"translate-x-0"}`})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[s.jsxs("div",{className:"min-w-0",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Button Color"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("label",{className:"flex-shrink-0 cursor-pointer",children:[s.jsx("input",{type:"color",value:d.primary_color,onChange:y=>m(v=>({...v,primary_color:y.target.value})),className:"sr-only"}),s.jsx("div",{className:"w-10 h-10 rounded-lg border-2 border-gray-400 shadow-sm cursor-pointer",style:{backgroundColor:d.primary_color}})]}),s.jsx("input",{type:"text",value:d.primary_color,onChange:y=>m(v=>({...v,primary_color:y.target.value})),className:"w-24 px-2 py-2 border border-gray-300 rounded-lg text-sm font-mono"})]})]}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Text Color"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("label",{className:"flex-shrink-0 cursor-pointer",children:[s.jsx("input",{type:"color",value:d.secondary_color,onChange:y=>m(v=>({...v,secondary_color:y.target.value})),className:"sr-only"}),s.jsx("div",{className:"w-10 h-10 rounded-lg border-2 border-gray-400 shadow-sm cursor-pointer",style:{backgroundColor:d.secondary_color}})]}),s.jsx("input",{type:"text",value:d.secondary_color,onChange:y=>m(v=>({...v,secondary_color:y.target.value})),className:"w-24 px-2 py-2 border border-gray-300 rounded-lg text-sm font-mono"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Button Text"}),s.jsx("input",{type:"text",value:d.button_text,onChange:y=>m(v=>({...v,button_text:y.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",placeholder:"Chat with us"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Welcome Message"}),s.jsx("textarea",{value:d.welcome_message,onChange:y=>m(v=>({...v,welcome_message:y.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",placeholder:"Hi! How can we help you today?"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"First message shown when chat opens"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Offline Message"}),s.jsx("textarea",{value:d.offline_message,onChange:y=>m(v=>({...v,offline_message:y.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",placeholder:"Our team is currently offline..."}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Shown when no staff are online"})]}),s.jsxs("div",{className:"space-y-4 pt-4 border-t border-gray-200",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Show Business Hours"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Display hours in the widget"})]}),s.jsx("button",{onClick:()=>m(y=>({...y,show_business_hours:!y.show_business_hours})),className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none ${d.show_business_hours?"bg-indigo-600":"bg-gray-200"}`,children:s.jsx("span",{className:`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${d.show_business_hours?"translate-x-5":"translate-x-0"}`})})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Require Email When Offline"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Collect email for follow-up"})]}),s.jsx("button",{onClick:()=>m(y=>({...y,require_email_when_offline:!y.require_email_when_offline})),className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none ${d.require_email_when_offline?"bg-indigo-600":"bg-gray-200"}`,children:s.jsx("span",{className:`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${d.require_email_when_offline?"translate-x-5":"translate-x-0"}`})})]})]}),s.jsxs("div",{className:"flex items-center justify-end gap-3 pt-4 border-t border-gray-200",children:[i==="success"&&s.jsxs("span",{className:"text-green-600 flex items-center gap-2 text-sm",children:[s.jsx(vm,{className:"w-4 h-4"})," Saved"]}),i==="error"&&s.jsx("span",{className:"text-red-600 text-sm",children:o||"Failed to save"}),s.jsx("button",{onClick:()=>f.mutate(),disabled:f.isPending,className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 font-medium",children:f.isPending?"Saving...":"Save Settings"})]})]})}),s.jsxs("div",{className:"bg-gray-100 rounded-lg p-6",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-4",children:"Preview"}),s.jsxs("div",{className:"bg-white rounded-lg shadow-inner h-96 relative overflow-hidden",children:[s.jsxs("div",{className:"absolute inset-0 p-4",children:[s.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),s.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-4"}),s.jsx("div",{className:"h-24 bg-gray-100 rounded mb-4"}),s.jsx("div",{className:"h-4 bg-gray-200 rounded w-2/3 mb-2"}),s.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]}),s.jsx("div",{className:"absolute bottom-4 right-4",children:s.jsxs("div",{className:"inline-flex items-center gap-2 px-5 py-3 rounded-full shadow-lg cursor-pointer transform hover:scale-105 transition-transform",style:{backgroundColor:d.primary_color,color:d.secondary_color},children:[s.jsxs("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{d:"M12 3l1.5 4.5L18 9l-4.5 1.5L12 15l-1.5-4.5L6 9l4.5-1.5L12 3z"}),s.jsx("path",{d:"M5 19l1 3 1-3 3-1-3-1-1-3-1 3-3 1 3 1z"})]}),s.jsx("span",{className:"font-medium",children:d.button_text})]})})]})]})]}),t==="embed"&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Your Embed Code"}),s.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Copy and paste this code into your website, just before the closing ",s.jsx("code",{className:"bg-gray-100 px-1 rounded",children:"</body>"})," tag."]}),s.jsxs("div",{className:"relative bg-gray-800 rounded-lg p-4 text-sm font-mono text-green-400 overflow-x-auto",children:[s.jsx("pre",{className:"whitespace-pre-wrap",children:(j==null?void 0:j.embedCode)||"Loading..."}),s.jsx("button",{onClick:g,className:"absolute top-2 right-2 p-2 rounded-md bg-gray-700 text-gray-300 hover:bg-gray-600 transition-colors",title:"Copy to clipboard",children:n?s.jsx(vm,{className:"w-5 h-5 text-green-400"}):s.jsx(xv,{className:"w-5 h-5"})})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Current Widget Settings"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-700",children:[s.jsxs("div",{children:[s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Enabled:"})," ",d.is_enabled?"Yes":"No"]}),s.jsxs("p",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium",children:"Button Color:"})," ",s.jsx("span",{className:"w-4 h-4 rounded-full border border-gray-300",style:{backgroundColor:d.primary_color}})," ",d.primary_color]}),s.jsxs("p",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium",children:"Text Color:"})," ",s.jsx("span",{className:"w-4 h-4 rounded-full border border-gray-300",style:{backgroundColor:d.secondary_color}})," ",d.secondary_color]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Button Text:"}),' "',d.button_text,'"']})]}),s.jsxs("div",{children:[s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Welcome Message:"}),' "',d.welcome_message,'"']}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Offline Message:"}),' "',d.offline_message,'"']}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Show Business Hours:"})," ",d.show_business_hours?"Yes":"No"]})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Testing Checklist"}),s.jsxs("ul",{className:"list-disc list-inside space-y-2 text-sm text-gray-700",children:[s.jsx("li",{children:"Ensure the widget appears on your website"}),s.jsx("li",{children:"Test starting a new chat when online"}),s.jsx("li",{children:"Verify custom colors and messages are applied"}),s.jsx("li",{children:"Check responsiveness on mobile devices"}),s.jsx("li",{children:"Test the AI responses"}),s.jsx("li",{children:"Test escalation to human staff"})]})]})]})]})}const f6=[{value:"policies",label:"Policies",description:"Returns, shipping, terms, privacy"},{value:"products",label:"Products",description:"Product information and specs"},{value:"faq",label:"FAQ",description:"Frequently asked questions"},{value:"general",label:"General",description:"Company info, ordering process"},{value:"other",label:"Other",description:"Miscellaneous documents"}];function g6(){const e=ut(),[t,r]=u.useState("general"),[n,a]=u.useState(!1),[i,l]=u.useState("idle"),[o,c]=u.useState(""),{data:d,isLoading:m}=me({queryKey:["rag-documents"],queryFn:()=>vo.listDocuments().then(N=>N.data)}),h=(d==null?void 0:d.documents)||[],p=we({mutationFn:({file:N,category:E})=>vo.uploadDocument(N,E).then(L=>L.data),onSuccess:N=>{l("success"),c(N.message||"Document uploaded successfully"),e.invalidateQueries({queryKey:["rag-documents"]}),setTimeout(()=>l("idle"),3e3)},onError:N=>{var E,L;l("error"),c(((L=(E=N.response)==null?void 0:E.data)==null?void 0:L.error)||N.message||"Failed to upload document"),setTimeout(()=>l("idle"),5e3)}}),j=we({mutationFn:N=>vo.deleteDocument(N),onSuccess:()=>{e.invalidateQueries({queryKey:["rag-documents"]})}}),f=we({mutationFn:()=>vo.reprocessDocuments(),onSuccess:()=>{e.invalidateQueries({queryKey:["rag-documents"]})}}),g=N=>{N.preventDefault(),N.stopPropagation(),N.type==="dragenter"||N.type==="dragover"?a(!0):N.type==="dragleave"&&a(!1)},y=N=>{N.preventDefault(),N.stopPropagation(),a(!1),N.dataTransfer.files&&N.dataTransfer.files[0]&&x(N.dataTransfer.files[0])},v=N=>{N.target.files&&N.target.files[0]&&x(N.target.files[0])},x=N=>{var P;const E=[".md",".txt",".pdf"],L="."+((P=N.name.split(".").pop())==null?void 0:P.toLowerCase());if(!E.includes(L)){l("error"),c("Invalid file type. Please upload .md, .txt, or .pdf files."),setTimeout(()=>l("idle"),5e3);return}if(N.size>5*1024*1024){l("error"),c("File too large. Maximum size is 5MB."),setTimeout(()=>l("idle"),5e3);return}l("uploading"),p.mutate({file:N,category:t})},b=N=>{switch(N){case"active":return s.jsx(lt,{className:"w-4 h-4 text-green-500"});case"processing":return s.jsx(Gi,{className:"w-4 h-4 text-yellow-500 animate-spin"});case"error":return s.jsx(xr,{className:"w-4 h-4 text-red-500"});default:return s.jsx(sd,{className:"w-4 h-4 text-gray-400"})}},w=N=>({policies:"bg-blue-100 text-blue-700",products:"bg-green-100 text-green-700",faq:"bg-purple-100 text-purple-700",general:"bg-gray-100 text-gray-700",other:"bg-yellow-100 text-yellow-700"})[N]||"bg-gray-100 text-gray-700";return s.jsxs("div",{className:"max-w-5xl mx-auto p-6",children:[s.jsxs("div",{className:"mb-6",children:[s.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[s.jsx(H4,{className:"w-6 h-6 text-indigo-600"}),"RAG Knowledge Base"]}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Upload documents to enhance the AI Agent's knowledge. The AI will use these documents to provide accurate, context-aware responses."})]}),s.jsxs("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-4 mb-6",children:[s.jsx("h3",{className:"font-semibold text-indigo-900 mb-2",children:"What is RAG?"}),s.jsxs("p",{className:"text-sm text-indigo-800",children:[s.jsx("strong",{children:"RAG (Retrieval-Augmented Generation)"})," allows the AI to search through your uploaded documents and use relevant information when responding to customers. This ensures accurate, up-to-date answers based on your actual policies, products, and procedures - eliminating AI hallucinations."]}),s.jsxs("ul",{className:"mt-2 text-sm text-indigo-700 list-disc list-inside",children:[s.jsx("li",{children:"Upload your policies, FAQs, and product information"}),s.jsx("li",{children:"AI searches documents for relevant context"}),s.jsx("li",{children:"Responses are grounded in your actual content"}),s.jsx("li",{children:"Update documents anytime to keep AI knowledge current"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsx("div",{className:"lg:col-span-1",children:s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Upload Document"}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),s.jsx("select",{value:t,onChange:N=>r(N.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-indigo-500 focus:border-indigo-500",children:f6.map(N=>s.jsxs("option",{value:N.value,children:[N.label," - ",N.description]},N.value))})]}),s.jsxs("div",{className:`border-2 border-dashed rounded-lg p-6 text-center transition-colors ${n?"border-indigo-500 bg-indigo-50":"border-gray-300 hover:border-gray-400"}`,onDragEnter:g,onDragLeave:g,onDragOver:g,onDrop:y,children:[s.jsx(Sv,{className:"w-10 h-10 mx-auto text-gray-400 mb-3"}),s.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Drag & drop a file here, or"}),s.jsxs("label",{className:"cursor-pointer",children:[s.jsx("span",{className:"px-4 py-2 bg-indigo-600 text-white text-sm rounded-lg hover:bg-indigo-700 inline-block",children:"Browse Files"}),s.jsx("input",{type:"file",className:"hidden",accept:".md,.txt,.pdf",onChange:v})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-3",children:"Supported: .md, .txt, .pdf (max 5MB)"})]}),i!=="idle"&&s.jsxs("div",{className:`mt-4 p-3 rounded-lg text-sm ${i==="uploading"?"bg-blue-50 text-blue-700":i==="success"?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:[i==="uploading"&&s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx(Gi,{className:"w-4 h-4 animate-spin"}),"Uploading..."]}),i==="success"&&s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx(lt,{className:"w-4 h-4"}),o]}),i==="error"&&s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx(xr,{className:"w-4 h-4"}),o]})]}),s.jsxs("button",{onClick:()=>f.mutate(),disabled:f.isPending,className:"w-full mt-4 px-4 py-2 border border-gray-300 rounded-lg text-sm text-gray-700 hover:bg-gray-50 flex items-center justify-center gap-2 disabled:opacity-50",children:[s.jsx(Gi,{className:`w-4 h-4 ${f.isPending?"animate-spin":""}`}),"Reprocess All Documents"]})]})}),s.jsx("div",{className:"lg:col-span-2",children:s.jsxs("div",{className:"bg-white rounded-lg shadow",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:s.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Uploaded Documents (",h.length,")"]})}),m?s.jsxs("div",{className:"p-8 text-center text-gray-500",children:[s.jsx(Gi,{className:"w-6 h-6 animate-spin mx-auto mb-2"}),"Loading documents..."]}):h.length===0?s.jsxs("div",{className:"p-8 text-center text-gray-500",children:[s.jsx(Jf,{className:"w-12 h-12 mx-auto text-gray-300 mb-3"}),s.jsx("p",{children:"No documents uploaded yet"}),s.jsx("p",{className:"text-sm mt-1",children:"Upload your first document to get started"})]}):s.jsx("div",{className:"divide-y divide-gray-200",children:h.map(N=>{var E;return s.jsx("div",{className:"px-6 py-4 hover:bg-gray-50",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Jf,{className:"w-5 h-5 text-gray-400 mt-0.5"}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("h4",{className:"font-medium text-gray-900",children:N.title||N.filename}),b(N.status)]}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:N.filename}),s.jsxs("div",{className:"flex items-center gap-3 mt-2 flex-wrap",children:[s.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${w(N.category)}`,children:N.category}),s.jsxs("span",{className:"text-xs text-gray-400",children:[(E=N.word_count)==null?void 0:E.toLocaleString()," words"]}),s.jsxs("span",{className:"text-xs text-gray-400",children:[" ",new Date(N.uploaded_at).toLocaleDateString("en-AU",{day:"numeric",month:"short",year:"numeric"})," at ",new Date(N.uploaded_at).toLocaleTimeString("en-AU",{hour:"2-digit",minute:"2-digit"})]})]}),N.content_preview&&s.jsx("p",{className:"text-sm text-gray-600 mt-2 line-clamp-2",children:N.content_preview})]})]}),s.jsx("button",{onClick:()=>{confirm("Are you sure you want to delete this document?")&&j.mutate(N.id)},className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors",title:"Delete document",children:s.jsx(hi,{className:"w-4 h-4"})})]})},N.id)})})]})})]})]})}const Qr={role:"You are McCarthy AI, a friendly and professional customer service assistant for Amazing Transfers, an Australian company specializing in DTF (Direct to Film) and UV DTF transfers for custom printing.",personality:`- Warm, helpful, and professional
- Use Australian English (colour, metre, etc.)
- Friendly but not overly casual
- Patient and understanding
- Knowledgeable about DTF printing`,responsibilities:`- Answer questions about products, ordering, and policies
- Help customers with order inquiries
- Provide application instructions for DTF and UV DTF transfers
- Explain shipping, returns, and refund policies
- Assist with artwork requirements and file formats
- Escalate complex issues to human staff when needed`,dos:`- Always be polite and respectful
- Provide accurate information from the knowledge base
- Acknowledge customer frustrations with empathy
- Offer to escalate to human staff when you can't help
- Use the customer's name when known
- Confirm understanding before providing solutions`,donts:`- Never make up information or guess at policies
- Don't provide specific pricing (direct to website)
- Don't promise things you can't guarantee
- Never argue with customers
- Don't share internal business information
- Don't use American spelling (use colour not color)`,tone:"Professional yet friendly. Think of a knowledgeable colleague who genuinely wants to help. Not robotic, but not overly casual either. Match the customer's energy level.",custom_instructions:""};function x6(){const e=ut(),[t,r]=u.useState(Qr),[n,a]=u.useState("idle"),[i,l]=u.useState(""),[o,c]=u.useState(!1),{data:d,isLoading:m}=me({queryKey:["ai-system-message"],queryFn:()=>$d.getConfig().then(f=>f.data)});u.useEffect(()=>{d!=null&&d.config&&r({role:d.config.role||Qr.role,personality:d.config.personality||Qr.personality,responsibilities:d.config.responsibilities||Qr.responsibilities,dos:d.config.dos||Qr.dos,donts:d.config.donts||Qr.donts,tone:d.config.tone||Qr.tone,custom_instructions:d.config.custom_instructions||""})},[d]);const h=we({mutationFn:()=>$d.updateConfig(t),onSuccess:()=>{a("success"),e.invalidateQueries({queryKey:["ai-system-message"]}),setTimeout(()=>a("idle"),3e3)},onError:f=>{var g,y;a("error"),l(((y=(g=f.response)==null?void 0:g.data)==null?void 0:y.error)||f.message||"Failed to save"),setTimeout(()=>a("idle"),5e3)}}),p=we({mutationFn:()=>$d.resetToDefault(),onSuccess:()=>{r(Qr),e.invalidateQueries({queryKey:["ai-system-message"]})}}),j=()=>`# System Message for McCarthy AI

## Role
${t.role}

## Personality
${t.personality}

## Responsibilities
${t.responsibilities}

## Do's
${t.dos}

## Don'ts
${t.donts}

## Tone
${t.tone}

${t.custom_instructions?`## Custom Instructions
${t.custom_instructions}`:""}
`;return m?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):s.jsxs("div",{className:"max-w-5xl mx-auto p-6",children:[s.jsxs("div",{className:"mb-6",children:[s.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[s.jsx(er,{className:"w-6 h-6 text-indigo-600"}),"AI System Message"]}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Configure the AI Agent's personality, role, and behavior guidelines. This defines how McCarthy AI interacts with customers."})]}),s.jsxs("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-4 mb-6",children:[s.jsxs("h3",{className:"font-semibold text-indigo-900 mb-2 flex items-center gap-2",children:[s.jsx(bm,{className:"w-4 h-4"}),"What is a System Message?"]}),s.jsxs("p",{className:"text-sm text-indigo-800",children:["The ",s.jsx("strong",{children:"System Message"})," (also called a system prompt) defines the AI's identity, personality, and behavioral guidelines. It's the foundation that shapes how the AI responds to customers - its tone, what it can/can't do, and how it handles different situations."]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:["Role Definition",s.jsx("span",{className:"text-gray-500 font-normal ml-2",children:"Who is the AI?"})]}),s.jsx("textarea",{value:t.role,onChange:f=>r({...t,role:f.target.value}),rows:5,className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-indigo-500 focus:border-indigo-500",placeholder:"You are McCarthy AI, a customer service assistant..."})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:["Personality Traits",s.jsx("span",{className:"text-gray-500 font-normal ml-2",children:"How should the AI behave?"})]}),s.jsx("textarea",{value:t.personality,onChange:f=>r({...t,personality:f.target.value}),rows:6,className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-indigo-500 focus:border-indigo-500",placeholder:`- Friendly and professional
- Patient and understanding...`})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:["Responsibilities",s.jsx("span",{className:"text-gray-500 font-normal ml-2",children:"What should the AI do?"})]}),s.jsx("textarea",{value:t.responsibilities,onChange:f=>r({...t,responsibilities:f.target.value}),rows:8,className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-indigo-500 focus:border-indigo-500",placeholder:`- Answer product questions
- Help with orders...`})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:["Do's ",s.jsx("span",{className:"text-gray-500 font-normal ml-2",children:"Best practices to follow"})]}),s.jsx("textarea",{value:t.dos,onChange:f=>r({...t,dos:f.target.value}),rows:8,className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-indigo-500 focus:border-indigo-500",placeholder:`- Always be polite
- Provide accurate information...`})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:["Don'ts ",s.jsx("span",{className:"text-gray-500 font-normal ml-2",children:"Things to avoid"})]}),s.jsx("textarea",{value:t.donts,onChange:f=>r({...t,donts:f.target.value}),rows:8,className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-indigo-500 focus:border-indigo-500",placeholder:`- Never make up information
- Don't promise things...`})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:["Tone of Voice",s.jsx("span",{className:"text-gray-500 font-normal ml-2",children:"How should responses sound?"})]}),s.jsx("textarea",{value:t.tone,onChange:f=>r({...t,tone:f.target.value}),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Professional yet friendly..."})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:["Custom Instructions",s.jsx("span",{className:"text-gray-500 font-normal ml-2",children:"Any additional guidelines"})]}),s.jsx("textarea",{value:t.custom_instructions,onChange:f=>r({...t,custom_instructions:f.target.value}),rows:6,className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Add any specific instructions, business rules, or special handling..."}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Use this for business-specific rules, special promotions, or temporary instructions."})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Actions"}),n==="success"&&s.jsxs("span",{className:"text-green-600 flex items-center gap-1 text-sm",children:[s.jsx(lt,{className:"w-4 h-4"})," Saved"]}),n==="error"&&s.jsxs("span",{className:"text-red-600 flex items-center gap-1 text-sm",children:[s.jsx(sd,{className:"w-4 h-4"})," ",i]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("button",{onClick:()=>h.mutate(),disabled:h.isPending,className:"w-full px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 flex items-center justify-center gap-2",children:[s.jsx(Gl,{className:"w-4 h-4"}),h.isPending?"Saving...":"Save Configuration"]}),s.jsx("button",{onClick:()=>c(!o),className:"w-full px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 flex items-center justify-center gap-2",children:o?"Hide Preview":"Show Full Preview"}),s.jsxs("button",{onClick:()=>{confirm("Reset to default configuration? This will overwrite your current settings.")&&p.mutate()},disabled:p.isPending,className:"w-full px-4 py-2 border border-red-300 rounded-lg text-red-700 hover:bg-red-50 flex items-center justify-center gap-2 disabled:opacity-50",children:[s.jsx(Gi,{className:`w-4 h-4 ${p.isPending?"animate-spin":""}`}),"Reset to Default"]})]})]}),o&&s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Full System Message Preview"}),s.jsx("div",{className:"bg-gray-900 rounded-lg p-4 text-sm font-mono text-green-400 overflow-auto max-h-96",children:s.jsx("pre",{className:"whitespace-pre-wrap",children:j()})})]}),s.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[s.jsx("h3",{className:"font-semibold text-yellow-900 mb-2",children:" Tips for Better AI Responses"}),s.jsxs("ul",{className:"text-sm text-yellow-800 space-y-1",children:[s.jsx("li",{children:" Be specific about what the AI should and shouldn't do"}),s.jsx("li",{children:" Include examples of ideal responses in custom instructions"}),s.jsx("li",{children:" Update regularly based on common customer issues"}),s.jsx("li",{children:" Use bullet points for clarity"}),s.jsx("li",{children:" Test changes with sample conversations"})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Configuration Size"}),s.jsxs("div",{className:"text-2xl font-bold text-indigo-600",children:[j().length.toLocaleString(),s.jsx("span",{className:"text-sm font-normal text-gray-500 ml-2",children:"characters"})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Recommended: Keep under 4,000 characters for optimal performance"})]})]})]})]})}const p6={tenant_id:"default",business_name:"",business_email:"",business_phone:"",business_address:"",business_website:"",timezone:"Australia/Brisbane",language:"en-AU",measurement_system:"metric",currency:"AUD",currency_symbol:"$",date_format:"DD/MM/YYYY",time_format:"12h"};function y6(){var j,f;const e=ut(),[t,r]=u.useState(p6),[n,a]=u.useState(!1),{data:i,isLoading:l}=me({queryKey:["tenant-settings"],queryFn:async()=>(await $.get("/api/tenant/settings")).data}),{data:o}=me({queryKey:["tenant-settings-options"],queryFn:async()=>(await $.get("/api/tenant/settings/options")).data});u.useEffect(()=>{i&&r(i)},[i]);const c=we({mutationFn:async g=>(await $.put("/api/tenant/settings",g)).data,onSuccess:()=>{e.invalidateQueries({queryKey:["tenant-settings"]}),alert("Settings saved successfully!")},onError:g=>{alert(`Failed to save settings: ${g.message}`)}}),d=()=>{c.mutate(t)},m=()=>{a(!0)},h=()=>{r({tenant_id:"default",business_name:"",business_email:"",business_phone:"",business_address:"",business_website:"",timezone:"Australia/Brisbane",language:"en-AU",measurement_system:"metric",currency:"AUD",currency_symbol:"$",date_format:"DD/MM/YYYY",time_format:"12h"}),a(!1)},p=g=>{const y=o==null?void 0:o.currencies.find(v=>v.value===g);r({...t,currency:g,currency_symbol:(y==null?void 0:y.symbol)||"$"})};return l?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"text-gray-500",children:"Loading settings..."})}):s.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg",children:s.jsx(mi,{className:"w-6 h-6 text-indigo-600"})}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Dartmouth OS Settings"})]}),s.jsx("p",{className:"text-gray-600",children:"Configure global settings for your Dartmouth OS instance. These settings apply to all agents unless overridden."})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(Q4,{className:"w-5 h-5 text-gray-600"}),s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Business Information"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Business Name ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:t.business_name,onChange:g=>r({...t,business_name:g.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Amazing Transfers"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Business Email"}),s.jsx("input",{type:"email",value:t.business_email,onChange:g=>r({...t,business_email:g.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"support@amazingtransfers.com.au"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Business Phone"}),s.jsx("input",{type:"tel",value:t.business_phone,onChange:g=>r({...t,business_phone:g.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"+61 7 1234 5678"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Website"}),s.jsx("input",{type:"url",value:t.business_website,onChange:g=>r({...t,business_website:g.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"https://amazingtransfers.com.au"})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Business Address"}),s.jsx("input",{type:"text",value:t.business_address,onChange:g=>r({...t,business_address:g.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"123 Transfer Lane, Brisbane QLD 4000"})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx($h,{className:"w-5 h-5 text-gray-600"}),s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Regional Settings"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[s.jsx(wc,{className:"w-4 h-4 inline mr-1"}),"Timezone"]}),s.jsx("select",{value:t.timezone,onChange:g=>r({...t,timezone:g.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:o==null?void 0:o.timezones.map(g=>s.jsx("option",{value:g.value,children:g.label},g.value))})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[s.jsx(M3,{className:"w-4 h-4 inline mr-1"}),"Language / Spelling"]}),s.jsx("select",{value:t.language,onChange:g=>r({...t,language:g.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:o==null?void 0:o.languages.map(g=>s.jsx("option",{value:g.value,children:g.label},g.value))}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:(j=o==null?void 0:o.languages.find(g=>g.value===t.language))==null?void 0:j.spelling})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[s.jsx(q3,{className:"w-4 h-4 inline mr-1"}),"Measurement System"]}),s.jsx("select",{value:t.measurement_system,onChange:g=>r({...t,measurement_system:g.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:o==null?void 0:o.measurementSystems.map(g=>s.jsx("option",{value:g.value,children:g.label},g.value))})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[s.jsx(u3,{className:"w-4 h-4 inline mr-1"}),"Currency"]}),s.jsx("select",{value:t.currency,onChange:g=>p(g.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:o==null?void 0:o.currencies.map(g=>s.jsx("option",{value:g.value,children:g.label},g.value))})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(fv,{className:"w-5 h-5 text-gray-600"}),s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Date & Time Formats"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date Format"}),s.jsx("select",{value:t.date_format,onChange:g=>r({...t,date_format:g.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:o==null?void 0:o.dateFormats.map(g=>s.jsx("option",{value:g.value,children:g.label},g.value))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Time Format"}),s.jsx("select",{value:t.time_format,onChange:g=>r({...t,time_format:g.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:o==null?void 0:o.timeFormats.map(g=>s.jsx("option",{value:g.value,children:g.label},g.value))})]})]})]}),s.jsxs("div",{className:"bg-indigo-50 rounded-xl border border-indigo-200 p-6 mb-6",children:[s.jsx("h3",{className:"text-sm font-semibold text-indigo-900 mb-3",children:"Preview - How AI Will Format Responses"}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-indigo-600 font-medium",children:"Date:"}),s.jsx("p",{className:"text-indigo-900",children:((f=o==null?void 0:o.dateFormats.find(g=>g.value===t.date_format))==null?void 0:f.example)||"31/12/2025"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-indigo-600 font-medium",children:"Time:"}),s.jsx("p",{className:"text-indigo-900",children:t.time_format==="12h"?"2:30 PM":"14:30"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-indigo-600 font-medium",children:"Currency:"}),s.jsxs("p",{className:"text-indigo-900",children:[t.currency_symbol,"99.95 ",t.currency]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-indigo-600 font-medium",children:"Measurement:"}),s.jsx("p",{className:"text-indigo-900",children:t.measurement_system==="metric"?"50 cm, 2.5 kg":"20 in, 5.5 lb"})]})]})]}),s.jsxs("div",{className:"flex justify-end gap-3",children:[s.jsxs("button",{onClick:m,className:"flex items-center gap-2 px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:[s.jsx(Nv,{className:"w-4 h-4"}),"Reset to Defaults"]}),s.jsxs("button",{onClick:d,disabled:c.isPending,className:"flex items-center gap-2 px-6 py-2 text-white bg-indigo-600 rounded-lg hover:bg-indigo-700 disabled:opacity-50",children:[s.jsx(Gl,{className:"w-4 h-4"}),c.isPending?"Saving...":"Save Settings"]})]}),n&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Reset to Factory Defaults?"}),s.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"This will reset all settings to their factory defaults:"}),s.jsxs("ul",{className:"text-sm text-gray-600 mb-4 list-disc list-inside",children:[s.jsx("li",{children:"Timezone: Australia/Brisbane"}),s.jsx("li",{children:"Language: Australian English"}),s.jsx("li",{children:"Measurement: Metric"}),s.jsx("li",{children:"Currency: AUD ($)"}),s.jsx("li",{children:"Date Format: DD/MM/YYYY"}),s.jsx("li",{children:"Time Format: 12-hour"}),s.jsx("li",{children:"Business information will be cleared"})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx("button",{onClick:()=>a(!1),className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),s.jsx("button",{onClick:h,className:"px-4 py-2 text-white bg-red-600 rounded-lg hover:bg-red-700",children:"Reset Settings"})]})]})})]})}function v6(){var p,j;const e=ut(),[t,r]=u.useState({agent_id:"customer-service-agent",timezone:null,language:null,measurement_system:null,currency:null,currency_symbol:null,date_format:null,time_format:null}),{data:n}=me({queryKey:["tenant-settings"],queryFn:async()=>(await $.get("/api/tenant/settings")).data}),{data:a,isLoading:i}=me({queryKey:["agent-overrides"],queryFn:async()=>(await $.get("/api/ai-agent/regional-overrides")).data}),{data:l}=me({queryKey:["tenant-settings-options"],queryFn:async()=>(await $.get("/api/tenant/settings/options")).data});u.useEffect(()=>{a&&r(a)},[a]);const o=we({mutationFn:async f=>(await $.put("/api/ai-agent/regional-overrides",f)).data,onSuccess:()=>{e.invalidateQueries({queryKey:["agent-overrides"]}),alert("Overrides saved successfully!")},onError:f=>{alert(`Failed to save overrides: ${f.message}`)}}),c=()=>{o.mutate(t)},d=()=>{r({agent_id:"customer-service-agent",timezone:null,language:null,measurement_system:null,currency:null,currency_symbol:null,date_format:null,time_format:null})},m=f=>{const g=t[f];return g!==null&&g!==""?g:(n==null?void 0:n[f])||""},h=f=>t[f]!==null&&t[f]!=="";return i?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"text-gray-500",children:"Loading overrides..."})}):s.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs(vt,{to:"/ai-agent/system-message",className:"text-sm text-indigo-600 hover:text-indigo-800 flex items-center gap-1 mb-4",children:[s.jsx(D4,{className:"w-4 h-4"}),"Back to AI Agent Settings"]}),s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:s.jsx($h,{className:"w-6 h-6 text-purple-600"})}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Agent Regional Overrides"})]}),s.jsx("p",{className:"text-gray-600",children:"Override tenant-level regional settings for this specific agent. Leave fields empty to inherit from Dartmouth OS Settings."})]}),s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:s.jsxs("p",{className:"text-sm text-blue-800",children:[s.jsx("strong",{children:"How it works:"}),' Settings left as "Inherit from tenant" will use the values from',s.jsx(vt,{to:"/settings/dartmouth-os",className:"text-blue-600 hover:underline mx-1",children:"Dartmouth OS Settings"}),". Only set overrides if this agent needs different regional settings (e.g., for a US market)."]})}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(mi,{className:"w-5 h-5 text-gray-600"}),s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Regional Overrides"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Timezone",h("timezone")&&s.jsx("span",{className:"ml-2 text-xs text-purple-600 bg-purple-100 px-1.5 py-0.5 rounded",children:"Overridden"})]}),s.jsxs("select",{value:t.timezone||"",onChange:f=>r({...t,timezone:f.target.value||null}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",children:[s.jsxs("option",{value:"",children:["Inherit from tenant (",n==null?void 0:n.timezone,")"]}),l==null?void 0:l.timezones.map(f=>s.jsx("option",{value:f.value,children:f.label},f.value))]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Language / Spelling",h("language")&&s.jsx("span",{className:"ml-2 text-xs text-purple-600 bg-purple-100 px-1.5 py-0.5 rounded",children:"Overridden"})]}),s.jsxs("select",{value:t.language||"",onChange:f=>r({...t,language:f.target.value||null}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",children:[s.jsxs("option",{value:"",children:["Inherit from tenant (",(p=l==null?void 0:l.languages.find(f=>f.value===(n==null?void 0:n.language)))==null?void 0:p.label,")"]}),l==null?void 0:l.languages.map(f=>s.jsx("option",{value:f.value,children:f.label},f.value))]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Measurement System",h("measurement_system")&&s.jsx("span",{className:"ml-2 text-xs text-purple-600 bg-purple-100 px-1.5 py-0.5 rounded",children:"Overridden"})]}),s.jsxs("select",{value:t.measurement_system||"",onChange:f=>r({...t,measurement_system:f.target.value||null}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",children:[s.jsxs("option",{value:"",children:["Inherit from tenant (",n==null?void 0:n.measurement_system,")"]}),l==null?void 0:l.measurementSystems.map(f=>s.jsx("option",{value:f.value,children:f.label},f.value))]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Currency",h("currency")&&s.jsx("span",{className:"ml-2 text-xs text-purple-600 bg-purple-100 px-1.5 py-0.5 rounded",children:"Overridden"})]}),s.jsxs("select",{value:t.currency||"",onChange:f=>{const g=l==null?void 0:l.currencies.find(y=>y.value===f.target.value);r({...t,currency:f.target.value||null,currency_symbol:(g==null?void 0:g.symbol)||null})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",children:[s.jsxs("option",{value:"",children:["Inherit from tenant (",n==null?void 0:n.currency,")"]}),l==null?void 0:l.currencies.map(f=>s.jsx("option",{value:f.value,children:f.label},f.value))]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Date Format",h("date_format")&&s.jsx("span",{className:"ml-2 text-xs text-purple-600 bg-purple-100 px-1.5 py-0.5 rounded",children:"Overridden"})]}),s.jsxs("select",{value:t.date_format||"",onChange:f=>r({...t,date_format:f.target.value||null}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",children:[s.jsxs("option",{value:"",children:["Inherit from tenant (",n==null?void 0:n.date_format,")"]}),l==null?void 0:l.dateFormats.map(f=>s.jsx("option",{value:f.value,children:f.label},f.value))]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Time Format",h("time_format")&&s.jsx("span",{className:"ml-2 text-xs text-purple-600 bg-purple-100 px-1.5 py-0.5 rounded",children:"Overridden"})]}),s.jsxs("select",{value:t.time_format||"",onChange:f=>r({...t,time_format:f.target.value||null}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",children:[s.jsxs("option",{value:"",children:["Inherit from tenant (",(n==null?void 0:n.time_format)==="12h"?"12-hour":"24-hour",")"]}),l==null?void 0:l.timeFormats.map(f=>s.jsx("option",{value:f.value,children:f.label},f.value))]})]})]})]}),s.jsxs("div",{className:"bg-purple-50 rounded-xl border border-purple-200 p-6 mb-6",children:[s.jsx("h3",{className:"text-sm font-semibold text-purple-900 mb-3",children:"Effective Settings for This Agent"}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-purple-600 font-medium",children:"Timezone:"}),s.jsx("p",{className:"text-purple-900",children:m("timezone")})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-purple-600 font-medium",children:"Language:"}),s.jsx("p",{className:"text-purple-900",children:((j=l==null?void 0:l.languages.find(f=>f.value===m("language")))==null?void 0:j.label)||m("language")})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-purple-600 font-medium",children:"Measurement:"}),s.jsx("p",{className:"text-purple-900",children:m("measurement_system")})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-purple-600 font-medium",children:"Currency:"}),s.jsx("p",{className:"text-purple-900",children:m("currency")})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-purple-600 font-medium",children:"Date Format:"}),s.jsx("p",{className:"text-purple-900",children:m("date_format")})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-purple-600 font-medium",children:"Time Format:"}),s.jsx("p",{className:"text-purple-900",children:m("time_format")==="12h"?"12-hour":"24-hour"})]})]})]}),s.jsxs("div",{className:"flex justify-end gap-3",children:[s.jsxs("button",{onClick:d,className:"flex items-center gap-2 px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:[s.jsx(Nv,{className:"w-4 h-4"}),"Clear All Overrides"]}),s.jsxs("button",{onClick:c,disabled:o.isPending,className:"flex items-center gap-2 px-6 py-2 text-white bg-purple-600 rounded-lg hover:bg-purple-700 disabled:opacity-50",children:[s.jsx(Gl,{className:"w-4 h-4"}),o.isPending?"Saving...":"Save Overrides"]})]})]})}function b6(){var p,j;const e=ut(),[t,r]=u.useState({enabled:!1,maxAssignedTickets:8,refillThreshold:3,priorityOrder:"priority_first",channels:["email","chat"],businessHoursOnly:!0}),{data:n,isLoading:a}=me({queryKey:["autoAssignmentConfig"],queryFn:async()=>(await bo.getConfig()).data}),{data:i,isLoading:l}=me({queryKey:["autoAssignmentHistory"],queryFn:async()=>(await bo.getHistory(50)).data});u.useEffect(()=>{n!=null&&n.config&&r(n.config)},[n]);const o=we({mutationFn:f=>bo.updateConfig(f),onSuccess:()=>{e.invalidateQueries({queryKey:["autoAssignmentConfig"]})}}),c=we({mutationFn:()=>bo.runNow(),onSuccess:()=>{e.invalidateQueries({queryKey:["autoAssignmentHistory"]})}}),d=()=>{o.mutate(t)},m=()=>{c.mutate()},h=f=>{const g=t.channels.includes(f)?t.channels.filter(y=>y!==f):[...t.channels,f];r({...t,channels:g})};return a?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}):s.jsxs("div",{className:"max-w-4xl mx-auto py-6 px-4",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Auto-Assignment Settings"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Configure automatic ticket assignment to online staff members"})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6 mb-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6 pb-6 border-b border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Auto-Assignment"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Automatically assign unassigned tickets to online staff"})]}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:t.enabled,onChange:f=>r({...t,enabled:f.target.checked}),className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Max Tickets per Staff"}),s.jsx("input",{type:"number",min:"1",max:"50",value:t.maxAssignedTickets,onChange:f=>r({...t,maxAssignedTickets:parseInt(f.target.value)||8}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Maximum tickets auto-assigned per staff member"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Refill Threshold"}),s.jsx("input",{type:"number",min:"0",max:"20",value:t.refillThreshold,onChange:f=>r({...t,refillThreshold:parseInt(f.target.value)||3}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Auto-assign more when staff drops below this count"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Assignment Priority"}),s.jsxs("select",{value:t.priorityOrder,onChange:f=>r({...t,priorityOrder:f.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",children:[s.jsx("option",{value:"priority_first",children:"High Priority First"}),s.jsx("option",{value:"oldest_first",children:"Oldest First (FIFO)"}),s.jsx("option",{value:"newest_first",children:"Newest First"})]}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Order in which unassigned tickets are assigned"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Business Hours Only"}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer mt-2",children:[s.jsx("input",{type:"checkbox",checked:t.businessHoursOnly,onChange:f=>r({...t,businessHoursOnly:f.target.checked}),className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"}),s.jsx("span",{className:"ml-3 text-sm text-gray-600 dark:text-gray-400",children:"Only assign during business hours"})]})]})]}),s.jsxs("div",{className:"mt-6",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Channels to Auto-Assign"}),s.jsx("div",{className:"flex gap-4",children:["email","chat","phone"].map(f=>s.jsxs("label",{className:"inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:t.channels.includes(f),onChange:()=>h(f),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),s.jsx("span",{className:"ml-2 text-sm text-gray-700 dark:text-gray-300 capitalize",children:f})]},f))})]}),s.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700 flex gap-3",children:[s.jsxs("button",{onClick:d,disabled:o.isPending,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:[o.isPending?s.jsx(eg,{className:"h-4 w-4 mr-2 animate-spin"}):s.jsx(_S,{className:"h-4 w-4 mr-2"}),"Save Settings"]}),s.jsxs("button",{onClick:m,disabled:c.isPending||!t.enabled,className:"inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:[c.isPending?s.jsx(eg,{className:"h-4 w-4 mr-2 animate-spin"}):s.jsx(LS,{className:"h-4 w-4 mr-2"}),"Run Now"]})]}),c.isSuccess&&c.data&&s.jsxs("div",{className:"mt-4 p-4 bg-green-50 dark:bg-green-900/20 rounded-md",children:[s.jsxs("p",{className:"text-sm text-green-800 dark:text-green-200",children:[" ",c.data.data.message]}),((p=c.data.data.results)==null?void 0:p.length)>0&&s.jsx("ul",{className:"mt-2 text-sm text-green-700 dark:text-green-300",children:c.data.data.results.map((f,g)=>s.jsxs("li",{children:[" ",f.ticketNumber,"  ",f.staffName]},g))})]}),o.isSuccess&&s.jsx("div",{className:"mt-4 p-4 bg-green-50 dark:bg-green-900/20 rounded-md",children:s.jsx("p",{className:"text-sm text-green-800 dark:text-green-200",children:" Settings saved successfully"})})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h3",{className:"text-lg font-medium text-gray-900 dark:text-white flex items-center gap-2",children:[s.jsx(tg,{className:"h-5 w-5"}),"Assignment History"]}),s.jsx("button",{onClick:()=>e.invalidateQueries({queryKey:["autoAssignmentHistory"]}),className:"text-sm text-blue-600 hover:text-blue-800 dark:text-blue-400",children:"Refresh"})]}),l?s.jsx("div",{className:"flex items-center justify-center h-32",children:s.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500"})}):((j=i==null?void 0:i.history)==null?void 0:j.length)>0?s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Ticket"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Assigned To"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Reason"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Staff Queue"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Time"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:i.history.map(f=>s.jsxs("tr",{children:[s.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:f.ticket_number}),s.jsxs("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:[f.staff_first_name," ",f.staff_last_name||""]}),s.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm",children:s.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${f.reason==="auto_refill"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300":"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300"}`,children:f.reason==="auto_refill"?"Refill":"Initial"})}),s.jsxs("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:[f.staff_ticket_count," tickets"]}),s.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:new Date(f.assigned_at).toLocaleString()})]},f.id))})]})}):s.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[s.jsx(tg,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),s.jsx("p",{children:"No auto-assignments yet"}),s.jsx("p",{className:"text-sm mt-1",children:"Enable auto-assignment and assignments will appear here"})]})]})]})}const j6=[{title:"Dartmouth OS",description:"Global system settings including timezone, language, currency, and regional preferences",path:"/settings/dartmouth-os",category:"System"},{title:"Operational Hours",description:"Set your business operating hours for live chat availability",path:"/settings/business-hours",category:"Business"},{title:"Auto-Assignment",description:"Configure automatic ticket assignment to online staff members",path:"/settings/auto-assignment",category:"Business"},{title:"Group Chat",description:"Configure Group Chat channels, permissions, and edit/delete timeframes",path:"/settings/group-chat",category:"Business"},{title:"Widget & Embed",description:"Configure the chat widget appearance and get embed code for your website",path:"/ai-agent/widget",category:"AI Agent"},{title:"RAG Knowledge",description:"Upload and manage documents for AI to reference when answering questions",path:"/ai-agent/knowledge",category:"AI Agent"},{title:"System Message",description:"Define AI agent personality, role, responsibilities, and guidelines",path:"/ai-agent/system-message",category:"AI Agent"},{title:"Regional Overrides",description:"Override regional settings for specific AI agents",path:"/ai-agent/regional-overrides",category:"AI Agent"},{title:"Print ERP",description:"Connect and configure your Print ERP system integration",path:"/settings/integrations/perp",category:"Integrations"},{title:"Shopify",description:"Connect and configure your Shopify store integration",path:"/settings/integrations/shopify",category:"Integrations"},{title:"Facebook",description:"Connect your Facebook page for customer support",path:"/settings/meta/facebook",category:"Meta"},{title:"Instagram",description:"Connect your Instagram business account for DMs",path:"/settings/meta/instagram",category:"Meta"},{title:"Messenger",description:"Configure Facebook Messenger integration",path:"/settings/meta/messenger",category:"Meta"},{title:"WhatsApp",description:"Connect WhatsApp Business for customer messaging",path:"/settings/meta/whatsapp",category:"Meta"},{title:"Auth & Security",description:"Authentication settings, password policies, and security options",path:"/settings/general/auth",category:"General"},{title:"Templates",description:"Manage email templates and canned responses",path:"/settings/general/templates",category:"General"},{title:"Tags",description:"Configure AI auto-tagging, tag suggestions, and display preferences",path:"/settings/tags",category:"General"},{title:"Subscription",description:"Manage your subscription plan and billing details",path:"/settings/billing/subscription",category:"Billing"},{title:"Transactions",description:"View billing history and transaction records",path:"/settings/billing/transactions",category:"Billing"}];function w6(){const e=yr(),t=j6.reduce((a,i)=>(a[i.category]||(a[i.category]=[]),a[i.category].push(i),a),{}),r=["System","Business","AI Agent","Integrations","Meta","General","Billing"],n=a=>{switch(a){case"System":return s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})});case"Business":return s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})});case"AI Agent":return s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})});case"Integrations":return s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 4a2 2 0 114 0v1a1 1 0 001 1h3a1 1 0 011 1v3a1 1 0 01-1 1h-1a2 2 0 100 4h1a1 1 0 011 1v3a1 1 0 01-1 1h-3a1 1 0 01-1-1v-1a2 2 0 10-4 0v1a1 1 0 01-1 1H7a1 1 0 01-1-1v-3a1 1 0 00-1-1H4a2 2 0 110-4h1a1 1 0 001-1V7a1 1 0 011-1h3a1 1 0 001-1V4z"})});case"Meta":return s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8h2a2 2 0 012 2v6a2 2 0 01-2 2h-2v4l-4-4H9a1.994 1.994 0 01-1.414-.586m0 0L11 14h4a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2v4l.586-.586z"})});case"General":return s.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]});case"Billing":return s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})});default:return s.jsx(Bo,{className:"w-5 h-5"})}};return s.jsxs("div",{className:"max-w-5xl mx-auto py-8 px-4",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white flex items-center gap-3",children:[s.jsx(Bo,{className:"h-8 w-8 text-indigo-600"}),"Settings"]}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Configure your system settings and integrations"})]}),r.map(a=>t[a]&&s.jsxs("div",{className:"mb-8",children:[s.jsxs("h2",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200 mb-4 border-b border-gray-200 dark:border-gray-700 pb-2 flex items-center gap-2",children:[n(a),a]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t[a].map(i=>s.jsxs("button",{onClick:()=>e(i.path),className:"flex items-start gap-4 p-4 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 hover:border-indigo-300 dark:hover:border-indigo-600 hover:shadow-md transition-all text-left group",children:[s.jsx("div",{className:"flex-shrink-0 p-2 bg-gray-100 dark:bg-gray-700 rounded-lg group-hover:bg-indigo-100 dark:group-hover:bg-indigo-900/30 transition-colors",children:s.jsx(Bo,{className:"h-6 w-6 text-gray-500 dark:text-gray-400 group-hover:text-indigo-600 dark:group-hover:text-indigo-400"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:"font-medium text-gray-900 dark:text-white group-hover:text-indigo-600 dark:group-hover:text-indigo-400",children:i.title}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 line-clamp-2",children:i.description})]}),s.jsx("div",{className:"flex-shrink-0 self-center",children:s.jsx("svg",{className:"w-5 h-5 text-gray-400 group-hover:text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]},i.path))})]},a))]})}const Yd={online:{color:"bg-green-500",label:"Online",description:"Available for chats and tickets"},away:{color:"bg-yellow-500",label:"Away",description:"Temporarily unavailable"},offline:{color:"bg-gray-400",label:"Offline",description:"Not available for new assignments"}};function N6(){var b,w,N;const{user:e}=Rs(),t=ut(),[r,n]=u.useState(""),[a,i]=u.useState(""),l=u.useRef(null),[o,c]=u.useState({first_name:"",last_name:"",email:"",job_title:"",phone:"",department:""}),{data:d,isLoading:m}=me({queryKey:["currentStaff"],queryFn:()=>st.me().then(E=>E.data.staff),enabled:!!e});u.useEffect(()=>{d&&c({first_name:d.first_name||"",last_name:d.last_name||"",email:d.email||"",job_title:d.job_title||"",phone:d.phone||"",department:d.department||""})},[d]);const h=we({mutationFn:E=>st.update((e==null?void 0:e.id)||"",E),onSuccess:()=>{t.invalidateQueries({queryKey:["currentStaff"]}),n("Profile updated successfully!"),i(""),setTimeout(()=>n(""),3e3)},onError:E=>{var L,P;i(((P=(L=E.response)==null?void 0:L.data)==null?void 0:P.error)||"Failed to update profile"),n("")}}),p=we({mutationFn:E=>st.updateAvailability((e==null?void 0:e.id)||"",E),onSuccess:()=>{t.invalidateQueries({queryKey:["currentStaff"]}),n("Status updated!"),setTimeout(()=>n(""),2e3)}}),j=we({mutationFn:E=>st.uploadAvatar((e==null?void 0:e.id)||"",E),onSuccess:()=>{t.invalidateQueries({queryKey:["currentStaff"]}),t.invalidateQueries({queryKey:["staffUsers"]}),n("Photo uploaded successfully!"),setTimeout(()=>n(""),3e3)},onError:E=>{var L,P;i(((P=(L=E.response)==null?void 0:L.data)==null?void 0:P.error)||"Failed to upload photo")}}),f=we({mutationFn:()=>st.deleteAvatar((e==null?void 0:e.id)||""),onSuccess:()=>{t.invalidateQueries({queryKey:["currentStaff"]}),t.invalidateQueries({queryKey:["staffUsers"]}),n("Photo removed"),setTimeout(()=>n(""),2e3)},onError:E=>{var L,P;i(((P=(L=E.response)==null?void 0:L.data)==null?void 0:P.error)||"Failed to remove photo")}}),g=E=>{var P;const L=(P=E.target.files)==null?void 0:P[0];if(L){if(!["image/jpeg","image/png","image/gif","image/webp"].includes(L.type)){i("Invalid file type. Please use JPEG, PNG, GIF, or WebP");return}if(L.size>5*1024*1024){i("File too large. Maximum size is 5MB");return}j.mutate(L)}l.current&&(l.current.value="")},y=E=>{E.preventDefault(),h.mutate(o)},v=E=>{c(L=>({...L,[E.target.name]:E.target.value}))},x=(d==null?void 0:d.availability_status)||"offline";return m?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):s.jsxs("div",{className:"py-6 px-4 sm:px-6 lg:px-8 max-w-4xl mx-auto",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"My Account"}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Manage your profile information and availability status"})]}),r&&s.jsx("div",{className:"mb-6 rounded-md bg-green-50 p-4",children:s.jsxs("div",{className:"flex",children:[s.jsx(jm,{className:"h-5 w-5 text-green-400"}),s.jsx("p",{className:"ml-3 text-sm font-medium text-green-800",children:r})]})}),a&&s.jsx("div",{className:"mb-6 rounded-md bg-red-50 p-4",children:s.jsxs("div",{className:"flex",children:[s.jsx(RS,{className:"h-5 w-5 text-red-400"}),s.jsx("p",{className:"ml-3 text-sm font-medium text-red-800",children:a})]})}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsx("div",{className:"lg:col-span-1",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsxs("div",{className:"relative group",children:[d!=null&&d.avatar_url?s.jsx("img",{src:st.getAvatarUrl(d.avatar_url)||"",alt:`${d.first_name} ${d.last_name}`,className:"w-24 h-24 rounded-full object-cover"}):s.jsxs("div",{className:"w-24 h-24 rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-white text-3xl font-bold",children:[(b=d==null?void 0:d.first_name)==null?void 0:b[0],(w=d==null?void 0:d.last_name)==null?void 0:w[0]]}),s.jsx("div",{className:`absolute bottom-1 right-1 w-5 h-5 rounded-full border-2 border-white ${Yd[x].color}`}),s.jsxs("div",{className:"absolute inset-0 rounded-full bg-black bg-opacity-50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:[s.jsx("button",{onClick:()=>{var E;return(E=l.current)==null?void 0:E.click()},className:"p-2 text-white hover:text-indigo-200 transition-colors",title:"Upload photo",children:s.jsx(SS,{className:"w-6 h-6"})}),(d==null?void 0:d.avatar_url)&&s.jsx("button",{onClick:()=>f.mutate(),className:"p-2 text-white hover:text-red-300 transition-colors",title:"Remove photo",children:s.jsx(OS,{className:"w-6 h-6"})})]}),s.jsx("input",{ref:l,type:"file",accept:"image/jpeg,image/png,image/gif,image/webp",onChange:g,className:"hidden"})]}),j.isPending&&s.jsxs("div",{className:"mt-2 text-sm text-indigo-600 flex items-center gap-1",children:[s.jsxs("svg",{className:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Uploading..."]}),s.jsxs("h2",{className:"mt-4 text-lg font-semibold text-gray-900",children:[d==null?void 0:d.first_name," ",d==null?void 0:d.last_name]}),s.jsx("p",{className:"text-sm text-gray-500",children:(d==null?void 0:d.job_title)||"Team Member"}),s.jsx("span",{className:`mt-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${(d==null?void 0:d.role)==="admin"?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"}`,children:(d==null?void 0:d.role)==="admin"?"Administrator":"Staff"})]}),s.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Your Status"}),s.jsx("div",{className:"space-y-2",children:Object.keys(Yd).map(E=>{const L=Yd[E],P=E===x;return s.jsxs("button",{onClick:()=>p.mutate(E),disabled:p.isPending,className:`w-full flex items-center gap-3 px-3 py-2 rounded-lg text-left transition-all ${P?"bg-indigo-50 ring-2 ring-indigo-500":"hover:bg-gray-50 border border-gray-200"}`,children:[s.jsx("div",{className:`w-3 h-3 rounded-full ${L.color}`}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:`text-sm font-medium ${P?"text-indigo-700":"text-gray-700"}`,children:L.label}),s.jsx("p",{className:"text-xs text-gray-500",children:L.description})]}),P&&s.jsx(jm,{className:"w-5 h-5 text-indigo-600"})]},E)})})]})]})}),s.jsxs("div",{className:"lg:col-span-2",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-6",children:"Profile Information"}),s.jsxs("form",{onSubmit:y,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"first_name",className:"block text-sm font-medium text-gray-700",children:"First Name"}),s.jsx("input",{type:"text",id:"first_name",name:"first_name",value:o.first_name,onChange:v,className:"mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"last_name",className:"block text-sm font-medium text-gray-700",children:"Last Name"}),s.jsx("input",{type:"text",id:"last_name",name:"last_name",value:o.last_name,onChange:v,className:"mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email Address"}),s.jsx("input",{type:"email",id:"email",name:"email",value:o.email,onChange:v,disabled:!0,className:"mt-1 block w-full rounded-lg border-gray-300 bg-gray-50 shadow-sm sm:text-sm cursor-not-allowed"}),s.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Email cannot be changed"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"job_title",className:"block text-sm font-medium text-gray-700",children:"Job Title"}),s.jsx("input",{type:"text",id:"job_title",name:"job_title",value:o.job_title,onChange:v,placeholder:"e.g. Customer Support Specialist",className:"mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700",children:"Phone Number"}),s.jsx("input",{type:"tel",id:"phone",name:"phone",value:o.phone,onChange:v,placeholder:"e.g. 0412 345 678",className:"mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"department",className:"block text-sm font-medium text-gray-700",children:"Department"}),s.jsxs("select",{id:"department",name:"department",value:o.department,onChange:v,className:"mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",children:[s.jsx("option",{value:"",children:"Select a department"}),s.jsx("option",{value:"Customer Support",children:"Customer Support"}),s.jsx("option",{value:"Sales",children:"Sales"}),s.jsx("option",{value:"Production",children:"Production"}),s.jsx("option",{value:"Design",children:"Design"}),s.jsx("option",{value:"Management",children:"Management"}),s.jsx("option",{value:"Other",children:"Other"})]})]}),s.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-200",children:s.jsx("button",{type:"submit",disabled:h.isPending,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-lg shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed",children:h.isPending?s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):"Save Changes"})})]})]}),s.jsxs("div",{className:"mt-6 bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Account Information"}),s.jsxs("dl",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Account ID"}),s.jsxs("dd",{className:"mt-1 text-sm text-gray-900 font-mono",children:[(N=e==null?void 0:e.id)==null?void 0:N.slice(0,8),"..."]})]}),s.jsxs("div",{children:[s.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Role"}),s.jsx("dd",{className:"mt-1 text-sm text-gray-900 capitalize",children:(d==null?void 0:d.role)||"Staff"})]}),s.jsxs("div",{children:[s.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Member Since"}),s.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:d!=null&&d.created_at?new Date(d.created_at).toLocaleDateString():"N/A"})]}),s.jsxs("div",{children:[s.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Last Updated"}),s.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:d!=null&&d.updated_at?new Date(d.updated_at).toLocaleDateString():"N/A"})]})]})]})]})]})]})}function k6(){var y,v,x,b,w,N,E,L,P,ee,H;const e=ut(),[t,r]=u.useState(null),[n,a]=u.useState({}),{data:i,isLoading:l}=me({queryKey:["integrations"],queryFn:async()=>(await $.get("/api/integrations")).data}),o=we({mutationFn:async Q=>(await $.post(`/api/integrations/${Q}/test`)).data,onSuccess:()=>{e.invalidateQueries({queryKey:["integrations"]})}}),c=we({mutationFn:async({integrationId:Q,settings:ae})=>(await $.post(`/api/integrations/${Q}/settings`,ae)).data,onSuccess:()=>{e.invalidateQueries({queryKey:["integrations"]}),r(null),a({})}}),d=[{id:"shopify",name:"Shopify",description:"Connect your Shopify store to view customer orders and data",icon:s.jsx(kv,{className:"w-6 h-6"}),status:(y=i==null?void 0:i.shopify)!=null&&y.connected?"connected":"disconnected",settings:[{key:"SHOPIFY_DOMAIN",label:"Store Domain",type:"url",value:((v=i==null?void 0:i.shopify)==null?void 0:v.domain)||"",placeholder:"your-store.myshopify.com",required:!0,helpText:"Your Shopify store domain (e.g., your-store.myshopify.com)"},{key:"SHOPIFY_ACCESS_TOKEN",label:"Admin API Access Token",type:"password",value:((x=i==null?void 0:i.shopify)==null?void 0:x.accessToken)||"",placeholder:"shpat_xxxxxxxxxxxxx",required:!0,helpText:"Create a custom app in Shopify Admin  Settings  Apps and sales channels  Develop apps"}]},{id:"cloudflare-r2",name:"Cloudflare R2",description:"Object storage for file attachments",icon:s.jsx(l3,{className:"w-6 h-6"}),status:(b=i==null?void 0:i.r2)!=null&&b.connected?"connected":"disconnected",settings:[{key:"R2_BUCKET_NAME",label:"Bucket Name",type:"text",value:((w=i==null?void 0:i.r2)==null?void 0:w.bucketName)||"dartmouth-attachments",placeholder:"dartmouth-attachments",required:!0,helpText:"Your Cloudflare R2 bucket name"}]},{id:"email",name:"Email (Gmail)",description:"Send and receive emails via Gmail",icon:s.jsx(En,{className:"w-6 h-6"}),status:(N=i==null?void 0:i.email)!=null&&N.connected?"connected":"disconnected",settings:[{key:"GMAIL_CLIENT_ID",label:"Gmail Client ID",type:"text",value:((E=i==null?void 0:i.email)==null?void 0:E.clientId)||"",placeholder:"xxxxx.apps.googleusercontent.com",required:!0},{key:"GMAIL_CLIENT_SECRET",label:"Gmail Client Secret",type:"password",value:((L=i==null?void 0:i.email)==null?void 0:L.clientSecret)||"",placeholder:"GOCSPX-xxxxx",required:!0},{key:"GMAIL_REFRESH_TOKEN",label:"Gmail Refresh Token",type:"password",value:((P=i==null?void 0:i.email)==null?void 0:P.refreshToken)||"",placeholder:"1//xxxxx",required:!0}]},{id:"resend",name:"Resend",description:"Email service for transactional emails",icon:s.jsx(En,{className:"w-6 h-6"}),status:(ee=i==null?void 0:i.resend)!=null&&ee.connected?"connected":"disconnected",settings:[{key:"RESEND_API_KEY",label:"Resend API Key",type:"password",value:((H=i==null?void 0:i.resend)==null?void 0:H.apiKey)||"",placeholder:"re_xxxxx",required:!0,helpText:"Get your API key from resend.com"}]}],m=(Q,ae)=>{r(Q);const ne={};ae.settings.forEach(ve=>{ne[ve.key]=ve.value}),a(ne)},h=Q=>{c.mutate({integrationId:Q,settings:n})},p=Q=>{o.mutate(Q)},j=Q=>{switch(Q){case"connected":return s.jsx(lt,{className:"w-5 h-5 text-green-600"});case"error":return s.jsx(xr,{className:"w-5 h-5 text-red-600"});default:return s.jsx(sd,{className:"w-5 h-5 text-gray-400"})}},f=Q=>{switch(Q){case"connected":return"Connected";case"error":return"Error";default:return"Not Connected"}},g=Q=>{switch(Q){case"connected":return"text-green-600";case"error":return"text-red-600";default:return"text-gray-500"}};return l?s.jsx("div",{className:"flex items-center justify-center h-screen",children:s.jsx("div",{className:"text-gray-500",children:"Loading integrations..."})}):s.jsxs("div",{className:"p-6 max-w-6xl mx-auto",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Integrations"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Connect and manage your third-party integrations"})]}),s.jsx("div",{className:"space-y-4",children:d.map(Q=>s.jsxs("div",{className:"bg-white rounded-lg shadow border border-gray-200",children:[s.jsx("div",{className:"p-6 border-b border-gray-200",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"p-3 bg-blue-50 rounded-lg text-blue-600",children:Q.icon}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:Q.name}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:Q.description}),s.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[j(Q.status),s.jsx("span",{className:`text-sm font-medium ${g(Q.status)}`,children:f(Q.status)})]})]})]}),s.jsx("div",{className:"flex gap-2",children:t===Q.id?s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>{r(null),a({})},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),s.jsx("button",{onClick:()=>h(Q.id),disabled:c.isPending,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 disabled:opacity-50",children:c.isPending?"Saving...":"Save"})]}):s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>p(Q.id),disabled:o.isPending||Q.status==="disconnected",className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50",children:o.isPending?"Testing...":"Test Connection"}),s.jsx("button",{onClick:()=>m(Q.id,Q),className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700",children:"Configure"})]})})]})}),t===Q.id&&s.jsx("div",{className:"p-6 bg-gray-50",children:s.jsx("div",{className:"space-y-4",children:Q.settings.map(ae=>s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[ae.label,ae.required&&s.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),s.jsx("input",{type:ae.type,value:n[ae.key]||"",onChange:ne=>a({...n,[ae.key]:ne.target.value}),placeholder:ae.placeholder,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),ae.helpText&&s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:ae.helpText})]},ae.key))})})]},Q.id))}),s.jsxs("div",{className:"mt-8 p-6 bg-blue-50 rounded-lg border border-blue-200",children:[s.jsx("h3",{className:"text-sm font-semibold text-blue-900 mb-2",children:"Need Help?"}),s.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[s.jsxs("li",{children:[" ",s.jsx("strong",{children:"Shopify:"})," Create a custom app in your Shopify Admin to get API credentials"]}),s.jsxs("li",{children:[" ",s.jsx("strong",{children:"Cloudflare R2:"})," Configured via wrangler.toml and Cloudflare dashboard"]}),s.jsxs("li",{children:[" ",s.jsx("strong",{children:"Gmail:"})," Set up OAuth 2.0 credentials in Google Cloud Console"]}),s.jsxs("li",{children:[" ",s.jsx("strong",{children:"Resend:"})," Sign up at resend.com and create an API key"]})]})]})]})}function S6(){var ee,H,Q,ae;const e=ut(),[t,r]=u.useState("config"),[n,a]=u.useState(!1),[i,l]=u.useState(""),[o,c]=u.useState(""),[d,m]=u.useState(null),[h,p]=u.useState(null),{data:j,isLoading:f}=me({queryKey:["integrations"],queryFn:async()=>(await $.get("/api/integrations")).data}),{data:g,refetch:y}=me({queryKey:["integrations-debug"],queryFn:async()=>(await $.get("/api/integrations/debug")).data,enabled:!1}),v=we({mutationFn:async ne=>(await $.post("/api/integrations/shopify/settings",ne)).data,onSuccess:()=>{p({success:!0,message:"Settings saved successfully!"}),a(!1),e.invalidateQueries({queryKey:["integrations"]}),l(""),c("")},onError:ne=>{var ve,je;p({success:!1,message:((je=(ve=ne.response)==null?void 0:ve.data)==null?void 0:je.message)||"Failed to save settings"})}}),x=we({mutationFn:async()=>(await $.post("/api/integrations/shopify/test")).data,onSuccess:ne=>{m(ne),e.invalidateQueries({queryKey:["integrations"]})},onError:ne=>{var ve,je;m({success:!1,message:((je=(ve=ne.response)==null?void 0:ve.data)==null?void 0:je.message)||"Connection test failed"})}}),b=j==null?void 0:j.shopify,w=b==null?void 0:b.connected,N=()=>{var ne;a(!0),p(null),m(null),l(((ne=b==null?void 0:b.domain)==null?void 0:ne.replace(//g,""))||""),c("")},E=()=>{a(!1),l(""),c(""),p(null)},L=()=>{if(!i||!o){p({success:!1,message:"Both fields are required"});return}v.mutate({domain:i,accessToken:o})},P=()=>{m(null),x.mutate()};return f?s.jsx("div",{className:"flex items-center justify-center h-screen",children:s.jsx("div",{className:"text-gray-500",children:"Loading..."})}):s.jsxs("div",{className:"p-6 max-w-4xl",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Shopify Integration"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Connect your Shopify store to view customer orders and data in tickets"})]}),s.jsx("div",{className:"mb-6 border-b border-gray-200",children:s.jsxs("nav",{className:"-mb-px flex space-x-8",children:[s.jsx("button",{onClick:()=>r("config"),className:`py-4 px-1 border-b-2 font-medium text-sm ${t==="config"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Configuration"}),s.jsx("button",{onClick:()=>r("guide"),className:`py-4 px-1 border-b-2 font-medium text-sm ${t==="guide"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Installation Guide"})]})}),t==="config"&&s.jsxs("div",{className:"bg-white rounded-lg shadow border border-gray-200",children:[s.jsx("div",{className:"p-6 border-b border-gray-200",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"p-3 bg-green-50 rounded-lg text-green-600",children:s.jsx(kv,{className:"w-6 h-6"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Shopify Store"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"View customer order history, tracking info, and purchase data"}),s.jsx("div",{className:"flex items-center gap-2 mt-3",children:w?s.jsxs(s.Fragment,{children:[s.jsx(lt,{className:"w-5 h-5 text-green-600"}),s.jsx("span",{className:"text-sm font-medium text-green-600",children:"Connected"})]}):s.jsxs(s.Fragment,{children:[s.jsx(sd,{className:"w-5 h-5 text-gray-400"}),s.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Not Connected"})]})})]})]}),s.jsx("div",{className:"flex gap-2",children:n?s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:E,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),s.jsx("button",{onClick:L,disabled:v.isPending,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 disabled:opacity-50",children:v.isPending?"Saving...":"Save"})]}):s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>y(),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:"Debug Info"}),s.jsx("button",{onClick:P,disabled:x.isPending||!w,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:x.isPending?"Testing...":"Test Connection"}),s.jsx("button",{onClick:N,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700",children:"Configure"})]})})]})}),d&&s.jsx("div",{className:`p-4 border-b ${d.success?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:s.jsxs("div",{className:"flex items-start gap-3",children:[d.success?s.jsx(lt,{className:"w-5 h-5 text-green-600 mt-0.5"}):s.jsx(xr,{className:"w-5 h-5 text-red-600 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:`text-sm font-medium ${d.success?"text-green-900":"text-red-900"}`,children:d.success?"Connection Successful!":"Connection Failed"}),s.jsx("p",{className:`text-sm mt-1 ${d.success?"text-green-700":"text-red-700"}`,children:d.message})]})]})}),h&&s.jsx("div",{className:`p-4 border-b ${h.success?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:s.jsxs("div",{className:"flex items-start gap-3",children:[h.success?s.jsx(lt,{className:"w-5 h-5 text-green-600 mt-0.5"}):s.jsx(xr,{className:"w-5 h-5 text-red-600 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:`text-sm font-medium ${h.success?"text-green-900":"text-red-900"}`,children:h.success?"Saved Successfully!":"Save Failed"}),s.jsx("p",{className:`text-sm mt-1 ${h.success?"text-green-700":"text-red-700"}`,children:h.message})]})]})}),g&&s.jsxs("div",{className:"p-4 border-b bg-gray-50 border-gray-200",children:[s.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-2",children:"Debug Information"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-xs",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-700 mb-1",children:"KV Storage:"}),s.jsxs("p",{className:"text-gray-600",children:["Domain: ",((ee=g.kv)==null?void 0:ee.SHOPIFY_DOMAIN)||"not set"]}),s.jsxs("p",{className:"text-gray-600",children:["Token: ",((H=g.kv)==null?void 0:H.SHOPIFY_ACCESS_TOKEN)||"not set"]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-700 mb-1",children:"Secrets:"}),s.jsxs("p",{className:"text-gray-600",children:["Domain: ",((Q=g.secrets)==null?void 0:Q.SHOPIFY_DOMAIN)||"not set"]}),s.jsxs("p",{className:"text-gray-600",children:["Token: ",((ae=g.secrets)==null?void 0:ae.SHOPIFY_ACCESS_TOKEN)||"not set"]})]})]})]}),!n&&s.jsxs("div",{className:"p-6",children:[s.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-4",children:"Current Settings"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Store Domain"}),s.jsx("div",{className:"text-sm text-gray-900",children:(b==null?void 0:b.domain)||"Not configured"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Access Token"}),s.jsx("div",{className:"text-sm text-gray-900",children:(b==null?void 0:b.accessToken)||"Not configured"})]})]})]}),n&&s.jsxs("div",{className:"p-6 bg-gray-50",children:[s.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-4",children:"Shopify Configuration"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Store Domain ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:i,onChange:ne=>l(ne.target.value),placeholder:"your-store.myshopify.com",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Your Shopify store domain (e.g., your-store.myshopify.com)"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Admin API Access Token ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"password",value:o,onChange:ne=>c(ne.target.value),placeholder:"shpat_xxxxxxxxxxxxx",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Your Shopify Admin API access token (starts with shpat_)"})]}),s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[s.jsx("h4",{className:"text-sm font-semibold text-blue-900 mb-2",children:"How to get your Shopify credentials:"}),s.jsxs("ol",{className:"text-sm text-blue-800 space-y-1 list-decimal list-inside",children:[s.jsx("li",{children:"Go to Shopify Admin  Settings  Apps and sales channels"}),s.jsx("li",{children:'Click "Develop apps"  "Create an app" (name it "Dartmouth OS")'}),s.jsxs("li",{children:["Configure Admin API scopes: ",s.jsx("code",{className:"bg-blue-100 px-1 rounded",children:"read_customers"}),", ",s.jsx("code",{className:"bg-blue-100 px-1 rounded",children:"read_orders"}),", ",s.jsx("code",{className:"bg-blue-100 px-1 rounded",children:"read_products"})]}),s.jsx("li",{children:'Click "Install app" and copy the Admin API access token'})]}),s.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[s.jsx(il,{className:"w-4 h-4 text-blue-600"}),s.jsx("a",{href:"https://help.shopify.com/en/manual/apps/app-types/custom-apps",target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:text-blue-700 underline",children:"Shopify Custom Apps Documentation"})]})]})]})]}),s.jsxs("div",{className:"mt-6 bg-white rounded-lg shadow border border-gray-200 p-6",children:[s.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-4",children:"What You'll Get"}),s.jsxs("ul",{className:"space-y-3",children:[s.jsxs("li",{className:"flex items-start gap-3",children:[s.jsx(lt,{className:"w-5 h-5 text-green-600 mt-0.5 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Customer Order History"}),s.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"View all orders from a customer when viewing their ticket"})]})]}),s.jsxs("li",{className:"flex items-start gap-3",children:[s.jsx(lt,{className:"w-5 h-5 text-green-600 mt-0.5 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Order Tracking"}),s.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"See tracking numbers and fulfillment status"})]})]}),s.jsxs("li",{className:"flex items-start gap-3",children:[s.jsx(lt,{className:"w-5 h-5 text-green-600 mt-0.5 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Product Information"}),s.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"View product details and variants from orders"})]})]}),s.jsxs("li",{className:"flex items-start gap-3",children:[s.jsx(lt,{className:"w-5 h-5 text-green-600 mt-0.5 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:"AI Agent Context"}),s.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"AI can reference customer's order history when responding"})]})]})]})]})]}),t==="guide"&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow border border-gray-200 p-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Shopify Installation Guide"}),s.jsx("p",{className:"text-gray-700 mb-4",children:"Follow these steps to connect your Shopify store to Dartmouth OS. This will allow you to view customer order history, tracking information, and product details directly in your support tickets."}),s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:s.jsxs("p",{className:"text-sm text-blue-800",children:[s.jsx("strong",{children:"Time required:"})," 5-10 minutes",s.jsx("br",{}),s.jsx("strong",{children:"Shopify plan:"})," Any plan (Basic, Shopify, Advanced, Plus)",s.jsx("br",{}),s.jsx("strong",{children:"Access needed:"}),' Store owner or staff with "Develop apps" permission']})})]}),s.jsx("div",{className:"bg-white rounded-lg shadow border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[s.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center font-bold",children:"1"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Access Shopify Admin"}),s.jsxs("ol",{className:"space-y-3 text-gray-700",children:[s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"font-medium",children:"1."}),s.jsx("span",{children:"Log in to your Shopify Admin panel"})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"font-medium",children:"2."}),s.jsxs("span",{children:["Click ",s.jsx("strong",{children:"Settings"})," (bottom left corner)"]})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"font-medium",children:"3."}),s.jsxs("span",{children:["Click ",s.jsx("strong",{children:"Apps and sales channels"})]})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"font-medium",children:"4."}),s.jsxs("span",{children:["Click ",s.jsx("strong",{children:"Develop apps"})," (top right)"]})]})]}),s.jsx("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded",children:s.jsxs("p",{className:"text-sm text-yellow-800",children:[s.jsx("strong",{children:"Note:"}),` If you don't see "Develop apps", you may need to enable it first. Click "Allow custom app development" and confirm.`]})})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[s.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center font-bold",children:"2"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Create Custom App"}),s.jsxs("ol",{className:"space-y-3 text-gray-700",children:[s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"font-medium",children:"1."}),s.jsxs("span",{children:["Click ",s.jsx("strong",{children:"Create an app"})]})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"font-medium",children:"2."}),s.jsxs("span",{children:["Enter app name: ",s.jsx("code",{className:"bg-gray-100 px-2 py-1 rounded",children:"Dartmouth OS"})]})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"font-medium",children:"3."}),s.jsx("span",{children:"Select an app developer (usually yourself)"})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"font-medium",children:"4."}),s.jsxs("span",{children:["Click ",s.jsx("strong",{children:"Create app"})]})]})]})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[s.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center font-bold",children:"3"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Configure API Scopes"}),s.jsxs("ol",{className:"space-y-3 text-gray-700",children:[s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"font-medium",children:"1."}),s.jsxs("span",{children:["Click ",s.jsx("strong",{children:"Configure Admin API scopes"})]})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"font-medium",children:"2."}),s.jsx("span",{children:"Search for and enable these scopes:"})]})]}),s.jsxs("div",{className:"mt-3 ml-6 space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2 p-2 bg-green-50 border border-green-200 rounded",children:[s.jsx(lt,{className:"w-5 h-5 text-green-600"}),s.jsx("code",{className:"font-mono text-sm",children:"read_customers"}),s.jsx("span",{className:"text-xs text-gray-600",children:"- View customer information"})]}),s.jsxs("div",{className:"flex items-center gap-2 p-2 bg-green-50 border border-green-200 rounded",children:[s.jsx(lt,{className:"w-5 h-5 text-green-600"}),s.jsx("code",{className:"font-mono text-sm",children:"read_orders"}),s.jsx("span",{className:"text-xs text-gray-600",children:"- View order history"})]}),s.jsxs("div",{className:"flex items-center gap-2 p-2 bg-green-50 border border-green-200 rounded",children:[s.jsx(lt,{className:"w-5 h-5 text-green-600"}),s.jsx("code",{className:"font-mono text-sm",children:"read_products"}),s.jsx("span",{className:"text-xs text-gray-600",children:"- View product details"})]})]}),s.jsx("ol",{start:3,className:"space-y-3 text-gray-700 mt-3",children:s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"font-medium",children:"3."}),s.jsxs("span",{children:["Click ",s.jsx("strong",{children:"Save"})]})]})}),s.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded",children:s.jsxs("p",{className:"text-sm text-red-800",children:[s.jsx("strong",{children:"Important:"})," Only enable these three scopes. Do not enable write permissions unless absolutely necessary."]})})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[s.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center font-bold",children:"4"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Install the App"}),s.jsxs("ol",{className:"space-y-3 text-gray-700",children:[s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"font-medium",children:"1."}),s.jsxs("span",{children:["Click ",s.jsx("strong",{children:"Install app"})," (top right)"]})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"font-medium",children:"2."}),s.jsxs("span",{children:["Review the permissions and click ",s.jsx("strong",{children:"Install"})]})]})]}),s.jsx("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded",children:s.jsxs("p",{className:"text-sm text-yellow-800",children:[s.jsx("strong",{children:"Note:"})," You must install the app before you can get the access token. If you skip this step, you'll get a 403 Forbidden error."]})})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[s.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center font-bold",children:"5"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Get API Credentials"}),s.jsxs("ol",{className:"space-y-3 text-gray-700",children:[s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"font-medium",children:"1."}),s.jsxs("span",{children:["Click ",s.jsx("strong",{children:"API credentials"})," tab"]})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"font-medium",children:"2."}),s.jsxs("span",{children:["Copy your ",s.jsx("strong",{children:"Admin API access token"})," (starts with ",s.jsx("code",{className:"bg-gray-100 px-1 rounded",children:"shpat_"}),")"]})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"font-medium",children:"3."}),s.jsxs("span",{children:["Note your store domain (e.g., ",s.jsx("code",{className:"bg-gray-100 px-1 rounded",children:"your-store.myshopify.com"}),")"]})]})]}),s.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded",children:s.jsxs("p",{className:"text-sm text-red-800",children:[s.jsx("strong",{children:"Security Warning:"})," The access token is shown only once! Copy it immediately and store it securely. If you lose it, you'll need to uninstall and reinstall the app to get a new token."]})})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[s.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-green-600 text-white rounded-full flex items-center justify-center font-bold",children:"6"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Connect to Dartmouth OS"}),s.jsxs("ol",{className:"space-y-3 text-gray-700",children:[s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"font-medium",children:"1."}),s.jsxs("span",{children:["Go to the ",s.jsx("strong",{children:"Configuration"})," tab above"]})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"font-medium",children:"2."}),s.jsxs("span",{children:["Click ",s.jsx("strong",{children:"Configure"})]})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"font-medium",children:"3."}),s.jsx("span",{children:"Enter your Store Domain and Admin API Access Token"})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"font-medium",children:"4."}),s.jsxs("span",{children:["Click ",s.jsx("strong",{children:"Save"})]})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"font-medium",children:"5."}),s.jsxs("span",{children:["Click ",s.jsx("strong",{children:"Test Connection"})," to verify everything works"]})]})]}),s.jsx("div",{className:"mt-4 p-3 bg-green-50 border border-green-200 rounded",children:s.jsxs("p",{className:"text-sm text-green-800",children:[s.jsx("strong",{children:"Success!"})," If the test passes, you're all set. Customer order data will now appear in your support tickets."]})})]})]})}),s.jsxs("div",{className:"bg-white rounded-lg shadow border border-gray-200 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Troubleshooting Common Issues"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"border-l-4 border-red-500 pl-4",children:[s.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:"403 Forbidden Error"}),s.jsx("p",{className:"text-sm text-gray-700 mb-2",children:"This usually means:"}),s.jsxs("ul",{className:"text-sm text-gray-600 space-y-1 ml-4",children:[s.jsx("li",{children:" The app wasn't installed (Step 4)"}),s.jsx("li",{children:" Wrong API scopes were configured"}),s.jsx("li",{children:" You copied the API Key instead of the Access Token"})]}),s.jsxs("p",{className:"text-sm text-gray-700 mt-2",children:[s.jsx("strong",{children:"Solution:"})," Go back to Step 3 and verify the scopes, then reinstall the app."]})]}),s.jsxs("div",{className:"border-l-4 border-yellow-500 pl-4",children:[s.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:"401 Unauthorized Error"}),s.jsx("p",{className:"text-sm text-gray-700 mb-2",children:"This means the access token is invalid."}),s.jsxs("p",{className:"text-sm text-gray-700",children:[s.jsx("strong",{children:"Solution:"})," Double-check you copied the entire token (starts with shpat_). If still failing, uninstall and reinstall the app to get a new token."]})]}),s.jsxs("div",{className:"border-l-4 border-blue-500 pl-4",children:[s.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:"Connection Timeout"}),s.jsx("p",{className:"text-sm text-gray-700 mb-2",children:"This means the domain is incorrect."}),s.jsxs("p",{className:"text-sm text-gray-700",children:[s.jsx("strong",{children:"Solution:"})," Verify your store domain is in the format: your-store.myshopify.com (not your custom domain)."]})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow border border-gray-200 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Additional Resources"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("a",{href:"https://help.shopify.com/en/manual/apps/app-types/custom-apps",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-blue-600 hover:text-blue-700 text-sm",children:[s.jsx(il,{className:"w-4 h-4"}),"Shopify Custom Apps Documentation"]}),s.jsxs("a",{href:"https://shopify.dev/docs/api/admin-rest",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-blue-600 hover:text-blue-700 text-sm",children:[s.jsx(il,{className:"w-4 h-4"}),"Shopify Admin API Reference"]})]})]})]})]})}function C6(){var Jt,Ur,ki,Si;const{user:e}=Rs(),t=ut(),[r]=zl(),n=u.useRef(null),a=u.useRef(null),[i,l]=u.useState(null),[o,c]=u.useState(null),[d,m]=u.useState(""),[h,p]=u.useState([]),[j,f]=u.useState(!1),[g,y]=u.useState(!0),[v,x]=u.useState(""),[b,w]=u.useState(""),[N,E]=u.useState(null),[L,P]=u.useState(null),[ee,H]=u.useState(""),[Q,ae]=u.useState(!1),[ne,ve]=u.useState(null),[je,Se]=u.useState(null),[D,T]=u.useState(!1),[Y,J]=u.useState(""),[X,he]=u.useState(0),Oe=u.useRef(null),[G,Le]=u.useState(null),[z,_]=u.useState(!1),[B,W]=u.useState(null),[V,re]=u.useState(""),[de,U]=u.useState(null),[Ce,Ge]=u.useState(null),[Ee,ce]=u.useState(!1),I=u.useRef(null),[Ae,Te]=u.useState(""),[A,te]=u.useState([]),[le,Ne]=u.useState(0),[Re,Ze]=u.useState(!1),{data:tt}=me({queryKey:["group-chat-channels"],queryFn:async()=>(await mt.listChannels()).data,refetchInterval:5e3}),ct=(tt==null?void 0:tt.channels)||[],{data:zt}=me({queryKey:["group-chat-time-limit"],queryFn:async()=>(await mt.getTimeLimit()).data}),Ns=(zt==null?void 0:zt.timeLimit)??10,ns=k=>{if((e==null?void 0:e.role)==="admin"||Ns===0)return!0;const xe=new Date(k.created_at).getTime(),pe=Date.now(),Pe=Ns*60*1e3;return k.sender_id===(e==null?void 0:e.id)&&pe-xe<=Pe},St=()=>{n.current&&n.current.scrollIntoView({behavior:"smooth",block:"end"})},Gt=k=>{c(k),setTimeout(()=>{const xe=document.getElementById(`message-${k}`);xe&&xe.scrollIntoView({behavior:"smooth",block:"center"})},100),setTimeout(()=>{c(null)},5e3)},nr=k=>{if(Te(k),!k.trim()||!bt.length){te([]),Ne(0);return}const xe=k.toLowerCase(),pe=[];[...bt].reverse().forEach(Pe=>{let He=!1;Pe.content.toLowerCase().includes(xe)&&(He=!0),Pe.tags&&Pe.tags.split(",").map(xt=>xt.trim().toLowerCase()).some(xt=>xt.includes(xe))&&(He=!0),He&&pe.push(Pe.id)}),te(pe),Ne(0),pe.length>0&&Gt(pe[0])},Ps=()=>{if(A.length===0)return;const k=(le+1)%A.length;Ne(k),Gt(A[k])},ge=()=>{if(A.length===0)return;const k=le===0?A.length-1:le-1;Ne(k),Gt(A[k])};u.useEffect(()=>{!i&&ct.length>0&&l(ct[0].id)},[ct,i]),u.useEffect(()=>{const k=r.get("channel"),xe=r.get("message");k&&l(k),xe&&(c(xe),setTimeout(()=>{const pe=document.getElementById(`message-${xe}`);pe&&pe.scrollIntoView({behavior:"smooth",block:"center"})},500),setTimeout(()=>{c(null)},5e3))},[r]),u.useEffect(()=>{const k=I.current;if(!k)return;const xe=()=>{const{scrollTop:pe,scrollHeight:Pe,clientHeight:He}=k,at=Pe-pe-He<100;ce(!at)};return k.addEventListener("scroll",xe),()=>k.removeEventListener("scroll",xe)},[i]);const{data:Hs}=me({queryKey:["group-chat-messages",i],queryFn:async()=>i?(await mt.getMessages(i,{limit:50})).data:{messages:[]},enabled:!!i,refetchInterval:5e3,refetchOnWindowFocus:!1}),bt=(Hs==null?void 0:Hs.messages)||[];u.useEffect(()=>{if(bt.length>0){const k=bt[bt.length-1];k.id!==N&&(E(k.id),i&&mt.markAsRead(i,k.id))}},[bt,N,i]);const{data:vr}=me({queryKey:["group-chat-members",i],queryFn:async()=>i?(await mt.getMembers(i)).data:{members:[]},enabled:!!i}),as=(vr==null?void 0:vr.members)||[],ks=as.find(k=>k.staff_id===(e==null?void 0:e.id)),Yt=(ks==null?void 0:ks.role)==="admin";u.useEffect(()=>{n.current&&n.current.scrollIntoView({behavior:"smooth",block:"end"})},[bt]),u.useEffect(()=>{const k=setTimeout(()=>{n.current&&n.current.scrollIntoView({behavior:"auto",block:"end"})},100);return()=>clearTimeout(k)},[]),u.useEffect(()=>{const k=()=>Le(null);if(G)return document.addEventListener("click",k),()=>document.removeEventListener("click",k)},[G]);const Bs=we({mutationFn:async k=>{if(!i)throw new Error("No active channel");return mt.sendMessage(i,k)},onSuccess:()=>{m(""),p([]),t.invalidateQueries({queryKey:["group-chat-messages",i]}),t.invalidateQueries({queryKey:["group-chat-channels"]})}}),jt=we({mutationFn:k=>mt.createChannel(k),onSuccess:()=>{f(!1),x(""),w(""),t.invalidateQueries({queryKey:["group-chat-channels"]})}}),R=we({mutationFn:({messageId:k,content:xe,deleteAttachment:pe})=>mt.editMessage(k,xe,pe),onSuccess:()=>{P(null),ae(!1),H(""),t.invalidateQueries({queryKey:["group-chat-messages",i]})}}),_e=we({mutationFn:k=>mt.deleteMessage(k),onSuccess:()=>{t.invalidateQueries({queryKey:["group-chat-messages",i]})}}),ze=we({mutationFn:({messageId:k,emoji:xe})=>mt.addReaction(k,xe),onSuccess:()=>{t.invalidateQueries({queryKey:["group-chat-messages",i]}),ve(null)}}),$e=async()=>{if(!d.trim()&&h.length===0||Bs.isPending)return;let k=[];if(h.length>0)for(const pe of h){const Pe=await Ut(pe);k.push({name:pe.name,content:Pe,type:pe.type,size:pe.size})}let xe=d;Ce&&(xe=` Replying to ${Ce.first_name}: "${Ce.content.substring(0,50)}${Ce.content.length>50?"...":""}" [msg:${Ce.id}]

${d}`),Bs.mutate({content:xe,attachments:k.length>0?k:void 0}),Ge(null)},rt=k=>{k.target.files&&k.target.files.length>0&&p(Array.from(k.target.files))},Ut=k=>new Promise((xe,pe)=>{const Pe=new FileReader;Pe.readAsDataURL(k),Pe.onload=()=>xe(Pe.result),Pe.onerror=He=>pe(He)}),K=async(k,xe)=>{try{const Pe=await(await fetch(k)).blob(),He=window.URL.createObjectURL(Pe),at=document.createElement("a");at.href=He,at.download=xe,document.body.appendChild(at),at.click(),document.body.removeChild(at),window.URL.revokeObjectURL(He)}catch(pe){console.error("Error downloading file:",pe)}},M=()=>{v.trim()&&jt.mutate({name:v,description:b||void 0,channelType:"public"})},fe=k=>k.startsWith("http")?k:`https://dartmouth-os-worker.dartmouth.workers.dev/api/attachments/${k}`,Me=k=>k.split(/(@\w+|@\d+|#\d+|TKT-\d+|ticket\s+\d+)/gi).map((pe,Pe)=>{if(pe.match(/^@\w+$/)&&!pe.match(/^@\d+$/))return s.jsx("span",{className:"bg-blue-100 text-blue-700 font-semibold px-1 rounded",children:pe},Pe);const He=pe.match(/^@(\d+)$|^#(\d+)$|^TKT-(\d+)$|^ticket\s+(\d+)$/i);if(He){const at=He[1]||He[2]||He[3]||He[4];return s.jsx("a",{href:`/tickets?search=TKT-${at}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 hover:underline font-medium",onClick:xt=>{xt.stopPropagation()},children:pe},Pe)}return pe}),ke=k=>{const xe=k.content,pe=xe.match(/^ Replying to (\w+): "(.+?)" \[msg:([^\]]+)\]\n\n([\s\S]*)$/);if(pe){const[,Pe,He,at,xt]=pe;return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"mb-2 pb-2 border-b border-gray-300",children:s.jsxs("button",{onClick:()=>{Gt(at)},className:"flex items-center gap-1 text-xs text-blue-600 hover:text-blue-800 hover:underline",title:"Click to view original message",children:[s.jsx("span",{className:"text-base",children:""}),s.jsxs("span",{children:["Replying to ",Pe,': "',He,'"']})]})}),s.jsx("div",{children:Me(xt)})]})}return Me(xe)},Ye=ct.find(k=>k.id===i);return s.jsxs("div",{className:"w-full flex bg-gray-50",style:{height:"calc(100vh - 3.5rem)"},children:[s.jsxs("div",{className:"w-64 bg-white border-r border-gray-200 flex flex-col flex-shrink-0 h-full overflow-hidden",children:[s.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex-shrink-0",style:{height:"73px"},children:[s.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Team Chat"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Internal Communication"})]}),s.jsx("div",{className:"flex-1 overflow-y-auto",children:s.jsxs("div",{className:"p-2",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2 px-2",children:[s.jsx("span",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Channels"}),Yt&&s.jsx("button",{onClick:()=>f(!0),className:"p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded",title:"Create new channel (Admin only)",children:s.jsx(Oh,{className:"w-4 h-4"})})]}),ct.map(k=>s.jsxs("button",{onClick:()=>l(k.id),className:`w-full flex items-center gap-2 px-3 py-2 rounded-lg text-left transition-colors border ${i===k.id?"bg-indigo-50 text-indigo-900 font-semibold border-indigo-300":"text-gray-700 hover:bg-gray-50 border-transparent"}`,children:[s.jsx($t,{className:"w-4 h-4 flex-shrink-0"}),s.jsx("span",{className:"flex-1 truncate font-medium",children:k.name}),k.unread_count>0&&s.jsx("span",{className:"bg-red-500 text-white text-xs rounded-full px-2 py-0.5",children:k.unread_count})]},k.id))]})})]}),s.jsx("div",{className:"flex-1 flex flex-col h-full overflow-hidden relative",children:Ye?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-white border-b border-gray-200 px-6 py-4 flex-shrink-0",style:{minHeight:"73px"},children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[s.jsx($t,{className:"w-5 h-5 text-gray-400 flex-shrink-0"}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 truncate",children:Ye.name}),Ye.description&&s.jsx("p",{className:"text-sm text-gray-500 truncate",children:Ye.description})]})]}),s.jsx("button",{onClick:()=>Ze(!Re),className:`p-2 rounded-lg flex-shrink-0 ${Re?"bg-blue-100 text-blue-600":"text-gray-600 hover:bg-gray-100"}`,title:"Search messages",children:s.jsx(ui,{className:"w-5 h-5"})}),s.jsxs("button",{onClick:()=>y(!g),className:"flex items-center gap-2 px-3 py-2 text-gray-600 hover:bg-gray-100 rounded-lg flex-shrink-0",children:[s.jsx(Yl,{className:"w-5 h-5"}),s.jsxs("span",{className:"text-sm font-medium",children:[as.length," members"]})]})]}),Re&&s.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx("input",{type:"text",value:Ae,onChange:k=>nr(k.target.value),placeholder:"Search messages and tags... (e.g., James Scott, #james-scott)",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",autoFocus:!0}),A.length>0&&s.jsxs("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 flex items-center gap-2 bg-white px-2",children:[s.jsxs("span",{className:"text-sm text-gray-600",children:[le+1," / ",A.length]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx("button",{onClick:ge,className:"p-1 hover:bg-gray-100 rounded",title:"Previous result",children:s.jsx(or,{className:"w-4 h-4"})}),s.jsx("button",{onClick:Ps,className:"p-1 hover:bg-gray-100 rounded",title:"Next result",children:s.jsx(Ks,{className:"w-4 h-4"})})]})]})]}),s.jsx("button",{onClick:()=>{Ze(!1),Te(""),te([]),Ne(0)},className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg",title:"Close search",children:s.jsx(Rt,{className:"w-5 h-5"})})]})]}),s.jsxs("div",{ref:I,className:"flex-1 overflow-y-auto p-6 space-y-3 relative",children:[bt.map(k=>{var at,xt,Ss,Hr;const xe=k.sender_id===(e==null?void 0:e.id),pe=k.reactions?JSON.parse(k.reactions):[],Pe=L===k.id,He=o===k.id;return s.jsxs("div",{id:`message-${k.id}`,className:`group flex gap-3 -mx-2 px-2 py-1 rounded transition-all duration-300 ${He?"bg-yellow-100 border-l-4 border-yellow-500 pl-1":"hover:bg-gray-50"}`,onContextMenu:Qe=>{Qe.preventDefault(),Le({x:Qe.clientX,y:Qe.clientY,messageId:k.id})},children:[s.jsxs("div",{className:"flex-shrink-0",children:[k.profile_picture&&st.getAvatarUrl(k.profile_picture)?s.jsx("img",{src:st.getAvatarUrl(k.profile_picture)||"",alt:`${k.first_name} ${k.last_name}`,className:"w-10 h-10 rounded-full object-cover",onError:Qe=>{var Et;Qe.currentTarget.style.display="none",(Et=Qe.currentTarget.nextElementSibling)==null||Et.classList.remove("hidden")}}):null,s.jsxs("div",{className:`w-10 h-10 rounded-full bg-gray-600 flex items-center justify-center text-white font-semibold ${k.profile_picture&&st.getAvatarUrl(k.profile_picture)?"hidden":""}`,children:[(at=k.first_name)==null?void 0:at[0],(xt=k.last_name)==null?void 0:xt[0]]})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-baseline gap-2 mb-1",children:[s.jsxs("span",{className:"font-semibold text-gray-900 text-sm",children:[k.first_name," ",k.last_name]}),s.jsx("span",{className:"text-xs text-gray-500",children:(()=>{const Qe=new Date(k.created_at),Et=new Date;return Qe.toDateString()===Et.toDateString()?Qe.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):Qe.toLocaleString([],{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})})()}),k.edited_at&&s.jsxs("span",{className:"text-xs text-gray-400 italic",title:`Edited at ${new Date(k.edited_at).toLocaleString()}`,children:["(edited ",new Date(k.edited_at).toLocaleString([],{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),")"]}),xe&&!Pe&&ns(k)&&s.jsxs("div",{className:"ml-auto opacity-0 group-hover:opacity-100 transition-opacity flex items-center gap-1",children:[s.jsx("button",{onClick:()=>{P(k.id),H(k.content),ae(!1)},className:"p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-200 rounded",title:"Edit message (within 10 mins)",children:s.jsx(wv,{className:"w-3.5 h-3.5"})}),s.jsx("button",{onClick:()=>Se(k.id),className:"p-1 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded",title:"Delete message (within 10 mins)",children:s.jsx(hi,{className:"w-3.5 h-3.5"})})]})]}),Pe?s.jsxs("div",{className:"space-y-2",children:[s.jsx("textarea",{value:ee,onChange:Qe=>H(Qe.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none",rows:3,autoFocus:!0}),k.attachment_url&&!Q&&s.jsxs("div",{className:"flex items-center gap-2 p-2 bg-gray-50 rounded border border-gray-200",children:[(Ss=k.attachment_type)!=null&&Ss.startsWith("image/")?s.jsx(kc,{className:"w-4 h-4 text-gray-500"}):s.jsx(Ho,{className:"w-4 h-4 text-gray-500"}),s.jsx("span",{className:"text-sm text-gray-700 flex-1",children:k.attachment_name}),s.jsx("button",{onClick:()=>ae(!0),className:"p-1 text-red-500 hover:text-red-700 hover:bg-red-50 rounded",title:"Remove attachment",children:s.jsx(Rt,{className:"w-4 h-4"})})]}),Q&&s.jsx("div",{className:"text-xs text-gray-500 italic",children:"Attachment will be removed when you save"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>{R.mutate({messageId:k.id,content:ee,deleteAttachment:Q})},className:"px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700",children:"Save"}),s.jsx("button",{onClick:()=>{P(null),H(""),ae(!1)},className:"px-3 py-1 bg-gray-200 text-gray-700 text-sm rounded hover:bg-gray-300",children:"Cancel"})]})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-gray-50 rounded-lg px-4 py-2.5 border border-gray-200",children:[s.jsx("div",{className:"text-gray-900 text-sm whitespace-pre-wrap break-words",children:ke(k)}),k.attachment_url&&s.jsx("div",{className:"mt-2",children:(Hr=k.attachment_type)!=null&&Hr.startsWith("image/")?s.jsxs("div",{className:"relative inline-block",children:[s.jsx("a",{href:fe(k.attachment_url),target:"_blank",rel:"noopener noreferrer",className:"block",children:s.jsx("img",{src:fe(k.attachment_url),alt:k.attachment_name||"Attachment",className:"max-w-md rounded border border-gray-300"})}),s.jsx("button",{onClick:()=>k.attachment_url&&K(fe(k.attachment_url),k.attachment_name||"image.png"),className:"absolute top-2 right-2 p-2 bg-white/90 hover:bg-white text-gray-700 hover:text-blue-600 rounded-lg shadow-md border border-gray-200",title:"Download image",children:s.jsx(Nc,{className:"w-4 h-4"})})]}):s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("a",{href:fe(k.attachment_url),target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-sm text-blue-600 hover:underline",children:[s.jsx(Ho,{className:"w-4 h-4"}),s.jsx("span",{children:k.attachment_name}),k.attachment_size&&s.jsxs("span",{className:"text-xs text-gray-500",children:["(",(k.attachment_size/1024).toFixed(1)," KB)"]})]}),s.jsx("button",{onClick:()=>k.attachment_url&&K(fe(k.attachment_url),k.attachment_name||"download"),className:"p-1 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded",title:"Download file",children:s.jsx(Nc,{className:"w-4 h-4"})})]})}),k.tags&&s.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:Jl(k.tags).map((Qe,Et)=>s.jsxs(vt,{to:`/tags?tag=${encodeURIComponent(Qe)}`,className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-100 text-blue-700 text-xs rounded hover:bg-blue-200 transition-colors",children:[s.jsx($t,{className:"w-3 h-3"}),Qe]},Et))})]}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[pe.length>0&&s.jsx("div",{className:"flex flex-wrap gap-1",children:Object.entries(pe.reduce((Qe,Et)=>(Qe[Et.emoji]=(Qe[Et.emoji]||0)+1,Qe),{})).map(([Qe,Et])=>s.jsxs("button",{onClick:()=>ze.mutate({messageId:k.id,emoji:Qe}),className:"inline-flex items-center gap-1 px-2 py-0.5 bg-blue-50 hover:bg-blue-100 border border-blue-200 rounded-full text-xs",children:[s.jsx("span",{children:Qe}),s.jsx("span",{className:"text-blue-600 font-medium",children:Et})]},Qe))}),s.jsxs("div",{className:"relative",children:[s.jsx("button",{onClick:()=>ve(ne===k.id?null:k.id),className:"opacity-0 group-hover:opacity-100 transition-opacity p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-200 rounded",title:"Add reaction",children:s.jsx(Z3,{className:"w-4 h-4"})}),ne===k.id&&s.jsx("div",{className:"absolute bottom-full left-0 mb-2 bg-white border border-gray-200 rounded-lg shadow-lg p-2 flex gap-1 z-10",children:["","","","","","",""].map(Qe=>s.jsx("button",{onClick:()=>ze.mutate({messageId:k.id,emoji:Qe}),className:"text-2xl hover:bg-gray-100 rounded p-1",children:Qe},Qe))})]})]})]})]})]},k.id)}),s.jsx("div",{ref:n})]}),Ee&&s.jsx("button",{onClick:St,className:"absolute bottom-28 right-8 bg-blue-600 hover:bg-blue-700 text-white rounded-full p-3 shadow-lg transition-all duration-200 z-50",title:"Scroll to bottom",children:s.jsx(I4,{className:"w-5 h-5"})}),s.jsxs("div",{className:"bg-white pt-8 pb-4 px-4",children:[s.jsx("div",{className:"text-xs text-gray-500 mb-2",children:_v}),h.length>0&&s.jsx("div",{className:"mb-3 flex flex-wrap gap-2",children:h.map((k,xe)=>s.jsxs("div",{className:"flex items-center gap-2 bg-gray-100 rounded-lg px-3 py-2",children:[k.type.startsWith("image/")?s.jsx(kc,{className:"w-4 h-4 text-gray-600"}):s.jsx(Ho,{className:"w-4 h-4 text-gray-600"}),s.jsx("span",{className:"text-sm text-gray-700",children:k.name}),s.jsx("button",{onClick:()=>p(h.filter((pe,Pe)=>Pe!==xe)),className:"text-gray-400 hover:text-gray-600",children:s.jsx(Rt,{className:"w-4 h-4"})})]},xe))}),Ce&&s.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-blue-50 border-l-4 border-blue-500",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"text-xs text-blue-600 font-semibold",children:["Replying to ",Ce.first_name," ",Ce.last_name]}),s.jsx("div",{className:"text-sm text-gray-600 truncate",children:Ce.content})]}),s.jsx("button",{onClick:()=>Ge(null),className:"p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-200 rounded",children:s.jsx(Rt,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"file",ref:a,onChange:rt,className:"hidden",multiple:!0}),s.jsx("button",{onClick:()=>{var k;return(k=a.current)==null?void 0:k.click()},className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg",children:s.jsx(Ct,{className:"w-5 h-5"})}),s.jsxs("div",{className:"flex-1 relative",children:[s.jsx("input",{ref:Oe,type:"text",value:d,onChange:k=>{const xe=k.target.value;m(xe);const pe=k.target.selectionStart||0,He=xe.substring(0,pe).match(/@(\w*)$/);He?(J(He[1].toLowerCase()),he(pe),T(!0)):T(!1)},onKeyDown:k=>{k.key==="Enter"&&!D?(k.preventDefault(),$e()):k.key==="Escape"&&D&&T(!1)},placeholder:"Type a message... Use @ to mention, #keyword to add tags",className:"w-full px-4 h-[42px] border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),D&&as.length>0&&s.jsxs("div",{className:"absolute bottom-full left-0 mb-2 w-64 bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto z-50",children:[as.filter(k=>{const xe=`${k.first_name} ${k.last_name}`.toLowerCase(),pe=k.first_name.toLowerCase();return xe.includes(Y)||pe.includes(Y)}).map(k=>s.jsxs("button",{onClick:()=>{var He;const xe=d.substring(0,X).replace(/@\w*$/,""),pe=d.substring(X),Pe=`${xe}@${k.first_name.toLowerCase()} ${pe}`;m(Pe),T(!1),(He=Oe.current)==null||He.focus()},className:"w-full px-4 py-2 text-left hover:bg-gray-50 flex items-center gap-2",children:[k.avatar_url&&st.getAvatarUrl(k.avatar_url)?s.jsx("img",{src:st.getAvatarUrl(k.avatar_url)||"",alt:`${k.first_name} ${k.last_name}`,className:"w-8 h-8 rounded-full object-cover",onError:xe=>{var pe;xe.currentTarget.style.display="none",(pe=xe.currentTarget.nextElementSibling)==null||pe.classList.remove("hidden")}}):null,s.jsxs("div",{className:`w-8 h-8 rounded-full bg-blue-500 text-white flex items-center justify-center text-sm font-semibold ${k.avatar_url&&st.getAvatarUrl(k.avatar_url)?"hidden":""}`,children:[k.first_name[0],k.last_name[0]]}),s.jsxs("div",{children:[s.jsxs("div",{className:"font-medium text-sm",children:[k.first_name," ",k.last_name]}),s.jsxs("div",{className:"text-xs text-gray-500",children:["@",k.first_name.toLowerCase()]})]})]},k.staff_id)),("mccarthy".includes(Y)||"mc".includes(Y))&&s.jsxs("button",{onClick:()=>{var Pe;const k=d.substring(0,X).replace(/@\w*$/,""),xe=d.substring(X),pe=`${k}@mccarthy ${xe}`;m(pe),T(!1),(Pe=Oe.current)==null||Pe.focus()},className:"w-full px-4 py-2 text-left hover:bg-gray-50 flex items-center gap-2 border-t border-gray-200",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-purple-500 text-white flex items-center justify-center text-sm font-semibold",children:"AI"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-sm",children:"McCarthy AI"}),s.jsx("div",{className:"text-xs text-gray-500",children:"@mccarthy"})]})]})]})]}),s.jsx("button",{onClick:$e,disabled:!d.trim()&&h.length===0||Bs.isPending,className:"px-4 py-2.5 bg-gray-800 text-white rounded-lg hover:bg-gray-900 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 h-[42px]",children:Bs.isPending?s.jsxs(s.Fragment,{children:[s.jsx(bv,{className:"w-5 h-5 animate-spin"}),s.jsx("span",{children:"Uploading..."})]}):s.jsxs(s.Fragment,{children:[s.jsx(rd,{className:"w-5 h-5"}),s.jsx("span",{children:"Send"})]})})]})]})]}):s.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-500",children:s.jsxs("div",{className:"text-center",children:[s.jsx($t,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),s.jsx("p",{className:"text-lg font-medium",children:"No channel selected"}),s.jsx("p",{className:"text-sm",children:"Select a channel from the sidebar to start chatting"})]})})}),g&&Ye&&s.jsxs("div",{className:"w-64 bg-white border-l border-gray-200 flex flex-col flex-shrink-0 h-full overflow-hidden",children:[s.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex-shrink-0",style:{height:"73px"},children:[s.jsx("h3",{className:"font-semibold text-gray-900",children:"Members"}),s.jsxs("p",{className:"text-sm text-gray-500",children:[as.length," in this channel"]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:as.map(k=>{var xe,pe;return s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"relative",children:[k.avatar_url&&st.getAvatarUrl(k.avatar_url)?s.jsx("img",{src:st.getAvatarUrl(k.avatar_url)||"",alt:`${k.first_name} ${k.last_name}`,className:"w-8 h-8 rounded-full object-cover",onError:Pe=>{var He;Pe.currentTarget.style.display="none",(He=Pe.currentTarget.nextElementSibling)==null||He.classList.remove("hidden")}}):null,s.jsxs("div",{className:`w-8 h-8 rounded-full bg-gray-600 flex items-center justify-center text-white text-sm font-semibold ${k.avatar_url&&st.getAvatarUrl(k.avatar_url)?"hidden":""}`,children:[(xe=k.first_name)==null?void 0:xe[0],(pe=k.last_name)==null?void 0:pe[0]]}),k.availability_status==="available"&&s.jsx("div",{className:"absolute bottom-0 right-0 w-2.5 h-2.5 bg-green-500 rounded-full border-2 border-white"})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("p",{className:"text-sm font-medium text-gray-900 truncate",children:[k.first_name," ",k.last_name]}),k.role==="admin"&&s.jsx("span",{className:"text-xs text-blue-600",children:"Admin"})]})]},k.id)})})]}),j&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Create New Channel"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Channel Name"}),s.jsx("input",{type:"text",value:v,onChange:k=>x(k.target.value),placeholder:"e.g., general, support, sales",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description (optional)"}),s.jsx("textarea",{value:b,onChange:k=>w(k.target.value),placeholder:"What is this channel for?",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none",rows:3})]})]}),s.jsxs("div",{className:"flex gap-3 mt-6",children:[s.jsx("button",{onClick:()=>{f(!1),x(""),w("")},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancel"}),s.jsx("button",{onClick:M,disabled:!v.trim(),className:"flex-1 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 disabled:opacity-50 disabled:cursor-not-allowed",children:"Create Channel"})]})]})}),je&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 max-w-md w-full mx-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Delete Message"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to delete this message? This action cannot be undone."}),s.jsxs("div",{className:"flex gap-3 justify-end",children:[s.jsx("button",{onClick:()=>Se(null),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancel"}),s.jsx("button",{onClick:()=>{_e.mutate(je),Se(null)},className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Delete"})]})]})}),G&&s.jsxs("div",{className:"fixed bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-50",style:{top:G.y,left:G.x},onClick:k=>k.stopPropagation(),children:[s.jsxs("button",{onClick:()=>{var xe;const k=bt.find(pe=>pe.id===G.messageId);k&&(Ge(k),Le(null),(xe=Oe.current)==null||xe.focus())},className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-100 flex items-center gap-2",children:[s.jsx("span",{children:""})," Reply"]}),s.jsxs("button",{onClick:()=>{W(G.messageId),_(!0),Le(null)},className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-100 flex items-center gap-2",children:[s.jsx("span",{children:""})," Share"]}),s.jsxs("button",{onClick:()=>{const k=bt.find(xe=>xe.id===G.messageId);k&&(navigator.clipboard.writeText(k.content),Le(null))},className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-100 flex items-center gap-2",children:[s.jsx("span",{children:""})," Copy Message"]})]}),z&&B&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 max-w-lg w-full mx-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Share Message"}),de?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"mb-4",children:[s.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Sharing to: ",s.jsx("span",{className:"font-semibold",children:de==="MEMOS"?"@Memos":`#${(Jt=ct.find(k=>k.id===de))==null?void 0:Jt.name}`})]}),s.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3 mb-4",children:[s.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Original message:"}),s.jsx("p",{className:"text-sm text-gray-900 line-clamp-3",children:(Ur=bt.find(k=>k.id===B))==null?void 0:Ur.content}),((ki=bt.find(k=>k.id===B))==null?void 0:ki.attachment_name)&&s.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-600 mt-2",children:[s.jsx(Ct,{className:"w-3 h-3"}),s.jsx("span",{children:(Si=bt.find(k=>k.id===B))==null?void 0:Si.attachment_name})]})]}),s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:de==="MEMOS"?"Add your note (optional):":"Add your comment (optional - use @ to mention someone):"}),s.jsx("textarea",{value:V,onChange:k=>re(k.target.value),placeholder:de==="MEMOS"?"Add a note about this shared message...":"@gaille can you review this?",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none",rows:3})]}),s.jsxs("div",{className:"flex gap-3 justify-end",children:[s.jsx("button",{onClick:()=>{U(null),re("")},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Back"}),s.jsx("button",{onClick:async()=>{var xe,pe;const k=bt.find(Pe=>Pe.id===B);if(k&&i&&de&&e)if(de==="MEMOS"){const Pe=(xe=ct.find(xt=>xt.id===i))==null?void 0:xe.name;let He="";V.trim()?He=`${V}

 Shared from #${Pe}:
${k.content}`:He=` Shared from #${Pe}:

${k.content}`;let at;if(k.attachment_url&&k.attachment_name)try{const Ss=await(await fetch(fe(k.attachment_url))).blob(),Hr=await new Promise(Qe=>{const Et=new FileReader;Et.onloadend=()=>Qe(Et.result),Et.readAsDataURL(Ss)});at={name:k.attachment_name,data:Hr,type:k.attachment_type||"application/octet-stream",size:k.attachment_size||0}}catch(xt){console.error("Error fetching attachment:",xt)}console.log("[Share to Memos] Creating memo with:",{content:He,attachment:at}),Ki.createMemo({content:He,attachment:at}).then(()=>{_(!1),W(null),U(null),re(""),t.invalidateQueries({queryKey:["memos"]})}).catch(xt=>{console.error("Error creating memo:",xt),alert("Failed to share to @Memos. Please try again.")})}else{const Pe=(pe=ct.find(Ss=>Ss.id===i))==null?void 0:pe.name,He=`${e.firstName} ${e.lastName}`;let at="";V.trim()?at=`${V}

 ${He} shared from #${Pe}:
${k.content}`:at=` ${He} shared from #${Pe}:

${k.content}`;let xt;if(k.attachment_url&&k.attachment_name)try{const Hr=await(await fetch(fe(k.attachment_url))).blob(),Qe=await new Promise(Et=>{const xa=new FileReader;xa.onloadend=()=>Et(xa.result),xa.readAsDataURL(Hr)});xt=[{name:k.attachment_name,content:Qe,type:k.attachment_type||"application/octet-stream",size:k.attachment_size||0}]}catch(Ss){console.error("Error fetching attachment:",Ss)}mt.sendMessage(de,{content:at,attachments:xt}).then(()=>{_(!1),W(null),U(null),re(""),t.invalidateQueries({queryKey:["group-chat-channels"]})}).catch(Ss=>{console.error("Error sharing message:",Ss),alert("Failed to share message. Please try again.")})}},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Share"})]})]}):s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Select where to share this message:"}),s.jsxs("div",{className:"space-y-2 max-h-64 overflow-y-auto mb-4",children:[ct.filter(k=>k.id!==i).map(k=>s.jsxs("button",{onClick:()=>U(k.id),className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-100 rounded border border-gray-200 flex items-center gap-2",children:[s.jsx($t,{className:"w-4 h-4 text-gray-500"}),s.jsx("span",{children:k.name})]},k.id)),s.jsxs("button",{onClick:()=>U("MEMOS"),className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-100 rounded border border-gray-200 flex items-center gap-2",children:[s.jsx(Sc,{className:"w-4 h-4 text-yellow-600"}),s.jsx("span",{children:"@Memos (Personal notes)"})]})]}),s.jsx("div",{className:"flex gap-3 justify-end",children:s.jsx("button",{onClick:()=>{_(!1),W(null),U(null),re("")},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancel"})})]})]})})]})}function _6(){const e=ut(),[t,r]=u.useState("channels"),[n,a]=u.useState(null),[i,l]=u.useState(!1),[o,c]=u.useState(!1),[d,m]=u.useState(!1),[h,p]=u.useState(""),[j,f]=u.useState(""),[g,y]=u.useState(""),[v,x]=u.useState(""),[b,w]=u.useState(!0),[N,E]=u.useState(!0),[L,P]=u.useState(!0),[ee,H]=u.useState(10),[Q,ae]=u.useState(12),{data:ne}=me({queryKey:["group-chat-channels-settings"],queryFn:async()=>(await mt.listChannels()).data}),ve=(ne==null?void 0:ne.channels)||[],{data:je}=me({queryKey:["group-chat-time-limit"],queryFn:async()=>(await mt.getTimeLimit()).data});u.useState(()=>{(je==null?void 0:je.timeLimit)!==void 0&&H(je.timeLimit)});const Se=we({mutationFn:U=>mt.setTimeLimit(U),onSuccess:()=>{e.invalidateQueries({queryKey:["group-chat-time-limit"]})}}),{data:D}=me({queryKey:["mentions-auto-archive"],queryFn:async()=>(await mt.getAutoArchiveHours()).data});u.useState(()=>{(D==null?void 0:D.hours)!==void 0&&ae(D.hours)});const T=we({mutationFn:U=>mt.setAutoArchiveHours(U),onSuccess:()=>{e.invalidateQueries({queryKey:["mentions-auto-archive"]})}}),{data:Y}=me({queryKey:["group-chat-members-settings",n==null?void 0:n.id],queryFn:async()=>n?(await mt.getMembers(n.id)).data:{members:[]},enabled:!!n}),J=(Y==null?void 0:Y.members)||[],{data:X}=me({queryKey:["staff-list"],queryFn:async()=>(await st.list()).data}),he=(X==null?void 0:X.staff)||[],Oe=we({mutationFn:U=>mt.updateChannel(U.channelId,{name:U.name,description:U.description,allow_message_editing:U.allow_message_editing,allow_message_deletion:U.allow_message_deletion,allow_file_deletion:U.allow_file_deletion}),onSuccess:()=>{e.invalidateQueries({queryKey:["group-chat-channels-settings"]}),l(!1),a(null)}}),G=we({mutationFn:U=>mt.archiveChannel(U),onSuccess:()=>{e.invalidateQueries({queryKey:["group-chat-channels-settings"]}),a(null)}}),Le=we({mutationFn:U=>mt.addMember(U.channelId,U.staffId),onSuccess:()=>{e.invalidateQueries({queryKey:["group-chat-members-settings",n==null?void 0:n.id]})}}),z=we({mutationFn:U=>mt.removeMember(U.channelId,U.staffId),onSuccess:()=>{e.invalidateQueries({queryKey:["group-chat-members-settings",n==null?void 0:n.id]})}}),_=we({mutationFn:U=>mt.createChannel(U),onSuccess:()=>{m(!1),y(""),x(""),e.invalidateQueries({queryKey:["group-chat-channels-settings"]})}}),B=()=>{!n||!h.trim()||Oe.mutate({channelId:n.id,name:h,description:j,allow_message_editing:b,allow_message_deletion:N,allow_file_deletion:L})},W=U=>{n&&Le.mutate({channelId:n.id,staffId:U})},V=U=>{n&&confirm("Are you sure you want to remove this member from the channel?")&&z.mutate({channelId:n.id,staffId:U})},re=he.filter(U=>!J.some(Ce=>Ce.staff_id===U.id)),de=()=>{g.trim()&&_.mutate({name:g,description:v||void 0,channelType:"public"})};return s.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Group Chat Settings"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Manage channels, members, and group chat configuration"})]}),s.jsx("div",{className:"mb-6 border-b border-gray-200",children:s.jsxs("nav",{className:"-mb-px flex space-x-8",children:[s.jsxs("button",{onClick:()=>r("channels"),className:`py-2 px-1 border-b-2 font-medium text-sm ${t==="channels"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[s.jsx($t,{className:"w-4 h-4 inline-block mr-2"}),"Channels"]}),s.jsxs("button",{onClick:()=>r("global"),className:`py-2 px-1 border-b-2 font-medium text-sm ${t==="global"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[s.jsx(mi,{className:"w-4 h-4 inline-block mr-2"}),"Global Settings"]}),s.jsx("button",{onClick:()=>r("mentions"),className:`py-2 px-1 border-b-2 font-medium text-sm ${t==="mentions"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"@Mentions"})]})}),t==="channels"&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"mb-6",children:s.jsxs("button",{onClick:()=>m(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[s.jsx(Oh,{className:"w-4 h-4"}),"Create Channel"]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[s.jsx($t,{className:"w-5 h-5"}),"Channels"]}),ve.length===0?s.jsx("p",{className:"text-gray-500 text-center py-8",children:"No channels yet. Create one to get started!"}):s.jsx("div",{className:"space-y-2",children:ve.map(U=>s.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("h3",{className:"font-medium text-gray-900 flex items-center gap-2",children:[s.jsx($t,{className:"w-4 h-4"}),U.name,U.is_archived===1&&s.jsx("span",{className:"text-xs bg-gray-100 text-gray-600 px-2 py-0.5 rounded",children:"Archived"})]}),U.description&&s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:U.description})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>{a(U),c(!0)},className:"p-2 text-gray-600 hover:text-blue-600 hover:bg-blue-50 rounded",title:"Manage Members",children:s.jsx(Yl,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>{a(U),p(U.name),f(U.description||""),l(!0)},className:"p-2 text-gray-600 hover:text-blue-600 hover:bg-blue-50 rounded",title:"Edit Channel",children:s.jsx(Ih,{className:"w-4 h-4"})}),U.is_archived===0&&s.jsx("button",{onClick:()=>{confirm(`Archive channel "${U.name}"?`)&&G.mutate(U.id)},className:"p-2 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded",title:"Archive Channel",children:s.jsx(hi,{className:"w-4 h-4"})})]})]},U.id))})]})})]}),t==="global"&&s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:[s.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[s.jsx(mi,{className:"w-5 h-5"}),"Global Settings"]}),s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Edit/Delete Time Limit"}),s.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"How long staff members can edit or delete their messages. Admins can always edit/delete."}),s.jsxs("select",{value:ee,onChange:U=>{const Ce=parseInt(U.target.value,10);H(Ce),Se.mutate(Ce)},className:"w-full max-w-xs px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:5,children:"5 minutes"}),s.jsx("option",{value:10,children:"10 minutes (default)"}),s.jsx("option",{value:15,children:"15 minutes"}),s.jsx("option",{value:30,children:"30 minutes"}),s.jsx("option",{value:60,children:"1 hour"}),s.jsx("option",{value:0,children:"No limit (always allow)"})]}),Se.isPending&&s.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Saving..."}),Se.isSuccess&&s.jsx("p",{className:"text-xs text-green-600 mt-2",children:" Saved successfully"})]})})]}),t==="mentions"&&s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"@Mentions Settings"}),s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Auto Archive Mentions"}),s.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Automatically archive Read mentions after the specified time. This keeps your Mentions page clean and focused on active items."}),s.jsxs("select",{value:Q,onChange:U=>{const Ce=parseInt(U.target.value,10);ae(Ce),T.mutate(Ce)},className:"w-full max-w-xs px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:12,children:"12 Hours (default)"}),s.jsx("option",{value:24,children:"24 Hours"}),s.jsx("option",{value:36,children:"36 Hours"}),s.jsx("option",{value:48,children:"48 Hours"}),s.jsx("option",{value:72,children:"72 Hours"}),s.jsx("option",{value:0,children:"Never Archive"})]}),T.isPending&&s.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Saving..."}),T.isSuccess&&s.jsx("p",{className:"text-xs text-green-600 mt-2",children:" Saved successfully"})]})})]}),i&&n&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Edit Channel"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Channel Name"}),s.jsx("input",{type:"text",value:h,onChange:U=>p(U.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),s.jsx("textarea",{value:j,onChange:U=>f(U.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none",rows:3})]}),s.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[s.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Channel Permissions"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("label",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Allow Message Editing"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Members can edit their own messages"})]}),s.jsx("input",{type:"checkbox",checked:b,onChange:U=>w(U.target.checked),className:"w-4 h-4 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("label",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Allow Message Deletion"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Members can delete their own messages"})]}),s.jsx("input",{type:"checkbox",checked:N,onChange:U=>E(U.target.checked),className:"w-4 h-4 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("label",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Allow File Deletion"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Members can delete attached files"})]}),s.jsx("input",{type:"checkbox",checked:L,onChange:U=>P(U.target.checked),className:"w-4 h-4 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"})]})]})]})]}),s.jsxs("div",{className:"flex gap-3 mt-6",children:[s.jsx("button",{onClick:()=>{l(!1),a(null)},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancel"}),s.jsx("button",{onClick:B,disabled:!h.trim(),className:"flex-1 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 disabled:opacity-50 disabled:cursor-not-allowed",children:"Save Changes"})]})]})}),d&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Create New Channel"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Channel Name"}),s.jsx("input",{type:"text",value:g,onChange:U=>y(U.target.value),placeholder:"e.g., general, support, sales",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description (optional)"}),s.jsx("textarea",{value:v,onChange:U=>x(U.target.value),placeholder:"What is this channel for?",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none",rows:3})]})]}),s.jsxs("div",{className:"flex gap-3 mt-6",children:[s.jsx("button",{onClick:()=>{m(!1),y(""),x("")},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancel"}),s.jsx("button",{onClick:de,disabled:!g.trim()||_.isPending,className:"flex-1 px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-900 disabled:opacity-50 disabled:cursor-not-allowed",children:_.isPending?"Creating...":"Create Channel"})]})]})}),o&&n&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl p-6 max-h-[80vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Manage Members - #",n.name]}),s.jsx("button",{onClick:()=>{c(!1),a(null)},className:"text-gray-400 hover:text-gray-600",children:s.jsx(Rt,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"mb-6",children:[s.jsxs("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:["Current Members (",J.length,")"]}),s.jsx("div",{className:"space-y-2",children:J.map(U=>{var Ce,Ge;return s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"w-8 h-8 rounded-full bg-gray-600 flex items-center justify-center text-white text-sm font-semibold",children:[(Ce=U.first_name)==null?void 0:Ce[0],(Ge=U.last_name)==null?void 0:Ge[0]]}),s.jsxs("div",{children:[s.jsxs("p",{className:"font-medium text-gray-900",children:[U.first_name," ",U.last_name]}),s.jsx("p",{className:"text-xs text-gray-500",children:U.email})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[U.role==="admin"&&s.jsx("span",{className:"text-xs px-2 py-1 bg-blue-100 text-blue-700 rounded",children:"Admin"}),s.jsx("button",{onClick:()=>V(U.staff_id),className:"p-1.5 text-red-600 hover:bg-red-50 rounded",title:"Remove member",children:s.jsx(Rt,{className:"w-4 h-4"})})]})]},U.id)})})]}),re.length>0&&s.jsxs("div",{children:[s.jsxs("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:["Add Members (",re.length," available)"]}),s.jsx("div",{className:"space-y-2",children:re.map(U=>{var Ce,Ge;return s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"w-8 h-8 rounded-full bg-gray-600 flex items-center justify-center text-white text-sm font-semibold",children:[(Ce=U.first_name)==null?void 0:Ce[0],(Ge=U.last_name)==null?void 0:Ge[0]]}),s.jsxs("div",{children:[s.jsxs("p",{className:"font-medium text-gray-900",children:[U.first_name," ",U.last_name]}),s.jsx("p",{className:"text-xs text-gray-500",children:U.email})]})]}),s.jsxs("button",{onClick:()=>W(U.id),className:"flex items-center gap-1 px-3 py-1.5 text-sm bg-gray-800 text-white rounded-lg hover:bg-gray-900",children:[s.jsx(Ml,{className:"w-4 h-4"}),s.jsx("span",{children:"Add"})]})]},U.id)})})]}),re.length===0&&J.length>0&&s.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"All staff members are already in this channel"})]})})]})}function E6(){const[e,t]=u.useState(null),[r,n]=u.useState(""),[a,i]=u.useState(0),{data:l,isLoading:o}=me({queryKey:["tags",r],queryFn:async()=>(await zf.getAllTags(r||void 0)).data}),{data:c,isLoading:d}=me({queryKey:["tag-content",e],queryFn:async()=>e?(await zf.searchTags(e)).data:{results:[]},enabled:!!e}),m=(l==null?void 0:l.tags)||[],h=(c==null?void 0:c.results)||[],p=h[a],j=()=>{a>0&&i(a-1)},f=()=>{a<h.length-1&&i(a+1)};return s.jsxs("div",{className:"h-full flex flex-col bg-gray-50",children:[s.jsxs("div",{className:"bg-white border-b border-gray-200 px-6 py-4 flex-shrink-0",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Zf,{className:"w-6 h-6 text-blue-600"}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Tags"})]}),s.jsxs("div",{className:"text-sm text-gray-500",children:[m.length," ",m.length===1?"tag":"tags"," found"]})]}),s.jsxs("div",{className:"mt-4 flex items-center gap-2",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(ui,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),s.jsx("input",{type:"text",value:r,onChange:g=>n(g.target.value),placeholder:"Filter tags by name... (e.g., james-scott, urgent, team)",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),r&&s.jsx("button",{onClick:()=>n(""),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg",title:"Clear search",children:s.jsx(Rt,{className:"w-5 h-5"})})]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:s.jsx("div",{className:"max-w-6xl mx-auto",children:o?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),s.jsx("p",{className:"mt-4 text-gray-600",children:"Loading tags..."})]}):m.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Zf,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No tags yet"}),s.jsx("p",{className:"text-gray-600",children:"Tags will appear here when you add them to memos or group chat messages."})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:m.map(g=>s.jsxs("button",{onClick:()=>{const y=g.name===e?null:g.name;t(y),i(0)},className:`p-4 rounded-lg border-2 transition-all text-left ${e===g.name?"border-blue-500 bg-blue-50":"border-gray-200 bg-white hover:border-blue-300 hover:bg-blue-50"}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx($t,{className:"w-5 h-5 text-blue-600"}),s.jsx("span",{className:"font-semibold text-gray-900",children:g.name})]}),s.jsx("span",{className:"text-sm font-medium text-gray-600 bg-gray-100 px-2 py-1 rounded",children:g.count})]}),s.jsxs("p",{className:"text-sm text-gray-600",children:[g.count," ",g.count===1?"reference":"references"]})]},g.name))}),e&&s.jsx("div",{className:"mt-8",children:s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx($t,{className:"w-5 h-5 text-blue-600"}),s.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["#",e]}),s.jsxs("span",{className:"text-sm text-gray-500",children:["(",h.length," ",h.length===1?"reference":"references",")"]})]}),s.jsx("button",{onClick:()=>t(null),className:"text-gray-400 hover:text-gray-600",children:s.jsx(Rt,{className:"w-5 h-5"})})]}),d?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),s.jsx("p",{className:"mt-2 text-gray-600",children:"Loading content..."})]}):h.length===0?s.jsx("p",{className:"text-center text-gray-500 py-8",children:"No content found with this tag."}):s.jsxs(s.Fragment,{children:[h.length>1&&s.jsxs("div",{className:"flex items-center justify-between mb-4 pb-4 border-b border-gray-200",children:[s.jsxs("span",{className:"text-sm text-gray-600",children:["Showing ",a+1," of ",h.length]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:j,disabled:a===0,className:"p-2 text-blue-600 hover:bg-blue-50 rounded disabled:opacity-50 disabled:cursor-not-allowed",title:"Previous",children:s.jsx(di,{className:"w-5 h-5"})}),s.jsx("button",{onClick:f,disabled:a===h.length-1,className:"p-2 text-blue-600 hover:bg-blue-50 rounded disabled:opacity-50 disabled:cursor-not-allowed",title:"Next",children:s.jsx(Vl,{className:"w-5 h-5"})})]})]}),p&&s.jsx("div",{children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"flex-shrink-0",children:p.type==="memo"?s.jsx(Sc,{className:"w-6 h-6 text-yellow-600"}):p.type==="group_chat"?s.jsx(ma,{className:"w-6 h-6 text-blue-600"}):s.jsx(lS,{className:"w-6 h-6 text-green-600"})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("span",{className:"text-sm font-medium text-gray-500 uppercase",children:p.type==="memo"?"@Memos":p.type==="group_chat"?"Group Chat":"Ticket"}),s.jsx("span",{className:"text-sm text-gray-400",children:""}),s.jsx("span",{className:"text-sm text-gray-500",children:new Date(p.created_at).toLocaleString()})]}),s.jsx("p",{className:"text-gray-900 whitespace-pre-wrap mb-4",children:p.content}),p.tags&&s.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:p.tags.split(",").map((g,y)=>s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-100 text-blue-700 text-sm rounded",children:[s.jsx($t,{className:"w-3 h-3"}),g.trim()]},y))}),p.type==="memo"&&s.jsx(vt,{to:"/memos",className:"text-sm text-blue-600 hover:text-blue-800 hover:underline",children:"View in @Memos "}),p.type==="group_chat"&&p.channel_id&&s.jsx(vt,{to:`/group-chat/${p.channel_id}`,className:"text-sm text-blue-600 hover:text-blue-800 hover:underline",children:"View in Group Chat "})]})]})})]})]})})]})})})]})}function M6(){const e=ut(),[t,r]=u.useState(!1),[n,a]=u.useState(!1),{data:i,isLoading:l}=me({queryKey:["tag-settings"],queryFn:async()=>({ai_auto_tagging_enabled:!0,tag_suggestions_enabled:!0,tag_display_position:"below"})}),[o,c]=u.useState({ai_auto_tagging_enabled:!0,tag_suggestions_enabled:!0,tag_display_position:"below"});Fe.useEffect(()=>{i&&c(i)},[i]);const d=async()=>{r(!0);try{await new Promise(m=>setTimeout(m,500)),e.invalidateQueries({queryKey:["tag-settings"]}),a(!0),setTimeout(()=>a(!1),3e3)}catch(m){console.error("Error saving tag settings:",m),alert("Failed to save settings")}finally{r(!1)}};return l?s.jsx("div",{className:"flex items-center justify-center h-full",children:s.jsx("div",{className:"text-gray-500",children:"Loading settings..."})}):s.jsxs("div",{className:"flex flex-col h-full bg-gray-50",children:[s.jsxs("header",{className:"flex-shrink-0 bg-white border-b border-gray-200 px-6 py-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx($t,{className:"w-6 h-6 text-blue-600"}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Tags Settings"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Configure tagging behavior and display options"})]})]}),s.jsxs("button",{onClick:d,disabled:t,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx(Gl,{className:"w-4 h-4"}),t?"Saving...":"Save Changes"]})]}),n&&s.jsx("div",{className:"mt-4 p-3 bg-green-50 border border-green-200 rounded-lg text-green-800 text-sm",children:" Settings saved successfully"})]}),s.jsx("main",{className:"flex-1 overflow-y-auto p-6",children:s.jsxs("div",{className:"max-w-3xl mx-auto space-y-6",children:[s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"McCarthy AI Auto-Tagging"}),s.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Enable McCarthy AI to automatically tag tickets, Live Chat conversations, and Group Chat messages based on content analysis, sentiment, intent, and customer behavior (RFM)."}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-blue-600 bg-blue-50 p-3 rounded-lg",children:[s.jsx(bm,{className:"w-4 h-4 flex-shrink-0"}),s.jsx("span",{children:"McCarthy AI analyzes content in real-time and suggests relevant tags. You can always manually add or remove tags."})]})]}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer ml-4",children:[s.jsx("input",{type:"checkbox",checked:o.ai_auto_tagging_enabled,onChange:m=>c({...o,ai_auto_tagging_enabled:m.target.checked}),className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Tag Suggestions"}),s.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Show tag suggestions while typing in Group Chat, Live Chat, and ticket notes. Suggestions are based on previously used tags and McCarthy AI recommendations."})]}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer ml-4",children:[s.jsx("input",{type:"checkbox",checked:o.tag_suggestions_enabled,onChange:m=>c({...o,tag_suggestions_enabled:m.target.checked}),className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Tag Display Position"}),s.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Choose how tags are displayed in messages and posts."}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("label",{className:"flex items-center gap-3 p-3 border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50",children:[s.jsx("input",{type:"radio",name:"tag_display_position",value:"below",checked:o.tag_display_position==="below",onChange:()=>c({...o,tag_display_position:"below"}),className:"w-4 h-4 text-blue-600"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium text-gray-900",children:"Below Message"}),s.jsx("div",{className:"text-sm text-gray-500",children:"Tags appear as blue pills below the message content (recommended)"})]})]}),s.jsxs("label",{className:"flex items-center gap-3 p-3 border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50",children:[s.jsx("input",{type:"radio",name:"tag_display_position",value:"inline",checked:o.tag_display_position==="inline",onChange:()=>c({...o,tag_display_position:"inline"}),className:"w-4 h-4 text-blue-600"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium text-gray-900",children:"Inline with Message"}),s.jsx("div",{className:"text-sm text-gray-500",children:"Tags appear within the message text as #keywords"})]})]})]})]})}),s.jsxs("div",{className:"bg-gray-100 rounded-lg border border-gray-300 p-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[s.jsx(bm,{className:"w-5 h-5"}),"Coming Soon"]}),s.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Advanced tagging features currently in development:"}),s.jsxs("ul",{className:"space-y-2 text-sm text-gray-600",children:[s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"text-blue-600",children:""}),s.jsxs("span",{children:[s.jsx("strong",{children:"AI Confidence Threshold:"})," Set minimum confidence level for auto-tagging"]})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"text-blue-600",children:""}),s.jsxs("span",{children:[s.jsx("strong",{children:"Tag Categories:"})," Organize tags into predefined categories (Customer Type, Product, Issue Type, etc.)"]})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"text-blue-600",children:""}),s.jsxs("span",{children:[s.jsx("strong",{children:"RFM Integration:"})," Auto-tag VIP customers based on Recency, Frequency, Monetary analysis"]})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"text-blue-600",children:""}),s.jsxs("span",{children:[s.jsx("strong",{children:"Shopify Integration:"})," Map product categories to tags and auto-tag based on purchase history"]})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"text-blue-600",children:""}),s.jsxs("span",{children:[s.jsx("strong",{children:"Tag Cleanup:"})," Auto-merge similar tags and archive unused ones"]})]})]})]})]})})]})}function T6(){const e=ut(),{user:t}=Rs(),[r,n]=u.useState(""),[a,i]=u.useState(""),[l,o]=u.useState(!1),c=u.useRef(null),[d,m]=u.useState("Amazing Transfers"),[h,p]=u.useState("info@amazingtransfers.com.au"),[j,f]=u.useState("amazingtransfers.com"),{data:g,isLoading:y}=me({queryKey:["email-signature-settings"],queryFn:async()=>(await jo.getSettings()).data});u.useEffect(()=>{g&&(i(g.logoUrl??""),m(g.companyName??"Amazing Transfers"),p(g.email??"info@amazingtransfers.com.au"),f(g.website??"amazingtransfers.com"))},[g]);const{data:v}=me({queryKey:["email-signature-preview",a,d,h,j],queryFn:async()=>(await jo.getPreviewFromSettings({logoUrl:a,companyName:d,email:h,website:j})).data,enabled:!!d&&!!h});u.useEffect(()=>{v!=null&&v.signatureHtml&&n(v.signatureHtml)},[v]);const x=we({mutationFn:()=>jo.saveSettings({logoUrl:a,companyName:d,email:h,website:j}),onSuccess:()=>{e.invalidateQueries({queryKey:["email-signature-settings"]}),e.invalidateQueries({queryKey:["email-signature-preview"]})}}),b=()=>{x.mutate()},w=async N=>{var L;const E=(L=N.target.files)==null?void 0:L[0];if(E){if(!E.type.startsWith("image/")){alert("Please upload an image file (PNG, JPG, etc.)");return}if(E.size>2*1024*1024){alert("Logo file size must be less than 2MB");return}o(!0);try{const P=new FileReader;P.onload=async()=>{const ee=P.result,Q=(await jo.uploadLogo({name:E.name,data:ee,type:E.type,size:E.size})).data.logoUrl;i(Q),alert(`Logo uploaded successfully!

URL: ${Q}

You can now use this URL in your signature template.`)},P.readAsDataURL(E)}catch(P){console.error("Logo upload failed:",P),alert("Failed to upload logo. Please try again.")}finally{o(!1),c.current&&(c.current.value="")}}};return s.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[s.jsxs("div",{className:"mb-6",children:[s.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[s.jsx(En,{className:"w-7 h-7"}),"Email Settings"]}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Configure email signature template for all staff members"})]}),y?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),s.jsx("p",{className:"mt-4 text-gray-600",children:"Loading settings..."})]}):s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[s.jsx(mi,{className:"w-5 h-5"}),"Signature Builder"]}),s.jsxs("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[s.jsxs("h3",{className:"text-sm font-semibold text-blue-900 mb-2 flex items-center gap-2",children:[s.jsx(kc,{className:"w-4 h-4"}),"Company Logo"]}),s.jsx("p",{className:"text-xs text-blue-800 mb-3",children:"Upload your logo - it will be hosted on Cloudflare and automatically included in your signature."}),s.jsx("input",{ref:c,type:"file",accept:"image/*",onChange:w,className:"hidden"}),s.jsxs("button",{onClick:()=>{var N;return(N=c.current)==null?void 0:N.click()},disabled:l,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:[s.jsx(Sv,{className:"w-4 h-4"}),l?"Uploading...":a?"Change Logo":"Upload Logo"]}),a&&s.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[s.jsx("img",{src:a,alt:"Logo",className:"w-16 h-16 object-contain border border-gray-300 rounded bg-white p-1"}),s.jsx("p",{className:"text-xs text-green-700",children:" Logo uploaded"})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1 flex items-center gap-2",children:[s.jsx(hv,{className:"w-4 h-4"}),"Company Name"]}),s.jsx("input",{type:"text",value:d,onChange:N=>m(N.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Amazing Transfers"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1 flex items-center gap-2",children:[s.jsx(En,{className:"w-4 h-4"}),"Email Address"]}),s.jsx("input",{type:"email",value:h,onChange:N=>p(N.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., info@amazingtransfers.com.au"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1 flex items-center gap-2",children:[s.jsx($h,{className:"w-4 h-4"}),"Website"]}),s.jsx("input",{type:"text",value:j,onChange:N=>f(N.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., amazingtransfers.com"})]}),s.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:s.jsxs("p",{className:"text-xs text-blue-700",children:[s.jsx("strong",{children:"Note:"})," Staff names and job titles are automatically pulled from their profile settings."]})})]}),s.jsxs("div",{className:"mt-6",children:[s.jsxs("button",{onClick:b,disabled:x.isPending,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:[s.jsx(Gl,{className:"w-5 h-5"}),x.isPending?"Saving...":"Save Signature"]}),x.isSuccess&&s.jsx("p",{className:"text-sm text-green-600 mt-2 text-center",children:" Signature saved successfully!"}),x.isError&&s.jsx("p",{className:"text-sm text-red-600 mt-2 text-center",children:" Failed to save signature."})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[s.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[s.jsx(x3,{className:"w-5 h-5"}),"Preview (Your Signature)"]}),s.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["This is how the signature will appear for ",s.jsxs("strong",{children:[t==null?void 0:t.firstName," ",t==null?void 0:t.lastName]})]}),s.jsx("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:s.jsx("div",{dangerouslySetInnerHTML:{__html:r},className:"prose prose-sm max-w-none"})}),s.jsxs("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[s.jsx("h3",{className:"text-sm font-semibold text-blue-900 mb-2",children:" How it works:"}),s.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[s.jsx("li",{children:" Upload your company logo (stored on Cloudflare)"}),s.jsx("li",{children:" Set your company name, email, and website"}),s.jsx("li",{children:" Staff names and job titles are pulled from their profiles automatically"}),s.jsx("li",{children:" Signatures are auto-appended to all email ticket replies"}),s.jsx("li",{children:" Each staff member gets a personalized signature"})]})]})]})]})]})}function A6({children:e}){const{token:t}=Rs();return t?s.jsx(s.Fragment,{children:e}):s.jsx(my,{to:"/login",replace:!0})}function R6(){return s.jsx(Yj,{children:s.jsxs(Hj,{children:[s.jsx(Je,{path:"/login",element:s.jsx(fk,{})}),s.jsxs(Je,{path:"/",element:s.jsx(A6,{children:s.jsx(WS,{})}),children:[s.jsx(Je,{index:!0,element:s.jsx(my,{to:"/tickets",replace:!0})}),s.jsx(Je,{path:"tickets",element:s.jsx(HC,{})}),s.jsx(Je,{path:"tickets/:id",element:s.jsx(XC,{})}),s.jsx(Je,{path:"mentions",element:s.jsx(ZC,{})}),s.jsx(Je,{path:"memo",element:s.jsx(e6,{})}),s.jsx(Je,{path:"tags",element:s.jsx(E6,{})}),s.jsx(Je,{path:"analytics/ai-agent",element:s.jsx(t6,{})}),s.jsx(Je,{path:"settings",element:s.jsx(w6,{})}),s.jsx(Je,{path:"settings/tags",element:s.jsx(M6,{})}),s.jsx(Je,{path:"settings/email",element:s.jsx(T6,{})}),s.jsx(Je,{path:"settings/business-hours",element:s.jsx(r6,{})}),s.jsx(Je,{path:"settings/chat-widget",element:s.jsx(n6,{})}),s.jsx(Je,{path:"settings/chat-embed",element:s.jsx(m6,{})}),s.jsx(Je,{path:"ai-agent/widget",element:s.jsx(h6,{})}),s.jsx(Je,{path:"ai-agent/knowledge",element:s.jsx(g6,{})}),s.jsx(Je,{path:"ai-agent/system-message",element:s.jsx(x6,{})}),s.jsx(Je,{path:"ai-agent/regional-overrides",element:s.jsx(v6,{})}),s.jsx(Je,{path:"settings/dartmouth-os",element:s.jsx(y6,{})}),s.jsx(Je,{path:"settings/auto-assignment",element:s.jsx(b6,{})}),s.jsx(Je,{path:"staff",element:s.jsx(a6,{})}),s.jsx(Je,{path:"staff/performance",element:s.jsx(i6,{})}),s.jsx(Je,{path:"chat",element:s.jsx(l6,{})}),s.jsx(Je,{path:"chat-ticket/:id",element:s.jsx(u6,{})}),s.jsx(Je,{path:"group-chat",element:s.jsx(C6,{})}),s.jsx(Je,{path:"settings/group-chat",element:s.jsx(_6,{})}),s.jsx(Je,{path:"integrations",element:s.jsx(k6,{})}),s.jsx(Je,{path:"settings/integrations/shopify",element:s.jsx(S6,{})}),s.jsx(Je,{path:"account",element:s.jsx(N6,{})})]})]})})}const P6=new F1({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:1}}});Jd.createRoot(document.getElementById("root")).render(s.jsx(Fe.StrictMode,{children:s.jsx($1,{client:P6,children:s.jsx(R6,{})})}));
